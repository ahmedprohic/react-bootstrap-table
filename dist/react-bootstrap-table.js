!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):"object"==typeof exports?exports.ReactBootstrapTable=t(require("react"),require("react-dom")):e.ReactBootstrapTable=t(e.React,e.ReactDOM)}(this,function(e,t){return function(e){function t(o){if(r[o])return r[o].exports;var n=r[o]={exports:{},id:o,loaded:!1};return e[o].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),i=o(n),s=r(24),a=o(s),u=r(8);"undefined"!=typeof window&&(window.BootstrapTable=i["default"],window.TableHeaderColumn=a["default"],window.TableDataSet=u.TableDataSet),t["default"]={BootstrapTable:i["default"],TableHeaderColumn:a["default"],TableDataSet:u.TableDataSet},e.exports=t["default"]},function(t,r){t.exports=e},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={SORT_DESC:"desc",SORT_ASC:"asc",SIZE_PER_PAGE:10,NEXT_PAGE:">",LAST_PAGE:">>",PRE_PAGE:"<",FIRST_PAGE:"<<",ROW_SELECT_BG_COLOR:"",ROW_SELECT_NONE:"none",ROW_SELECT_SINGLE:"radio",ROW_SELECT_MULTI:"checkbox",CELL_EDIT_NONE:"none",CELL_EDIT_CLICK:"click",CELL_EDIT_DBCLICK:"dbclick",SIZE_PER_PAGE_LIST:[10,25,30,50],PAGINATION_SIZE:5,NO_DATA_TEXT:"There is no data to display",SHOW_ONLY_SELECT:"Show Selected Only",SHOW_ALL:"Show All",FILTER_DELAY:500,FILTER_TYPE:{TEXT:"TextFilter",SELECT:"SelectFilter",NUMBER:"NumberFilter",DATE:"DateFilter",CUSTOM:"CustomFilter"}},e.exports=t["default"]},function(e,t,r){var o,n;/*!
	  Copyright (c) 2016 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(o){var n=typeof o;if("string"===n||"number"===n)e.push(o);else if(Array.isArray(o))e.push(r.apply(null,o));else if("object"===n)for(var s in o)i.call(o,s)&&o[s]&&e.push(s)}}return e.join(" ")}var i={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=r:(o=[],n=function(){return r}.apply(t,o),!(void 0!==n&&(e.exports=n)))}()},function(e,r){e.exports=t},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=o(n),s=r(2),a=o(s),u=r(3),l=o(u);t["default"]={renderSortCaret:function(e){var t=document.createElement("span");t.className="order",e==a["default"].SORT_ASC&&(t.className+=" dropup");var r=document.createElement("span");return r.className="caret",r.style.margin="10px 5px",t.appendChild(r),t},renderReactSortCaret:function(e){var t=(0,l["default"])("order",{dropup:e==a["default"].SORT_ASC});return i["default"].createElement("span",{className:t},i["default"].createElement("span",{className:"caret",style:{margin:"10px 5px"}}))},getScrollBarWidth:function(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var r=e.offsetWidth;t.style.overflow="scroll";var o=e.offsetWidth;return r==o&&(o=t.clientWidth),document.body.removeChild(t),r-o}},e.exports=t["default"]},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},i=r(1),s=o(i),a=r(9),u=o(a);r(54);var l=r(10),p=o(l),c=function(e,t,r,o,i){if(e===!0||"string"==typeof e){var a=e===!0?"text":e;return s["default"].createElement("input",n({},t,{type:a,defaultValue:i,className:(o||"")+" form-control editor edit-text"}))}if(!e){var a=e===!0?"text":e;return s["default"].createElement("input",n({},t,{type:a,defaultValue:i,disabled:"disabled",className:(o||"")+" form-control editor edit-text"}))}if(e.type){if(e.style&&(t.style=e.style),t.className=(o||"")+" form-control editor edit-"+e.type+(e.className?" "+e.className:""),"select"===e.type){var l=[],c=e.options.values;if(Array.isArray(c)){var d;l=c.map(function(e,t){return d=r?r(e):e,s["default"].createElement("option",{key:"option"+t,value:e},d)})}return s["default"].createElement("select",n({},t,{defaultValue:i}),l)}if("textarea"===e.type){e.cols&&(t.cols=e.cols),e.rows&&(t.rows=e.rows);var f=t.onKeyDown,h=null;return f&&(t.onKeyDown=function(e){13!=e.keyCode&&f(e)},h=s["default"].createElement("butto",{className:"btn btn-info btn-xs textarea-save-btn",onClick:f},"save")),s["default"].createElement("div",null,s["default"].createElement("textarea",n({},t,{defaultValue:i})),h)}if("checkbox"===e.type){var y="true:false";e.options&&e.options.values&&(y=e.options.values),t.className=t.className.replace("form-control",""),t.className+=" checkbox pull-right";var v=!(!i||i.toString()!=y.split(":")[0]);return s["default"].createElement("input",n({},t,{type:"checkbox",value:y,defaultChecked:v}))}if("switch"===e.type){var m="true:false";t.className=t.className.replace("form-control",""),t.className+=" checkbox pull-right";var v=!(!i||i.toString()!=m.split(":")[0]);return s["default"].createElement(u["default"],{className:t.className,defaultChecked:v})}if("react-select"===e.type){var g="undefined"!=typeof e.options.multi?e.options.multi:!1;return s["default"].createElement(p["default"],{className:"pull-right",options:e.options.values,multi:g,simpleValue:!0})}return s["default"].createElement("input",n({},t,{type:a,defaultValue:i}))}return s["default"].createElement("input",n({},t,{type:"text",className:(o||"")+" form-control editor edit-text"}))};t["default"]=c,e.exports=t["default"]},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=function(e,t,r){for(var o=!0;o;){var n=e,i=t,s=r;o=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=i,r=s,o=!0,a=l=void 0}},u=r(1),l=o(u),p=r(2),c=(o(p),r(45)),d=l["default"].createFactory(c.ToastMessage.animation),f=function(e){function t(){n(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),s(t,[{key:"notice",value:function(e,t,r){this.refs.toastr[e](t,r,{mode:"single",timeOut:5e3,extendedTimeOut:1e3,showAnimation:"animated  bounceIn",hideAnimation:"animated bounceOut"})}},{key:"render",value:function(){return l["default"].createElement(c.ToastContainer,{ref:"toastr",toastMessageFactory:d,id:"toast-container",className:"toast-top-right"})}}]),t}(l["default"].Component);t["default"]=f,e.exports=t["default"]},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,o){return r=r.toLowerCase(),e.sort(function(e,n){return o?o(e,n,r,t):r==p["default"].SORT_DESC?e[t]>n[t]?-1:e[t]<n[t]?1:0:e[t]<n[t]?-1:e[t]>n[t]?1:0}),e}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),u=function(e,t,r){for(var o=!0;o;){var n=e,i=t,s=r;o=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=i,r=s,o=!0,a=l=void 0}},l=r(2),p=o(l),c=r(14).EventEmitter,d=function(e){function t(e){n(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.data=e}return i(t,e),a(t,[{key:"setData",value:function(e){this.emit("change",e)}},{key:"clear",value:function(){this.data=null}},{key:"getData",value:function(){return this.data}}]),t}(c);t.TableDataSet=d;var f=function(){function e(t){n(this,e),this.data=t,this.colInfos=null,this.filteredData=null,this.isOnFilter=!1,this.filterObj=null,this.searchText=null,this.sortObj=null,this.pageObj={},this.selected=[],this.multiColumnSearch=!1,this.showOnlySelected=!1,this.remote=!1}return a(e,[{key:"setProps",value:function(e){this.keyField=e.keyField,this.enablePagination=e.isPagination,this.colInfos=e.colInfos,this.remote=e.remote,this.multiColumnSearch=e.multiColumnSearch}},{key:"setData",value:function(e){this.data=e,this.isOnFilter&&(null!==this.filterObj&&this.filter(this.filterObj),null!==this.searchText&&this.search(this.searchText)),this.sortObj&&this.sort(this.sortObj.order,this.sortObj.sortField)}},{key:"getSortInfo",value:function(){return this.sortObj}},{key:"setSelectedRowKey",value:function(e){this.selected=e}},{key:"getSelectedRowKeys",value:function(){return this.selected}},{key:"getCurrentDisplayData",value:function(){return this.isOnFilter?this.filteredData:this.data}},{key:"ignoreNonSelected",value:function(){var e=this;this.showOnlySelected=!this.showOnlySelected,this.showOnlySelected?(this.isOnFilter=!0,this.filteredData=this.data.filter(function(t){var r=e.selected.find(function(r){return t[e.keyField]===r});return"undefined"!=typeof r})):this.isOnFilter=!1}},{key:"sort",value:function(e,t){this.sortObj={order:e,sortField:t};var r=this.getCurrentDisplayData();if(!this.colInfos[t])return this;var o=this.colInfos[t].sortFunc;return r=s(r,t,e,o),this}},{key:"page",value:function(e,t){return this.pageObj.end=e*t-1,this.pageObj.start=this.pageObj.end-(t-1),this}},{key:"edit",value:function(e,t,r){var o=this.getCurrentDisplayData(),n=void 0;return this.enablePagination?(o[this.pageObj.start+t][r]=e,n=o[this.pageObj.start+t][this.keyField]):(o[t][r]=e,n=o[t][this.keyField]),this.isOnFilter&&(this.data.forEach(function(t){t[this.keyField]===n&&(t[r]=e)},this),null!==this.filterObj&&this.filter(this.filterObj),null!==this.searchText&&this.search(this.searchText)),this}},{key:"addAtBegin",value:function(e){if(!e[this.keyField]||""===e[this.keyField].toString())throw this.keyField+" can't be empty value.";var t=this.getCurrentDisplayData();t.forEach(function(t){if(t[this.keyField].toString()===e[this.keyField].toString())throw this.keyField+" "+e[this.keyField]+" already exists"},this),console.log("@@"),t.unshift(e),this.isOnFilter&&this.data.unshift(e)}},{key:"add",value:function(e){if(!e[this.keyField]||""===e[this.keyField].toString())throw this.keyField+" can't be empty value.";var t=this.getCurrentDisplayData();t.forEach(function(t){if(t[this.keyField].toString()===e[this.keyField].toString())throw this.keyField+" "+e[this.keyField]+" already exists"},this),t.push(e),this.isOnFilter&&this.data.push(e)}},{key:"remove",value:function(e){var t=this.getCurrentDisplayData(),r=t.filter(function(t){return-1==e.indexOf(t[this.keyField])},this);this.isOnFilter?(this.data=this.data.filter(function(t){return-1==e.indexOf(t[this.keyField])},this),this.filteredData=r):this.data=r}},{key:"filter",value:function(e){var t=this;0==Object.keys(e).length?(this.filteredData=null,this.isOnFilter=!1,this.filterObj=null):(this.filterObj=e,this.filteredData=this.data.filter(function(r){var o=!0,n=void 0;for(var i in e){var s=r[i];switch(e[i].type){case p["default"].FILTER_TYPE.NUMBER:n=e[i].value.number;break;case p["default"].FILTER_TYPE.CUSTOM:n="object"==typeof e[i].value?void 0:"string"==typeof e[i].value?e[i].value.toLowerCase():e[i].value;break;default:n="string"==typeof e[i].value?e[i].value.toLowerCase():e[i].value,void 0===n&&(n=e[i].toLowerCase())}if(t.colInfos[i]){var a=t.colInfos[i],u=a.format,l=a.filterFormatted,c=a.formatExtraData;l&&u&&(s=u(r[i],r,c))}switch(e[i].type){case p["default"].FILTER_TYPE.NUMBER:o=t.filterNumber(s,n,e[i].value.comparator);break;case p["default"].FILTER_TYPE.DATE:o=t.filterDate(s,n);break;case p["default"].FILTER_TYPE.CUSTOM:o=t.filterCustom(s,n,e[i].value);break;default:o=t.filterText(s,n)}if(!o)break}return o}),this.isOnFilter=!0)}},{key:"filterNumber",value:function(e,t,r){var o=!0;switch(r){case"=":e!=t&&(o=!1);break;case">":t>=e&&(o=!1);break;case">=":t>e&&(o=!1);break;case"<":e>=t&&(o=!1);break;case"<=":e>t&&(o=!1);break;case"!=":e==t&&(o=!1);break;default:console.error("Number comparator provided is not supported")}return o}},{key:"filterDate",value:function(e,t){return e.getDate()==t.getDate()&&e.getMonth()==t.getMonth()&&e.getFullYear()==t.getFullYear()}},{key:"filterCustom",value:function(e,t,r){return null!=r&&"object"==typeof r?r.callback(e,r.callbackParameters):filterText(e,t)}},{key:"filterText",value:function(e,t){return-1!=e.toString().toLowerCase().indexOf(t)}},{key:"search",value:function(e){var t=this;""===e.trim()?(this.filteredData=null,this.isOnFilter=!1,this.searchText=null):!function(){t.searchText=e;var r=[];t.multiColumnSearch?r=e.split(" "):r.push(e),t.filteredData=t.data.filter(function(e){for(var o=Object.keys(e),n=!1,i=0,s=o.length;s>i;i++){var a=o[i];if(t.colInfos[a]&&e[a]){var u=t.colInfos[a],l=u.format,p=u.filterFormatted,c=u.formatExtraData,d=u.searchable,f=u.hidden,h=e[a];if(!f&&d){p&&l&&(h=l(h,e,c));for(var y=0,v=r.length;v>y;y++){var m=r[y].toLowerCase();if(-1!==h.toString().toLowerCase().indexOf(m)){n=!0;break}}}}}return n}),t.isOnFilter=!0}()}},{key:"getDataIgnoringPagination",value:function(){var e=this.getCurrentDisplayData();return e}},{key:"get",value:function(){var e=this.getCurrentDisplayData();if(0==e.length)return e;if(this.remote||!this.enablePagination)return e;for(var t=[],r=this.pageObj.start;r<=this.pageObj.end&&(t.push(e[r]),r+1!=e.length);r++);return t}},{key:"getKeyField",value:function(){return this.keyField}},{key:"getDataNum",value:function(){return this.getCurrentDisplayData().length}},{key:"isChangedPage",value:function(){return!(!this.pageObj.start||!this.pageObj.end)}},{key:"getAllRowkey",value:function(){return this.data.map(function(e){return e[this.keyField]},this)}}]),e}();t.TableDataStore=f},function(e,t,r){"use strict";e.exports=r(37)},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){return"object"==typeof e?JSON.stringify(e):e}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=r(1),a=o(s),u=r(4),l=o(u),p=r(41),c=o(p),d=r(3),f=o(d),h=r(11),y=o(h),v=r(38),m=o(v),g=r(39),b=o(g),E=r(40),P=o(E),T=a["default"].PropTypes.oneOfType([a["default"].PropTypes.string,a["default"].PropTypes.node]),w=a["default"].createClass({displayName:"Select",propTypes:{addLabelText:a["default"].PropTypes.string,allowCreate:a["default"].PropTypes.bool,autoBlur:a["default"].PropTypes.bool,autofocus:a["default"].PropTypes.bool,backspaceRemoves:a["default"].PropTypes.bool,className:a["default"].PropTypes.string,clearAllText:T,clearValueText:T,clearable:a["default"].PropTypes.bool,delimiter:a["default"].PropTypes.string,disabled:a["default"].PropTypes.bool,escapeClearsValue:a["default"].PropTypes.bool,filterOption:a["default"].PropTypes.func,filterOptions:a["default"].PropTypes.any,ignoreAccents:a["default"].PropTypes.bool,ignoreCase:a["default"].PropTypes.bool,inputProps:a["default"].PropTypes.object,isLoading:a["default"].PropTypes.bool,labelKey:a["default"].PropTypes.string,matchPos:a["default"].PropTypes.string,matchProp:a["default"].PropTypes.string,menuBuffer:a["default"].PropTypes.number,menuContainerStyle:a["default"].PropTypes.object,menuStyle:a["default"].PropTypes.object,multi:a["default"].PropTypes.bool,name:a["default"].PropTypes.string,newOptionCreator:a["default"].PropTypes.func,noResultsText:T,onBlur:a["default"].PropTypes.func,onBlurResetsInput:a["default"].PropTypes.bool,onChange:a["default"].PropTypes.func,onClose:a["default"].PropTypes.func,onFocus:a["default"].PropTypes.func,onInputChange:a["default"].PropTypes.func,onMenuScrollToBottom:a["default"].PropTypes.func,onOpen:a["default"].PropTypes.func,onValueClick:a["default"].PropTypes.func,optionComponent:a["default"].PropTypes.func,optionRenderer:a["default"].PropTypes.func,options:a["default"].PropTypes.array,placeholder:T,required:a["default"].PropTypes.bool,scrollMenuIntoView:a["default"].PropTypes.bool,searchable:a["default"].PropTypes.bool,simpleValue:a["default"].PropTypes.bool,style:a["default"].PropTypes.object,tabIndex:a["default"].PropTypes.string,value:a["default"].PropTypes.any,valueComponent:a["default"].PropTypes.func,valueKey:a["default"].PropTypes.string,valueRenderer:a["default"].PropTypes.func,wrapperStyle:a["default"].PropTypes.object},statics:{Async:m["default"]},getDefaultProps:function(){return{addLabelText:'Add "{label}"?',allowCreate:!1,backspaceRemoves:!0,clearable:!0,clearAllText:"Clear all",clearValueText:"Clear value",delimiter:",",disabled:!1,escapeClearsValue:!0,filterOptions:!0,ignoreAccents:!0,ignoreCase:!0,inputProps:{},isLoading:!1,labelKey:"label",matchPos:"any",matchProp:"any",menuBuffer:0,multi:!1,noResultsText:"No results found",onBlurResetsInput:!0,optionComponent:b["default"],placeholder:"Select...",required:!1,scrollMenuIntoView:!0,searchable:!0,simpleValue:!1,valueComponent:P["default"],valueKey:"value"}},getInitialState:function(){return{inputValue:"",isFocused:!1,isLoading:!1,isOpen:!1,isPseudoFocused:!1,required:this.props.required&&this.handleRequired(this.props.value,this.props.multi)}},componentDidMount:function(){this.props.autofocus&&this.focus()},componentWillUpdate:function(e,t){if(t.isOpen!==this.state.isOpen){var r=t.isOpen?e.onOpen:e.onClose;r&&r()}},componentDidUpdate:function(e,t){if(this.refs.menu&&this.refs.focused&&this.state.isOpen&&!this.hasScrolledToOption){var r=l["default"].findDOMNode(this.refs.focused),o=l["default"].findDOMNode(this.refs.menu);o.scrollTop=r.offsetTop,this.hasScrolledToOption=!0}else this.state.isOpen||(this.hasScrolledToOption=!1);if(t.inputValue!==this.state.inputValue&&this.props.onInputChange&&this.props.onInputChange(this.state.inputValue),this._scrollToFocusedOptionOnUpdate&&this.refs.focused&&this.refs.menu){this._scrollToFocusedOptionOnUpdate=!1;var n=l["default"].findDOMNode(this.refs.focused),i=l["default"].findDOMNode(this.refs.menu),s=n.getBoundingClientRect(),a=i.getBoundingClientRect();(s.bottom>a.bottom||s.top<a.top)&&(i.scrollTop=n.offsetTop+n.clientHeight-i.offsetHeight)}if(this.props.scrollMenuIntoView&&this.refs.menuContainer){var u=this.refs.menuContainer.getBoundingClientRect();window.innerHeight<u.bottom+this.props.menuBuffer&&window.scrollTo(0,window.scrollY+u.bottom+this.props.menuBuffer-window.innerHeight)}e.disabled!==this.props.disabled&&this.setState({isFocused:!1})},focus:function(){this.refs.input&&this.refs.input.focus()},blurInput:function(){this.refs.input&&this.refs.input.blur()},handleTouchMove:function(e){this.dragging=!0},handleTouchStart:function(e){this.dragging=!1},handleTouchEnd:function(e){this.dragging||this.handleMouseDown(e)},handleTouchEndClearValue:function(e){this.dragging||this.clearValue(e)},handleMouseDown:function(e){return this.props.disabled||"mousedown"===e.type&&0!==e.button?void 0:(e.stopPropagation(),e.preventDefault(),this.props.searchable?void(this.state.isFocused?this.setState({isOpen:!0,isPseudoFocused:!1}):(this._openAfterFocus=!0,this.focus())):(this.focus(),this.setState({isOpen:!this.state.isOpen})))},handleMouseDownOnArrow:function(e){this.props.disabled||"mousedown"===e.type&&0!==e.button||this.state.isOpen&&(e.stopPropagation(),e.preventDefault(),this.closeMenu())},handleMouseDownOnMenu:function(e){this.props.disabled||"mousedown"===e.type&&0!==e.button||(e.stopPropagation(),e.preventDefault(),this._openAfterFocus=!0,this.focus())},closeMenu:function(){this.setState({isOpen:!1,isPseudoFocused:this.state.isFocused&&!this.props.multi,inputValue:""}),this.hasScrolledToOption=!1},handleInputFocus:function(e){var t=this.state.isOpen||this._openAfterFocus;this.props.onFocus&&this.props.onFocus(e),this.setState({isFocused:!0,isOpen:t}),this._openAfterFocus=!1},handleInputBlur:function(e){if(!this.refs.menu||!document.activeElement.isEqualNode(this.refs.menu)){this.props.onBlur&&this.props.onBlur(e);var t={isFocused:!1,isOpen:!1,isPseudoFocused:!1};this.props.onBlurResetsInput&&(t.inputValue=""),this.setState(t)}},handleInputChange:function(e){this.setState({isOpen:!0,isPseudoFocused:!1,inputValue:e.target.value})},handleKeyDown:function(e){if(!this.props.disabled){switch(e.keyCode){case 8:return void(!this.state.inputValue&&this.props.backspaceRemoves&&(e.preventDefault(),this.popValue()));case 9:if(e.shiftKey||!this.state.isOpen)return;return void this.selectFocusedOption();case 13:if(!this.state.isOpen)return;e.stopPropagation(),this.selectFocusedOption();break;case 27:this.state.isOpen?this.closeMenu():this.props.clearable&&this.props.escapeClearsValue&&this.clearValue(e);break;case 38:this.focusPreviousOption();break;case 40:this.focusNextOption();break;default:return}e.preventDefault()}},handleValueClick:function(e,t){this.props.onValueClick&&this.props.onValueClick(e,t)},handleMenuScroll:function(e){if(this.props.onMenuScrollToBottom){var t=e.target;t.scrollHeight>t.offsetHeight&&!(t.scrollHeight-t.offsetHeight-t.scrollTop)&&this.props.onMenuScrollToBottom()}},handleRequired:function(e,t){return e?t?0===e.length:0===Object.keys(e).length:!0},getOptionLabel:function(e){return e[this.props.labelKey]},getValueArray:function(){var e=this.props.value;if(this.props.multi){if("string"==typeof e&&(e=e.split(this.props.delimiter)),!Array.isArray(e)){if(null===e||void 0===e)return[];e=[e]}return e.map(this.expandValue).filter(function(e){return e})}var t=this.expandValue(e);return t?[t]:[]},expandValue:function(e){if("string"!=typeof e&&"number"!=typeof e)return e;var t=this.props,r=t.options,o=t.valueKey;if(r)for(var n=0;n<r.length;n++)if(r[n][o]===e)return r[n]},setValue:function(e){var t=this;if(this.props.autoBlur&&this.blurInput(),this.props.onChange){if(this.props.required){var r=this.handleRequired(e,this.props.multi);this.setState({required:r})}this.props.simpleValue&&e&&(e=this.props.multi?e.map(function(e){return e[t.props.valueKey]}).join(this.props.delimiter):e[this.props.valueKey]),this.props.onChange(e)}},selectValue:function(e){this.hasScrolledToOption=!1,this.props.multi?(this.addValue(e),this.setState({inputValue:""})):(this.setValue(e),this.setState({isOpen:!1,inputValue:"",isPseudoFocused:this.state.isFocused}))},addValue:function(e){var t=this.getValueArray();this.setValue(t.concat(e))},popValue:function(){var e=this.getValueArray();e.length&&e[e.length-1].clearableValue!==!1&&this.setValue(e.slice(0,e.length-1))},removeValue:function(e){var t=this.getValueArray();this.setValue(t.filter(function(t){return t!==e})),this.focus()},clearValue:function(e){e&&"mousedown"===e.type&&0!==e.button||(e.stopPropagation(),e.preventDefault(),this.setValue(null),this.setState({isOpen:!1,inputValue:""},this.focus))},focusOption:function(e){this.setState({focusedOption:e})},focusNextOption:function(){this.focusAdjacentOption("next")},focusPreviousOption:function(){this.focusAdjacentOption("previous")},focusAdjacentOption:function(e){var t=this._visibleOptions.filter(function(e){return!e.disabled});if(this._scrollToFocusedOptionOnUpdate=!0,!this.state.isOpen)return void this.setState({isOpen:!0,inputValue:"",focusedOption:this._focusedOption||t["next"===e?0:t.length-1]});if(t.length){for(var r=-1,o=0;o<t.length;o++)if(this._focusedOption===t[o]){r=o;break}var n=t[0];"next"===e&&r>-1&&r<t.length-1?n=t[r+1]:"previous"===e&&(n=r>0?t[r-1]:t[t.length-1]),this.setState({focusedOption:n})}},selectFocusedOption:function(){return this._focusedOption?this.selectValue(this._focusedOption):void 0},renderLoading:function(){return this.props.isLoading?a["default"].createElement("span",{className:"Select-loading-zone","aria-hidden":"true"},a["default"].createElement("span",{className:"Select-loading"})):void 0},renderValue:function(e,t){var r=this,o=this.props.valueRenderer||this.getOptionLabel,n=this.props.valueComponent;if(!e.length)return this.state.inputValue?null:a["default"].createElement("div",{className:"Select-placeholder"},this.props.placeholder);var i=this.props.onValueClick?this.handleValueClick:null;return this.props.multi?e.map(function(e,t){return a["default"].createElement(n,{disabled:r.props.disabled||e.clearableValue===!1,key:"value-"+t+"-"+e[r.props.valueKey],onClick:i,onRemove:r.removeValue,value:e},o(e))}):this.state.inputValue?void 0:(t&&(i=null),a["default"].createElement(n,{disabled:this.props.disabled,onClick:i,value:e[0]},o(e[0])))},renderInput:function(e){var t=(0,f["default"])("Select-input",this.props.inputProps.className);return this.props.disabled||!this.props.searchable?a["default"].createElement("div",i({},this.props.inputProps,{className:t,tabIndex:this.props.tabIndex||0,onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,ref:"input",style:{border:0,width:1,display:"inline-block"}})):a["default"].createElement(c["default"],i({},this.props.inputProps,{className:t,tabIndex:this.props.tabIndex,onBlur:this.handleInputBlur,onChange:this.handleInputChange,onFocus:this.handleInputFocus,minWidth:"5",ref:"input",required:this.state.required,value:this.state.inputValue}))},renderClear:function(){return!this.props.clearable||!this.props.value||this.props.multi&&!this.props.value.length||this.props.disabled||this.props.isLoading?void 0:a["default"].createElement("span",{className:"Select-clear-zone",title:this.props.multi?this.props.clearAllText:this.props.clearValueText,"aria-label":this.props.multi?this.props.clearAllText:this.props.clearValueText,onMouseDown:this.clearValue,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEndClearValue},a["default"].createElement("span",{className:"Select-clear",dangerouslySetInnerHTML:{__html:"&times;"}}))},renderArrow:function(){return a["default"].createElement("span",{className:"Select-arrow-zone",onMouseDown:this.handleMouseDownOnArrow},a["default"].createElement("span",{className:"Select-arrow",onMouseDown:this.handleMouseDownOnArrow}))},filterOptions:function(e){var t=this,r=this.state.inputValue,o=this.props.options||[];return"function"==typeof this.props.filterOptions?this.props.filterOptions.call(this,o,r,e):this.props.filterOptions?(this.props.ignoreAccents&&(r=(0,y["default"])(r)),this.props.ignoreCase&&(r=r.toLowerCase()),e&&(e=e.map(function(e){return e[t.props.valueKey]})),o.filter(function(o){if(e&&e.indexOf(o[t.props.valueKey])>-1)return!1;if(t.props.filterOption)return t.props.filterOption.call(t,o,r);if(!r)return!0;var n=String(o[t.props.valueKey]),i=String(o[t.props.labelKey]);return t.props.ignoreAccents&&("label"!==t.props.matchProp&&(n=(0,y["default"])(n)),"value"!==t.props.matchProp&&(i=(0,y["default"])(i))),t.props.ignoreCase&&("label"!==t.props.matchProp&&(n=n.toLowerCase()),"value"!==t.props.matchProp&&(i=i.toLowerCase())),"start"===t.props.matchPos?"label"!==t.props.matchProp&&n.substr(0,r.length)===r||"value"!==t.props.matchProp&&i.substr(0,r.length)===r:"label"!==t.props.matchProp&&n.indexOf(r)>=0||"value"!==t.props.matchProp&&i.indexOf(r)>=0})):o},renderMenu:function(e,t,r){var o=this;if(!e||!e.length)return this.props.noResultsText?a["default"].createElement("div",{className:"Select-noresults"},this.props.noResultsText):null;var n=function(){var n=o.props.optionComponent,i=o.props.optionRenderer||o.getOptionLabel;return{v:e.map(function(e,s){var u=t&&t.indexOf(e)>-1,l=e===r,p=l?"focused":null,c=(0,f["default"])({"Select-option":!0,"is-selected":u,"is-focused":l,"is-disabled":e.disabled});return a["default"].createElement(n,{className:c,isDisabled:e.disabled,isFocused:l,key:"option-"+s+"-"+e[o.props.valueKey],onSelect:o.selectValue,onFocus:o.focusOption,option:e,isSelected:u,ref:p},i(e))})}}();return"object"==typeof n?n.v:void 0},renderHiddenField:function(e){var t=this;if(this.props.name){var r=e.map(function(e){return n(e[t.props.valueKey])}).join(this.props.delimiter);return a["default"].createElement("input",{type:"hidden",ref:"value",name:this.props.name,value:r,disabled:this.props.disabled})}},getFocusableOption:function(e){var t=this._visibleOptions;if(t.length){var r=this.state.focusedOption||e;if(r&&t.indexOf(r)>-1)return r;for(var o=0;o<t.length;o++)if(!t[o].disabled)return t[o]}},render:function(){var e=this.getValueArray(),t=this._visibleOptions=this.filterOptions(this.props.multi?e:null),r=this.state.isOpen;this.props.multi&&!t.length&&e.length&&!this.state.inputValue&&(r=!1);var o=this._focusedOption=this.getFocusableOption(e[0]),n=(0,f["default"])("Select",this.props.className,{"Select--multi":this.props.multi,"is-disabled":this.props.disabled,"is-focused":this.state.isFocused,"is-loading":this.props.isLoading,"is-open":r,"is-pseudo-focused":this.state.isPseudoFocused,"is-searchable":this.props.searchable,"has-value":e.length});return a["default"].createElement("div",{ref:"wrapper",className:n,style:this.props.wrapperStyle},this.renderHiddenField(e),a["default"].createElement("div",{ref:"control",className:"Select-control",style:this.props.style,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onTouchEnd:this.handleTouchEnd,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove},this.renderValue(e,r),this.renderInput(e),this.renderLoading(),this.renderClear(),this.renderArrow()),r?a["default"].createElement("div",{ref:"menuContainer",className:"Select-menu-outer",style:this.props.menuContainerStyle},a["default"].createElement("div",{ref:"menu",className:"Select-menu",style:this.props.menuStyle,onScroll:this.handleMenuScroll,onMouseDown:this.handleMouseDownOnMenu},this.renderMenu(t,this.props.multi?null:e,o))):null)}});t["default"]=w,e.exports=t["default"]},function(e,t){"use strict";var r=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g
},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}];e.exports=function(e){for(var t=0;t<r.length;t++)e=e.replace(r[t].letters,r[t].base);return e}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(){}Object.defineProperty(t,"__esModule",{value:!0}),t.jQuery=t.animation=void 0;var i=r(1),s=o(i),a=r(13),u=o(a),l=r(3),p=o(l),c=r(43),d=o(c),f=r(44),h=o(f),y={displayName:"ToastMessage",getDefaultProps:function(){var e={error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"};return{className:"toast",iconClassNames:e,titleClassName:"toast-title",messageClassName:"toast-message",tapToDismiss:!0,closeButton:!1}},handleOnClick:function(e){this.props.handleOnClick(e),this.props.tapToDismiss&&this.hideToast(!0)},_handle_close_button_click:function(e){e.stopPropagation(),this.hideToast(!0)},_handle_remove:function(){this.props.handleRemove(this.props.toastId)},_render_close_button:function(){return this.props.closeButton?s["default"].createElement("button",{className:"toast-close-button",role:"button",onClick:this._handle_close_button_click,dangerouslySetInnerHTML:{__html:"&times;"}}):!1},_render_title_element:function(){return this.props.title?s["default"].createElement("div",{className:this.props.titleClassName},this.props.title):!1},_render_message_element:function(){return this.props.message?s["default"].createElement("div",{className:this.props.messageClassName},this.props.message):!1},render:function(){var e=this.props.iconClassName||this.props.iconClassNames[this.props.type];return s["default"].createElement("div",{className:(0,p["default"])(this.props.className,e),style:this.props.style,onClick:this.handleOnClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},this._render_close_button(),this._render_title_element(),this._render_message_element())}},v=t.animation=s["default"].createClass((0,u["default"])(y,{displayName:{$set:"ToastMessage.animation"},mixins:{$set:[d["default"]]}})),m=t.jQuery=s["default"].createClass((0,u["default"])(y,{displayName:{$set:"ToastMessage.jQuery"},mixins:{$set:[h["default"]]}}));y.handleMouseEnter=n,y.handleMouseLeave=n,y.hideToast=n;var g=s["default"].createClass(y);g.animation=v,g.jQuery=m,t["default"]=g},function(e,t,r){e.exports=r(49)},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return"function"==typeof e}function n(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!n(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,n,a,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],s(r))return!1;if(o(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(i(r))for(a=Array.prototype.slice.call(arguments,1),l=r.slice(),n=l.length,u=0;n>u;u++)l[u].apply(this,a);return!0},r.prototype.addListener=function(e,t){var n;if(!o(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!o(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,n,s,a;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],s=r.length,n=-1,r===t||o(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(a=s;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){n=a;break}if(0>n)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],o(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(o(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){function r(){l=!1,s.length?u=s.concat(u):p=-1,u.length&&o()}function o(){if(!l){var e=setTimeout(r);l=!0;for(var t=u.length;t;){for(s=u,u=[];++p<t;)s&&s[p].run();p=-1,t=u.length}s=null,l=!1,clearTimeout(e)}}function n(e,t){this.fun=e,this.array=t}function i(){}var s,a=e.exports={},u=[],l=!1,p=-1;a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new n(e,t)),1!==u.length||l||setTimeout(o,0)},n.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=i,a.addListener=i,a.once=i,a.off=i,a.removeListener=i,a.removeAllListeners=i,a.emit=i,a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=function(e,t,r){for(var o=!0;o;){var n=e,i=t,s=r;o=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=i,r=s,o=!0,a=l=void 0}},u=r(1),l=o(u),p=r(3),c=o(p),d=r(2),f=o(d),h=r(23),y=o(h),v=r(19),m=o(v),g=r(33),b=o(g),E=r(34),P=o(E),T=r(22),w=o(T),O=r(8),C=r(26),_=o(C),S=r(17),k=function(e){function t(e){var r=this;if(n(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this._scrollHeader=function(e){r.refs.header.refs.container.scrollLeft=e.currentTarget.scrollLeft},this._adjustHeaderWidth=function(){var e=r.refs.header.refs.container.childNodes[0],t=r.refs.body.refs.container.childNodes[0];e.offsetWidth!==t.offsetWidth&&(e.style.width=t.offsetWidth+"px");var o=r.refs.body.getBodyHeaderDomProp();r.refs.header.fitHeader(o,r.refs.body.refs.container.scrollHeight>r.refs.body.refs.container.clientHeight)},this._attachCellEditFunc(),Array.isArray(this.props.data)){var o=this.props.data.slice();this.store=new O.TableDataStore(o)}else this.store=new O.TableDataStore(this.props.data.getData()),this.props.data.clear(),this.props.data.on("change",function(e){r.store.setData(e),r.setState({data:r.getTableData()})});if(this.initTable(this.props),this.filter&&!function(){var e=r;r.filter.on("onFilterChange",function(t){e.handleFilterData(t)})}(),this.props.selectRow&&this.props.selectRow.selected){var o=this.props.selectRow.selected.slice();this.store.setSelectedRowKey(o)}this.state={data:this.getTableData(),currPage:this.props.options.page||1,sizePerPage:this.props.options.sizePerPage||f["default"].SIZE_PER_PAGE_LIST[0],selectedRowKeys:this.store.getSelectedRowKeys()}}return i(t,e),s(t,[{key:"initTable",value:function(e){var t=this,r=e.keyField,o="string"==typeof r&&r.length;l["default"].Children.forEach(e.children,function(e){if(e.props.isKey){if(r)throw"Error. Multiple key column be detected in TableHeaderColumn.";r=e.props.dataField}e.props.filter&&(t.filter||(t.filter=new S.Filter),e.props.filter.emitter=t.filter)},this);var n=this.getColumnsDescription(e).reduce(function(e,t){return e[t.name]=t,e},{});if(!o&&!r)throw"Error. No any key column defined in TableHeaderColumn.\n            Use 'isKey={true}' to specify a unique column after version 0.5.4.";this.store.setProps({isPagination:e.pagination,keyField:r,colInfos:n,multiColumnSearch:e.multiColumnSearch,remote:this.isRemoteDataSource()})}},{key:"getTableData",value:function(){var e=[];if(this.props.options.sortName&&this.props.options.sortOrder&&this.store.sort(this.props.options.sortOrder,this.props.options.sortName),this.props.pagination){var t=void 0,r=void 0;this.store.isChangedPage()?(r=this.state.sizePerPage,t=this.state.currPage):(r=this.props.options.sizePerPage||f["default"].SIZE_PER_PAGE_LIST[0],t=this.props.options.page||1),e=this.store.page(t,r).get()}else e=this.store.get();return e}},{key:"getColumnsDescription",value:function(e){var t=e.children;return t.map(function(e,t){return{name:e.props.dataField,align:e.props.dataAlign,sort:e.props.dataSort,format:e.props.dataFormat,formatExtraData:e.props.formatExtraData,filterFormatted:e.props.filterFormatted,editable:e.props.editable,hidden:e.props.hidden,searchable:e.props.searchable,className:e.props.columnClassName,width:e.props.width,text:e.props.children,sortFunc:e.props.sortFunc,index:t}})}},{key:"componentWillReceiveProps",value:function(e){if(this.initTable(e),Array.isArray(e.data)){this.store.setData(e.data.slice());var t=this.refs.pagination,r=t&&t.getCurrentPage()||e.options.page||1,o=t&&t.getSizePerPage()||e.options.sizePerPage||f["default"].SIZE_PER_PAGE_LIST[0];r>Math.ceil(e.data.length/o)&&(r=1);var n=this.store.getSortInfo(),i=e.options.sortName||(n?n.sortField:void 0),s=e.options.sortOrder||(n?n.order:void 0);i&&s&&this.store.sort(s,i);var a=this.store.page(r,o).get();this.setState({data:a,currPage:r,sizePerPage:o})}if(e.selectRow&&e.selectRow.selected){var u=e.selectRow.selected.slice();this.store.setSelectedRowKey(u),this.setState({selectedRowKeys:u})}}},{key:"componentDidMount",value:function(){this._adjustHeaderWidth(),window.addEventListener("resize",this._adjustHeaderWidth),this.refs.body.refs.container.addEventListener("scroll",this._scrollHeader)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._adjustHeaderWidth),this.refs.body.refs.container.removeEventListener("scroll",this._scrollHeader),this.filter&&this.filter.removeAllListeners("onFilterChange")}},{key:"componentDidUpdate",value:function(){this._adjustHeaderWidth(),this._attachCellEditFunc(),this.props.options.afterTableComplete&&this.props.options.afterTableComplete()}},{key:"_attachCellEditFunc",value:function(){this.props.cellEdit&&(this.props.cellEdit.__onCompleteEdit__=this.handleEditCell.bind(this),this.props.cellEdit.mode!==f["default"].CELL_EDIT_NONE&&(this.props.selectRow.clickToSelect=!1))}},{key:"isRemoteDataSource",value:function(e){return(e||this.props).remote}},{key:"render",value:function(){var e=((0,c["default"])("react-bs-table"),this.props.children),t={height:this.props.height,maxHeight:this.props.maxHeight};Array.isArray(this.props.children)||(e=[this.props.children]);var r=this.getColumnsDescription(this.props),o=this.store.getSortInfo(),n=this.renderPagination(),i=this.renderToolBar(),s=this.renderTableFilter(r),a=this.isSelectAll();return l["default"].createElement("div",{className:"react-bs-container",ref:"table"},i,l["default"].createElement("div",{className:"react-bs-table-container",onMouseEnter:this.handleMouseEnter.bind(this),onMouseLeave:this.handleMouseLeave.bind(this),style:t},l["default"].createElement(y["default"],{ref:"header",rowSelectType:this.props.selectRow.mode,hideSelectColumn:this.props.selectRow.hideSelectColumn,sortName:o?o.sortField:void 0,sortOrder:o?o.order:void 0,onSort:this.handleSort.bind(this),onSelectAllRow:this.handleSelectAllRow.bind(this),bordered:this.props.bordered,condensed:this.props.condensed,isFiltered:!!this.filter,tableID:this.props.tableID,isSelectAll:a},this.props.children),l["default"].createElement(m["default"],{height:this.props.height,maxHeight:this.props.maxHeight,ref:"body",data:this.state.data,columns:r,trClassName:this.props.trClassName,striped:this.props.striped,bordered:this.props.bordered,hover:this.props.hover,keyField:this.store.getKeyField(),condensed:this.props.condensed,selectRow:this.props.selectRow,cellEdit:this.props.cellEdit,selectedRowKeys:this.state.selectedRowKeys,onRowClick:this.handleRowClick.bind(this),onRowMouseOver:this.handleRowMouseOver.bind(this),onRowMouseOut:this.handleRowMouseOut.bind(this),onSelectRow:this.handleSelectRow.bind(this),noDataText:this.props.options.noDataText})),s,n)}},{key:"isSelectAll",value:function(){var e=this.store.getSelectedRowKeys(),t=this.store.getAllRowkey();return e.length!==t.length?0===e.length?!1:"indeterminate":!0}},{key:"cleanSelected",value:function(){this.store.setSelectedRowKey([]),this.setState({selectedRowKeys:[]})}},{key:"handleSort",value:function(e,t){this.props.options.onSortChange&&this.props.options.onSortChange(t,e,this.props);var r=this.store.sort(e,t).get();this.setState({data:r})}},{key:"handlePaginationData",value:function(e,t){var r=this.props.options.onPageChange;if(r&&r(e,t),!this.isRemoteDataSource()){var o=this.store.page(e,t).get();this.setState({data:o,currPage:e,sizePerPage:t})}}},{key:"handleMouseLeave",value:function(){this.props.options.onMouseLeave&&this.props.options.onMouseLeave()}},{key:"handleMouseEnter",value:function(){this.props.options.onMouseEnter&&this.props.options.onMouseEnter()}},{key:"handleRowMouseOut",value:function(e){this.props.options.onRowMouseOut&&this.props.options.onRowMouseOut(e)}},{key:"handleRowMouseOver",value:function(e){this.props.options.onRowMouseOver&&this.props.options.onRowMouseOver(e)}},{key:"handleRowClick",value:function(e){this.props.options.onRowClick&&this.props.options.onRowClick(e)}},{key:"handleSelectAllRow",value:function(e){var t=e.currentTarget.checked,r=[],o=!0;this.props.selectRow.onSelectAll&&(o=this.props.selectRow.onSelectAll(t,t?this.store.get():[])),"undefined"!=typeof o&&o===!1||(t&&(r=this.store.getAllRowkey()),this.store.setSelectedRowKey(r),this.setState({selectedRowKeys:r}))}},{key:"handleShowOnlySelected",value:function(){this.store.ignoreNonSelected();var e=void 0;e=this.props.pagination?this.store.page(1,this.state.sizePerPage).get():this.store.get(),this.setState({data:e,currPage:1})}},{key:"handleSelectRow",value:function(e,t){var r=this.store.getSelectedRowKeys(),o=e[this.store.getKeyField()],n=!0;this.props.selectRow.onSelect&&(n=this.props.selectRow.onSelect(e,t)),"undefined"!=typeof n&&n===!1||(this.props.selectRow.mode===f["default"].ROW_SELECT_SINGLE?r=t?[o]:[]:t?r.push(o):r=r.filter(function(e){return o!==e}),this.store.setSelectedRowKey(r),this.setState({selectedRowKeys:r}))}},{key:"handleEditCell",value:function(e,t,r){var o=void 0;l["default"].Children.forEach(this.props.children,function(e,t){return t==r?(o=e.props.dataField,!1):void 0});var n=this.store.edit(e,t,o).get();this.setState({data:n}),this.props.cellEdit.afterSaveCell&&this.props.cellEdit.afterSaveCell(this.state.data[t],o,e)}},{key:"handleAddRowBegin",value:function(){this.refs.body}},{key:"handleAddRowAtBegin",value:function(e){try{this.store.addAtBegin(e)}catch(t){return t}this._handleAfterAddingRow(e)}},{key:"handleAddRow",value:function(e){var t=this,r=this.props.options.beforeInsertRow?this.props.options.beforeInsertRow(e):e;return Promise.resolve(r).then(function(r){e=r;try{t.store.add(e)}catch(o){return o}t._handleAfterAddingRow(e)})["catch"](function(e){return console.log("gledaj ovde"),console.log(e),e.json()})}},{key:"getSizePerPage",value:function(){return this.state.sizePerPage}},{key:"getCurrentPage",value:function(){return this.state.currPage}},{key:"handleDropRow",value:function(e){var t=this,r=e?e:this.store.getSelectedRowKeys();r&&r.length>0&&(this.props.options.handleConfirmDeleteRow?this.props.options.handleConfirmDeleteRow(function(){t.deleteRow(r)}):confirm("Are you sure want delete?")&&this.deleteRow(r))}},{key:"deleteRow",value:function(e){var t=void 0;if(this.store.remove(e),this.store.setSelectedRowKey([]),this.props.pagination){var r=this.state.sizePerPage,o=this.state.currPage,n=Math.ceil(this.store.getDataNum()/r);o>n&&(o=n),t=this.store.page(o,r).get(),this.setState({data:t,selectedRowKeys:this.store.getSelectedRowKeys(),currPage:o})}else t=this.store.get(),this.setState({data:t,selectedRowKeys:this.store.getSelectedRowKeys()});this.props.options.afterDeleteRow&&this.props.options.afterDeleteRow(e)}},{key:"handleFilterData",value:function(e){this.store.filter(e);var t=void 0;if(this.props.pagination){var r=this.state.sizePerPage;t=this.store.page(1,r).get()}else t=this.store.get();this.props.options.afterColumnFilter&&this.props.options.afterColumnFilter(e,this.store.getDataIgnoringPagination()),this.setState({data:t,currPage:1})}},{key:"handleExportCSV",value:function(){var e=this.store.getDataIgnoringPagination(),t=[];this.props.children.map(function(e){e.props.hidden===!1&&t.push(e.props.dataField)}),(0,_["default"])(e,t,this.props.csvFileName)}},{key:"handleSearch",value:function(e){this.store.search(e);var t=void 0;if(this.props.pagination){var r=this.state.sizePerPage;t=this.store.page(1,r).get()}else t=this.store.get();this.props.options.afterSearch&&this.props.options.afterSearch(e,this.store.getDataIgnoringPagination()),this.setState({data:t,currPage:1})}},{key:"renderPagination",value:function(){if(this.props.pagination){var e=void 0;return e=this.isRemoteDataSource()?this.props.fetchInfo.dataTotalSize:this.store.getDataNum(),l["default"].createElement("div",{className:"table-footer-pagination"},l["default"].createElement(b["default"],{ref:"pagination",currPage:this.state.currPage,changePage:this.handlePaginationData.bind(this),sizePerPage:this.state.sizePerPage,sizePerPageList:this.props.options.sizePerPageList||f["default"].SIZE_PER_PAGE_LIST,paginationSize:this.props.options.paginationSize||f["default"].PAGINATION_SIZE,remote:this.isRemoteDataSource(),dataSize:e,onSizePerPageList:this.props.options.onSizePerPageList,prePage:this.props.options.prePage||f["default"].PRE_PAGE,nextPage:this.props.options.nextPage||f["default"].NEXT_PAGE,firstPage:this.props.options.firstPage||f["default"].FIRST_PAGE,lastPage:this.props.options.lastPage||f["default"].LAST_PAGE}))}return null}},{key:"renderToolBar",value:function(){var e=this.props.selectRow&&this.props.selectRow.showOnlySelected;if(e||this.props.insertRow||this.props.deleteRow||this.props.search||this.props.exportCSV){var t=void 0;return t=Array.isArray(this.props.children)?this.props.children.map(function(e){var t=e.props;return{name:t.children,field:t.dataField,autoValue:t.autoValue||!1,editable:t.editable&&"function"==typeof t.editable?t.editable():t.editable,hiddenInPopup:t.hiddenInPopup,format:t.dataFormat?function(e){return t.dataFormat(e,null,t.formatExtraData).replace(/<.*?>/g,"")}:!1}}):[{name:this.props.children.props.children,field:this.props.children.props.dataField,editable:this.props.children.props.editable,hiddenInPopup:this.props.children.props.hiddenInPopup}],l["default"].createElement("div",{className:"tool-bar"},l["default"].createElement(P["default"],{clearSearch:this.props.options.clearSearch,enableInsert:this.props.insertRow,enableDelete:this.props.deleteRow,enableSearch:this.props.search,enableExportCSV:this.props.exportCSV,enableShowOnlySelected:e,columns:t,searchPlaceholder:this.props.searchPlaceholder,onAddRow:this.handleAddRow.bind(this),onAddRowBegin:this.handleAddRowBegin.bind(this),onDropRow:this.handleDropRow.bind(this),onSearch:this.handleSearch.bind(this),onExportCSV:this.handleExportCSV.bind(this),onShowOnlySelected:this.handleShowOnlySelected.bind(this)}))}return null}},{key:"renderTableFilter",value:function(e){return this.props.columnFilter?l["default"].createElement(w["default"],{columns:e,rowSelectType:this.props.selectRow.mode,onFilter:this.handleFilterData.bind(this)}):null}},{key:"_handleAfterAddingRow",value:function(e){var t=void 0;if(this.props.pagination){var r=this.state.sizePerPage,o=Math.ceil(this.store.getDataNum()/r);t=this.store.page(o,r).get(),this.setState({data:t,currPage:o})}else t=this.store.get(),this.setState({data:t});this.props.options.afterInsertRow&&this.props.options.afterInsertRow(e)}}]),t}(l["default"].Component);k.propTypes={keyField:l["default"].PropTypes.string,height:l["default"].PropTypes.string,maxHeight:l["default"].PropTypes.string,tableID:l["default"].PropTypes.string,data:l["default"].PropTypes.oneOfType([l["default"].PropTypes.array,l["default"].PropTypes.object]),remote:l["default"].PropTypes.bool,striped:l["default"].PropTypes.bool,bordered:l["default"].PropTypes.bool,hover:l["default"].PropTypes.bool,condensed:l["default"].PropTypes.bool,pagination:l["default"].PropTypes.bool,searchPlaceholder:l["default"].PropTypes.string,selectRow:l["default"].PropTypes.shape({mode:l["default"].PropTypes.oneOf([f["default"].ROW_SELECT_NONE,f["default"].ROW_SELECT_SINGLE,f["default"].ROW_SELECT_MULTI]),bgColor:l["default"].PropTypes.string,selected:l["default"].PropTypes.array,onSelect:l["default"].PropTypes.func,onSelectAll:l["default"].PropTypes.func,clickToSelect:l["default"].PropTypes.bool,hideSelectColumn:l["default"].PropTypes.bool,clickToSelectAndEditCell:l["default"].PropTypes.bool,showOnlySelected:l["default"].PropTypes.bool}),cellEdit:l["default"].PropTypes.shape({mode:l["default"].PropTypes.string,blurToSave:l["default"].PropTypes.bool,afterSaveCell:l["default"].PropTypes.func}),insertRow:l["default"].PropTypes.bool,deleteRow:l["default"].PropTypes.bool,search:l["default"].PropTypes.bool,columnFilter:l["default"].PropTypes.bool,trClassName:l["default"].PropTypes.any,options:l["default"].PropTypes.shape({beforeInsertRow:l["default"].PropTypes.func,clearSearch:l["default"].PropTypes.bool,sortName:l["default"].PropTypes.string,sortOrder:l["default"].PropTypes.string,afterTableComplete:l["default"].PropTypes.func,afterDeleteRow:l["default"].PropTypes.func,afterInsertRow:l["default"].PropTypes.func,afterSearch:l["default"].PropTypes.func,afterColumnFilter:l["default"].PropTypes.func,onRowClick:l["default"].PropTypes.func,page:l["default"].PropTypes.number,sizePerPageList:l["default"].PropTypes.array,sizePerPage:l["default"].PropTypes.number,paginationSize:l["default"].PropTypes.number,onSortChange:l["default"].PropTypes.func,onPageChange:l["default"].PropTypes.func,onSizePerPageList:l["default"].PropTypes.func,noDataText:l["default"].PropTypes.string,handleConfirmDeleteRow:l["default"].PropTypes.func,prePage:l["default"].PropTypes.string,nextPage:l["default"].PropTypes.string,firstPage:l["default"].PropTypes.string,lastPage:l["default"].PropTypes.string}),fetchInfo:l["default"].PropTypes.shape({dataTotalSize:l["default"].PropTypes.number}),exportCSV:l["default"].PropTypes.bool,csvFileName:l["default"].PropTypes.string},k.defaultProps={height:"100%",maxHeight:void 0,tableID:void 0,striped:!1,bordered:!0,hover:!1,condensed:!1,pagination:!1,searchPlaceholder:void 0,selectRow:{mode:f["default"].ROW_SELECT_NONE,bgColor:f["default"].ROW_SELECT_BG_COLOR,selected:[],onSelect:void 0,onSelectAll:void 0,clickToSelect:!1,hideSelectColumn:!1,clickToSelectAndEditCell:!1,showOnlySelected:!1},cellEdit:{mode:f["default"].CELL_EDIT_NONE,blurToSave:!1,afterSaveCell:void 0},insertRow:!1,deleteRow:!1,search:!1,multiColumnSearch:!1,columnFilter:!1,trClassName:"",options:{clearSearch:!1,sortName:void 0,sortOrder:void 0,afterTableComplete:void 0,afterDeleteRow:void 0,afterInsertRow:void 0,afterSearch:void 0,afterColumnFilter:void 0,onRowClick:void 0,onMouseLeave:void 0,onMouseEnter:void 0,onRowMouseOut:void 0,onRowMouseOver:void 0,page:void 0,sizePerPageList:f["default"].SIZE_PER_PAGE_LIST,sizePerPage:void 0,paginationSize:f["default"].PAGINATION_SIZE,onSizePerPageList:void 0,noDataText:void 0,handleConfirmDeleteRow:void 0,prePage:f["default"].PRE_PAGE,nextPage:f["default"].NEXT_PAGE,firstPage:f["default"].FIRST_PAGE,lastPage:f["default"].LAST_PAGE},fetchInfo:{dataTotalSize:0},exportCSV:!1,csvFileName:void 0},t["default"]=k,e.exports=t["default"]},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=function(e,t,r){for(var o=!0;o;){var n=e,i=t,s=r;o=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=i,r=s,o=!0,a=l=void 0}},u=r(2),l=o(u),p=r(14).EventEmitter,c=function(e){function t(e){n(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.currentFilter={}}return i(t,e),s(t,[{key:"handleFilter",value:function(e,t,r){var o=r||l["default"].FILTER_TYPE.CUSTOM;if(null!=t&&"object"==typeof t){var n=!0;for(var i in t)if(!t[i]||""===t[i]){n=!1;break}n?this.currentFilter[e]={value:t,type:o}:delete this.currentFilter[e];
}else t&&""!==t.trim()?this.currentFilter[e]={value:t.trim(),type:o}:delete this.currentFilter[e];this.emit("onFilterChange",this.currentFilter)}}]),t}(p);t.Filter=c},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=function(e,t,r){for(var o=!0;o;){var n=e,i=t,s=r;o=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=i,r=s,o=!0,a=l=void 0}},u=r(1),l=o(u),p=r(3),c=(o(p),r(2)),d=(o(c),function(e){function t(){n(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),s(t,[{key:"render",value:function(){var e={width:parseInt(this.props.width)?this.props.width:35};return l["default"].createElement("th",{style:e},l["default"].createElement("div",{className:"th-inner table-header-column"},this.props.children))}}]),t}(l["default"].Component));t["default"]=d,e.exports=t["default"]},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=function(e,t,r){for(var o=!0;o;){var n=e,i=t,s=r;o=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=i,r=s,o=!0,a=l=void 0}},u=r(1),l=o(u),p=r(2),c=o(p),d=r(5),f=o(d),h=r(25),y=o(h),v=r(20),m=o(v),g=r(21),b=o(g),E=r(3),P=o(E),T=function(e){return e&&"function"==typeof e},w=function(e){function t(e){n(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={currEditCell:null},this.editing=!1}return i(t,e),s(t,[{key:"componentDidMount",value:function(){this.adjustBody()}},{key:"componentDidUpdate",value:function(){this.adjustBody()}},{key:"render",value:function(){var e=(0,P["default"])("table-container"),t=(0,P["default"])("table",{"table-striped":this.props.striped,"table-bordered":this.props.bordered,"table-hover":this.props.hover,"table-condensed":this.props.condensed}),r=this._isSelectRowDefined(),o=this.renderTableHeader(r),n=this.props.data.map(function(e,t){var o=this.props.columns.map(function(r,o){var n=e[r.name];if(this.editing&&r.name!==this.props.keyField&&r.editable&&null!=this.state.currEditCell&&this.state.currEditCell.rid==t&&this.state.currEditCell.cid==o){var i=r.format?function(t){return r.format(t,e,r.formatExtraData).replace(/<.*?>/g,"")}:!1;return l["default"].createElement(b["default"],{completeEdit:this.handleCompleteEditCell.bind(this),editable:T(r.editable)?r.editable(n,e,t,o):r.editable,format:r.format?i:!1,key:o,blurToSave:this.props.cellEdit.blurToSave,rowIndex:t,colIndex:o},n)}var s=T(r.className)?r.className(n,e,t,o):r.className;if("undefined"!=typeof r.format){var a=r.format(n,e,r.formatExtraData);return l["default"].isValidElement(a)||(a=l["default"].createElement("div",{dangerouslySetInnerHTML:{__html:a}})),l["default"].createElement(m["default"],{dataAlign:r.align,key:o,className:s,cellEdit:this.props.cellEdit,hidden:r.hidden,onEdit:this.handleEditCell.bind(this),width:r.width},a)}return l["default"].createElement(m["default"],{dataAlign:r.align,key:o,className:s,cellEdit:this.props.cellEdit,hidden:r.hidden,onEdit:this.handleEditCell.bind(this),width:r.width},n)},this),n=-1!=this.props.selectedRowKeys.indexOf(e[this.props.keyField]),i=r&&!this.props.selectRow.hideSelectColumn?this.renderSelectRowColumn(n):null,s=T(this.props.trClassName)?this.props.trClassName(e,t):this.props.trClassName;return l["default"].createElement(y["default"],{isSelected:n,key:t,className:s,selectRow:r?this.props.selectRow:void 0,enableCellEdit:this.props.cellEdit.mode!==c["default"].CELL_EDIT_NONE,onRowClick:this.handleRowClick.bind(this),onRowMouseOver:this.handleRowMouseOver.bind(this),onRowMouseOut:this.handleRowMouseOut.bind(this),onSelectRow:this.handleSelectRow.bind(this)},i,o)},this);0===n.length&&n.push(l["default"].createElement(y["default"],{key:"##table-empty##"},l["default"].createElement("td",{colSpan:this.props.columns.length+(r?1:0),className:"react-bs-table-no-data"},this.props.noDataText||c["default"].NO_DATA_TEXT))),this.editing=!1;var i=this.calculateContainerHeight().toString();return l["default"].createElement("div",{ref:"container",className:e,style:{height:i}},l["default"].createElement("table",{ref:"body",className:t},o,l["default"].createElement("tbody",null,n)))}},{key:"renderTableHeader",value:function(e){var t=null;if(e){var r={width:35,minWidth:35};t=this.props.selectRow.hideSelectColumn?null:l["default"].createElement("th",{style:r,key:-1})}var o=this.props.columns.map(function(e,t){var r=null==e.width?e.width:parseInt(e.width),o={display:e.hidden?"none":null,width:r,maxWidth:r},n=e.sort?f["default"].renderReactSortCaret(c["default"].SORT_DESC):null;return l["default"].createElement("th",{style:o,key:t,className:e.className},e.text,n)});return l["default"].createElement("thead",{ref:"header"},l["default"].createElement("tr",null,t,o))}},{key:"handleRowMouseOut",value:function(e){var t=this.props.data[e-1];this.props.onRowMouseOut(t)}},{key:"handleRowMouseOver",value:function(e){var t=this.props.data[e-1];this.props.onRowMouseOver(t)}},{key:"handleRowClick",value:function(e){var t,r;this.props.data.forEach(function(o,n){n==e-1&&(t=o[this.props.keyField],r=o)},this),this.props.onRowClick(r)}},{key:"handleSelectRow",value:function(e,t){var r,o;this.props.data.forEach(function(t,n){return n==e-1?(r=t[this.props.keyField],o=t,!1):void 0},this),this.props.onSelectRow(o,t)}},{key:"handleSelectRowColumChange",value:function(e){this.props.selectRow.clickToSelect&&this.props.selectRow.clickToSelectAndEditCell||this.handleSelectRow(e.currentTarget.parentElement.parentElement.rowIndex,e.currentTarget.checked)}},{key:"handleEditCell",value:function(e,t){this.editing=!0,this._isSelectRowDefined()&&(t--,this.props.selectRow.hideSelectColumn&&t++),e--;var r={currEditCell:{rid:e,cid:t}};this.props.selectRow.clickToSelectAndEditCell&&this.handleSelectRow(e+1,!0),this.setState(r)}},{key:"cancelEdit",value:function(){var e=this.state.currEditCell;e&&this.handleCompleteEditCell(null,e.rid,e.cid)}},{key:"handleCompleteEditCell",value:function(e,t,r){this.setState({currEditCell:null}),null!=e&&this.props.cellEdit.__onCompleteEdit__(e,t,r)}},{key:"renderSelectRowColumn",value:function(e){return this.props.selectRow.mode==c["default"].ROW_SELECT_SINGLE?l["default"].createElement(m["default"],null,l["default"].createElement("input",{type:"radio",checked:e,onChange:this.handleSelectRowColumChange.bind(this)})):l["default"].createElement(m["default"],null,l["default"].createElement("input",{type:"checkbox",checked:e,onChange:this.handleSelectRowColumChange.bind(this)}))}},{key:"getBodyHeaderDomProp",value:function(){for(var e=this.refs.header.childNodes[0].childNodes,t=[],r=0;r<e.length;r++)t.push({width:e[r].offsetWidth});return t}},{key:"adjustBody",value:function(){this.hardFixHeaderWidth(),this.props.condensed&&(this.refs.body.style.marginTop="-36px"),this.props.maxHeight&&parseInt(this.props.maxHeight)<this.refs.container.offsetHeight&&(this.refs.container.style.height=this.props.maxHeight-42+"px")}},{key:"hardFixHeaderWidth",value:function(){for(var e=this.refs.header.childNodes[0].childNodes,t=0;t<e.length;t++)e[t].style.width=e[t].offsetWidth+"px"}},{key:"calculateContainerHeight",value:function(){return"100%"==this.props.height?this.props.height:parseInt(this.props.height)-42}},{key:"_isSelectRowDefined",value:function(){return this.props.selectRow.mode===c["default"].ROW_SELECT_SINGLE||this.props.selectRow.mode===c["default"].ROW_SELECT_MULTI}}]),t}(l["default"].Component);w.propTypes={height:l["default"].PropTypes.string,data:l["default"].PropTypes.array,columns:l["default"].PropTypes.array,striped:l["default"].PropTypes.bool,bordered:l["default"].PropTypes.bool,hover:l["default"].PropTypes.bool,condensed:l["default"].PropTypes.bool,keyField:l["default"].PropTypes.string,selectedRowKeys:l["default"].PropTypes.array,onRowClick:l["default"].PropTypes.func,onSelectRow:l["default"].PropTypes.func,noDataText:l["default"].PropTypes.string},t["default"]=w,e.exports=t["default"]},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),u=function(e,t,r){for(var o=!0;o;){var n=e,i=t,s=r;o=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=i,r=s,o=!0,a=l=void 0}},l=r(1),p=o(l),c=r(2),d=o(c),f=function(e){function t(e){n(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return i(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props.children,o=this.props.width!==e.width||this.props.className!==e.className||this.props.hidden!==e.hidden||this.props.dataAlign!==e.dataAlign||typeof r!=typeof e.children||(""+this.props.onEdit).toString()!==(""+e.onEdit).toString();return o?o:(o="object"==typeof r&&null!==r?"checkbox"===r.props.type||"radio"===r.props.type?o||r.props.type!==e.children.props.type||r.props.checked!==e.children.props.checked:!0:o||r!==e.children,o?o:this.props.cellEdit&&e.cellEdit?o||this.props.cellEdit.mode!==e.cellEdit.mode:!1)}},{key:"handleCellEdit",value:function(e){if(this.props.cellEdit.mode==d["default"].CELL_EDIT_DBCLICK)if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var t=window.getSelection();t.removeAllRanges()}this.props.onEdit(e.currentTarget.parentElement.rowIndex,e.currentTarget.cellIndex)}},{key:"render",value:function(){var e=null==this.props.width?this.props.width:-1!==this.props.width.indexOf("%")?this.props.width:parseInt(this.props.width),t={textAlign:this.props.dataAlign,display:this.props.hidden?"none":null,width:e,maxWidth:e},r=this.props.className;this.props.width&&(r+=" col-md-"+e);var o={};return this.props.cellEdit&&(this.props.cellEdit.mode==d["default"].CELL_EDIT_CLICK?o.onClick=this.handleCellEdit.bind(this):this.props.cellEdit.mode==d["default"].CELL_EDIT_DBCLICK&&(o.onDoubleClick=this.handleCellEdit.bind(this))),p["default"].createElement("td",s({style:t,className:r},o),this.props.children)}}]),t}(p["default"].Component);f.propTypes={dataAlign:p["default"].PropTypes.string,hidden:p["default"].PropTypes.bool,className:p["default"].PropTypes.string},f.defaultProps={dataAlign:"left",hidden:!1,className:""},t["default"]=f,e.exports=t["default"]},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=function(e,t,r){for(var o=!0;o;){var n=e,i=t,s=r;o=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=i,r=s,o=!0,a=l=void 0}},u=r(1),l=o(u),p=r(2),c=(o(p),r(6)),d=o(c),f=r(7),h=o(f),y=r(3),v=o(y),m=function(e){function t(e){n(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.timeouteClear=0,this.state={shakeEditor:!1}}return i(t,e),s(t,[{key:"handleKeyPress",value:function(e){if(13==e.keyCode){var t="checkbox"==e.currentTarget.type?this._getCheckBoxValue(e):e.currentTarget.value;if(!this.validator(t))return;this.props.completeEdit(t,this.props.rowIndex,this.props.colIndex)}else 27==e.keyCode&&this.props.completeEdit(null,this.props.rowIndex,this.props.colIndex)}},{key:"handleBlur",value:function(e){if(this.props.blurToSave){var t="checkbox"==e.currentTarget.type?this._getCheckBoxValue(e):e.currentTarget.value;if(!this.validator(t))return;this.props.completeEdit(t,this.props.rowIndex,this.props.colIndex)}}},{key:"validator",value:function(e){var t=this;if(t.props.editable.validator){var r=t.props.editable.validator(e);if(r!==!0){t.refs.notifier.notice("error",r,"Pressed ESC can cancel");var o=t.refs.inputRef;return t.clearTimeout(),t.setState({shakeEditor:!0}),t.timeouteClear=setTimeout(function(){t.setState({shakeEditor:!1})},300),o.focus(),!1}}return!0}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){0!=this.timeouteClear&&(clearTimeout(this.timeouteClear),this.timeouteClear=0)})},{key:"componentDidMount",value:function(){var e=this.refs.inputRef;e.focus()}},{key:"componentWillUnmount",value:function(){this.clearTimeout()}},{key:"render",value:function(){var e=this.props.editable,t=this.props.format,r={ref:"inputRef",onKeyDown:this.handleKeyPress.bind(this),onBlur:this.handleBlur.bind(this)};e.placeholder&&(r.placeholder=e.placeholder);var o=(0,v["default"])({animated:this.state.shakeEditor,shake:this.state.shakeEditor});return l["default"].createElement("td",{ref:"td",style:{position:"relative"}},(0,d["default"])(e,r,t,o,this.props.children||""),l["default"].createElement(h["default"],{ref:"notifier"}))}},{key:"_getCheckBoxValue",value:function(e){var t="",r=e.currentTarget.value.split(":");return t=e.currentTarget.checked?r[0]:r[1]}}]),t}(l["default"].Component);m.propTypes={completeEdit:l["default"].PropTypes.func,rowIndex:l["default"].PropTypes.number,colIndex:l["default"].PropTypes.number,blurToSave:l["default"].PropTypes.bool},t["default"]=m,e.exports=t["default"]},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=function(e,t,r){for(var o=!0;o;){var n=e,i=t,s=r;o=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=i,r=s,o=!0,a=l=void 0}},u=r(1),l=o(u),p=r(2),c=o(p),d=r(3),f=o(d),h=function(e){function t(e){n(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.filterObj={}}return i(t,e),s(t,[{key:"handleKeyUp",value:function(e){""===e.currentTarget.value.trim()?delete this.filterObj[e.currentTarget.name]:this.filterObj[e.currentTarget.name]=e.currentTarget.value,this.props.onFilter(this.filterObj)}},{key:"render",value:function(){var e=(0,f["default"])("table",{"table-striped":this.props.striped,"table-condensed":this.props.condensed}),t=null;if(this.props.rowSelectType==c["default"].ROW_SELECT_SINGLE||this.props.rowSelectType==c["default"].ROW_SELECT_MULTI){var r={width:35,paddingLeft:0,paddingRight:0};t=l["default"].createElement("th",{style:r,key:-1},"Filter")}var o=this.props.columns.map(function(e){var t={display:e.hidden?"none":null,width:e.width};return l["default"].createElement("th",{key:e.name,style:t},l["default"].createElement("div",{className:"th-inner table-header-column"},l["default"].createElement("input",{size:"10",type:"text",placeholder:e.name,name:e.name,onKeyUp:this.handleKeyUp.bind(this)})))},this);return l["default"].createElement("table",{className:e,style:{marginTop:5}},l["default"].createElement("thead",null,l["default"].createElement("tr",{style:{borderBottomStyle:"hidden"}},t,o)))}}]),t}(l["default"].Component);h.propTypes={columns:l["default"].PropTypes.array,rowSelectType:l["default"].PropTypes.string,onFilter:l["default"].PropTypes.func},t["default"]=h,e.exports=t["default"]},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=function(e,t,r){for(var o=!0;o;){var n=e,i=t,s=r;o=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=i,r=s,o=!0,a=l=void 0}},u=r(1),l=o(u),p=r(4),c=o(p),d=r(2),f=o(d),h=r(5),y=o(h),v=r(3),m=o(v),g=r(18),b=o(g),E=function(e){function t(){n(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){this.update(this.props.checked)}},{key:"componentWillReceiveProps",value:function(e){this.update(e.checked)}},{key:"update",value:function(e){c["default"].findDOMNode(this).indeterminate="indeterminate"===e}},{key:"render",value:function(){return l["default"].createElement("input",{className:"react-bs-select-all",type:"checkbox",checked:this.props.checked,onChange:this.props.onChange})}}]),t}(l["default"].Component),P=function(e){function t(e){n(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.selectRowColumnWidth=null}return i(t,e),s(t,[{key:"render",value:function(){var e=(0,m["default"])("table-header"),t=(0,m["default"])("table","table-hover",{"table-bordered":this.props.bordered,"table-condensed":this.props.condensed}),r=this.props.hideSelectColumn?null:this.renderSelectRowHeader();return this._attachClearSortCaretFunc(),l["default"].createElement("div",{className:"table-header-wrapper"},l["default"].createElement("div",{ref:"container",className:e},l["default"].createElement("table",{className:t,id:this.props.tableID},l["default"].createElement("thead",null,l["default"].createElement("tr",{ref:"header"},r,this.props.children)))))}},{key:"renderSelectRowHeader",value:function(){return this.props.rowSelectType==f["default"].ROW_SELECT_SINGLE?l["default"].createElement(b["default"],{width:this.selectRowColumnWidth}):this.props.rowSelectType==f["default"].ROW_SELECT_MULTI?l["default"].createElement(b["default"],{width:this.selectRowColumnWidth},l["default"].createElement(E,{onChange:this.props.onSelectAllRow,checked:this.props.isSelectAll})):null}},{key:"_attachClearSortCaretFunc",value:function(){if(Array.isArray(this.props.children))for(var e=0;e<this.props.children.length;e++){var t=this.props.children[e].props.dataField,r=t===this.props.sortName?this.props.sortOrder:void 0;this.props.children[e]=l["default"].cloneElement(this.props.children[e],{key:e,onSort:this.props.onSort,sort:r})}else{var t=this.props.children.props.dataField,r=t===this.props.sortName?this.props.sortOrder:void 0;this.props.children=l["default"].cloneElement(this.props.children,{key:0,onSort:this.props.onSort,sort:r})}}},{key:"fitHeader",value:function(e,t){if(Array.isArray(this.props.children)){var r=this.props.rowSelectType!=f["default"].ROW_SELECT_SINGLE&&this.props.rowSelectType!=f["default"].ROW_SELECT_MULTI||this.props.hideSelectColumn?0:1;1==r&&(this.selectRowColumnWidth=e[0].width);for(var o=0;o<this.props.children.length;o++)this.props.children[o]=l["default"].cloneElement(this.props.children[o],{width:e[o+r].width+"px"})}else this.props.children=l["default"].cloneElement(this.props.children,{width:e[0].width+"px"});this.props.condensed&&!this.props.isFiltered&&(this.refs.container.style.height="36px"),this.forceUpdate(),t&&(this.refs.container.style.marginRight=y["default"].getScrollBarWidth()+"px")}}]),t}(l["default"].Component);P.propTypes={rowSelectType:l["default"].PropTypes.string,onSort:l["default"].PropTypes.func,onSelectAllRow:l["default"].PropTypes.func,sortName:l["default"].PropTypes.string,sortOrder:l["default"].PropTypes.string,hideSelectColumn:l["default"].PropTypes.bool,bordered:l["default"].PropTypes.bool,condensed:l["default"].PropTypes.bool,isFiltered:l["default"].PropTypes.bool,isSelectAll:l["default"].PropTypes.oneOf([!0,"indeterminate",!1])},P.defaultProps={},t["default"]=P,e.exports=t["default"]},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),u=function(e,t,r){for(var o=!0;o;){var n=e,i=t,s=r;o=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=i,r=s,o=!0,a=l=void 0}},l=r(1),p=o(l),c=r(3),d=(o(c),r(2)),f=o(d),h=r(5),y=o(h),v=r(28),m=o(v),g=r(31),b=o(g),E=r(30),P=o(E),T=r(29),w=o(T),O=function(e){function t(e){n(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleFilter=this.handleFilter.bind(this)}return i(t,e),a(t,[{key:"handleColumnClick",value:function(e){if(this.props.dataSort){var t=this.props.sort==f["default"].SORT_DESC?f["default"].SORT_ASC:f["default"].SORT_DESC;this.props.onSort(t,this.props.dataField)}}},{key:"handleFilter",value:function(e,t){this.props.filter.emitter.handleFilter(this.props.dataField,e,t)}},{key:"getFilters",value:function(){switch(this.props.filter.type){case f["default"].FILTER_TYPE.TEXT:return p["default"].createElement(b["default"],s({},this.props.filter,{columnName:this.props.children,filterHandler:this.handleFilter}));case f["default"].FILTER_TYPE.SELECT:return p["default"].createElement(P["default"],s({},this.props.filter,{columnName:this.props.children,filterHandler:this.handleFilter}));case f["default"].FILTER_TYPE.NUMBER:return p["default"].createElement(w["default"],s({},this.props.filter,{columnName:this.props.children,filterHandler:this.handleFilter}));case f["default"].FILTER_TYPE.DATE:return p["default"].createElement(m["default"],s({},this.props.filter,{columnName:this.props.children,filterHandler:this.handleFilter}));case f["default"].FILTER_TYPE.CUSTOM:return this.props.filter.getElement(this.handleFilter,this.props.filter.customFilterParameters)}}},{key:"componentDidMount",value:function(){this.refs.innerDiv.setAttribute("data-field",this.props.dataField)}},{key:"render",value:function(){var e=null!==this.props.width?parseInt(this.props.width):null,t={textAlign:this.props.dataAlign,display:this.props.hidden?"none":null,width:e,maxWidth:e},r=this.props.dataSort?p["default"].createElement("span",{className:"order"},p["default"].createElement("span",{className:"dropdown"},p["default"].createElement("span",{className:"caret",style:{margin:"10px 0 10px 5px",color:"#ccc"}})),p["default"].createElement("span",{className:"dropup"},p["default"].createElement("span",{className:"caret",style:{margin:"10px 0",color:"#ccc"}}))):null,o=this.props.sort?y["default"].renderReactSortCaret(this.props.sort):r,n=this.props.className+" "+(this.props.dataSort?"sort-column":"");return p["default"].createElement("th",{ref:"header-col",className:n,style:t},p["default"].createElement("div",{ref:"innerDiv",className:"th-inner table-header-column",onClick:this.handleColumnClick.bind(this)},this.props.children,o),this.props.filter?this.getFilters():null)}}]),t}(p["default"].Component),C=[];for(var _ in f["default"].FILTER_TYPE)C.push(f["default"].FILTER_TYPE[_]);O.propTypes={dataField:p["default"].PropTypes.string,dataAlign:p["default"].PropTypes.string,dataSort:p["default"].PropTypes.bool,onSort:p["default"].PropTypes.func,dataFormat:p["default"].PropTypes.func,isKey:p["default"].PropTypes.bool,editable:p["default"].PropTypes.any,hidden:p["default"].PropTypes.bool,hiddenInPopup:p["default"].PropTypes.bool,searchable:p["default"].PropTypes.bool,className:p["default"].PropTypes.string,width:p["default"].PropTypes.string,sortFunc:p["default"].PropTypes.func,columnClassName:p["default"].PropTypes.any,filterFormatted:p["default"].PropTypes.bool,sort:p["default"].PropTypes.string,formatExtraData:p["default"].PropTypes.any,filter:p["default"].PropTypes.shape({type:p["default"].PropTypes.oneOf(C),delay:p["default"].PropTypes.number,options:p["default"].PropTypes.oneOfType([p["default"].PropTypes.object,p["default"].PropTypes.arrayOf(p["default"].PropTypes.number)]),numberComparators:p["default"].PropTypes.arrayOf(p["default"].PropTypes.string),emitter:p["default"].PropTypes.object,placeholder:p["default"].PropTypes.string,getElement:p["default"].PropTypes.func,customFilterParameters:p["default"].PropTypes.object})},O.defaultProps={dataAlign:"left",dataSort:!1,dataFormat:void 0,isKey:!1,editable:!0,onSort:void 0,hidden:!1,hiddenInPopup:!1,searchable:!0,className:"",width:null,sortFunc:void 0,columnClassName:"",filterFormatted:!1,sort:void 0,formatExtraData:void 0,filter:void 0},t["default"]=O,e.exports=t["default"]},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),u=function(e,t,r){for(var o=!0;o;){var n=e,i=t,s=r;o=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=i,r=s,o=!0,a=l=void 0}},l=r(1),p=o(l),c=r(2),d=(o(c),function(e){function t(e){n(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.clickNum=0}return i(t,e),a(t,[{key:"rowClick",value:function(e){var t=this;"INPUT"!==e.target.tagName&&"SELECT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&!function(){var r=e.currentTarget.rowIndex;t.props.selectRow&&(t.props.selectRow.clickToSelect?t.props.onSelectRow(r,!t.props.isSelected):t.props.selectRow.clickToSelectAndEditCell&&(t.clickNum++,setTimeout(function(){1===t.clickNum&&t.props.onSelectRow(r,!t.props.isSelected),t.clickNum=0},200))),t.props.onRowClick&&t.props.onRowClick(r)}()}},{key:"rowMouseOut",value:function(e){this.props.onRowMouseOut&&this.props.onRowMouseOut(e.currentTarget.rowIndex)}},{key:"rowMouseOver",value:function(e){this.props.onRowMouseOver&&this.props.onRowMouseOver(e.currentTarget.rowIndex)}},{key:"render",value:function(){this.clickNum=0;var e={style:{backgroundColor:this.props.isSelected?this.props.selectRow.bgColor:null},className:(this.props.isSelected&&this.props.selectRow.className?this.props.selectRow.className:"")+(this.props.className||"")};return this.props.selectRow&&(this.props.selectRow.clickToSelect||this.props.selectRow.clickToSelectAndEditCell)||this.props.onRowClick?p["default"].createElement("tr",s({},e,{onMouseOver:this.rowMouseOver.bind(this),onMouseOut:this.rowMouseOut.bind(this),onClick:this.rowClick.bind(this)}),this.props.children):p["default"].createElement("tr",e,this.props.children);
}}]),t}(p["default"].Component));d.propTypes={isSelected:p["default"].PropTypes.bool,enableCellEdit:p["default"].PropTypes.bool,onRowClick:p["default"].PropTypes.func,onSelectRow:p["default"].PropTypes.func,onRowMouseOut:p["default"].PropTypes.func,onRowMouseOver:p["default"].PropTypes.func},d.defaultProps={onRowClick:void 0},t["default"]=d,e.exports=t["default"]},function(e,t,r){"use strict";function o(e,t){var r="";return 0===e.length?r:(r+=t.join(",")+"\n",e.map(function(e){t.map(function(o,n){var i="undefined"!=typeof e[o]?'"'+e[o]+'"':"";r+=i,n+1<t.length&&(r+=",")}),r+="\n"}),r)}if(Object.defineProperty(t,"__esModule",{value:!0}),"undefined"!=typeof window)var n=r(27),i=n.saveAs;var s=function(e,t,r){var n=o(e,t);"undefined"!=typeof window&&i(new Blob([n],{type:"text/plain;charset=utf-8"}),r||"spreadsheet.csv")};t["default"]=s,e.exports=t["default"]},function(e,t,r){var o,n,i=i||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,r=function(){return e.URL||e.webkitURL||e},o=t.createElementNS("http://www.w3.org/1999/xhtml","a"),n="download"in o,i=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},s=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),a=e.webkitRequestFileSystem,u=e.requestFileSystem||a||e.mozRequestFileSystem,l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},p="application/octet-stream",c=0,d=500,f=function(t){var o=function(){"string"==typeof t?r().revokeObjectURL(t):t.remove()};e.chrome?o():setTimeout(o,d)},h=function(e,t,r){t=[].concat(t);for(var o=t.length;o--;){var n=e["on"+t[o]];if("function"==typeof n)try{n.call(e,r||e)}catch(i){l(i)}}},y=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e},v=function(t,l,d){d||(t=y(t));var v,m,g,b=this,E=t.type,P=!1,T=function(){h(b,"writestart progress write writeend".split(" "))},w=function(){if(m&&s&&"undefined"!=typeof FileReader){var o=new FileReader;return o.onloadend=function(){var e=o.result;m.location.href="data:attachment/file"+e.slice(e.search(/[,;]/)),b.readyState=b.DONE,T()},o.readAsDataURL(t),void(b.readyState=b.INIT)}if(!P&&v||(v=r().createObjectURL(t)),m)m.location.href=v;else{var n=e.open(v,"_blank");void 0==n&&s&&(e.location.href=v)}b.readyState=b.DONE,T(),f(v)},O=function(e){return function(){return b.readyState!==b.DONE?e.apply(this,arguments):void 0}},C={create:!0,exclusive:!1};return b.readyState=b.INIT,l||(l="download"),n?(v=r().createObjectURL(t),o.href=v,o.download=l,void setTimeout(function(){i(o),T(),f(v),b.readyState=b.DONE})):(e.chrome&&E&&E!==p&&(g=t.slice||t.webkitSlice,t=g.call(t,0,t.size,p),P=!0),a&&"download"!==l&&(l+=".download"),(E===p||a)&&(m=e),u?(c+=t.size,void u(e.TEMPORARY,c,O(function(e){e.root.getDirectory("saved",C,O(function(e){var r=function(){e.getFile(l,C,O(function(e){e.createWriter(O(function(r){r.onwriteend=function(t){m.location.href=e.toURL(),b.readyState=b.DONE,h(b,"writeend",t),f(e)},r.onerror=function(){var e=r.error;e.code!==e.ABORT_ERR&&w()},"writestart progress write abort".split(" ").forEach(function(e){r["on"+e]=b["on"+e]}),r.write(t),b.abort=function(){r.abort(),b.readyState=b.DONE},b.readyState=b.WRITING}),w)}),w)};e.getFile(l,{create:!1},O(function(e){e.remove(),r()}),O(function(e){e.code===e.NOT_FOUND_ERR?r():w()}))}),w)}),w)):void w())},m=v.prototype,g=function(e,t,r){return new v(e,t,r)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,r){return r||(e=y(e)),navigator.msSaveOrOpenBlob(e,t||"download")}:(m.abort=function(){var e=this;e.readyState=e.DONE,h(e,"abort")},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,g)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content);"undefined"!=typeof e&&e.exports?e.exports.saveAs=i:null!==r(55)&&null!=r(56)&&(o=[],n=function(){return i}.apply(t,o),!(void 0!==n&&(e.exports=n)))},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=function(e,t,r){for(var o=!0;o;){var n=e,i=t,s=r;o=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=i,r=s,o=!0,a=l=void 0}},u=r(1),l=o(u),p=r(2),c=o(p),d=function(e){function t(e){n(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.filter=this.filter.bind(this)}return i(t,e),s(t,[{key:"setDefaultDate",value:function(){var e="";if(this.props.defaultValue){var t=new Date(this.props.defaultValue);e=t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}return e}},{key:"filter",value:function(e){var t=e.target.value;t?this.props.filterHandler(new Date(t),c["default"].FILTER_TYPE.DATE):this.props.filterHandler(null,c["default"].FILTER_TYPE.DATE)}},{key:"componentDidMount",value:function(){var e=this.refs.inputDate.defaultValue;e&&this.props.filterHandler(new Date(e),c["default"].FILTER_TYPE.DATE)}},{key:"render",value:function(){return l["default"].createElement("input",{ref:"inputDate",className:"filter date-filter form-control",type:"date",onChange:this.filter,defaultValue:this.setDefaultDate()})}}]),t}(l["default"].Component);d.propTypes={filterHandler:l["default"].PropTypes.func.isRequired,defaultValue:l["default"].PropTypes.object,columnName:l["default"].PropTypes.string},t["default"]=d,e.exports=t["default"]},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=function(e,t,r){for(var o=!0;o;){var n=e,i=t,s=r;o=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=i,r=s,o=!0,a=l=void 0}},u=r(1),l=o(u),p=r(3),c=o(p),d=r(2),f=o(d),h=["=",">",">=","<","<=","!="],y=function(e){function t(e){n(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.numberComparators=this.props.numberComparators||h,this.timeout=null,this.state={isPlaceholderSelected:void 0==this.props.defaultValue||void 0==this.props.defaultValue.number||this.props.options&&-1==this.props.options.indexOf(this.props.defaultValue.number)},this.onChangeNumber=this.onChangeNumber.bind(this),this.onChangeNumberSet=this.onChangeNumberSet.bind(this),this.onChangeComparator=this.onChangeComparator.bind(this)}return i(t,e),s(t,[{key:"onChangeNumber",value:function(e){if(""!==this.refs.numberFilterComparator.value){this.timeout&&clearTimeout(this.timeout);var t=this,r=e.target.value;this.timeout=setTimeout(function(){t.props.filterHandler({number:r,comparator:t.refs.numberFilterComparator.value},f["default"].FILTER_TYPE.NUMBER)},t.props.delay)}}},{key:"onChangeNumberSet",value:function(e){this.setState({isPlaceholderSelected:""===e.target.value}),""!==this.refs.numberFilterComparator.value&&this.props.filterHandler({number:e.target.value,comparator:this.refs.numberFilterComparator.value},f["default"].FILTER_TYPE.NUMBER)}},{key:"onChangeComparator",value:function(e){""!==this.refs.numberFilter.value&&this.props.filterHandler({number:this.refs.numberFilter.value,comparator:e.target.value},f["default"].FILTER_TYPE.NUMBER)}},{key:"getComparatorOptions",value:function(){var e=[];e.push(l["default"].createElement("option",{key:"-1"}));for(var t=0;t<this.numberComparators.length;t++)e.push(l["default"].createElement("option",{key:t,value:this.numberComparators[t]},this.numberComparators[t]));return e}},{key:"getNumberOptions",value:function(){var e=[],t=this.props.options;e.push(l["default"].createElement("option",{key:"-1",value:""},this.props.placeholder||"Select "+this.props.columnName+"..."));for(var r=0;r<t.length;r++)e.push(l["default"].createElement("option",{key:r,value:t[r]},t[r]));return e}},{key:"componentDidMount",value:function(){this.refs.numberFilterComparator.value&&this.refs.numberFilter.value&&this.props.filterHandler({number:this.refs.numberFilter.value,comparator:this.refs.numberFilterComparator.value},f["default"].FILTER_TYPE.NUMBER)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e=(0,c["default"])("select-filter","number-filter-input","form-control",{"placeholder-selected":this.state.isPlaceholderSelected});return l["default"].createElement("div",{className:"filter number-filter"},l["default"].createElement("select",{ref:"numberFilterComparator",className:"number-filter-comparator form-control",onChange:this.onChangeComparator,defaultValue:this.props.defaultValue?this.props.defaultValue.comparator:""},this.getComparatorOptions()),this.props.options?l["default"].createElement("select",{ref:"numberFilter",className:e,onChange:this.onChangeNumberSet,defaultValue:this.props.defaultValue?this.props.defaultValue.number:""},this.getNumberOptions()):l["default"].createElement("input",{ref:"numberFilter",type:"number",className:"number-filter-input form-control",placeholder:this.props.placeholder||"Enter "+this.props.columnName+"...",onChange:this.onChangeNumber,defaultValue:this.props.defaultValue?this.props.defaultValue.number:""}))}}]),t}(l["default"].Component);y.propTypes={filterHandler:l["default"].PropTypes.func.isRequired,options:l["default"].PropTypes.arrayOf(l["default"].PropTypes.number),defaultValue:l["default"].PropTypes.shape({number:l["default"].PropTypes.number,comparator:l["default"].PropTypes.oneOf(h)}),delay:l["default"].PropTypes.number,numberComparators:function(e,t){if(e[t])for(var r=0;r<e[t].length;r++){for(var o=!1,n=0;n<h.length;n++)if(h[n]===e[t][r]){o=!0;break}if(!o)return new Error("Number comparator provided is not supported. Use only "+h)}},placeholder:l["default"].PropTypes.string,columnName:l["default"].PropTypes.string},y.defaultProps={delay:f["default"].FILTER_DELAY},t["default"]=y,e.exports=t["default"]},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=function(e,t,r){for(var o=!0;o;){var n=e,i=t,s=r;o=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=i,r=s,o=!0,a=l=void 0}},u=r(1),l=o(u),p=r(3),c=o(p),d=r(2),f=o(d),h=function(e){function t(e){n(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.filter=this.filter.bind(this),this.state={isPlaceholderSelected:void 0==this.props.defaultValue||!this.props.options.hasOwnProperty(this.props.defaultValue)}}return i(t,e),s(t,[{key:"filter",value:function(e){this.setState({isPlaceholderSelected:""===e.target.value}),this.props.filterHandler(e.target.value,f["default"].FILTER_TYPE.SELECT)}},{key:"getOptions",value:function(){var e=[],t=this.props.options;return e.push(l["default"].createElement("option",{key:"-1",value:""},this.props.placeholder||"Select "+this.props.columnName+"...")),Object.keys(t).map(function(r){e.push(l["default"].createElement("option",{key:r,value:r},t[r]))}),e}},{key:"componentDidMount",value:function(){this.refs.selectInput.value&&this.props.filterHandler(this.refs.selectInput.value,f["default"].FILTER_TYPE.SELECT)}},{key:"render",value:function(){var e=(0,c["default"])("filter","select-filter","form-control",{"placeholder-selected":this.state.isPlaceholderSelected});return l["default"].createElement("select",{ref:"selectInput",className:e,onChange:this.filter,defaultValue:void 0!=this.props.defaultValue?this.props.defaultValue:""},this.getOptions())}}]),t}(l["default"].Component);h.propTypes={filterHandler:l["default"].PropTypes.func.isRequired,options:l["default"].PropTypes.object.isRequired,placeholder:l["default"].PropTypes.string,columnName:l["default"].PropTypes.string},t["default"]=h,e.exports=t["default"]},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=function(e,t,r){for(var o=!0;o;){var n=e,i=t,s=r;o=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=i,r=s,o=!0,a=l=void 0}},u=r(1),l=o(u),p=r(2),c=o(p),d=function(e){function t(e){n(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.filter=this.filter.bind(this),this.timeout=null}return i(t,e),s(t,[{key:"filter",value:function(e){this.timeout&&clearTimeout(this.timeout);var t=this,r=e.target.value;this.timeout=setTimeout(function(){t.props.filterHandler(r,c["default"].FILTER_TYPE.TEXT)},t.props.delay)}},{key:"componentDidMount",value:function(){this.refs.inputText.defaultValue&&this.props.filterHandler(this.refs.inputText.defaultValue,c["default"].FILTER_TYPE.TEXT)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){return l["default"].createElement("input",{ref:"inputText",className:"filter text-filter form-control",type:"text",onChange:this.filter,placeholder:this.props.placeholder||"Enter "+this.props.columnName+"...",defaultValue:this.props.defaultValue?this.props.defaultValue:""})}}]),t}(l["default"].Component);d.propTypes={filterHandler:l["default"].PropTypes.func.isRequired,defaultValue:l["default"].PropTypes.string,delay:l["default"].PropTypes.number,placeholder:l["default"].PropTypes.string,columnName:l["default"].PropTypes.string},d.defaultProps={delay:c["default"].FILTER_DELAY},t["default"]=d,e.exports=t["default"]},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=function(e,t,r){for(var o=!0;o;){var n=e,i=t,s=r;o=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=i,r=s,o=!0,a=l=void 0}},u=r(1),l=o(u),p=r(3),c=o(p),d=function(e){function t(e){n(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return i(t,e),s(t,[{key:"pageBtnClick",value:function(e){e.preventDefault(),this.props.changePage(e.currentTarget.text)}},{key:"render",value:function(){var e=(0,c["default"])({active:this.props.active,disabled:this.props.disable,hidden:this.props.hidden});return l["default"].createElement("li",{className:e},l["default"].createElement("a",{href:"#",onClick:this.pageBtnClick.bind(this)},this.props.children))}}]),t}(l["default"].Component);d.propTypes={changePage:l["default"].PropTypes.func,active:l["default"].PropTypes.bool,disable:l["default"].PropTypes.bool},t["default"]=d,e.exports=t["default"]},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=function(e,t,r){for(var o=!0;o;){var n=e,i=t,s=r;o=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=i,r=s,o=!0,a=l=void 0}},u=r(1),l=o(u),p=r(32),c=o(p),d=r(2),f=o(d),h=function(e){function t(){n(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),s(t,[{key:"changePage",value:function(e){e=e==this.props.prePage?this.props.currPage-1<1?1:this.props.currPage-1:e==this.props.nextPage?this.props.currPage+1>this.totalPages?this.totalPages:this.props.currPage+1:e==this.props.lastPage?this.totalPages:e==this.props.firstPage?1:parseInt(e),e!=this.props.currPage&&this.props.changePage(e,this.props.sizePerPage)}},{key:"changeSizePerPage",value:function(e){e.preventDefault();var t=parseInt(e.currentTarget.text),r=this.props.currPage;t!=this.props.sizePerPage&&(this.totalPages=Math.ceil(this.props.dataSize/t),r>this.totalPages&&(r=this.totalPages),this.props.changePage(r,t),this.props.onSizePerPageList&&this.props.onSizePerPageList(t))}},{key:"render",value:function(){var e=this;this.totalPages=Math.ceil(this.props.dataSize/this.props.sizePerPage);var t=this.makePage(),r={"float":"right",marginTop:"0px"},o=this.props.sizePerPageList.map(function(t){return l["default"].createElement("li",{key:t,role:"presentation"},l["default"].createElement("a",{role:"menuitem",tabIndex:"-1",href:"#",onClick:e.changeSizePerPage.bind(e)},t))});return l["default"].createElement("div",{className:"row",style:{marginTop:15}},this.props.sizePerPageList.length>1?l["default"].createElement("div",null,l["default"].createElement("div",{className:"col-md-6"},l["default"].createElement("div",{className:"dropdown"},l["default"].createElement("button",{className:"btn btn-default dropdown-toggle",type:"button",id:"pageDropDown","data-toggle":"dropdown","aria-expanded":"true"},this.props.sizePerPage,l["default"].createElement("span",null," ",l["default"].createElement("span",{className:"caret"}))),l["default"].createElement("ul",{className:"dropdown-menu",role:"menu","aria-labelledby":"pageDropDown"},o))),l["default"].createElement("div",{className:"col-md-6"},l["default"].createElement("ul",{className:"pagination",style:r},t))):l["default"].createElement("div",{className:"col-md-12"},l["default"].createElement("ul",{className:"pagination",style:r},t)))}},{key:"makePage",value:function(){var e=this.getPages();return e.map(function(e){var t=e===this.props.currPage,r=!1,o=!1;return 1!=this.props.currPage||e!==this.props.firstPage&&e!==this.props.prePage||(r=!0,o=!0),this.props.currPage!=this.totalPages||e!==this.props.nextPage&&e!==this.props.lastPage||(r=!0,o=!0),l["default"].createElement(c["default"],{changePage:this.changePage.bind(this),active:t,disable:r,hidden:o,key:e},e)},this)}},{key:"getPages",value:function(){var e=1,t=this.totalPages;e=Math.max(this.props.currPage-Math.floor(this.props.paginationSize/2),1),t=e+this.props.paginationSize-1,t>this.totalPages&&(t=this.totalPages,e=t-this.props.paginationSize+1);var r;r=1!=e&&this.totalPages>this.props.paginationSize?[this.props.firstPage,this.props.prePage]:this.totalPages>1?[this.props.prePage]:[];for(var o=e;t>=o;o++)o>0&&r.push(o);return t!=this.totalPages?(r.push(this.props.nextPage),r.push(this.props.lastPage)):this.totalPages>1&&r.push(this.props.nextPage),r}},{key:"getCurrentPage",value:function(){return this.props.currPage}},{key:"getSizePerPage",value:function(){return this.props.sizePerPage}}]),t}(l["default"].Component);h.propTypes={currPage:l["default"].PropTypes.number,sizePerPage:l["default"].PropTypes.number,dataSize:l["default"].PropTypes.number,changePage:l["default"].PropTypes.func,sizePerPageList:l["default"].PropTypes.array,paginationSize:l["default"].PropTypes.number,remote:l["default"].PropTypes.bool,onSizePerPageList:l["default"].PropTypes.func,prePage:l["default"].PropTypes.string},h.defaultProps={sizePerPage:f["default"].SIZE_PER_PAGE},t["default"]=h,e.exports=t["default"]},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=function(e,t,r){for(var o=!0;o;){var n=e,i=t,s=r;o=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=i,r=s,o=!0,a=l=void 0}},u=r(1),l=o(u),p=r(3),c=o(p),d=r(2),f=o(d),h=r(6),y=o(h),v=r(7),m=o(v),g=r(9),b=(o(g),function(e){function t(e){var r=this;n(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleShowOnlyToggle=function(e){r.setState({showSelected:!r.state.showSelected}),r.props.onShowOnlySelected()},this.handleClearBtnClick=function(){r.refs.seachInput.value="",r.props.onSearch("")},this.timeouteClear=0,this.state={isInsertRowTrigger:!0,validateState:null,shakeEditor:!1,showSelected:!1}}return i(t,e),s(t,[{key:"componentWillUnmount",value:function(){this.clearTimeout()}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){this.timeouteClear&&(clearTimeout(this.timeouteClear),this.timeouteClear=0)})},{key:"checkAndParseForm",value:function(){var e,t,r=this,o={},n=!0,i={};return this.props.columns.forEach(function(r,s){if(r.autoValue)e="function"==typeof r.autoValue?r.autoValue():"autovalue-"+(new Date).getTime();else{var a=this.refs[r.field+s];if(e="undefined"!=typeof a?a.value:!0,r.editable&&"checkbox"==r.editable.type){var u=a.value.split(":");e=a.checked?u[0]:u[1]}r.editable&&r.editable.validator&&(t=r.editable.validator(e),t!==!0&&(n=!1,i[r.field]=t))}o[r.field]=e},this),n?o:(r.clearTimeout(),this.setState({validateState:i,shakeEditor:!0}),r.refs.notifier.notice("error","Form validate errors, please checking!","Pressed ESC can cancel"),r.timeouteClear=setTimeout(function(){r.setState({shakeEditor:!1})},300),null)}},{key:"handleSaveBtnClick",value:function(e){var t=this,r=this.checkAndParseForm();r&&this.props.onAddRow(r).then(function(e){if(e){var r="";try{e.errors.map(function(e){r+=e.message+". "})}catch(o){console.log(o),r+=e.toString()}var n=t;n.refs.notifier.notice("error",r,"Pressed ESC can cancel"),n.clearTimeout(),n.setState({shakeEditor:!0,validateState:"this is hack for prevent bootstrap modal hide"}),n.timeouteClear=setTimeout(function(){n.setState({shakeEditor:!1})},300)}else t.setState({validateState:null,shakeEditor:!1},function(){for(var e=document.querySelectorAll(".modal"),t=0;t<e.length;t++)e[t].click()}),t.refs.form.reset()})}},{key:"handleDropRowBtnClick",value:function(e){this.props.onDropRow()}},{key:"handleCloseBtn",value:function(e){this.refs.warning.style.display="none"}},{key:"handleKeyUp",value:function(e){this.props.onSearch(e.currentTarget.value)}},{key:"handleExportCSV",value:function(){this.props.onExportCSV()}},{key:"render",value:function(){var e="bs-table-modal-sm"+(new Date).getTime(),t=this.props.enableInsert?l["default"].createElement("button",{type:"button",onClick:this.props.onAddRowBegin,className:"btn btn-info react-bs-table-add-btn","data-toggle":"modal","data-target":"."+e},l["default"].createElement("i",{className:"glyphicon glyphicon-plus"})," New"):null,r=this.props.enableDelete?l["default"].createElement("button",{type:"button",className:"btn btn-warning react-bs-table-del-btn","data-toggle":"tooltip","data-placement":"right",title:"Drop selected row",onClick:this.handleDropRowBtnClick.bind(this)},l["default"].createElement("i",{className:"glyphicon glyphicon-trash"})," Delete"):null,o=this.renderSearchPanel(),n=this.props.enableShowOnlySelected?l["default"].createElement("button",{type:"button",onClick:this.handleShowOnlyToggle.bind(this),className:"btn btn-primary","data-toggle":"button","aria-pressed":"false"},this.state.showSelected?f["default"].SHOW_ALL:f["default"].SHOW_ONLY_SELECT):null,i=this.props.enableInsert?this.renderInsertRowModal(e):null,s=this.props.enableExportCSV?l["default"].createElement("button",{type:"button",className:"btn btn-success",onClick:this.handleExportCSV.bind(this)},l["default"].createElement("i",{className:"glyphicon glyphicon-export"})," Export to CSV"):null;return l["default"].createElement("div",{className:"row"},l["default"].createElement("div",{className:"col-xs-12 col-sm-6 col-md-6 col-lg-8"},l["default"].createElement("div",{className:"btn-group btn-group-sm",role:"group"},s,t,r,n)),l["default"].createElement("div",{className:"col-xs-12 col-sm-6 col-md-6 col-lg-4"},o),l["default"].createElement(m["default"],{ref:"notifier"}),i)}},{key:"renderSearchPanel",value:function(){if(this.props.enableSearch){var e="form-group form-group-sm",t=null;return this.props.clearSearch&&(t=l["default"].createElement("span",{className:"input-group-btn"},l["default"].createElement("button",{className:"btn btn-default",type:"button",onClick:this.handleClearBtnClick},"Clear")),e="form-group form-group-sm input-group input-group-sm"),l["default"].createElement("div",{className:e},l["default"].createElement("input",{ref:"seachInput",className:"form-control",type:"text",placeholder:this.props.searchPlaceholder?this.props.searchPlaceholder:"Search",onKeyUp:this.handleKeyUp.bind(this)}),t)}return null}},{key:"renderInsertRowModal",value:function(e){var t=this.state.validateState||{},r=this.props.columns.map(function(e,r){var o=e.editable,n=e.format,i={ref:e.field+r,placeholder:o.placeholder?o.placeholder:e.name};if(e.autoValue)return null;var s=t[e.field]?l["default"].createElement("span",{className:"help-block bg-danger"},t[e.field]):null,a={display:e.hiddenInPopup?"none":"block"};return l["default"].createElement("div",{className:"form-group",key:e.field,style:a},l["default"].createElement("label",null,e.name),(0,y["default"])(o,i,n,""),s)}),o=(0,c["default"])("modal","fade",e,{"in":this.state.shakeEditor||this.state.validateState}),n=(0,c["default"])("modal-dialog","modal-sm",{animated:this.state.shakeEditor,shake:this.state.shakeEditor});return l["default"].createElement("div",{ref:"modal",className:o,tabIndex:"-1",role:"dialog"},l["default"].createElement("div",{className:n},l["default"].createElement("div",{className:"modal-content"},l["default"].createElement("div",{className:"modal-header"},l["default"].createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},l["default"].createElement("span",{"aria-hidden":"true"},"")),l["default"].createElement("h4",{className:"modal-title"},"New Record")),l["default"].createElement("div",{className:"modal-body"},l["default"].createElement("form",{ref:"form"},r)),l["default"].createElement("div",{className:"modal-footer"},l["default"].createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Close"),l["default"].createElement("button",{type:"button",className:"btn btn-success",onClick:this.handleSaveBtnClick.bind(this)},"Save")))))}}]),t}(l["default"].Component));b.propTypes={onAddRow:l["default"].PropTypes.func,onDropRow:l["default"].PropTypes.func,onShowOnlySelected:l["default"].PropTypes.func,enableInsert:l["default"].PropTypes.bool,enableDelete:l["default"].PropTypes.bool,enableSearch:l["default"].PropTypes.bool,enableShowOnlySelected:l["default"].PropTypes.bool,columns:l["default"].PropTypes.array,searchPlaceholder:l["default"].PropTypes.string,clearSearch:l["default"].PropTypes.bool},b.defaultProps={enableInsert:!1,enableDelete:!1,enableSearch:!1,enableShowOnlySelected:!1,clearSearch:!1},t["default"]=b,e.exports=t["default"]},function(e,t,r){t=e.exports=r(36)(),t.push([e.id,'.rc-switch{position:relative;display:inline-block;box-sizing:border-box;width:44px;height:22px;line-height:20px;vertical-align:middle;border-radius:20px 20px;border:1px solid #ccc;background-color:#ccc;cursor:pointer;transition:all .3s cubic-bezier(.35,0,.25,1)}.rc-switch-inner{color:#fff;font-size:12px;position:absolute;left:24px}.rc-switch:after{position:absolute;width:18px;height:18px;left:2px;top:1px;border-radius:50% 50%;background-color:#fff;content:" ";cursor:pointer;box-shadow:0 2px 5px rgba(0,0,0,.26);-webkit-transform:scale(1);transform:scale(1);transition:left .3s cubic-bezier(.35,0,.25,1);-webkit-animation-timing-function:cubic-bezier(.35,0,.25,1);animation-timing-function:cubic-bezier(.35,0,.25,1);-webkit-animation-duration:.3s;animation-duration:.3s;-webkit-animation-name:rcSwitchOff;animation-name:rcSwitchOff}.rc-switch:hover:after{-webkit-transform:scale(1.1);transform:scale(1.1);-webkit-animation-name:rcSwitchOn;animation-name:rcSwitchOn}.rc-switch-checked{border:1px solid #87d068;background-color:#87d068}.rc-switch-checked .rc-switch-inner{left:6px}.rc-switch-checked:after{left:22px}.rc-switch-disabled{cursor:no-drop;background:#ccc;border-color:#ccc}.rc-switch-disabled:after{background:#9e9e9e;-webkit-animation-name:none;animation-name:none;cursor:no-drop}.rc-switch-disabled:hover:after{-webkit-transform:scale(1);transform:scale(1);-webkit-animation-name:none;animation-name:none}.rc-switch-label{display:inline-block;line-height:20px;font-size:14px;padding-left:10px;vertical-align:middle;white-space:normal;pointer-events:none;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}@-webkit-keyframes rcSwitchOn{0%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.25);transform:scale(1.25)}to{-webkit-transform:scale(1.1);transform:scale(1.1)}}@keyframes rcSwitchOn{0%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.25);transform:scale(1.25)}to{-webkit-transform:scale(1.1);transform:scale(1.1)}}@-webkit-keyframes rcSwitchOff{0%{-webkit-transform:scale(1.1);transform:scale(1.1)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes rcSwitchOff{0%{-webkit-transform:scale(1.1);transform:scale(1.1)}to{-webkit-transform:scale(1);transform:scale(1)}}',""]);
},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t];r[2]?e.push("@media "+r[2]+"{"+r[1]+"}"):e.push(r[1])}return e.join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},n=0;n<this.length;n++){var i=this[n][0];"number"==typeof i&&(o[i]=!0)}for(n=0;n<t.length;n++){var s=t[n];"number"==typeof s[0]&&o[s[0]]||(r&&!s[2]?s[2]=r:r&&(s[2]="("+s[2]+") and ("+r+")"),e.push(s))}},e}},function(e,t,r){"use strict";function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(){}var i=r(1),s=r(3),a=i.createClass({displayName:"Switch",propTypes:{className:i.PropTypes.string,prefixCls:i.PropTypes.string,disabled:i.PropTypes.bool,style:i.PropTypes.object,checkedChildren:i.PropTypes.any,unCheckedChildren:i.PropTypes.any,onChange:i.PropTypes.func},getDefaultProps:function(){return{prefixCls:"rc-switch",style:{},checkedChildren:null,unCheckedChildren:null,className:"",defaultChecked:!1,onChange:n}},getInitialState:function(){var e=this.props,t=!1;return t="checked"in e?!!e.checked:!!e.defaultChecked,{checked:t}},componentWillReceiveProps:function(e){"checked"in e&&this.setState({checked:!!e.checked})},toggle:function(){var e=!this.state.checked;"checked"in this.props||this.setState({checked:e}),this.props.onChange(e)},render:function(){var e,t=this.props,r=t.className,a=t.prefixCls,u=t.disabled,l=t.style,p=t.checkedChildren,c=t.unCheckedChildren,d=this.state.checked,f=s((e={},o(e,r,!!r),o(e,a,!0),o(e,a+"-checked",d),o(e,a+"-disabled",u),e));return i.createElement("span",{className:f,onClick:u?n:this.toggle,style:l},i.createElement("span",{className:a+"-inner"},d?p:c))}});e.exports=a},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){return e&&"object"!=typeof e&&(e={}),e?e:null}function i(e,t,r){e&&(e[t]=r)}function s(e,t){if(e)for(var r=t.length;r>=0;--r){var o=t.slice(0,r);if(e[o]&&(t===o||e[o].complete))return e[o]}}function a(e,t){return e&&"function"==typeof e.then?e.then(function(e){t(null,e)},function(e){t(e)}):void 0}var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},l=r(1),p=o(l),c=r(10),d=o(c),f=r(11),h=o(f),y=0,v=p["default"].PropTypes.oneOfType([p["default"].PropTypes.string,p["default"].PropTypes.node]),m=p["default"].createClass({displayName:"Async",propTypes:{cache:p["default"].PropTypes.any,ignoreAccents:p["default"].PropTypes.bool,ignoreCase:p["default"].PropTypes.bool,isLoading:p["default"].PropTypes.bool,loadOptions:p["default"].PropTypes.func.isRequired,loadingPlaceholder:p["default"].PropTypes.string,minimumInput:p["default"].PropTypes.number,noResultsText:p["default"].PropTypes.string,placeholder:v,searchPromptText:p["default"].PropTypes.string,searchingText:p["default"].PropTypes.string},getDefaultProps:function(){return{cache:!0,ignoreAccents:!0,ignoreCase:!0,loadingPlaceholder:"Loading...",minimumInput:0,searchingText:"Searching...",searchPromptText:"Type to search"}},getInitialState:function(){return{cache:n(this.props.cache),isLoading:!1,options:[]}},componentWillMount:function(){this._lastInput=""},componentDidMount:function(){this.loadOptions("")},componentWillReceiveProps:function(e){e.cache!==this.props.cache&&this.setState({cache:n(e.cache)})},focus:function(){this.refs.select.focus()},resetState:function(){this._currentRequestId=-1,this.setState({isLoading:!1,options:[]})},getResponseHandler:function(e){var t=this,r=this._currentRequestId=y++;return function(o,n){if(o)throw o;t.isMounted()&&(i(t.state.cache,e,n),r===t._currentRequestId&&t.setState({isLoading:!1,options:n&&n.options||[]}))}},loadOptions:function(e){if(this.props.ignoreAccents&&(e=(0,h["default"])(e)),this.props.ignoreCase&&(e=e.toLowerCase()),this._lastInput=e,e.length<this.props.minimumInput)return this.resetState();var t=s(this.state.cache,e);if(t)return this.setState({options:t.options});this.setState({isLoading:!0});var r=this.getResponseHandler(e);return a(this.props.loadOptions(e,r),r)},render:function(){var e=this.props.noResultsText,t=this.state,r=t.isLoading,o=t.options;this.props.isLoading&&(r=!0);var n=r?this.props.loadingPlaceholder:this.props.placeholder;return o.length||(this._lastInput.length<this.props.minimumInput&&(e=this.props.searchPromptText),r&&(e=this.props.searchingText)),p["default"].createElement(d["default"],u({},this.props,{ref:"select",isLoading:r,noResultsText:e,onInputChange:this.loadOptions,options:o,placeholder:n}))}});e.exports=m},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=r(1),i=o(n),s=r(3),a=o(s),u=i["default"].createClass({displayName:"Option",propTypes:{children:i["default"].PropTypes.node,className:i["default"].PropTypes.string,isDisabled:i["default"].PropTypes.bool,isFocused:i["default"].PropTypes.bool,isSelected:i["default"].PropTypes.bool,onFocus:i["default"].PropTypes.func,onSelect:i["default"].PropTypes.func,onUnfocus:i["default"].PropTypes.func,option:i["default"].PropTypes.object.isRequired},blockEvent:function(e){e.preventDefault(),e.stopPropagation(),"A"===e.target.tagName&&"href"in e.target&&(e.target.target?window.open(e.target.href,e.target.target):window.location.href=e.target.href)},handleMouseDown:function(e){e.preventDefault(),e.stopPropagation(),this.props.onSelect(this.props.option,e)},handleMouseEnter:function(e){this.onFocus(e)},handleMouseMove:function(e){this.onFocus(e)},handleTouchEnd:function(e){this.dragging||this.handleMouseDown(e)},handleTouchMove:function(e){this.dragging=!0},handleTouchStart:function(e){this.dragging=!1},onFocus:function(e){this.props.isFocused||this.props.onFocus(this.props.option,e)},render:function(){var e=this.props.option,t=(0,a["default"])(this.props.className,e.className);return e.disabled?i["default"].createElement("div",{className:t,onMouseDown:this.blockEvent,onClick:this.blockEvent},this.props.children):i["default"].createElement("div",{className:t,style:e.style,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,title:e.title},this.props.children)}});e.exports=u},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=r(1),i=o(n),s=r(3),a=o(s),u=i["default"].createClass({displayName:"Value",propTypes:{children:i["default"].PropTypes.node,disabled:i["default"].PropTypes.bool,onClick:i["default"].PropTypes.func,onRemove:i["default"].PropTypes.func,value:i["default"].PropTypes.object.isRequired},handleMouseDown:function(e){return"mousedown"!==e.type||0===e.button?this.props.onClick?(e.stopPropagation(),void this.props.onClick(this.props.value,e)):void(this.props.value.href&&e.stopPropagation()):void 0},onRemove:function(e){e.preventDefault(),e.stopPropagation(),this.props.onRemove(this.props.value)},handleTouchEndRemove:function(e){this.dragging||this.onRemove(e)},handleTouchMove:function(e){this.dragging=!0},handleTouchStart:function(e){this.dragging=!1},renderRemoveIcon:function(){return!this.props.disabled&&this.props.onRemove?i["default"].createElement("span",{className:"Select-value-icon",onMouseDown:this.onRemove,onTouchEnd:this.handleTouchEndRemove,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove},""):void 0},renderLabel:function(){var e="Select-value-label";return this.props.onClick||this.props.value.href?i["default"].createElement("a",{className:e,href:this.props.value.href,target:this.props.value.target,onMouseDown:this.handleMouseDown,onTouchEnd:this.handleMouseDown},this.props.children):i["default"].createElement("span",{className:e},this.props.children)},render:function(){return i["default"].createElement("div",{className:(0,a["default"])("Select-value",this.props.value.className),style:this.props.value.style,title:this.props.value.title},this.renderRemoveIcon(),this.renderLabel())}});e.exports=u},function(e,t,r){"use strict";var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},n=r(1),i={position:"absolute",visibility:"hidden",height:0,width:0,overflow:"scroll",whiteSpace:"nowrap"},s="undefined"!=typeof window?function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}().bind(window):void 0,a=n.createClass({displayName:"AutosizeInput",propTypes:{value:n.PropTypes.any,defaultValue:n.PropTypes.any,onChange:n.PropTypes.func,style:n.PropTypes.object,className:n.PropTypes.string,minWidth:n.PropTypes.oneOfType([n.PropTypes.number,n.PropTypes.string]),inputStyle:n.PropTypes.object,inputClassName:n.PropTypes.string},getDefaultProps:function(){return{minWidth:1}},getInitialState:function(){return{inputWidth:this.props.minWidth}},componentDidMount:function(){this.copyInputStyles(),this.updateInputWidth()},componentDidUpdate:function(){this.queueUpdateInputWidth()},copyInputStyles:function(){if(this.isMounted()&&window.getComputedStyle){var e=window.getComputedStyle(this.refs.input),t=this.refs.sizer;if(t.style.fontSize=e.fontSize,t.style.fontFamily=e.fontFamily,t.style.fontWeight=e.fontWeight,t.style.fontStyle=e.fontStyle,t.style.letterSpacing=e.letterSpacing,this.props.placeholder){var r=this.refs.placeholderSizer;r.style.fontSize=e.fontSize,r.style.fontFamily=e.fontFamily,r.style.fontWeight=e.fontWeight,r.style.fontStyle=e.fontStyle,r.style.letterSpacing=e.letterSpacing}}},queueUpdateInputWidth:function(){s(this.updateInputWidth)},updateInputWidth:function(){if(this.isMounted()&&"undefined"!=typeof this.refs.sizer.scrollWidth){var e=void 0;e=this.props.placeholder?Math.max(this.refs.sizer.scrollWidth,this.refs.placeholderSizer.scrollWidth)+2:this.refs.sizer.scrollWidth+2,e<this.props.minWidth&&(e=this.props.minWidth),e!==this.state.inputWidth&&this.setState({inputWidth:e})}},getInput:function(){return this.refs.input},focus:function(){this.refs.input.focus()},blur:function(){this.refs.input.blur()},select:function(){this.refs.input.select()},render:function(){var e=(this.props.defaultValue||this.props.value||"").replace(/\&/g,"&amp;").replace(/ /g,"&nbsp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;"),t=this.props.style||{};t.display||(t.display="inline-block");var r=o({},this.props.inputStyle);r.width=this.state.inputWidth,r.boxSizing="content-box";var s=this.props.placeholder?n.createElement("div",{ref:"placeholderSizer",style:i},this.props.placeholder):null;return n.createElement("div",{className:this.props.className,style:t},n.createElement("input",o({},this.props,{ref:"input",className:this.props.inputClassName,style:r})),n.createElement("div",{ref:"sizer",style:i,dangerouslySetInnerHTML:{__html:e}}),s)}});e.exports=a},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},l=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var p=r(1),c=o(p),d=r(13),f=o(d),h=r(12),y=o(h),v=function(e){function t(){var e,r,o,n;i(this,t);for(var a=arguments.length,u=Array(a),l=0;a>l;l++)u[l]=arguments[l];return r=o=s(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),o.state={toasts:[],toastId:0,previousMessage:null},n=r,s(o,n)}return a(t,e),l(t,[{key:"error",value:function(e,t,r){this._notify(this.props.toastType.error,e,t,r)}},{key:"info",value:function(e,t,r){this._notify(this.props.toastType.info,e,t,r)}},{key:"success",value:function(e,t,r){this._notify(this.props.toastType.success,e,t,r)}},{key:"warning",value:function(e,t,r){this._notify(this.props.toastType.warning,e,t,r)}},{key:"clear",value:function(){var e=this;Object.keys(this.refs).forEach(function(t){e.refs[t].hideToast(!1)})}},{key:"_notify",value:function(e,t,r){var o=this,i=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];if(!this.props.preventDuplicates||this.state.previousMessage!==t){var s=this.state.toastId++,a=s,u=(0,f["default"])(i,{$merge:{type:e,title:r,message:t,toastId:a,key:s,ref:"toasts__"+s,handleOnClick:function(e){return"function"==typeof i.handleOnClick&&i.handleOnClick(),o._handle_toast_on_click(e)},handleRemove:this._handle_toast_remove.bind(this)}}),l=n({},""+(this.props.newestOnTop?"$unshift":"$push"),[u]),p=(0,f["default"])(this.state,{toasts:l,previousMessage:{$set:t}});this.setState(p)}}},{key:"_handle_toast_on_click",value:function(e){this.props.onClick(e),e.defaultPrevented||(e.preventDefault(),e.stopPropagation())}},{key:"_handle_toast_remove",value:function(e){var t=this,r=""+(this.props.newestOnTop?"reduceRight":"reduce");this.state.toasts[r](function(r,o,n){return r||o.toastId!==e?!1:(t.setState((0,f["default"])(t.state,{toasts:{$splice:[[n,1]]}})),!0)},!1)}},{key:"render",value:function(){var e=this;return c["default"].createElement("div",u({},this.props,{"aria-live":"polite",role:"alert"}),this.state.toasts.map(function(t){return e.props.toastMessageFactory(t)}))}}]),t}(p.Component);v.propTypes={toastType:p.PropTypes.shape({error:p.PropTypes.string,info:p.PropTypes.string,success:p.PropTypes.string,warning:p.PropTypes.string}).isRequired,id:p.PropTypes.string.isRequired,toastMessageFactory:p.PropTypes.func.isRequired,preventDuplicates:p.PropTypes.bool.isRequired,newestOnTop:p.PropTypes.bool.isRequired,onClick:p.PropTypes.func.isRequired},v.defaultProps={toastType:{error:"error",info:"info",success:"success",warning:"warning"},id:"toast-container",toastMessageFactory:c["default"].createFactory(y["default"]),preventDuplicates:!1,newestOnTop:!0,onClick:function(){}},t["default"]=v},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(48),i=o(n),s=r(4),a=o(s),u=r(46),l=o(u),p=17,c=Object.prototype.toString;t["default"]={getDefaultProps:function(){return{transition:null,showAnimation:"animated bounceIn",hideAnimation:"animated bounceOut",timeOut:5e3,extendedTimeOut:1e3}},componentWillMount:function(){this.classNameQueue=[],this.isHiding=!1,this.intervalId=null},componentDidMount:function(){var e=this;this._is_mounted=!0,this._show();var t=a["default"].findDOMNode(this),r=function o(){e.isHiding&&(e._set_is_hiding(!1),i["default"].removeEndEventListener(t,o),e._handle_remove())};i["default"].addEndEventListener(t,r),this.props.timeOut>0&&this._set_interval_id(setTimeout(this.hideToast,this.props.timeOut))},componentWillUnmount:function(){this._is_mounted=!1,this.intervalId&&clearTimeout(this.intervalId)},_set_transition:function(e){var t=e?"leave":"enter",r=a["default"].findDOMNode(this),o=this.props.transition+"-"+t,n=o+"-active",s=function u(e){if(!e||e.target===r){var t=(0,l["default"])(r);t.remove(o),t.remove(n),i["default"].removeEndEventListener(r,u)}};i["default"].addEndEventListener(r,s),(0,l["default"])(r).add(o),this._queue_class(n)},_clear_transition:function(e){var t=a["default"].findDOMNode(this),r=e?"leave":"enter",o=this.props.transition+"-"+r,n=o+"-active",i=(0,l["default"])(t);i.remove(o),i.remove(n)},_set_animation:function(e){var t=a["default"].findDOMNode(this),r=this._get_animation_classes(e),o=function n(e){e&&e.target!==t||(r.forEach(function(e){return(0,l["default"])(t).remove(e)}),i["default"].removeEndEventListener(t,n))};i["default"].addEndEventListener(t,o),r.forEach(function(e){return(0,l["default"])(t).add(e)})},_get_animation_classes:function(e){var t=e?this.props.hideAnimation:this.props.showAnimation;return"[object Array]"===c.call(t)?t:"string"==typeof t?t.split(" "):void 0},_clear_animation:function(e){var t=a["default"].findDOMNode(this),r=this._get_animation_classes(e);r.forEach(function(e){return(0,l["default"])(t).remove(e)})},_queue_class:function(e){this.classNameQueue.push(e),this.timeout||(this.timeout=setTimeout(this._flush_class_name_queue,p))},_flush_class_name_queue:function(){var e=this;this._is_mounted&&!function(){var t=a["default"].findDOMNode(e);e.classNameQueue.forEach(function(e){return(0,l["default"])(t).add(e)})}(),this.classNameQueue.length=0,this.timeout=null},_show:function(){this.props.transition?this._set_transition():this.props.showAnimation&&this._set_animation()},handleMouseEnter:function(){clearTimeout(this.intervalId),this._set_interval_id(null),this.isHiding&&(this._set_is_hiding(!1),this.props.hideAnimation?this._clear_animation(!0):this.props.transition&&this._clear_transition(!0))},handleMouseLeave:function(){!this.isHiding&&(this.props.timeOut>0||this.props.extendedTimeOut>0)&&this._set_interval_id(setTimeout(this.hideToast,this.props.extendedTimeOut))},hideToast:function(e){this.isHiding||null===this.intervalId&&!e||(this._set_is_hiding(!0),this.props.transition?this._set_transition(!0):this.props.hideAnimation?this._set_animation(!0):this._handle_remove())},_set_interval_id:function(e){this.intervalId=e},_set_is_hiding:function(e){this.isHiding=e}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){e[t.showMethod]({duration:t.showDuration,easing:t.showEasing})}Object.defineProperty(t,"__esModule",{value:!0});var i=r(4),s=o(i);t["default"]={getDefaultProps:function(){return{style:{display:"none"},showMethod:"fadeIn",showDuration:300,showEasing:"swing",hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",timeOut:5e3,extendedTimeOut:1e3}},getInitialState:function(){return{intervalId:null,isHiding:!1}},componentDidMount:function(){n(this._get_$_node(),this.props),this.props.timeOut>0&&this._set_interval_id(setTimeout(this.hideToast,this.props.timeOut))},handleMouseEnter:function(){clearTimeout(this.state.intervalId),this._set_interval_id(null),this._set_is_hiding(!1),n(this._get_$_node().stop(!0,!0),this.props)},handleMouseLeave:function(){!this.state.isHiding&&(this.props.timeOut>0||this.props.extendedTimeOut>0)&&this._set_interval_id(setTimeout(this.hideToast,this.props.extendedTimeOut))},hideToast:function(e){this.state.isHiding||null===this.state.intervalId&&!e||(this.setState({isHiding:!0}),this._get_$_node()[this.props.hideMethod]({duration:this.props.hideDuration,easing:this.props.hideEasing,complete:this._handle_remove}))},_get_$_node:function(){return jQuery(s["default"].findDOMNode(this))},_set_interval_id:function(e){this.setState({intervalId:e})},_set_is_hiding:function(e){this.setState({isHiding:e})}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ToastMessage=t.ToastContainer=void 0;var n=r(42),i=o(n),s=r(12),a=o(s);t.ToastContainer=i["default"],t.ToastMessage=a["default"]},function(e,t){function r(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,o=e.length;o>r;r++)if(e[r]===t)return r;return-1}function o(e){if(!(this instanceof o))return new o(e);e||(e={}),e.nodeType&&(e={el:e}),this.opts=e,this.el=e.el||document.body,"object"!=typeof this.el&&(this.el=document.querySelector(this.el))}e.exports=function(e){return new o(e)},o.prototype.add=function(e){var t=this.el;if(t){if(""===t.className)return t.className=e;var o=t.className.split(" ");return r(o,e)>-1?o:(o.push(e),t.className=o.join(" "),o)}},o.prototype.remove=function(e){var t=this.el;if(t&&""!==t.className){var o=t.className.split(" "),n=r(o,e);return n>-1&&o.splice(n,1),t.className=o.join(" "),o}},o.prototype.has=function(e){var t=this.el;if(t){var o=t.className.split(" ");return r(o,e)>-1}},o.prototype.toggle=function(e){var t=this.el;t&&(this.has(e)?this.remove(e):this.add(e))}},function(e,t){"use strict";function r(e,t){if(null==e)throw new TypeError("Object.assign target cannot be null or undefined");for(var r=Object(e),o=Object.prototype.hasOwnProperty,n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i){var s=Object(i);for(var a in s)o.call(s,a)&&(r[a]=s[a])}}return r}e.exports=r},function(e,t,r){"use strict";function o(){var e=document.createElement("div"),t=e.style;"AnimationEvent"in window||delete a.animationend.animation,"TransitionEvent"in window||delete a.transitionend.transition;for(var r in a){var o=a[r];for(var n in o)if(n in t){u.push(o[n]);break}}}function n(e,t,r){e.addEventListener(t,r,!1)}function i(e,t,r){e.removeEventListener(t,r,!1)}var s=r(50),a={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},u=[];s.canUseDOM&&o();var l={addEndEventListener:function(e,t){return 0===u.length?void window.setTimeout(t,0):void u.forEach(function(r){n(e,r,t)})},removeEndEventListener:function(e,t){0!==u.length&&u.forEach(function(r){i(e,r,t)})}};e.exports=l},function(e,t,r){(function(t){"use strict";function o(e){return Array.isArray(e)?e.concat():e&&"object"==typeof e?s(new e.constructor,e):e}function n(e,r,o){Array.isArray(e)?void 0:"production"!==t.env.NODE_ENV?u(!1,"update(): expected target of %s to be an array; got %s.",o,e):u(!1);var n=r[o];Array.isArray(n)?void 0:"production"!==t.env.NODE_ENV?u(!1,"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",o,n):u(!1)}function i(e,r){if("object"!=typeof r?"production"!==t.env.NODE_ENV?u(!1,"update(): You provided a key path to update() that did not contain one of %s. Did you forget to include {%s: ...}?",v.join(", "),f):u(!1):void 0,l.call(r,f))return 1!==Object.keys(r).length?"production"!==t.env.NODE_ENV?u(!1,"Cannot have more than one key in an object with %s",f):u(!1):void 0,r[f];var a=o(e);if(l.call(r,h)){var g=r[h];g&&"object"==typeof g?void 0:"production"!==t.env.NODE_ENV?u(!1,"update(): %s expects a spec of type 'object'; got %s",h,g):u(!1),a&&"object"==typeof a?void 0:"production"!==t.env.NODE_ENV?u(!1,"update(): %s expects a target of type 'object'; got %s",h,a):u(!1),s(a,r[h])}l.call(r,p)&&(n(e,r,p),r[p].forEach(function(e){a.push(e)})),l.call(r,c)&&(n(e,r,c),r[c].forEach(function(e){a.unshift(e)})),l.call(r,d)&&(Array.isArray(e)?void 0:"production"!==t.env.NODE_ENV?u(!1,"Expected %s target to be an array; got %s",d,e):u(!1),Array.isArray(r[d])?void 0:"production"!==t.env.NODE_ENV?u(!1,"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",d,r[d]):u(!1),r[d].forEach(function(e){Array.isArray(e)?void 0:"production"!==t.env.NODE_ENV?u(!1,"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",d,r[d]):u(!1),a.splice.apply(a,e)})),l.call(r,y)&&("function"!=typeof r[y]?"production"!==t.env.NODE_ENV?u(!1,"update(): expected spec of %s to be a function; got %s.",y,r[y]):u(!1):void 0,a=r[y](a));for(var b in r)m.hasOwnProperty(b)&&m[b]||(a[b]=i(e[b],r[b]));return a}var s=r(47),a=r(52),u=r(51),l={}.hasOwnProperty,p=a({$push:null}),c=a({$unshift:null}),d=a({$splice:null}),f=a({$set:null}),h=a({$merge:null}),y=a({$apply:null}),v=[p,c,d,f,h,y],m={};v.forEach(function(e){m[e]=!0}),e.exports=i}).call(t,r(15))},function(e,t){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=o},function(e,t,r){(function(t){"use strict";function r(e,r,o,n,i,s,a,u){if("production"!==t.env.NODE_ENV&&void 0===r)throw new Error("invariant requires an error message argument");if(!e){var l;if(void 0===r)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[o,n,i,s,a,u],c=0;l=new Error(r.replace(/%s/g,function(){return p[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}e.exports=r}).call(t,r(15))},function(e,t){"use strict";var r=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};e.exports=r},function(e,t,r){function o(e,t){for(var r=0;r<e.length;r++){var o=e[r],n=f[o.id];if(n){n.refs++;for(var i=0;i<n.parts.length;i++)n.parts[i](o.parts[i]);for(;i<o.parts.length;i++)n.parts.push(l(o.parts[i],t))}else{for(var s=[],i=0;i<o.parts.length;i++)s.push(l(o.parts[i],t));f[o.id]={id:o.id,refs:1,parts:s}}}}function n(e){for(var t=[],r={},o=0;o<e.length;o++){var n=e[o],i=n[0],s=n[1],a=n[2],u=n[3],l={css:s,media:a,sourceMap:u};r[i]?r[i].parts.push(l):t.push(r[i]={id:i,parts:[l]})}return t}function i(e,t){var r=v(),o=b[b.length-1];if("top"===e.insertAt)o?o.nextSibling?r.insertBefore(t,o.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(t)}}function s(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",i(e,t),t}function u(e){var t=document.createElement("link");return t.rel="stylesheet",i(e,t),t}function l(e,t){var r,o,n;if(t.singleton){var i=g++;r=m||(m=a(t)),o=p.bind(null,r,i,!1),n=p.bind(null,r,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=u(t),o=d.bind(null,r),n=function(){s(r),r.href&&URL.revokeObjectURL(r.href)}):(r=a(t),o=c.bind(null,r),n=function(){s(r)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else n()}}function p(e,t,r,o){var n=r?"":o.css;if(e.styleSheet)e.styleSheet.cssText=E(t,n);else{var i=document.createTextNode(n),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function c(e,t){var r=t.css,o=t.media;t.sourceMap;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function d(e,t){var r=t.css,o=(t.media,t.sourceMap);o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var n=new Blob([r],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(n),i&&URL.revokeObjectURL(i)}var f={},h=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},y=h(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),v=h(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,g=0,b=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=y()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var r=n(e);return o(r,t),function(e){for(var i=[],s=0;s<r.length;s++){var a=r[s],u=f[a.id];u.refs--,i.push(u)}if(e){var l=n(e);o(l,t)}for(var s=0;s<i.length;s++){var u=i[s];if(0===u.refs){for(var p=0;p<u.parts.length;p++)u.parts[p]();delete f[u.id]}}}};var E=function(){var e=[];return function(t,r){return e[t]=r,e.filter(Boolean).join("\n")}}()},function(e,t,r){var o=r(35);"string"==typeof o&&(o=[[e.id,o,""]]);r(53)(o,{});o.locals&&(e.exports=o.locals)},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){(function(t){e.exports=t}).call(t,{})}])});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy9yZWFjdC1ib290c3RyYXAtdGFibGUuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDBkNmEzNzNmMjgxZTY1NDE1YzZiIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwge1wicm9vdFwiOlwiUmVhY3RcIixcImNvbW1vbmpzMlwiOlwicmVhY3RcIixcImNvbW1vbmpzXCI6XCJyZWFjdFwiLFwiYW1kXCI6XCJyZWFjdFwifSIsIndlYnBhY2s6Ly8vLi9zcmMvQ29uc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jbGFzc25hbWVzL2luZGV4LmpzIiwid2VicGFjazovLy9leHRlcm5hbCB7XCJyb290XCI6XCJSZWFjdERPTVwiLFwiY29tbW9uanMyXCI6XCJyZWFjdC1kb21cIixcImNvbW1vbmpzXCI6XCJyZWFjdC1kb21cIixcImFtZFwiOlwicmVhY3QtZG9tXCJ9Iiwid2VicGFjazovLy8uL3NyYy91dGlsLmpzIiwid2VicGFjazovLy8uL3NyYy9FZGl0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL05vdGlmaWNhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc3RvcmUvVGFibGVEYXRhU3RvcmUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYy1zd2l0Y2gvbGliL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtc2VsZWN0L2xpYi9TZWxlY3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1zZWxlY3QvbGliL3V0aWxzL3N0cmlwRGlhY3JpdGljcy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXRvYXN0ci9saWIvVG9hc3RNZXNzYWdlL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QtdG9hc3RyL34vcmVhY3QtYWRkb25zLXVwZGF0ZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9ldmVudHMvZXZlbnRzLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvQm9vdHN0cmFwVGFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0ZpbHRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvU2VsZWN0Um93SGVhZGVyQ29sdW1uLmpzIiwid2VicGFjazovLy8uL3NyYy9UYWJsZUJvZHkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RhYmxlQ29sdW1uLmpzIiwid2VicGFjazovLy8uL3NyYy9UYWJsZUVkaXRDb2x1bW4uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RhYmxlRmlsdGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9UYWJsZUhlYWRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvVGFibGVIZWFkZXJDb2x1bW4uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RhYmxlUm93LmpzIiwid2VicGFjazovLy8uL3NyYy9jc3ZfZXhwb3J0X3V0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZpbGVzYXZlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZmlsdGVycy9EYXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9maWx0ZXJzL051bWJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZmlsdGVycy9TZWxlY3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZpbHRlcnMvVGV4dC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnaW5hdGlvbi9QYWdlQnV0dG9uLmpzIiwid2VicGFjazovLy8uL3NyYy9wYWdpbmF0aW9uL1BhZ2luYXRpb25MaXN0LmpzIiwid2VicGFjazovLy8uL3NyYy90b29sYmFyL1Rvb2xCYXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYy1zd2l0Y2gvYXNzZXRzL2luZGV4LmNzcyIsIndlYnBhY2s6Ly8vLi9+L2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzIiwid2VicGFjazovLy8uL34vcmMtc3dpdGNoL2xpYi9Td2l0Y2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1zZWxlY3QvbGliL0FzeW5jLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtc2VsZWN0L2xpYi9PcHRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1zZWxlY3QvbGliL1ZhbHVlLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtc2VsZWN0L34vcmVhY3QtaW5wdXQtYXV0b3NpemUvbGliL0F1dG9zaXplSW5wdXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC10b2FzdHIvbGliL1RvYXN0Q29udGFpbmVyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QtdG9hc3RyL2xpYi9Ub2FzdE1lc3NhZ2UvYW5pbWF0aW9uTWl4aW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC10b2FzdHIvbGliL1RvYXN0TWVzc2FnZS9qUXVlcnlNaXhpbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXRvYXN0ci9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC10b2FzdHIvfi9lbGVtZW50LWNsYXNzL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL09iamVjdC5hc3NpZ24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvUmVhY3RUcmFuc2l0aW9uRXZlbnRzLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL3VwZGF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L34vZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9+L2ZianMvbGliL2ludmFyaWFudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L34vZmJqcy9saWIva2V5T2YuanMiLCJ3ZWJwYWNrOi8vLy4vfi9zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzIiwid2VicGFjazovLy8uL34vcmMtc3dpdGNoL2Fzc2V0cy9pbmRleC5jc3M/N2M5NCIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vYW1kLWRlZmluZS5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vYW1kLW9wdGlvbnMuanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwicmVxdWlyZSIsImRlZmluZSIsImFtZCIsInRoaXMiLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzFfXyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNF9fIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiX0Jvb3RzdHJhcFRhYmxlIiwiX0Jvb3RzdHJhcFRhYmxlMiIsIl9UYWJsZUhlYWRlckNvbHVtbiIsIl9UYWJsZUhlYWRlckNvbHVtbjIiLCJfc3RvcmVUYWJsZURhdGFTdG9yZSIsIndpbmRvdyIsIkJvb3RzdHJhcFRhYmxlIiwiVGFibGVIZWFkZXJDb2x1bW4iLCJUYWJsZURhdGFTZXQiLCJTT1JUX0RFU0MiLCJTT1JUX0FTQyIsIlNJWkVfUEVSX1BBR0UiLCJORVhUX1BBR0UiLCJMQVNUX1BBR0UiLCJQUkVfUEFHRSIsIkZJUlNUX1BBR0UiLCJST1dfU0VMRUNUX0JHX0NPTE9SIiwiUk9XX1NFTEVDVF9OT05FIiwiUk9XX1NFTEVDVF9TSU5HTEUiLCJST1dfU0VMRUNUX01VTFRJIiwiQ0VMTF9FRElUX05PTkUiLCJDRUxMX0VESVRfQ0xJQ0siLCJDRUxMX0VESVRfREJDTElDSyIsIlNJWkVfUEVSX1BBR0VfTElTVCIsIlBBR0lOQVRJT05fU0laRSIsIk5PX0RBVEFfVEVYVCIsIlNIT1dfT05MWV9TRUxFQ1QiLCJTSE9XX0FMTCIsIkZJTFRFUl9ERUxBWSIsIkZJTFRFUl9UWVBFIiwiVEVYVCIsIlNFTEVDVCIsIk5VTUJFUiIsIkRBVEUiLCJDVVNUT00iLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fIiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18iLCJjbGFzc05hbWVzIiwiY2xhc3NlcyIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJhcmciLCJhcmdUeXBlIiwicHVzaCIsIkFycmF5IiwiaXNBcnJheSIsImFwcGx5Iiwia2V5IiwiaGFzT3duIiwiam9pbiIsImhhc093blByb3BlcnR5IiwidW5kZWZpbmVkIiwiX3JlYWN0IiwiX3JlYWN0MiIsIl9Db25zdCIsIl9Db25zdDIiLCJfY2xhc3NuYW1lcyIsIl9jbGFzc25hbWVzMiIsInJlbmRlclNvcnRDYXJldCIsIm9yZGVyIiwid3JhcCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImlubmVyIiwic3R5bGUiLCJtYXJnaW4iLCJhcHBlbmRDaGlsZCIsInJlbmRlclJlYWN0U29ydENhcmV0Iiwib3JkZXJDbGFzcyIsImRyb3B1cCIsImdldFNjcm9sbEJhcldpZHRoIiwid2lkdGgiLCJoZWlnaHQiLCJvdXRlciIsInBvc2l0aW9uIiwidG9wIiwibGVmdCIsInZpc2liaWxpdHkiLCJvdmVyZmxvdyIsImJvZHkiLCJ3MSIsIm9mZnNldFdpZHRoIiwidzIiLCJjbGllbnRXaWR0aCIsInJlbW92ZUNoaWxkIiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJ0YXJnZXQiLCJzb3VyY2UiLCJwcm90b3R5cGUiLCJfcmNTd2l0Y2giLCJfcmNTd2l0Y2gyIiwiX3JlYWN0U2VsZWN0IiwiX3JlYWN0U2VsZWN0MiIsIkVkaXRvciIsImVkaXRhYmxlIiwiYXR0ciIsImZvcm1hdCIsImVkaXRvckNsYXNzIiwiZGVmYXVsdFZhbHVlIiwidHlwZSIsImRpc2FibGVkIiwib3B0aW9ucyIsInZhbHVlcyIsInJvd1ZhbHVlIiwibWFwIiwiZCIsImNvbHMiLCJyb3dzIiwia2V5VXBIYW5kbGVyIiwib25LZXlEb3duIiwic2F2ZUJ0biIsImUiLCJrZXlDb2RlIiwib25DbGljayIsIl92YWx1ZXMiLCJyZXBsYWNlIiwiY2hlY2tlZCIsInRvU3RyaW5nIiwic3BsaXQiLCJkZWZhdWx0Q2hlY2tlZCIsIl92YWx1ZXMyIiwibXVsdGlPcHQiLCJtdWx0aSIsInNpbXBsZVZhbHVlIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsImNvbnN0cnVjdG9yIiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwicHJvcHMiLCJkZXNjcmlwdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiX2dldCIsIl94IiwiX3gyIiwiX3gzIiwiX2FnYWluIiwib2JqZWN0IiwicHJvcGVydHkiLCJyZWNlaXZlciIsIkZ1bmN0aW9uIiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImdldHRlciIsImdldCIsInBhcmVudCIsImdldFByb3RvdHlwZU9mIiwiX3JlYWN0VG9hc3RyIiwiVG9hc3RyTWVzc2FnZUZhY3RvcnkiLCJjcmVhdGVGYWN0b3J5IiwiVG9hc3RNZXNzYWdlIiwiYW5pbWF0aW9uIiwiTm90aWZpY2F0aW9uIiwiX1JlYWN0JENvbXBvbmVudCIsIm1zZyIsInRpdGxlIiwicmVmcyIsInRvYXN0ciIsIm1vZGUiLCJ0aW1lT3V0IiwiZXh0ZW5kZWRUaW1lT3V0Iiwic2hvd0FuaW1hdGlvbiIsImhpZGVBbmltYXRpb24iLCJUb2FzdENvbnRhaW5lciIsInJlZiIsInRvYXN0TWVzc2FnZUZhY3RvcnkiLCJDb21wb25lbnQiLCJfc29ydCIsImFyciIsInNvcnRGaWVsZCIsInNvcnRGdW5jIiwidG9Mb3dlckNhc2UiLCJzb3J0IiwiYSIsImIiLCJFdmVudEVtaXR0ZXIiLCJfRXZlbnRFbWl0dGVyIiwiZGF0YSIsImVtaXQiLCJUYWJsZURhdGFTdG9yZSIsImNvbEluZm9zIiwiZmlsdGVyZWREYXRhIiwiaXNPbkZpbHRlciIsImZpbHRlck9iaiIsInNlYXJjaFRleHQiLCJzb3J0T2JqIiwicGFnZU9iaiIsInNlbGVjdGVkIiwibXVsdGlDb2x1bW5TZWFyY2giLCJzaG93T25seVNlbGVjdGVkIiwicmVtb3RlIiwia2V5RmllbGQiLCJlbmFibGVQYWdpbmF0aW9uIiwiaXNQYWdpbmF0aW9uIiwiZmlsdGVyIiwic2VhcmNoIiwic2VsZWN0ZWRSb3dLZXlzIiwiX3RoaXMiLCJyb3ciLCJyZXN1bHQiLCJmaW5kIiwieCIsImN1cnJlbnREaXNwbGF5RGF0YSIsImdldEN1cnJlbnREaXNwbGF5RGF0YSIsIl9wYWdlIiwic2l6ZVBlclBhZ2UiLCJlbmQiLCJzdGFydCIsIm5ld1ZhbCIsInJvd0luZGV4IiwiZmllbGROYW1lIiwicm93S2V5Q2FjaGUiLCJmb3JFYWNoIiwibmV3T2JqIiwiY29uc29sZSIsImxvZyIsInVuc2hpZnQiLCJyb3dLZXkiLCJpbmRleE9mIiwiX3RoaXMyIiwia2V5cyIsInZhbGlkIiwiZmlsdGVyVmFsIiwidGFyZ2V0VmFsIiwibnVtYmVyIiwiX2NvbEluZm9zJGtleSIsImZpbHRlckZvcm1hdHRlZCIsImZvcm1hdEV4dHJhRGF0YSIsImZpbHRlck51bWJlciIsImNvbXBhcmF0b3IiLCJmaWx0ZXJEYXRlIiwiZmlsdGVyQ3VzdG9tIiwiZmlsdGVyVGV4dCIsImVycm9yIiwiZ2V0RGF0ZSIsImdldE1vbnRoIiwiZ2V0RnVsbFllYXIiLCJjYWxsYmFja0luZm8iLCJjYWxsYmFjayIsImNhbGxiYWNrUGFyYW1ldGVycyIsIl90aGlzMyIsInRyaW0iLCJzZWFyY2hUZXh0QXJyYXkiLCJrZXlzTGVuZ3RoIiwiX2NvbEluZm9zJGtleTIiLCJzZWFyY2hhYmxlIiwiaGlkZGVuIiwiaiIsInRleHRMZW5ndGgiLCJfZGF0YSIsInN0cmluZ2lmeVZhbHVlIiwiSlNPTiIsInN0cmluZ2lmeSIsIl9yZWFjdERvbSIsIl9yZWFjdERvbTIiLCJfcmVhY3RJbnB1dEF1dG9zaXplIiwiX3JlYWN0SW5wdXRBdXRvc2l6ZTIiLCJfdXRpbHNTdHJpcERpYWNyaXRpY3MiLCJfdXRpbHNTdHJpcERpYWNyaXRpY3MyIiwiX0FzeW5jIiwiX0FzeW5jMiIsIl9PcHRpb24iLCJfT3B0aW9uMiIsIl9WYWx1ZSIsIl9WYWx1ZTIiLCJzdHJpbmdPck5vZGUiLCJQcm9wVHlwZXMiLCJvbmVPZlR5cGUiLCJzdHJpbmciLCJub2RlIiwiU2VsZWN0IiwiY3JlYXRlQ2xhc3MiLCJkaXNwbGF5TmFtZSIsInByb3BUeXBlcyIsImFkZExhYmVsVGV4dCIsImFsbG93Q3JlYXRlIiwiYm9vbCIsImF1dG9CbHVyIiwiYXV0b2ZvY3VzIiwiYmFja3NwYWNlUmVtb3ZlcyIsImNsZWFyQWxsVGV4dCIsImNsZWFyVmFsdWVUZXh0IiwiY2xlYXJhYmxlIiwiZGVsaW1pdGVyIiwiZXNjYXBlQ2xlYXJzVmFsdWUiLCJmaWx0ZXJPcHRpb24iLCJmdW5jIiwiZmlsdGVyT3B0aW9ucyIsImFueSIsImlnbm9yZUFjY2VudHMiLCJpZ25vcmVDYXNlIiwiaW5wdXRQcm9wcyIsImlzTG9hZGluZyIsImxhYmVsS2V5IiwibWF0Y2hQb3MiLCJtYXRjaFByb3AiLCJtZW51QnVmZmVyIiwibWVudUNvbnRhaW5lclN0eWxlIiwibWVudVN0eWxlIiwibmFtZSIsIm5ld09wdGlvbkNyZWF0b3IiLCJub1Jlc3VsdHNUZXh0Iiwib25CbHVyIiwib25CbHVyUmVzZXRzSW5wdXQiLCJvbkNoYW5nZSIsIm9uQ2xvc2UiLCJvbkZvY3VzIiwib25JbnB1dENoYW5nZSIsIm9uTWVudVNjcm9sbFRvQm90dG9tIiwib25PcGVuIiwib25WYWx1ZUNsaWNrIiwib3B0aW9uQ29tcG9uZW50Iiwib3B0aW9uUmVuZGVyZXIiLCJhcnJheSIsInBsYWNlaG9sZGVyIiwicmVxdWlyZWQiLCJzY3JvbGxNZW51SW50b1ZpZXciLCJ0YWJJbmRleCIsInZhbHVlQ29tcG9uZW50IiwidmFsdWVLZXkiLCJ2YWx1ZVJlbmRlcmVyIiwid3JhcHBlclN0eWxlIiwic3RhdGljcyIsIkFzeW5jIiwiZ2V0RGVmYXVsdFByb3BzIiwiZ2V0SW5pdGlhbFN0YXRlIiwiaW5wdXRWYWx1ZSIsImlzRm9jdXNlZCIsImlzT3BlbiIsImlzUHNldWRvRm9jdXNlZCIsImhhbmRsZVJlcXVpcmVkIiwiY29tcG9uZW50RGlkTW91bnQiLCJmb2N1cyIsImNvbXBvbmVudFdpbGxVcGRhdGUiLCJuZXh0UHJvcHMiLCJuZXh0U3RhdGUiLCJzdGF0ZSIsImhhbmRsZXIiLCJjb21wb25lbnREaWRVcGRhdGUiLCJwcmV2UHJvcHMiLCJwcmV2U3RhdGUiLCJtZW51IiwiZm9jdXNlZCIsImhhc1Njcm9sbGVkVG9PcHRpb24iLCJmb2N1c2VkT3B0aW9uTm9kZSIsImZpbmRET01Ob2RlIiwibWVudU5vZGUiLCJzY3JvbGxUb3AiLCJvZmZzZXRUb3AiLCJfc2Nyb2xsVG9Gb2N1c2VkT3B0aW9uT25VcGRhdGUiLCJmb2N1c2VkRE9NIiwibWVudURPTSIsImZvY3VzZWRSZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwibWVudVJlY3QiLCJib3R0b20iLCJjbGllbnRIZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJtZW51Q29udGFpbmVyIiwibWVudUNvbnRhaW5lclJlY3QiLCJpbm5lckhlaWdodCIsInNjcm9sbFRvIiwic2Nyb2xsWSIsInNldFN0YXRlIiwiaW5wdXQiLCJibHVySW5wdXQiLCJibHVyIiwiaGFuZGxlVG91Y2hNb3ZlIiwiZXZlbnQiLCJkcmFnZ2luZyIsImhhbmRsZVRvdWNoU3RhcnQiLCJoYW5kbGVUb3VjaEVuZCIsImhhbmRsZU1vdXNlRG93biIsImhhbmRsZVRvdWNoRW5kQ2xlYXJWYWx1ZSIsImNsZWFyVmFsdWUiLCJidXR0b24iLCJzdG9wUHJvcGFnYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsIl9vcGVuQWZ0ZXJGb2N1cyIsImhhbmRsZU1vdXNlRG93bk9uQXJyb3ciLCJjbG9zZU1lbnUiLCJoYW5kbGVNb3VzZURvd25Pbk1lbnUiLCJoYW5kbGVJbnB1dEZvY3VzIiwiaGFuZGxlSW5wdXRCbHVyIiwiYWN0aXZlRWxlbWVudCIsImlzRXF1YWxOb2RlIiwib25CbHVycmVkU3RhdGUiLCJoYW5kbGVJbnB1dENoYW5nZSIsImhhbmRsZUtleURvd24iLCJwb3BWYWx1ZSIsInNoaWZ0S2V5Iiwic2VsZWN0Rm9jdXNlZE9wdGlvbiIsImZvY3VzUHJldmlvdXNPcHRpb24iLCJmb2N1c05leHRPcHRpb24iLCJoYW5kbGVWYWx1ZUNsaWNrIiwib3B0aW9uIiwiaGFuZGxlTWVudVNjcm9sbCIsInNjcm9sbEhlaWdodCIsImdldE9wdGlvbkxhYmVsIiwib3AiLCJnZXRWYWx1ZUFycmF5IiwiZXhwYW5kVmFsdWUiLCJleHBhbmRlZFZhbHVlIiwiX3Byb3BzIiwic2V0VmFsdWUiLCJzZWxlY3RWYWx1ZSIsImFkZFZhbHVlIiwidmFsdWVBcnJheSIsImNvbmNhdCIsImNsZWFyYWJsZVZhbHVlIiwic2xpY2UiLCJyZW1vdmVWYWx1ZSIsImZvY3VzT3B0aW9uIiwiZm9jdXNlZE9wdGlvbiIsImZvY3VzQWRqYWNlbnRPcHRpb24iLCJkaXIiLCJfdmlzaWJsZU9wdGlvbnMiLCJfZm9jdXNlZE9wdGlvbiIsImZvY3VzZWRJbmRleCIsInJlbmRlckxvYWRpbmciLCJhcmlhLWhpZGRlbiIsInJlbmRlclZhbHVlIiwicmVuZGVyTGFiZWwiLCJWYWx1ZUNvbXBvbmVudCIsIm9uUmVtb3ZlIiwicmVuZGVySW5wdXQiLCJib3JkZXIiLCJkaXNwbGF5IiwibWluV2lkdGgiLCJyZW5kZXJDbGVhciIsImFyaWEtbGFiZWwiLCJvbk1vdXNlRG93biIsIm9uVG91Y2hTdGFydCIsIm9uVG91Y2hNb3ZlIiwib25Ub3VjaEVuZCIsImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIiwiX19odG1sIiwicmVuZGVyQXJyb3ciLCJleGNsdWRlT3B0aW9ucyIsImZpbHRlclZhbHVlIiwidmFsdWVUZXN0IiwiU3RyaW5nIiwibGFiZWxUZXN0Iiwic3Vic3RyIiwicmVuZGVyTWVudSIsIl90aGlzNCIsIl9yZXQiLCJPcHRpb24iLCJ2IiwiaXNTZWxlY3RlZCIsIm9wdGlvblJlZiIsIm9wdGlvbkNsYXNzIiwiU2VsZWN0LW9wdGlvbiIsImlzLXNlbGVjdGVkIiwiaXMtZm9jdXNlZCIsImlzLWRpc2FibGVkIiwiaXNEaXNhYmxlZCIsIm9uU2VsZWN0IiwicmVuZGVySGlkZGVuRmllbGQiLCJfdGhpczUiLCJnZXRGb2N1c2FibGVPcHRpb24iLCJzZWxlY3RlZE9wdGlvbiIsInJlbmRlciIsIlNlbGVjdC0tbXVsdGkiLCJpcy1sb2FkaW5nIiwiaXMtb3BlbiIsImlzLXBzZXVkby1mb2N1c2VkIiwiaXMtc2VhcmNoYWJsZSIsImhhcy12YWx1ZSIsIm9uU2Nyb2xsIiwiYmFzZSIsImxldHRlcnMiLCJzdHIiLCJub29wIiwialF1ZXJ5IiwiX3JlYWN0QWRkb25zVXBkYXRlIiwiX3JlYWN0QWRkb25zVXBkYXRlMiIsIl9hbmltYXRpb25NaXhpbiIsIl9hbmltYXRpb25NaXhpbjIiLCJfalF1ZXJ5TWl4aW4iLCJfalF1ZXJ5TWl4aW4yIiwiVG9hc3RNZXNzYWdlU3BlYyIsImljb25DbGFzc05hbWVzIiwiaW5mbyIsInN1Y2Nlc3MiLCJ3YXJuaW5nIiwidGl0bGVDbGFzc05hbWUiLCJtZXNzYWdlQ2xhc3NOYW1lIiwidGFwVG9EaXNtaXNzIiwiY2xvc2VCdXR0b24iLCJoYW5kbGVPbkNsaWNrIiwiaGlkZVRvYXN0IiwiX2hhbmRsZV9jbG9zZV9idXR0b25fY2xpY2siLCJfaGFuZGxlX3JlbW92ZSIsImhhbmRsZVJlbW92ZSIsInRvYXN0SWQiLCJfcmVuZGVyX2Nsb3NlX2J1dHRvbiIsInJvbGUiLCJfcmVuZGVyX3RpdGxlX2VsZW1lbnQiLCJfcmVuZGVyX21lc3NhZ2VfZWxlbWVudCIsIm1lc3NhZ2UiLCJpY29uQ2xhc3NOYW1lIiwib25Nb3VzZUVudGVyIiwiaGFuZGxlTW91c2VFbnRlciIsIm9uTW91c2VMZWF2ZSIsImhhbmRsZU1vdXNlTGVhdmUiLCIkc2V0IiwibWl4aW5zIiwiX2V2ZW50cyIsIl9tYXhMaXN0ZW5lcnMiLCJpc0Z1bmN0aW9uIiwiaXNOdW1iZXIiLCJpc09iamVjdCIsImlzVW5kZWZpbmVkIiwiZGVmYXVsdE1heExpc3RlbmVycyIsInNldE1heExpc3RlbmVycyIsIm4iLCJpc05hTiIsImVyIiwibGVuIiwiYXJncyIsImxpc3RlbmVycyIsIkVycm9yIiwiYWRkTGlzdGVuZXIiLCJsaXN0ZW5lciIsIm5ld0xpc3RlbmVyIiwid2FybmVkIiwidHJhY2UiLCJvbiIsIm9uY2UiLCJnIiwicmVtb3ZlTGlzdGVuZXIiLCJmaXJlZCIsImxpc3QiLCJzcGxpY2UiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJyZXQiLCJsaXN0ZW5lckNvdW50IiwiZXZsaXN0ZW5lciIsImVtaXR0ZXIiLCJjbGVhblVwTmV4dFRpY2siLCJkcmFpbmluZyIsImN1cnJlbnRRdWV1ZSIsInF1ZXVlIiwicXVldWVJbmRleCIsImRyYWluUXVldWUiLCJ0aW1lb3V0Iiwic2V0VGltZW91dCIsInJ1biIsImNsZWFyVGltZW91dCIsIkl0ZW0iLCJmdW4iLCJwcm9jZXNzIiwibmV4dFRpY2siLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsIm9mZiIsImJpbmRpbmciLCJjd2QiLCJjaGRpciIsInVtYXNrIiwiX1RhYmxlSGVhZGVyIiwiX1RhYmxlSGVhZGVyMiIsIl9UYWJsZUJvZHkiLCJfVGFibGVCb2R5MiIsIl9wYWdpbmF0aW9uUGFnaW5hdGlvbkxpc3QiLCJfcGFnaW5hdGlvblBhZ2luYXRpb25MaXN0MiIsIl90b29sYmFyVG9vbEJhciIsIl90b29sYmFyVG9vbEJhcjIiLCJfVGFibGVGaWx0ZXIiLCJfVGFibGVGaWx0ZXIyIiwiX2Nzdl9leHBvcnRfdXRpbCIsIl9jc3ZfZXhwb3J0X3V0aWwyIiwiX0ZpbHRlciIsIl9zY3JvbGxIZWFkZXIiLCJoZWFkZXIiLCJjb250YWluZXIiLCJzY3JvbGxMZWZ0IiwiY3VycmVudFRhcmdldCIsIl9hZGp1c3RIZWFkZXJXaWR0aCIsInRhYmxlSGVhZGVyRG9tIiwiY2hpbGROb2RlcyIsInRhYmxlQm9keURvbSIsImhlYWRlclByb3BzIiwiZ2V0Qm9keUhlYWRlckRvbVByb3AiLCJmaXRIZWFkZXIiLCJfYXR0YWNoQ2VsbEVkaXRGdW5jIiwiY29weSIsInN0b3JlIiwiZ2V0RGF0YSIsImNsZWFyIiwic2V0RGF0YSIsImdldFRhYmxlRGF0YSIsImluaXRUYWJsZSIsInNlbGYiLCJjdXJyZW50RmlsdGVyIiwiaGFuZGxlRmlsdGVyRGF0YSIsInNlbGVjdFJvdyIsInNldFNlbGVjdGVkUm93S2V5IiwiY3VyclBhZ2UiLCJwYWdlIiwiZ2V0U2VsZWN0ZWRSb3dLZXlzIiwiaXNLZXlGaWVsZERlZmluZWQiLCJDaGlsZHJlbiIsImNoaWxkcmVuIiwiY29sdW1uIiwiaXNLZXkiLCJkYXRhRmllbGQiLCJGaWx0ZXIiLCJnZXRDb2x1bW5zRGVzY3JpcHRpb24iLCJyZWR1Y2UiLCJwcmV2IiwiY3VyciIsInNldFByb3BzIiwicGFnaW5hdGlvbiIsImlzUmVtb3RlRGF0YVNvdXJjZSIsInNvcnROYW1lIiwic29ydE9yZGVyIiwiaXNDaGFuZ2VkUGFnZSIsIl9yZWYiLCJhbGlnbiIsImRhdGFBbGlnbiIsImRhdGFTb3J0IiwiZGF0YUZvcm1hdCIsImNvbHVtbkNsYXNzTmFtZSIsInRleHQiLCJpbmRleCIsInBhZ2luYXRpb25Eb20iLCJnZXRDdXJyZW50UGFnZSIsImdldFNpemVQZXJQYWdlIiwiTWF0aCIsImNlaWwiLCJzb3J0SW5mbyIsImdldFNvcnRJbmZvIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhZnRlclRhYmxlQ29tcGxldGUiLCJjZWxsRWRpdCIsIl9fb25Db21wbGV0ZUVkaXRfXyIsImhhbmRsZUVkaXRDZWxsIiwiYmluZCIsImNsaWNrVG9TZWxlY3QiLCJjaGlsZHJlbnMiLCJtYXhIZWlnaHQiLCJjb2x1bW5zIiwicmVuZGVyUGFnaW5hdGlvbiIsInRvb2xCYXIiLCJyZW5kZXJUb29sQmFyIiwidGFibGVGaWx0ZXIiLCJyZW5kZXJUYWJsZUZpbHRlciIsImlzU2VsZWN0QWxsIiwicm93U2VsZWN0VHlwZSIsImhpZGVTZWxlY3RDb2x1bW4iLCJvblNvcnQiLCJoYW5kbGVTb3J0Iiwib25TZWxlY3RBbGxSb3ciLCJoYW5kbGVTZWxlY3RBbGxSb3ciLCJib3JkZXJlZCIsImNvbmRlbnNlZCIsImlzRmlsdGVyZWQiLCJ0YWJsZUlEIiwidHJDbGFzc05hbWUiLCJzdHJpcGVkIiwiaG92ZXIiLCJnZXRLZXlGaWVsZCIsIm9uUm93Q2xpY2siLCJoYW5kbGVSb3dDbGljayIsIm9uUm93TW91c2VPdmVyIiwiaGFuZGxlUm93TW91c2VPdmVyIiwib25Sb3dNb3VzZU91dCIsImhhbmRsZVJvd01vdXNlT3V0Iiwib25TZWxlY3RSb3ciLCJoYW5kbGVTZWxlY3RSb3ciLCJub0RhdGFUZXh0IiwiZGVmYXVsdFNlbGVjdFJvd0tleXMiLCJhbGxSb3dLZXlzIiwiZ2V0QWxsUm93a2V5Iiwib25Tb3J0Q2hhbmdlIiwib25QYWdlQ2hhbmdlIiwib25TZWxlY3RBbGwiLCJpZ25vcmVOb25TZWxlY3RlZCIsImN1cnJTZWxlY3RlZCIsImNvbEluZGV4IiwiZWRpdCIsImFmdGVyU2F2ZUNlbGwiLCJhZGRBdEJlZ2luIiwiX2hhbmRsZUFmdGVyQWRkaW5nUm93IiwiYmVmb3JlUHJvbWlzZSIsImJlZm9yZUluc2VydFJvdyIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsImFkZCIsImpzb24iLCJyb3dLZXlzIiwidGhhdCIsImRyb3BSb3dLZXlzIiwiaGFuZGxlQ29uZmlybURlbGV0ZVJvdyIsImRlbGV0ZVJvdyIsImNvbmZpcm0iLCJyZW1vdmUiLCJjdXJyTGFzdFBhZ2UiLCJnZXREYXRhTnVtIiwiYWZ0ZXJEZWxldGVSb3ciLCJhZnRlckNvbHVtbkZpbHRlciIsImdldERhdGFJZ25vcmluZ1BhZ2luYXRpb24iLCJjc3ZGaWxlTmFtZSIsImFmdGVyU2VhcmNoIiwiZGF0YVNpemUiLCJmZXRjaEluZm8iLCJkYXRhVG90YWxTaXplIiwiY2hhbmdlUGFnZSIsImhhbmRsZVBhZ2luYXRpb25EYXRhIiwic2l6ZVBlclBhZ2VMaXN0IiwicGFnaW5hdGlvblNpemUiLCJvblNpemVQZXJQYWdlTGlzdCIsInByZVBhZ2UiLCJuZXh0UGFnZSIsImZpcnN0UGFnZSIsImxhc3RQYWdlIiwiZW5hYmxlU2hvd09ubHlTZWxlY3RlZCIsImluc2VydFJvdyIsImV4cG9ydENTViIsImZpZWxkIiwiYXV0b1ZhbHVlIiwiaGlkZGVuSW5Qb3B1cCIsImNsZWFyU2VhcmNoIiwiZW5hYmxlSW5zZXJ0IiwiZW5hYmxlRGVsZXRlIiwiZW5hYmxlU2VhcmNoIiwiZW5hYmxlRXhwb3J0Q1NWIiwic2VhcmNoUGxhY2Vob2xkZXIiLCJvbkFkZFJvdyIsImhhbmRsZUFkZFJvdyIsIm9uQWRkUm93QmVnaW4iLCJoYW5kbGVBZGRSb3dCZWdpbiIsIm9uRHJvcFJvdyIsImhhbmRsZURyb3BSb3ciLCJvblNlYXJjaCIsImhhbmRsZVNlYXJjaCIsIm9uRXhwb3J0Q1NWIiwiaGFuZGxlRXhwb3J0Q1NWIiwib25TaG93T25seVNlbGVjdGVkIiwiaGFuZGxlU2hvd09ubHlTZWxlY3RlZCIsImNvbHVtbkZpbHRlciIsIm9uRmlsdGVyIiwiYWZ0ZXJJbnNlcnRSb3ciLCJzaGFwZSIsIm9uZU9mIiwiYmdDb2xvciIsImNsaWNrVG9TZWxlY3RBbmRFZGl0Q2VsbCIsImJsdXJUb1NhdmUiLCJkZWZhdWx0UHJvcHMiLCJmaWx0ZXJUeXBlIiwiaGFzVmFsdWUiLCJwcm9wIiwiU2VsZWN0Um93SGVhZGVyQ29sdW1uIiwidGhTdHlsZSIsInBhcnNlSW50IiwiX3V0aWwiLCJfdXRpbDIiLCJfVGFibGVSb3ciLCJfVGFibGVSb3cyIiwiX1RhYmxlQ29sdW1uIiwiX1RhYmxlQ29sdW1uMiIsIl9UYWJsZUVkaXRDb2x1bW4iLCJfVGFibGVFZGl0Q29sdW1uMiIsImlzRnVuIiwiVGFibGVCb2R5IiwiY3VyckVkaXRDZWxsIiwiZWRpdGluZyIsImFkanVzdEJvZHkiLCJjb250YWluZXJDbGFzc2VzIiwidGFibGVDbGFzc2VzIiwidGFibGUtc3RyaXBlZCIsInRhYmxlLWJvcmRlcmVkIiwidGFibGUtaG92ZXIiLCJ0YWJsZS1jb25kZW5zZWQiLCJpc1NlbGVjdFJvd0RlZmluZWQiLCJfaXNTZWxlY3RSb3dEZWZpbmVkIiwidGFibGVIZWFkZXIiLCJyZW5kZXJUYWJsZUhlYWRlciIsInRhYmxlUm93cyIsInIiLCJ0YWJsZUNvbHVtbnMiLCJmaWVsZFZhbHVlIiwicmlkIiwiY2lkIiwiY29tcGxldGVFZGl0IiwiaGFuZGxlQ29tcGxldGVFZGl0Q2VsbCIsInRkQ2xhc3NOYW1lIiwiZm9ybWF0dGVkVmFsdWUiLCJpc1ZhbGlkRWxlbWVudCIsIm9uRWRpdCIsInNlbGVjdFJvd0NvbHVtbiIsInJlbmRlclNlbGVjdFJvd0NvbHVtbiIsImVuYWJsZUNlbGxFZGl0IiwiY29sU3BhbiIsImNhbGN1bGF0ZUNvbnRhaW5lckhlaWdodCIsInNlbGVjdFJvd0hlYWRlciIsInRoZWFkZXIiLCJtYXhXaWR0aCIsInNvcnRDYWVydCIsInRhcmdldFJvdyIsInNlbGVjdGVkUm93IiwicGFyZW50RWxlbWVudCIsImNvbHVtbkluZGV4Iiwic3RhdGVPYmoiLCJoYW5kbGVTZWxlY3RSb3dDb2x1bUNoYW5nZSIsImhlYWRlcnMiLCJoZWFkZXJEb21Qcm9wcyIsImhhcmRGaXhIZWFkZXJXaWR0aCIsIm1hcmdpblRvcCIsIlRhYmxlQ29sdW1uIiwic2hvdWxkVXBkYXRlZCIsInNlbGVjdGlvbiIsImVtcHR5IiwiZ2V0U2VsZWN0aW9uIiwic2VsIiwicmVtb3ZlQWxsUmFuZ2VzIiwiY2VsbEluZGV4IiwidGRTdHlsZSIsInRleHRBbGlnbiIsImNsYXNzbmFtZSIsIm9wdHMiLCJoYW5kbGVDZWxsRWRpdCIsIm9uRG91YmxlQ2xpY2siLCJfRWRpdG9yIiwiX0VkaXRvcjIiLCJfTm90aWZpY2F0aW9uSnMiLCJfTm90aWZpY2F0aW9uSnMyIiwiVGFibGVFZGl0Q29sdW1uIiwidGltZW91dGVDbGVhciIsInNoYWtlRWRpdG9yIiwiX2dldENoZWNrQm94VmFsdWUiLCJ2YWxpZGF0b3IiLCJ0cyIsIm5vdGlmaWVyIiwibm90aWNlIiwiaW5wdXRSZWYiLCJfY2xlYXJUaW1lb3V0IiwiaGFuZGxlS2V5UHJlc3MiLCJoYW5kbGVCbHVyIiwiYW5pbWF0ZWQiLCJzaGFrZSIsIlRhYmxlRmlsdGVyIiwicGFkZGluZ0xlZnQiLCJwYWRkaW5nUmlnaHQiLCJmaWx0ZXJGaWVsZCIsInNpemUiLCJvbktleVVwIiwiaGFuZGxlS2V5VXAiLCJib3JkZXJCb3R0b21TdHlsZSIsIl9TZWxlY3RSb3dIZWFkZXJDb2x1bW4iLCJfU2VsZWN0Um93SGVhZGVyQ29sdW1uMiIsIkNoZWNrYm94IiwidXBkYXRlIiwiaW5kZXRlcm1pbmF0ZSIsIlRhYmxlSGVhZGVyIiwiX1JlYWN0JENvbXBvbmVudDIiLCJzZWxlY3RSb3dDb2x1bW5XaWR0aCIsInNlbGVjdFJvd0hlYWRlckNvbCIsInJlbmRlclNlbGVjdFJvd0hlYWRlciIsIl9hdHRhY2hDbGVhclNvcnRDYXJldEZ1bmMiLCJjbG9uZUVsZW1lbnQiLCJpc1ZlcnRpY2FsU2Nyb2xsQmFyIiwic3RhcnRQb3NpdGlvbiIsImZvcmNlVXBkYXRlIiwibWFyZ2luUmlnaHQiLCJfZmlsdGVyc0RhdGUiLCJfZmlsdGVyc0RhdGUyIiwiX2ZpbHRlcnNUZXh0IiwiX2ZpbHRlcnNUZXh0MiIsIl9maWx0ZXJzU2VsZWN0IiwiX2ZpbHRlcnNTZWxlY3QyIiwiX2ZpbHRlcnNOdW1iZXIiLCJfZmlsdGVyc051bWJlcjIiLCJoYW5kbGVGaWx0ZXIiLCJjb2x1bW5OYW1lIiwiZmlsdGVySGFuZGxlciIsImdldEVsZW1lbnQiLCJjdXN0b21GaWx0ZXJQYXJhbWV0ZXJzIiwiaW5uZXJEaXYiLCJzZXRBdHRyaWJ1dGUiLCJkZWZhdWx0Q2FyZXQiLCJjb2xvciIsInNvcnRDYXJldCIsImhhbmRsZUNvbHVtbkNsaWNrIiwiZ2V0RmlsdGVycyIsImZpbHRlclR5cGVBcnJheSIsImRlbGF5IiwiYXJyYXlPZiIsIm51bWJlckNvbXBhcmF0b3JzIiwiVGFibGVSb3ciLCJjbGlja051bSIsInRhZ05hbWUiLCJ0ckNzcyIsImJhY2tncm91bmRDb2xvciIsIm9uTW91c2VPdmVyIiwicm93TW91c2VPdmVyIiwib25Nb3VzZU91dCIsInJvd01vdXNlT3V0Iiwicm93Q2xpY2siLCJkYXRhU3RyaW5nIiwiY29sIiwiY2VsbCIsImZpbGVzYXZlciIsInNhdmVBcyIsImZpbGVuYW1lIiwiQmxvYiIsInZpZXciLCJuYXZpZ2F0b3IiLCJ0ZXN0IiwidXNlckFnZW50IiwiZG9jIiwiZ2V0X1VSTCIsIlVSTCIsIndlYmtpdFVSTCIsInNhdmVfbGluayIsImNyZWF0ZUVsZW1lbnROUyIsImNhbl91c2Vfc2F2ZV9saW5rIiwiY2xpY2siLCJNb3VzZUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsImlzX3NhZmFyaSIsIndlYmtpdF9yZXFfZnMiLCJ3ZWJraXRSZXF1ZXN0RmlsZVN5c3RlbSIsInJlcV9mcyIsInJlcXVlc3RGaWxlU3lzdGVtIiwibW96UmVxdWVzdEZpbGVTeXN0ZW0iLCJ0aHJvd19vdXRzaWRlIiwiZXgiLCJzZXRJbW1lZGlhdGUiLCJmb3JjZV9zYXZlYWJsZV90eXBlIiwiZnNfbWluX3NpemUiLCJhcmJpdHJhcnlfcmV2b2tlX3RpbWVvdXQiLCJyZXZva2UiLCJmaWxlIiwicmV2b2tlciIsInJldm9rZU9iamVjdFVSTCIsImNocm9tZSIsImRpc3BhdGNoIiwiZXZlbnRfdHlwZXMiLCJhdXRvX2JvbSIsImJsb2IiLCJGaWxlU2F2ZXIiLCJub19hdXRvX2JvbSIsIm9iamVjdF91cmwiLCJ0YXJnZXRfdmlldyIsImJsb2JfY2hhbmdlZCIsImRpc3BhdGNoX2FsbCIsImZzX2Vycm9yIiwiRmlsZVJlYWRlciIsInJlYWRlciIsIm9ubG9hZGVuZCIsImJhc2U2NERhdGEiLCJsb2NhdGlvbiIsImhyZWYiLCJyZWFkeVN0YXRlIiwiRE9ORSIsInJlYWRBc0RhdGFVUkwiLCJJTklUIiwiY3JlYXRlT2JqZWN0VVJMIiwibmV3X3RhYiIsIm9wZW4iLCJhYm9ydGFibGUiLCJjcmVhdGVfaWZfbm90X2ZvdW5kIiwiZXhjbHVzaXZlIiwiZG93bmxvYWQiLCJ3ZWJraXRTbGljZSIsIlRFTVBPUkFSWSIsImZzIiwiZ2V0RGlyZWN0b3J5Iiwic2F2ZSIsImdldEZpbGUiLCJjcmVhdGVXcml0ZXIiLCJ3cml0ZXIiLCJvbndyaXRlZW5kIiwidG9VUkwiLCJvbmVycm9yIiwiY29kZSIsIkFCT1JUX0VSUiIsIndyaXRlIiwiYWJvcnQiLCJXUklUSU5HIiwiTk9UX0ZPVU5EX0VSUiIsIkZTX3Byb3RvIiwibXNTYXZlT3JPcGVuQmxvYiIsIm9ud3JpdGVzdGFydCIsIm9ucHJvZ3Jlc3MiLCJvbndyaXRlIiwib25hYm9ydCIsImNvbnRlbnQiLCJEYXRlRmlsdGVyIiwiZGVmYXVsdERhdGUiLCJEYXRlIiwiZGF0ZVZhbHVlIiwiaW5wdXREYXRlIiwic2V0RGVmYXVsdERhdGUiLCJpc1JlcXVpcmVkIiwibGVnYWxDb21wYXJhdG9ycyIsIk51bWJlckZpbHRlciIsImlzUGxhY2Vob2xkZXJTZWxlY3RlZCIsIm9uQ2hhbmdlTnVtYmVyIiwib25DaGFuZ2VOdW1iZXJTZXQiLCJvbkNoYW5nZUNvbXBhcmF0b3IiLCJudW1iZXJGaWx0ZXJDb21wYXJhdG9yIiwibnVtYmVyRmlsdGVyIiwib3B0aW9uVGFncyIsInNlbGVjdENsYXNzIiwicGxhY2Vob2xkZXItc2VsZWN0ZWQiLCJnZXRDb21wYXJhdG9yT3B0aW9ucyIsImdldE51bWJlck9wdGlvbnMiLCJwcm9wTmFtZSIsImNvbXBhcmF0b3JJc1ZhbGlkIiwiU2VsZWN0RmlsdGVyIiwic2VsZWN0SW5wdXQiLCJnZXRPcHRpb25zIiwiVGV4dEZpbHRlciIsImlucHV0VGV4dCIsIlBhZ2VCdXR0b24iLCJhY3RpdmUiLCJkaXNhYmxlIiwicGFnZUJ0bkNsaWNrIiwiX1BhZ2VCdXR0b25KcyIsIl9QYWdlQnV0dG9uSnMyIiwiUGFnaW5hdGlvbkxpc3QiLCJ0b3RhbFBhZ2VzIiwic2VsZWN0U2l6ZSIsInBhZ2VCdG5zIiwibWFrZVBhZ2UiLCJwYWdlTGlzdFN0eWxlIiwiZmxvYXQiLCJjaGFuZ2VTaXplUGVyUGFnZSIsImRhdGEtdG9nZ2xlIiwiYXJpYS1leHBhbmRlZCIsImFyaWEtbGFiZWxsZWRieSIsInBhZ2VzIiwiZ2V0UGFnZXMiLCJpc0FjdGl2ZSIsInN0YXJ0UGFnZSIsImVuZFBhZ2UiLCJtYXgiLCJmbG9vciIsIlRvb2xCYXIiLCJoYW5kbGVTaG93T25seVRvZ2dsZSIsInNob3dTZWxlY3RlZCIsImhhbmRsZUNsZWFyQnRuQ2xpY2siLCJzZWFjaElucHV0IiwiaXNJbnNlcnRSb3dUcmlnZ2VyIiwidmFsaWRhdGVTdGF0ZSIsInRlbXBWYWx1ZSIsInRlbXBNc2ciLCJpc1ZhbGlkIiwiZ2V0VGltZSIsImRvbSIsImNoZWNrQW5kUGFyc2VGb3JtIiwiZXJyb3JzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvcm0iLCJyZXNldCIsIm1vZGFsQ2xhc3NOYW1lIiwiaW5zZXJ0QnRuIiwiZGF0YS10YXJnZXQiLCJkZWxldGVCdG4iLCJkYXRhLXBsYWNlbWVudCIsImhhbmRsZURyb3BSb3dCdG5DbGljayIsInNlYXJjaFRleHRJbnB1dCIsInJlbmRlclNlYXJjaFBhbmVsIiwic2hvd1NlbGVjdGVkT25seUJ0biIsImFyaWEtcHJlc3NlZCIsIm1vZGFsIiwicmVuZGVySW5zZXJ0Um93TW9kYWwiLCJjbGVhckJ0biIsImlucHV0RmllbGQiLCJtb2RhbENsYXNzIiwiaW4iLCJkaWFsb2dDbGFzcyIsImRhdGEtZGlzbWlzcyIsImhhbmRsZVNhdmVCdG5DbGljayIsIml0ZW0iLCJtZWRpYVF1ZXJ5IiwiYWxyZWFkeUltcG9ydGVkTW9kdWxlcyIsIl9kZWZpbmVQcm9wZXJ0eSIsIlJlYWN0IiwiU3dpdGNoIiwicHJlZml4Q2xzIiwiY2hlY2tlZENoaWxkcmVuIiwidW5DaGVja2VkQ2hpbGRyZW4iLCJjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzIiwidG9nZ2xlIiwiX2NsYXNzTmFtZXMiLCJzd2l0Y2hDbGFzc05hbWUiLCJpbml0Q2FjaGUiLCJjYWNoZSIsInVwZGF0ZUNhY2hlIiwiZ2V0RnJvbUNhY2hlIiwiY2FjaGVLZXkiLCJjb21wbGV0ZSIsInRoZW5Qcm9taXNlIiwicHJvbWlzZSIsImVyciIsIl9TZWxlY3QiLCJfU2VsZWN0MiIsInJlcXVlc3RJZCIsImxvYWRPcHRpb25zIiwibG9hZGluZ1BsYWNlaG9sZGVyIiwibWluaW11bUlucHV0Iiwic2VhcmNoUHJvbXB0VGV4dCIsInNlYXJjaGluZ1RleHQiLCJjb21wb25lbnRXaWxsTW91bnQiLCJfbGFzdElucHV0Iiwic2VsZWN0IiwicmVzZXRTdGF0ZSIsIl9jdXJyZW50UmVxdWVzdElkIiwiZ2V0UmVzcG9uc2VIYW5kbGVyIiwiX3JlcXVlc3RJZCIsImlzTW91bnRlZCIsImNhY2hlUmVzdWx0IiwicmVzcG9uc2VIYW5kbGVyIiwiX3N0YXRlIiwib25VbmZvY3VzIiwiYmxvY2tFdmVudCIsImhhbmRsZU1vdXNlTW92ZSIsIm9uTW91c2VNb3ZlIiwiVmFsdWUiLCJoYW5kbGVUb3VjaEVuZFJlbW92ZSIsInJlbmRlclJlbW92ZUljb24iLCJzaXplclN0eWxlIiwid2hpdGVTcGFjZSIsIm5leHRGcmFtZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1velJlcXVlc3RBbmltYXRpb25GcmFtZSIsIkF1dG9zaXplSW5wdXQiLCJpbnB1dFN0eWxlIiwiaW5wdXRDbGFzc05hbWUiLCJpbnB1dFdpZHRoIiwiY29weUlucHV0U3R5bGVzIiwidXBkYXRlSW5wdXRXaWR0aCIsInF1ZXVlVXBkYXRlSW5wdXRXaWR0aCIsImdldENvbXB1dGVkU3R5bGUiLCJ3aWR0aE5vZGUiLCJzaXplciIsImZvbnRTaXplIiwiZm9udEZhbWlseSIsImZvbnRXZWlnaHQiLCJmb250U3R5bGUiLCJsZXR0ZXJTcGFjaW5nIiwicGxhY2Vob2xkZXJOb2RlIiwicGxhY2Vob2xkZXJTaXplciIsInNjcm9sbFdpZHRoIiwibmV3SW5wdXRXaWR0aCIsImdldElucHV0IiwiZXNjYXBlZFZhbHVlIiwiYm94U2l6aW5nIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJSZWZlcmVuY2VFcnJvciIsIl9Ub2FzdE1lc3NhZ2UiLCJfVG9hc3RNZXNzYWdlMiIsIl9Db21wb25lbnQiLCJfT2JqZWN0JGdldFByb3RvdHlwZU8iLCJfdGVtcCIsIl9sZW4iLCJfa2V5IiwidG9hc3RzIiwicHJldmlvdXNNZXNzYWdlIiwib3B0aW9uc092ZXJyaWRlIiwiX25vdGlmeSIsInRvYXN0VHlwZSIsInByZXZlbnREdXBsaWNhdGVzIiwibmV3VG9hc3QiLCIkbWVyZ2UiLCJfaGFuZGxlX3RvYXN0X29uX2NsaWNrIiwiX2hhbmRsZV90b2FzdF9yZW1vdmUiLCJ0b2FzdE9wZXJhdGlvbiIsIm5ld2VzdE9uVG9wIiwiZGVmYXVsdFByZXZlbnRlZCIsIm9wZXJhdGlvbk5hbWUiLCJmb3VuZCIsInRvYXN0IiwiJHNwbGljZSIsImFyaWEtbGl2ZSIsIl9SZWFjdFRyYW5zaXRpb25FdmVudHMiLCJfUmVhY3RUcmFuc2l0aW9uRXZlbnRzMiIsIl9lbGVtZW50Q2xhc3MiLCJfZWxlbWVudENsYXNzMiIsIlRJQ0siLCJ0cmFuc2l0aW9uIiwiY2xhc3NOYW1lUXVldWUiLCJpc0hpZGluZyIsImludGVydmFsSWQiLCJfaXNfbW91bnRlZCIsIl9zaG93Iiwib25IaWRlQ29tcGxldGUiLCJfc2V0X2lzX2hpZGluZyIsInJlbW92ZUVuZEV2ZW50TGlzdGVuZXIiLCJhZGRFbmRFdmVudExpc3RlbmVyIiwiX3NldF9pbnRlcnZhbF9pZCIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwiX3NldF90cmFuc2l0aW9uIiwiaGlkZSIsImFuaW1hdGlvblR5cGUiLCJhY3RpdmVDbGFzc05hbWUiLCJlbmRMaXN0ZW5lciIsImNsYXNzTGlzdCIsIl9xdWV1ZV9jbGFzcyIsIl9jbGVhcl90cmFuc2l0aW9uIiwiX3NldF9hbmltYXRpb24iLCJhbmltYXRpb25zIiwiX2dldF9hbmltYXRpb25fY2xhc3NlcyIsImFuaW0iLCJfY2xlYXJfYW5pbWF0aW9uIiwiX2ZsdXNoX2NsYXNzX25hbWVfcXVldWUiLCJvdmVycmlkZSIsImNhbGxfc2hvd19tZXRob2QiLCIkbm9kZSIsInNob3dNZXRob2QiLCJkdXJhdGlvbiIsInNob3dEdXJhdGlvbiIsImVhc2luZyIsInNob3dFYXNpbmciLCJoaWRlTWV0aG9kIiwiaGlkZUR1cmF0aW9uIiwiaGlkZUVhc2luZyIsIl9nZXRfJF9ub2RlIiwic3RvcCIsIl9Ub2FzdENvbnRhaW5lciIsIl9Ub2FzdENvbnRhaW5lcjIiLCJFbGVtZW50Q2xhc3MiLCJub2RlVHlwZSIsImVsIiwicXVlcnlTZWxlY3RvciIsImlkeCIsImhhcyIsInNvdXJjZXMiLCJ0byIsIm5leHRJbmRleCIsIm5leHRTb3VyY2UiLCJmcm9tIiwiZGV0ZWN0RXZlbnRzIiwidGVzdEVsIiwiRVZFTlRfTkFNRV9NQVAiLCJhbmltYXRpb25lbmQiLCJ0cmFuc2l0aW9uZW5kIiwiYmFzZUV2ZW50TmFtZSIsImJhc2VFdmVudHMiLCJzdHlsZU5hbWUiLCJlbmRFdmVudHMiLCJldmVudE5hbWUiLCJldmVudExpc3RlbmVyIiwiRXhlY3V0aW9uRW52aXJvbm1lbnQiLCJXZWJraXRUcmFuc2l0aW9uIiwiTW96VHJhbnNpdGlvbiIsIk9UcmFuc2l0aW9uIiwibXNUcmFuc2l0aW9uIiwiV2Via2l0QW5pbWF0aW9uIiwiTW96QW5pbWF0aW9uIiwiT0FuaW1hdGlvbiIsIm1zQW5pbWF0aW9uIiwiY2FuVXNlRE9NIiwiUmVhY3RUcmFuc2l0aW9uRXZlbnRzIiwiZW5kRXZlbnQiLCJzaGFsbG93Q29weSIsImludmFyaWFudEFycmF5Q2FzZSIsInNwZWMiLCJjb21tYW5kIiwiTk9ERV9FTlYiLCJpbnZhcmlhbnQiLCJzcGVjVmFsdWUiLCJBTExfQ09NTUFORFNfTElTVCIsIkNPTU1BTkRfU0VUIiwibmV4dFZhbHVlIiwiQ09NTUFORF9NRVJHRSIsIm1lcmdlT2JqIiwiQ09NTUFORF9QVVNIIiwiQ09NTUFORF9VTlNISUZUIiwiQ09NTUFORF9TUExJQ0UiLCJDT01NQU5EX0FQUExZIiwiayIsIkFMTF9DT01NQU5EU19TRVQiLCJrZXlPZiIsIiRwdXNoIiwiJHVuc2hpZnQiLCIkYXBwbHkiLCJjYW5Vc2VXb3JrZXJzIiwiV29ya2VyIiwiY2FuVXNlRXZlbnRMaXN0ZW5lcnMiLCJhdHRhY2hFdmVudCIsImNhblVzZVZpZXdwb3J0Iiwic2NyZWVuIiwiaXNJbldvcmtlciIsImNvbmRpdGlvbiIsImYiLCJhcmdJbmRleCIsImZyYW1lc1RvUG9wIiwib25lS2V5T2JqIiwiYWRkU3R5bGVzVG9Eb20iLCJzdHlsZXMiLCJkb21TdHlsZSIsInN0eWxlc0luRG9tIiwicGFydHMiLCJhZGRTdHlsZSIsImxpc3RUb1N0eWxlcyIsIm5ld1N0eWxlcyIsImNzcyIsIm1lZGlhIiwic291cmNlTWFwIiwicGFydCIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlRWxlbWVudCIsImhlYWQiLCJnZXRIZWFkRWxlbWVudCIsImxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wIiwic3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AiLCJpbnNlcnRBdCIsIm5leHRTaWJsaW5nIiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsInJlbW92ZVN0eWxlRWxlbWVudCIsInBhcmVudE5vZGUiLCJjcmVhdGVTdHlsZUVsZW1lbnQiLCJjcmVhdGVMaW5rRWxlbWVudCIsImxpbmtFbGVtZW50IiwicmVsIiwic2luZ2xldG9uIiwic3R5bGVJbmRleCIsInNpbmdsZXRvbkNvdW50ZXIiLCJzaW5nbGV0b25FbGVtZW50IiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsImJ0b2EiLCJ1cGRhdGVMaW5rIiwiYXBwbHlUb1RhZyIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwicmVwbGFjZVRleHQiLCJjc3NOb2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsIm9sZFNyYyIsIm1lbW9pemUiLCJmbiIsIm1lbW8iLCJpc09sZElFIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJuZXdMaXN0IiwibWF5UmVtb3ZlIiwidGV4dFN0b3JlIiwicmVwbGFjZW1lbnQiLCJCb29sZWFuIiwibG9jYWxzIiwiX193ZWJwYWNrX2FtZF9vcHRpb25zX18iXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsZ0JBQUFDLFVBQUEsZ0JBQUFDLFFBQ0FBLE9BQUFELFFBQUFELEVBQUFHLFFBQUEsU0FBQUEsUUFBQSxjQUNBLGtCQUFBQyxnQkFBQUMsSUFDQUQsUUFBQSxxQkFBQUosR0FDQSxnQkFBQUMsU0FDQUEsUUFBQSxvQkFBQUQsRUFBQUcsUUFBQSxTQUFBQSxRQUFBLGNBRUFKLEVBQUEsb0JBQUFDLEVBQUFELEVBQUEsTUFBQUEsRUFBQSxXQUNDTyxLQUFBLFNBQUFDLEVBQUFDLEdBQ0QsTUNBZ0IsVUFBVUMsR0NOMUIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFWLE9BR0EsSUFBQUMsR0FBQVUsRUFBQUQsSUFDQVYsV0FDQVksR0FBQUYsRUFDQUcsUUFBQSxFQVVBLE9BTkFMLEdBQUFFLEdBQUFJLEtBQUFiLEVBQUFELFFBQUFDLElBQUFELFFBQUFTLEdBR0FSLEVBQUFZLFFBQUEsRUFHQVosRUFBQUQsUUF2QkEsR0FBQVcsS0FxQ0EsT0FUQUYsR0FBQU0sRUFBQVAsRUFHQUMsRUFBQU8sRUFBQUwsRUFHQUYsRUFBQVEsRUFBQSxHQUdBUixFQUFBLEtEZ0JNLFNBQVNSLEVBQVFELEVBQVNTLEdBRS9CLFlBTUEsU0FBU1MsR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsVUFBV0YsR0FKekZHLE9BQU9DLGVBQWV2QixFQUFTLGNBQzdCd0IsT0FBTyxHQUtULElBQUlDLEdBQWtCaEIsRUVoRUksSUZrRXRCaUIsRUFBbUJSLEVBQXVCTyxHQUUxQ0UsRUFBcUJsQixFRW5FSSxJRnFFekJtQixFQUFzQlYsRUFBdUJTLEdBRTdDRSxFQUF1QnBCLEVFdEVELEVBRU4sb0JBQVhxQixVQUNSQSxPQUFPQyxl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QUFBOHZDLEdBQUFnRCxFQUFBOXlDLEVBQ0EsUUFBQTh2QyxFQUFBMW5DLEtBQUEsQ0FDQSxPQUFBMkYsR0FBQSxFQUFrQkEsRUFBQStoQyxFQUFBRSxNQUFBOXZDLE9BQTJCNk4sSUFDN0MraEMsRUFBQUUsTUFBQWppQyxXQUNBZ2lDLEdBQUFELEVBQUFsekMsT0FpSUEsSUFBQXMxQyxHQUFBLFdBQ0EsR0FBQWEsS0FFQSxpQkFBQWx0QixFQUFBbXRCLEdBRUEsTUFEQUQsR0FBQWx0QixHQUFBbXRCLEVBQ0FELEVBQUFyb0MsT0FBQXVvQyxTQUFBdHlDLEtBQUEsV3ZEczlQTSxTQUFTMUUsRUFBUUQsRUFBU1MsR3dEaHBRaEMsR0FBQWtnQyxHQUFBbGdDLEVBQUEsR0FDQSxpQkFBQWtnQyxTQUFBMWdDLEVBQUFXLEdBQUErL0IsRUFBQSxLQUVBbGdDLEdBQUEsSUFBQWtnQyxLQUNBQSxHQUFBdVcsU0FBQWozQyxFQUFBRCxRQUFBMmdDLEVBQUF1VyxTeERzcVFNLFNBQVNqM0MsRUFBUUQsR3lEN3FRdkJDLEVBQUFELFFBQUEsV0FBNkIsU0FBQWtqQixPQUFBLG9DekRvclF2QixTQUFTampCLEVBQVFELEkwRHByUXZCLFNBQUFtM0MsR0FBQWwzQyxFQUFBRCxRQUFBbTNDLEkxRHdyUThCcjJDLEtBQUtkIiwiZmlsZSI6InJlYWN0LWJvb3RzdHJhcC10YWJsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcInJlYWN0XCIpLCByZXF1aXJlKFwicmVhY3QtZG9tXCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcInJlYWN0XCIsIFwicmVhY3QtZG9tXCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIlJlYWN0Qm9vdHN0cmFwVGFibGVcIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJyZWFjdFwiKSwgcmVxdWlyZShcInJlYWN0LWRvbVwiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wiUmVhY3RCb290c3RyYXBUYWJsZVwiXSA9IGZhY3Rvcnkocm9vdFtcIlJlYWN0XCJdLCByb290W1wiUmVhY3RET01cIl0pO1xufSkodGhpcywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNF9fKSB7XG5yZXR1cm4gXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uXG4gKiovIiwiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwicmVhY3RcIiksIHJlcXVpcmUoXCJyZWFjdC1kb21cIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW1wicmVhY3RcIiwgXCJyZWFjdC1kb21cIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiUmVhY3RCb290c3RyYXBUYWJsZVwiXSA9IGZhY3RvcnkocmVxdWlyZShcInJlYWN0XCIpLCByZXF1aXJlKFwicmVhY3QtZG9tXCIpKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJSZWFjdEJvb3RzdHJhcFRhYmxlXCJdID0gZmFjdG9yeShyb290W1wiUmVhY3RcIl0sIHJvb3RbXCJSZWFjdERPTVwiXSk7XG59KSh0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzFfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV80X18pIHtcbnJldHVybiAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblx0XG5cdHZhciBfQm9vdHN0cmFwVGFibGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0XG5cdHZhciBfQm9vdHN0cmFwVGFibGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQm9vdHN0cmFwVGFibGUpO1xuXHRcblx0dmFyIF9UYWJsZUhlYWRlckNvbHVtbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXHRcblx0dmFyIF9UYWJsZUhlYWRlckNvbHVtbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9UYWJsZUhlYWRlckNvbHVtbik7XG5cdFxuXHR2YXIgX3N0b3JlVGFibGVEYXRhU3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0aWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgd2luZG93LkJvb3RzdHJhcFRhYmxlID0gX0Jvb3RzdHJhcFRhYmxlMlsnZGVmYXVsdCddO1xuXHQgIHdpbmRvdy5UYWJsZUhlYWRlckNvbHVtbiA9IF9UYWJsZUhlYWRlckNvbHVtbjJbJ2RlZmF1bHQnXTtcblx0ICB3aW5kb3cuVGFibGVEYXRhU2V0ID0gX3N0b3JlVGFibGVEYXRhU3RvcmUuVGFibGVEYXRhU2V0O1xuXHR9XG5cdGV4cG9ydHNbJ2RlZmF1bHQnXSA9IHtcblx0ICBCb290c3RyYXBUYWJsZTogX0Jvb3RzdHJhcFRhYmxlMlsnZGVmYXVsdCddLFxuXHQgIFRhYmxlSGVhZGVyQ29sdW1uOiBfVGFibGVIZWFkZXJDb2x1bW4yWydkZWZhdWx0J10sXG5cdCAgVGFibGVEYXRhU2V0OiBfc3RvcmVUYWJsZURhdGFTdG9yZS5UYWJsZURhdGFTZXRcblx0fTtcblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMV9fO1xuXG4vKioqLyB9LFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0c1tcImRlZmF1bHRcIl0gPSB7XG5cdCAgU09SVF9ERVNDOiBcImRlc2NcIixcblx0ICBTT1JUX0FTQzogXCJhc2NcIixcblx0ICBTSVpFX1BFUl9QQUdFOiAxMCxcblx0ICBORVhUX1BBR0U6IFwiPlwiLFxuXHQgIExBU1RfUEFHRTogXCI+PlwiLFxuXHQgIFBSRV9QQUdFOiBcIjxcIixcblx0ICBGSVJTVF9QQUdFOiBcIjw8XCIsXG5cdCAgUk9XX1NFTEVDVF9CR19DT0xPUjogXCJcIixcblx0ICBST1dfU0VMRUNUX05PTkU6IFwibm9uZVwiLFxuXHQgIFJPV19TRUxFQ1RfU0lOR0xFOiBcInJhZGlvXCIsXG5cdCAgUk9XX1NFTEVDVF9NVUxUSTogXCJjaGVja2JveFwiLFxuXHQgIENFTExfRURJVF9OT05FOiBcIm5vbmVcIixcblx0ICBDRUxMX0VESVRfQ0xJQ0s6IFwiY2xpY2tcIixcblx0ICBDRUxMX0VESVRfREJDTElDSzogXCJkYmNsaWNrXCIsXG5cdCAgU0laRV9QRVJfUEFHRV9MSVNUOiBbMTAsIDI1LCAzMCwgNTBdLFxuXHQgIFBBR0lOQVRJT05fU0laRTogNSxcblx0ICBOT19EQVRBX1RFWFQ6IFwiVGhlcmUgaXMgbm8gZGF0YSB0byBkaXNwbGF5XCIsXG5cdCAgU0hPV19PTkxZX1NFTEVDVDogXCJTaG93IFNlbGVjdGVkIE9ubHlcIixcblx0ICBTSE9XX0FMTDogXCJTaG93IEFsbFwiLFxuXHQgIEZJTFRFUl9ERUxBWTogNTAwLFxuXHQgIEZJTFRFUl9UWVBFOiB7XG5cdCAgICBURVhUOiBcIlRleHRGaWx0ZXJcIixcblx0ICAgIFNFTEVDVDogXCJTZWxlY3RGaWx0ZXJcIixcblx0ICAgIE5VTUJFUjogXCJOdW1iZXJGaWx0ZXJcIixcblx0ICAgIERBVEU6IFwiRGF0ZUZpbHRlclwiLFxuXHQgICAgQ1VTVE9NOiBcIkN1c3RvbUZpbHRlclwiXG5cdCAgfVxuXHR9O1xuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdO1xuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOy8qIVxuXHQgIENvcHlyaWdodCAoYykgMjAxNiBKZWQgV2F0c29uLlxuXHQgIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG5cdCAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuXHQqL1xuXHQvKiBnbG9iYWwgZGVmaW5lICovXG5cdFxuXHQoZnVuY3Rpb24gKCkge1xuXHRcdCd1c2Ugc3RyaWN0Jztcblx0XG5cdFx0dmFyIGhhc093biA9IHt9Lmhhc093blByb3BlcnR5O1xuXHRcblx0XHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHRcdHZhciBjbGFzc2VzID0gW107XG5cdFxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dmFyIGFyZyA9IGFyZ3VtZW50c1tpXTtcblx0XHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXHRcblx0XHRcdFx0dmFyIGFyZ1R5cGUgPSB0eXBlb2YgYXJnO1xuXHRcblx0XHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGFyZyk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoYXJnVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0XHRpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7XG5cdFx0XHRcdFx0XHRcdGNsYXNzZXMucHVzaChrZXkpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0XHR9XG5cdFxuXHRcdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHRcdH0gZWxzZSBpZiAodHJ1ZSkge1xuXHRcdFx0Ly8gcmVnaXN0ZXIgYXMgJ2NsYXNzbmFtZXMnLCBjb25zaXN0ZW50IHdpdGggbnBtIHBhY2thZ2UgbmFtZVxuXHRcdFx0IShfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fID0gW10sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRyZXR1cm4gY2xhc3NOYW1lcztcblx0XHRcdH0uYXBwbHkoZXhwb3J0cywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0d2luZG93LmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzO1xuXHRcdH1cblx0fSgpKTtcblxuXG4vKioqLyB9LFxuLyogNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzRfXztcblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgX0NvbnN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfQ29uc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ29uc3QpO1xuXHRcblx0dmFyIF9jbGFzc25hbWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblx0XG5cdGV4cG9ydHNbJ2RlZmF1bHQnXSA9IHtcblx0XG5cdCAgcmVuZGVyU29ydENhcmV0OiBmdW5jdGlvbiByZW5kZXJTb3J0Q2FyZXQob3JkZXIpIHtcblx0ICAgIHZhciB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG5cdCAgICB3cmFwLmNsYXNzTmFtZSA9IFwib3JkZXJcIjtcblx0ICAgIGlmIChvcmRlciA9PSBfQ29uc3QyWydkZWZhdWx0J10uU09SVF9BU0MpIHdyYXAuY2xhc3NOYW1lICs9IFwiIGRyb3B1cFwiO1xuXHQgICAgdmFyIGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG5cdCAgICBpbm5lci5jbGFzc05hbWUgPSBcImNhcmV0XCI7XG5cdCAgICBpbm5lci5zdHlsZS5tYXJnaW4gPSBcIjEwcHggNXB4XCI7XG5cdCAgICB3cmFwLmFwcGVuZENoaWxkKGlubmVyKTtcblx0ICAgIHJldHVybiB3cmFwO1xuXHQgIH0sXG5cdFxuXHQgIHJlbmRlclJlYWN0U29ydENhcmV0OiBmdW5jdGlvbiByZW5kZXJSZWFjdFNvcnRDYXJldChvcmRlcikge1xuXHQgICAgdmFyIG9yZGVyQ2xhc3MgPSAoMCwgX2NsYXNzbmFtZXMyWydkZWZhdWx0J10pKFwib3JkZXJcIiwge1xuXHQgICAgICAnZHJvcHVwJzogb3JkZXIgPT0gX0NvbnN0MlsnZGVmYXVsdCddLlNPUlRfQVNDXG5cdCAgICB9KTtcblx0ICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgJ3NwYW4nLFxuXHQgICAgICB7IGNsYXNzTmFtZTogb3JkZXJDbGFzcyB9LFxuXHQgICAgICBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnY2FyZXQnLCBzdHlsZTogeyBtYXJnaW46ICcxMHB4IDVweCcgfSB9KVxuXHQgICAgKTtcblx0ICB9LFxuXHRcblx0ICBnZXRTY3JvbGxCYXJXaWR0aDogZnVuY3Rpb24gZ2V0U2Nyb2xsQmFyV2lkdGgoKSB7XG5cdCAgICB2YXIgaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG5cdCAgICBpbm5lci5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuXHQgICAgaW5uZXIuc3R5bGUuaGVpZ2h0ID0gXCIyMDBweFwiO1xuXHRcblx0ICAgIHZhciBvdXRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgb3V0ZXIuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG5cdCAgICBvdXRlci5zdHlsZS50b3AgPSBcIjBweFwiO1xuXHQgICAgb3V0ZXIuc3R5bGUubGVmdCA9IFwiMHB4XCI7XG5cdCAgICBvdXRlci5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcblx0ICAgIG91dGVyLnN0eWxlLndpZHRoID0gXCIyMDBweFwiO1xuXHQgICAgb3V0ZXIuc3R5bGUuaGVpZ2h0ID0gXCIxNTBweFwiO1xuXHQgICAgb3V0ZXIuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuXHQgICAgb3V0ZXIuYXBwZW5kQ2hpbGQoaW5uZXIpO1xuXHRcblx0ICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQob3V0ZXIpO1xuXHQgICAgdmFyIHcxID0gaW5uZXIub2Zmc2V0V2lkdGg7XG5cdCAgICBvdXRlci5zdHlsZS5vdmVyZmxvdyA9ICdzY3JvbGwnO1xuXHQgICAgdmFyIHcyID0gaW5uZXIub2Zmc2V0V2lkdGg7XG5cdCAgICBpZiAodzEgPT0gdzIpIHcyID0gb3V0ZXIuY2xpZW50V2lkdGg7XG5cdFxuXHQgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChvdXRlcik7XG5cdFxuXHQgICAgcmV0dXJuIHcxIC0gdzI7XG5cdCAgfVxuXHRcblx0fTtcblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0sXG4vKiA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9yY1N3aXRjaCA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHR2YXIgX3JjU3dpdGNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JjU3dpdGNoKTtcblx0XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTQpO1xuXHRcblx0dmFyIF9yZWFjdFNlbGVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0dmFyIF9yZWFjdFNlbGVjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdFNlbGVjdCk7XG5cdFxuXHR2YXIgRWRpdG9yID0gZnVuY3Rpb24gRWRpdG9yKGVkaXRhYmxlLCBhdHRyLCBmb3JtYXQsIGVkaXRvckNsYXNzLCBkZWZhdWx0VmFsdWUpIHtcblx0XG5cdCAgICBpZiAoZWRpdGFibGUgPT09IHRydWUgfHwgdHlwZW9mIGVkaXRhYmxlID09PSBcInN0cmluZ1wiKSB7XG5cdCAgICAgICAgLy9zaW1wbGUgZGVjbGFyZVxuXHQgICAgICAgIHZhciB0eXBlID0gZWRpdGFibGUgPT09IHRydWUgPyAndGV4dCcgOiBlZGl0YWJsZTtcblx0ICAgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgX2V4dGVuZHMoe30sIGF0dHIsIHsgdHlwZTogdHlwZSwgZGVmYXVsdFZhbHVlOiBkZWZhdWx0VmFsdWUsXG5cdCAgICAgICAgICAgIGNsYXNzTmFtZTogKGVkaXRvckNsYXNzIHx8IFwiXCIpICsgXCIgZm9ybS1jb250cm9sIGVkaXRvciBlZGl0LXRleHRcIiB9KSk7XG5cdCAgICB9IGVsc2UgaWYgKCFlZGl0YWJsZSkge1xuXHQgICAgICAgIHZhciB0eXBlID0gZWRpdGFibGUgPT09IHRydWUgPyAndGV4dCcgOiBlZGl0YWJsZTtcblx0ICAgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgX2V4dGVuZHMoe30sIGF0dHIsIHsgdHlwZTogdHlwZSwgZGVmYXVsdFZhbHVlOiBkZWZhdWx0VmFsdWUsIGRpc2FibGVkOiAnZGlzYWJsZWQnLFxuXHQgICAgICAgICAgICBjbGFzc05hbWU6IChlZGl0b3JDbGFzcyB8fCBcIlwiKSArIFwiIGZvcm0tY29udHJvbCBlZGl0b3IgZWRpdC10ZXh0XCIgfSkpO1xuXHQgICAgfSBlbHNlIGlmIChlZGl0YWJsZS50eXBlKSB7XG5cdCAgICAgICAgLy9zdGFuZGFyZCBkZWNsYXJlXG5cdCAgICAgICAgLy9wdXQgc3R5bGUgaWYgZXhpc3Rcblx0ICAgICAgICBlZGl0YWJsZS5zdHlsZSAmJiAoYXR0ci5zdHlsZSA9IGVkaXRhYmxlLnN0eWxlKTtcblx0XG5cdCAgICAgICAgLy9wdXQgY2xhc3MgaWYgZXhpc3Rcblx0ICAgICAgICBhdHRyLmNsYXNzTmFtZSA9IChlZGl0b3JDbGFzcyB8fCBcIlwiKSArIFwiIGZvcm0tY29udHJvbCBlZGl0b3IgZWRpdC1cIiArIGVkaXRhYmxlLnR5cGUgKyAoZWRpdGFibGUuY2xhc3NOYW1lID8gXCIgXCIgKyBlZGl0YWJsZS5jbGFzc05hbWUgOiBcIlwiKTtcblx0XG5cdCAgICAgICAgaWYgKGVkaXRhYmxlLnR5cGUgPT09ICdzZWxlY3QnKSB7XG5cdCAgICAgICAgICAgIC8vcHJvY2VzcyBzZWxlY3QgaW5wdXRcblx0ICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBbXSxcblx0ICAgICAgICAgICAgICAgIHZhbHVlcyA9IGVkaXRhYmxlLm9wdGlvbnMudmFsdWVzO1xuXHQgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZXMpKSB7XG5cdCAgICAgICAgICAgICAgICAvL29ubHkgY2FuIHVzZSBhcnJyYXkgZGF0YSBmb3Igb3B0aW9uc1xuXHQgICAgICAgICAgICAgICAgdmFyIHJvd1ZhbHVlO1xuXHQgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHZhbHVlcy5tYXAoZnVuY3Rpb24gKGQsIGkpIHtcblx0ICAgICAgICAgICAgICAgICAgICByb3dWYWx1ZSA9IGZvcm1hdCA/IGZvcm1hdChkKSA6IGQ7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAnb3B0aW9uJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICdvcHRpb24nICsgaSwgdmFsdWU6IGQgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcm93VmFsdWVcblx0ICAgICAgICAgICAgICAgICAgICApO1xuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgJ3NlbGVjdCcsXG5cdCAgICAgICAgICAgICAgICBfZXh0ZW5kcyh7fSwgYXR0ciwgeyBkZWZhdWx0VmFsdWU6IGRlZmF1bHRWYWx1ZSB9KSxcblx0ICAgICAgICAgICAgICAgIG9wdGlvbnNcblx0ICAgICAgICAgICAgKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGVkaXRhYmxlLnR5cGUgPT09ICd0ZXh0YXJlYScpIHtcblx0ICAgICAgICAgICAgLy9wcm9jZXNzIHRleHRhcmVhIGlucHV0XG5cdCAgICAgICAgICAgIC8vcHV0ICBvdGhlciBpZiBleGlzdFxuXHQgICAgICAgICAgICBlZGl0YWJsZS5jb2xzICYmIChhdHRyLmNvbHMgPSBlZGl0YWJsZS5jb2xzKTtcblx0ICAgICAgICAgICAgZWRpdGFibGUucm93cyAmJiAoYXR0ci5yb3dzID0gZWRpdGFibGUucm93cyk7XG5cdCAgICAgICAgICAgIHZhciBrZXlVcEhhbmRsZXIgPSBhdHRyLm9uS2V5RG93bixcblx0ICAgICAgICAgICAgICAgIHNhdmVCdG4gPSBudWxsO1xuXHQgICAgICAgICAgICBpZiAoa2V5VXBIYW5kbGVyKSB7XG5cdCAgICAgICAgICAgICAgICBhdHRyLm9uS2V5RG93biA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKGUua2V5Q29kZSAhPSAxMykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAvL25vdCBQcmVzc2VkIEVOVEVSXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGtleVVwSGFuZGxlcihlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICAgICAgc2F2ZUJ0biA9IF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdidXR0bycsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdidG4gYnRuLWluZm8gYnRuLXhzIHRleHRhcmVhLXNhdmUtYnRuJywgb25DbGljazoga2V5VXBIYW5kbGVyIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgJ3NhdmUnXG5cdCAgICAgICAgICAgICAgICApO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgIG51bGwsXG5cdCAgICAgICAgICAgICAgICBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnLCBfZXh0ZW5kcyh7fSwgYXR0ciwgeyBkZWZhdWx0VmFsdWU6IGRlZmF1bHRWYWx1ZSB9KSksXG5cdCAgICAgICAgICAgICAgICBzYXZlQnRuXG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChlZGl0YWJsZS50eXBlID09PSAnY2hlY2tib3gnKSB7XG5cdCAgICAgICAgICAgIHZhciBfdmFsdWVzID0gJ3RydWU6ZmFsc2UnO1xuXHQgICAgICAgICAgICBpZiAoZWRpdGFibGUub3B0aW9ucyAmJiBlZGl0YWJsZS5vcHRpb25zLnZhbHVlcykge1xuXHQgICAgICAgICAgICAgICAgLy8gdmFsdWVzID0gZWRpdGFibGUub3B0aW9ucy52YWx1ZXMuc3BsaXQoJzonKTtcblx0ICAgICAgICAgICAgICAgIF92YWx1ZXMgPSBlZGl0YWJsZS5vcHRpb25zLnZhbHVlcztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBhdHRyLmNsYXNzTmFtZSA9IGF0dHIuY2xhc3NOYW1lLnJlcGxhY2UoJ2Zvcm0tY29udHJvbCcsICcnKTtcblx0ICAgICAgICAgICAgYXR0ci5jbGFzc05hbWUgKz0gJyBjaGVja2JveCBwdWxsLXJpZ2h0Jztcblx0XG5cdCAgICAgICAgICAgIHZhciBjaGVja2VkID0gZGVmYXVsdFZhbHVlICYmIGRlZmF1bHRWYWx1ZS50b1N0cmluZygpID09IF92YWx1ZXMuc3BsaXQoJzonKVswXSA/IHRydWUgOiBmYWxzZTtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudCgnaW5wdXQnLCBfZXh0ZW5kcyh7fSwgYXR0ciwgeyB0eXBlOiAnY2hlY2tib3gnLCB2YWx1ZTogX3ZhbHVlcywgZGVmYXVsdENoZWNrZWQ6IGNoZWNrZWQgfSkpO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoZWRpdGFibGUudHlwZSA9PT0gJ3N3aXRjaCcpIHtcblx0ICAgICAgICAgICAgdmFyIF92YWx1ZXMyID0gJ3RydWU6ZmFsc2UnO1xuXHQgICAgICAgICAgICBhdHRyLmNsYXNzTmFtZSA9IGF0dHIuY2xhc3NOYW1lLnJlcGxhY2UoJ2Zvcm0tY29udHJvbCcsICcnKTtcblx0ICAgICAgICAgICAgYXR0ci5jbGFzc05hbWUgKz0gJyBjaGVja2JveCBwdWxsLXJpZ2h0Jztcblx0ICAgICAgICAgICAgdmFyIGNoZWNrZWQgPSBkZWZhdWx0VmFsdWUgJiYgZGVmYXVsdFZhbHVlLnRvU3RyaW5nKCkgPT0gX3ZhbHVlczIuc3BsaXQoJzonKVswXSA/IHRydWUgOiBmYWxzZTtcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KF9yY1N3aXRjaDJbJ2RlZmF1bHQnXSwgeyBjbGFzc05hbWU6IGF0dHIuY2xhc3NOYW1lLCBkZWZhdWx0Q2hlY2tlZDogY2hlY2tlZCB9KTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGVkaXRhYmxlLnR5cGUgPT09ICdyZWFjdC1zZWxlY3QnKSB7XG5cdCAgICAgICAgICAgIHZhciBtdWx0aU9wdCA9IHR5cGVvZiBlZGl0YWJsZS5vcHRpb25zLm11bHRpICE9PSAndW5kZWZpbmVkJyA/IGVkaXRhYmxlLm9wdGlvbnMubXVsdGkgOiBmYWxzZTtcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KF9yZWFjdFNlbGVjdDJbJ2RlZmF1bHQnXSwgeyBjbGFzc05hbWU6ICdwdWxsLXJpZ2h0Jywgb3B0aW9uczogZWRpdGFibGUub3B0aW9ucy52YWx1ZXMsIG11bHRpOiBtdWx0aU9wdCwgc2ltcGxlVmFsdWU6IHRydWUgfSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgLy9wcm9jZXNzIG90aGVyIGlucHV0IHR5cGUuIGFzIHBhc3N3b3JkLHVybCxlbWFpbC4uLlxuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgX2V4dGVuZHMoe30sIGF0dHIsIHsgdHlwZTogdHlwZSwgZGVmYXVsdFZhbHVlOiBkZWZhdWx0VmFsdWUgfSkpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vZGVmYXVsdCByZXR1cm4gZm9yIG90aGVyIGNhc2Ugb2YgZWRpdGFibGVcblx0ICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudCgnaW5wdXQnLCBfZXh0ZW5kcyh7fSwgYXR0ciwgeyB0eXBlOiAndGV4dCcsIGNsYXNzTmFtZTogKGVkaXRvckNsYXNzIHx8IFwiXCIpICsgXCIgZm9ybS1jb250cm9sIGVkaXRvciBlZGl0LXRleHRcIiB9KSk7XG5cdH07XG5cdFxuXHRleHBvcnRzWydkZWZhdWx0J10gPSBFZGl0b3I7XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9LFxuLyogNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblx0XG5cdHZhciBfZ2V0ID0gZnVuY3Rpb24gZ2V0KF94LCBfeDIsIF94MykgeyB2YXIgX2FnYWluID0gdHJ1ZTsgX2Z1bmN0aW9uOiB3aGlsZSAoX2FnYWluKSB7IHZhciBvYmplY3QgPSBfeCwgcHJvcGVydHkgPSBfeDIsIHJlY2VpdmVyID0gX3gzOyBfYWdhaW4gPSBmYWxzZTsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IF94ID0gcGFyZW50OyBfeDIgPSBwcm9wZXJ0eTsgX3gzID0gcmVjZWl2ZXI7IF9hZ2FpbiA9IHRydWU7IGRlc2MgPSBwYXJlbnQgPSB1bmRlZmluZWQ7IGNvbnRpbnVlIF9mdW5jdGlvbjsgfSB9IGVsc2UgaWYgKCd2YWx1ZScgaW4gZGVzYykgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH0gfTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gJ2Z1bmN0aW9uJyAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ1N1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgJyArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgX0NvbnN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfQ29uc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ29uc3QpO1xuXHRcblx0dmFyIF9yZWFjdFRvYXN0ciA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHRcblx0dmFyIFRvYXN0ck1lc3NhZ2VGYWN0b3J5ID0gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUZhY3RvcnkoX3JlYWN0VG9hc3RyLlRvYXN0TWVzc2FnZS5hbmltYXRpb24pO1xuXHRcblx0dmFyIE5vdGlmaWNhdGlvbiA9IChmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuXHQgIF9pbmhlcml0cyhOb3RpZmljYXRpb24sIF9SZWFjdCRDb21wb25lbnQpO1xuXHRcblx0ICBmdW5jdGlvbiBOb3RpZmljYXRpb24oKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTm90aWZpY2F0aW9uKTtcblx0XG5cdCAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihOb3RpZmljYXRpb24ucHJvdG90eXBlKSwgJ2NvbnN0cnVjdG9yJywgdGhpcykuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhOb3RpZmljYXRpb24sIFt7XG5cdCAgICBrZXk6ICdub3RpY2UnLFxuXHRcblx0ICAgIC8vIGFsbG93IHR5cGUgaXMgc3VjY2VzcyxpbmZvLHdhcm5pbmcsZXJyb3Jcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBub3RpY2UodHlwZSwgbXNnLCB0aXRsZSkge1xuXHQgICAgICB0aGlzLnJlZnMudG9hc3RyW3R5cGVdKG1zZywgdGl0bGUsIHtcblx0ICAgICAgICBtb2RlOiAnc2luZ2xlJyxcblx0ICAgICAgICB0aW1lT3V0OiA1MDAwLFxuXHQgICAgICAgIGV4dGVuZGVkVGltZU91dDogMTAwMCxcblx0ICAgICAgICBzaG93QW5pbWF0aW9uOiBcImFuaW1hdGVkICBib3VuY2VJblwiLFxuXHQgICAgICAgIGhpZGVBbmltYXRpb246IFwiYW5pbWF0ZWQgYm91bmNlT3V0XCJcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncmVuZGVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChfcmVhY3RUb2FzdHIuVG9hc3RDb250YWluZXIsIHsgcmVmOiAndG9hc3RyJywgdG9hc3RNZXNzYWdlRmFjdG9yeTogVG9hc3RyTWVzc2FnZUZhY3RvcnksXG5cdCAgICAgICAgaWQ6ICd0b2FzdC1jb250YWluZXInLCBjbGFzc05hbWU6ICd0b2FzdC10b3AtcmlnaHQnIH0pO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIE5vdGlmaWNhdGlvbjtcblx0fSkoX3JlYWN0MlsnZGVmYXVsdCddLkNvbXBvbmVudCk7XG5cdFxuXHRleHBvcnRzWydkZWZhdWx0J10gPSBOb3RpZmljYXRpb247XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9LFxuLyogOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblx0XG5cdHZhciBfZ2V0ID0gZnVuY3Rpb24gZ2V0KF94LCBfeDIsIF94MykgeyB2YXIgX2FnYWluID0gdHJ1ZTsgX2Z1bmN0aW9uOiB3aGlsZSAoX2FnYWluKSB7IHZhciBvYmplY3QgPSBfeCwgcHJvcGVydHkgPSBfeDIsIHJlY2VpdmVyID0gX3gzOyBfYWdhaW4gPSBmYWxzZTsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IF94ID0gcGFyZW50OyBfeDIgPSBwcm9wZXJ0eTsgX3gzID0gcmVjZWl2ZXI7IF9hZ2FpbiA9IHRydWU7IGRlc2MgPSBwYXJlbnQgPSB1bmRlZmluZWQ7IGNvbnRpbnVlIF9mdW5jdGlvbjsgfSB9IGVsc2UgaWYgKCd2YWx1ZScgaW4gZGVzYykgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH0gfTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gJ2Z1bmN0aW9uJyAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ1N1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgJyArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBfQ29uc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9Db25zdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Db25zdCk7XG5cdFxuXHR2YXIgRXZlbnRFbWl0dGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCkuRXZlbnRFbWl0dGVyO1xuXHRcblx0ZnVuY3Rpb24gX3NvcnQoYXJyLCBzb3J0RmllbGQsIG9yZGVyLCBzb3J0RnVuYykge1xuXHQgIG9yZGVyID0gb3JkZXIudG9Mb3dlckNhc2UoKTtcblx0ICBhcnIuc29ydChmdW5jdGlvbiAoYSwgYikge1xuXHQgICAgaWYgKHNvcnRGdW5jKSB7XG5cdCAgICAgIHJldHVybiBzb3J0RnVuYyhhLCBiLCBvcmRlciwgc29ydEZpZWxkKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmIChvcmRlciA9PSBfQ29uc3QyWydkZWZhdWx0J10uU09SVF9ERVNDKSB7XG5cdCAgICAgICAgcmV0dXJuIGFbc29ydEZpZWxkXSA+IGJbc29ydEZpZWxkXSA/IC0xIDogYVtzb3J0RmllbGRdIDwgYltzb3J0RmllbGRdID8gMSA6IDA7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIGFbc29ydEZpZWxkXSA8IGJbc29ydEZpZWxkXSA/IC0xIDogYVtzb3J0RmllbGRdID4gYltzb3J0RmllbGRdID8gMSA6IDA7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgcmV0dXJuIGFycjtcblx0fVxuXHRcblx0dmFyIFRhYmxlRGF0YVNldCA9IChmdW5jdGlvbiAoX0V2ZW50RW1pdHRlcikge1xuXHQgIF9pbmhlcml0cyhUYWJsZURhdGFTZXQsIF9FdmVudEVtaXR0ZXIpO1xuXHRcblx0ICBmdW5jdGlvbiBUYWJsZURhdGFTZXQoZGF0YSkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRhYmxlRGF0YVNldCk7XG5cdFxuXHQgICAgX2dldChPYmplY3QuZ2V0UHJvdG90eXBlT2YoVGFibGVEYXRhU2V0LnByb3RvdHlwZSksICdjb25zdHJ1Y3RvcicsIHRoaXMpLmNhbGwodGhpcywgZGF0YSk7XG5cdCAgICB0aGlzLmRhdGEgPSBkYXRhO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFRhYmxlRGF0YVNldCwgW3tcblx0ICAgIGtleTogJ3NldERhdGEnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNldERhdGEoZGF0YSkge1xuXHQgICAgICB0aGlzLmVtaXQoJ2NoYW5nZScsIGRhdGEpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2NsZWFyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhcigpIHtcblx0ICAgICAgdGhpcy5kYXRhID0gbnVsbDtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdnZXREYXRhJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREYXRhKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5kYXRhO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFRhYmxlRGF0YVNldDtcblx0fSkoRXZlbnRFbWl0dGVyKTtcblx0XG5cdGV4cG9ydHMuVGFibGVEYXRhU2V0ID0gVGFibGVEYXRhU2V0O1xuXHRcblx0dmFyIFRhYmxlRGF0YVN0b3JlID0gKGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBUYWJsZURhdGFTdG9yZShkYXRhKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGFibGVEYXRhU3RvcmUpO1xuXHRcblx0ICAgIHRoaXMuZGF0YSA9IGRhdGE7XG5cdCAgICB0aGlzLmNvbEluZm9zID0gbnVsbDtcblx0ICAgIHRoaXMuZmlsdGVyZWREYXRhID0gbnVsbDtcblx0ICAgIHRoaXMuaXNPbkZpbHRlciA9IGZhbHNlO1xuXHQgICAgdGhpcy5maWx0ZXJPYmogPSBudWxsO1xuXHQgICAgdGhpcy5zZWFyY2hUZXh0ID0gbnVsbDtcblx0ICAgIHRoaXMuc29ydE9iaiA9IG51bGw7XG5cdCAgICB0aGlzLnBhZ2VPYmogPSB7fTtcblx0ICAgIHRoaXMuc2VsZWN0ZWQgPSBbXTtcblx0ICAgIHRoaXMubXVsdGlDb2x1bW5TZWFyY2ggPSBmYWxzZTtcblx0ICAgIHRoaXMuc2hvd09ubHlTZWxlY3RlZCA9IGZhbHNlO1xuXHQgICAgdGhpcy5yZW1vdGUgPSBmYWxzZTsgLy8gcmVtb3RlIGRhdGFcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhUYWJsZURhdGFTdG9yZSwgW3tcblx0ICAgIGtleTogJ3NldFByb3BzJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRQcm9wcyhwcm9wcykge1xuXHQgICAgICB0aGlzLmtleUZpZWxkID0gcHJvcHMua2V5RmllbGQ7XG5cdCAgICAgIHRoaXMuZW5hYmxlUGFnaW5hdGlvbiA9IHByb3BzLmlzUGFnaW5hdGlvbjtcblx0ICAgICAgdGhpcy5jb2xJbmZvcyA9IHByb3BzLmNvbEluZm9zO1xuXHQgICAgICB0aGlzLnJlbW90ZSA9IHByb3BzLnJlbW90ZTtcblx0ICAgICAgdGhpcy5tdWx0aUNvbHVtblNlYXJjaCA9IHByb3BzLm11bHRpQ29sdW1uU2VhcmNoO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NldERhdGEnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNldERhdGEoZGF0YSkge1xuXHQgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuXHQgICAgICBpZiAodGhpcy5pc09uRmlsdGVyKSB7XG5cdCAgICAgICAgaWYgKG51bGwgIT09IHRoaXMuZmlsdGVyT2JqKSB0aGlzLmZpbHRlcih0aGlzLmZpbHRlck9iaik7XG5cdCAgICAgICAgaWYgKG51bGwgIT09IHRoaXMuc2VhcmNoVGV4dCkgdGhpcy5zZWFyY2godGhpcy5zZWFyY2hUZXh0KTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAodGhpcy5zb3J0T2JqKSB7XG5cdCAgICAgICAgdGhpcy5zb3J0KHRoaXMuc29ydE9iai5vcmRlciwgdGhpcy5zb3J0T2JqLnNvcnRGaWVsZCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdnZXRTb3J0SW5mbycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U29ydEluZm8oKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnNvcnRPYmo7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2V0U2VsZWN0ZWRSb3dLZXknLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFNlbGVjdGVkUm93S2V5KHNlbGVjdGVkUm93S2V5cykge1xuXHQgICAgICB0aGlzLnNlbGVjdGVkID0gc2VsZWN0ZWRSb3dLZXlzO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2dldFNlbGVjdGVkUm93S2V5cycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2VsZWN0ZWRSb3dLZXlzKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZDtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdnZXRDdXJyZW50RGlzcGxheURhdGEnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEN1cnJlbnREaXNwbGF5RGF0YSgpIHtcblx0ICAgICAgaWYgKHRoaXMuaXNPbkZpbHRlcikgcmV0dXJuIHRoaXMuZmlsdGVyZWREYXRhO2Vsc2UgcmV0dXJuIHRoaXMuZGF0YTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdpZ25vcmVOb25TZWxlY3RlZCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gaWdub3JlTm9uU2VsZWN0ZWQoKSB7XG5cdCAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICB0aGlzLnNob3dPbmx5U2VsZWN0ZWQgPSAhdGhpcy5zaG93T25seVNlbGVjdGVkO1xuXHQgICAgICBpZiAodGhpcy5zaG93T25seVNlbGVjdGVkKSB7XG5cdCAgICAgICAgdGhpcy5pc09uRmlsdGVyID0gdHJ1ZTtcblx0ICAgICAgICB0aGlzLmZpbHRlcmVkRGF0YSA9IHRoaXMuZGF0YS5maWx0ZXIoZnVuY3Rpb24gKHJvdykge1xuXHQgICAgICAgICAgdmFyIHJlc3VsdCA9IF90aGlzLnNlbGVjdGVkLmZpbmQoZnVuY3Rpb24gKHgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJvd1tfdGhpcy5rZXlGaWVsZF0gPT09IHg7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICAgIHJldHVybiB0eXBlb2YgcmVzdWx0ICE9PSAndW5kZWZpbmVkJyA/IHRydWUgOiBmYWxzZTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLmlzT25GaWx0ZXIgPSBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NvcnQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNvcnQob3JkZXIsIHNvcnRGaWVsZCkge1xuXHQgICAgICB0aGlzLnNvcnRPYmogPSB7XG5cdCAgICAgICAgb3JkZXI6IG9yZGVyLFxuXHQgICAgICAgIHNvcnRGaWVsZDogc29ydEZpZWxkXG5cdCAgICAgIH07XG5cdFxuXHQgICAgICB2YXIgY3VycmVudERpc3BsYXlEYXRhID0gdGhpcy5nZXRDdXJyZW50RGlzcGxheURhdGEoKTtcblx0ICAgICAgaWYgKCF0aGlzLmNvbEluZm9zW3NvcnRGaWVsZF0pIHJldHVybiB0aGlzO1xuXHRcblx0ICAgICAgdmFyIHNvcnRGdW5jID0gdGhpcy5jb2xJbmZvc1tzb3J0RmllbGRdLnNvcnRGdW5jO1xuXHRcblx0ICAgICAgY3VycmVudERpc3BsYXlEYXRhID0gX3NvcnQoY3VycmVudERpc3BsYXlEYXRhLCBzb3J0RmllbGQsIG9yZGVyLCBzb3J0RnVuYyk7XG5cdFxuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdwYWdlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBwYWdlKF9wYWdlLCBzaXplUGVyUGFnZSkge1xuXHQgICAgICB0aGlzLnBhZ2VPYmouZW5kID0gX3BhZ2UgKiBzaXplUGVyUGFnZSAtIDE7XG5cdCAgICAgIHRoaXMucGFnZU9iai5zdGFydCA9IHRoaXMucGFnZU9iai5lbmQgLSAoc2l6ZVBlclBhZ2UgLSAxKTtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZWRpdCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZWRpdChuZXdWYWwsIHJvd0luZGV4LCBmaWVsZE5hbWUpIHtcblx0ICAgICAgdmFyIGN1cnJlbnREaXNwbGF5RGF0YSA9IHRoaXMuZ2V0Q3VycmVudERpc3BsYXlEYXRhKCk7XG5cdCAgICAgIHZhciByb3dLZXlDYWNoZSA9IHVuZGVmaW5lZDtcblx0ICAgICAgaWYgKCF0aGlzLmVuYWJsZVBhZ2luYXRpb24pIHtcblx0ICAgICAgICBjdXJyZW50RGlzcGxheURhdGFbcm93SW5kZXhdW2ZpZWxkTmFtZV0gPSBuZXdWYWw7XG5cdCAgICAgICAgcm93S2V5Q2FjaGUgPSBjdXJyZW50RGlzcGxheURhdGFbcm93SW5kZXhdW3RoaXMua2V5RmllbGRdO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGN1cnJlbnREaXNwbGF5RGF0YVt0aGlzLnBhZ2VPYmouc3RhcnQgKyByb3dJbmRleF1bZmllbGROYW1lXSA9IG5ld1ZhbDtcblx0ICAgICAgICByb3dLZXlDYWNoZSA9IGN1cnJlbnREaXNwbGF5RGF0YVt0aGlzLnBhZ2VPYmouc3RhcnQgKyByb3dJbmRleF1bdGhpcy5rZXlGaWVsZF07XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHRoaXMuaXNPbkZpbHRlcikge1xuXHQgICAgICAgIHRoaXMuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcblx0ICAgICAgICAgIGlmIChyb3dbdGhpcy5rZXlGaWVsZF0gPT09IHJvd0tleUNhY2hlKSB7XG5cdCAgICAgICAgICAgIHJvd1tmaWVsZE5hbWVdID0gbmV3VmFsO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0sIHRoaXMpO1xuXHQgICAgICAgIGlmIChudWxsICE9PSB0aGlzLmZpbHRlck9iaikgdGhpcy5maWx0ZXIodGhpcy5maWx0ZXJPYmopO1xuXHQgICAgICAgIGlmIChudWxsICE9PSB0aGlzLnNlYXJjaFRleHQpIHRoaXMuc2VhcmNoKHRoaXMuc2VhcmNoVGV4dCk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnYWRkQXRCZWdpbicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gYWRkQXRCZWdpbihuZXdPYmopIHtcblx0ICAgICAgaWYgKCFuZXdPYmpbdGhpcy5rZXlGaWVsZF0gfHwgbmV3T2JqW3RoaXMua2V5RmllbGRdLnRvU3RyaW5nKCkgPT09ICcnKSB7XG5cdCAgICAgICAgdGhyb3cgdGhpcy5rZXlGaWVsZCArIFwiIGNhbid0IGJlIGVtcHR5IHZhbHVlLlwiO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBjdXJyZW50RGlzcGxheURhdGEgPSB0aGlzLmdldEN1cnJlbnREaXNwbGF5RGF0YSgpO1xuXHQgICAgICBjdXJyZW50RGlzcGxheURhdGEuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7XG5cdCAgICAgICAgaWYgKHJvd1t0aGlzLmtleUZpZWxkXS50b1N0cmluZygpID09PSBuZXdPYmpbdGhpcy5rZXlGaWVsZF0udG9TdHJpbmcoKSkge1xuXHQgICAgICAgICAgdGhyb3cgdGhpcy5rZXlGaWVsZCArIFwiIFwiICsgbmV3T2JqW3RoaXMua2V5RmllbGRdICsgXCIgYWxyZWFkeSBleGlzdHNcIjtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sIHRoaXMpO1xuXHQgICAgICBjb25zb2xlLmxvZygnQEAnKTtcblx0ICAgICAgY3VycmVudERpc3BsYXlEYXRhLnVuc2hpZnQobmV3T2JqKTtcblx0ICAgICAgaWYgKHRoaXMuaXNPbkZpbHRlcikge1xuXHQgICAgICAgIHRoaXMuZGF0YS51bnNoaWZ0KG5ld09iaik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdhZGQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZChuZXdPYmopIHtcblx0ICAgICAgaWYgKCFuZXdPYmpbdGhpcy5rZXlGaWVsZF0gfHwgbmV3T2JqW3RoaXMua2V5RmllbGRdLnRvU3RyaW5nKCkgPT09ICcnKSB7XG5cdCAgICAgICAgdGhyb3cgdGhpcy5rZXlGaWVsZCArIFwiIGNhbid0IGJlIGVtcHR5IHZhbHVlLlwiO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBjdXJyZW50RGlzcGxheURhdGEgPSB0aGlzLmdldEN1cnJlbnREaXNwbGF5RGF0YSgpO1xuXHQgICAgICBjdXJyZW50RGlzcGxheURhdGEuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7XG5cdCAgICAgICAgaWYgKHJvd1t0aGlzLmtleUZpZWxkXS50b1N0cmluZygpID09PSBuZXdPYmpbdGhpcy5rZXlGaWVsZF0udG9TdHJpbmcoKSkge1xuXHQgICAgICAgICAgdGhyb3cgdGhpcy5rZXlGaWVsZCArIFwiIFwiICsgbmV3T2JqW3RoaXMua2V5RmllbGRdICsgXCIgYWxyZWFkeSBleGlzdHNcIjtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sIHRoaXMpO1xuXHRcblx0ICAgICAgY3VycmVudERpc3BsYXlEYXRhLnB1c2gobmV3T2JqKTtcblx0ICAgICAgaWYgKHRoaXMuaXNPbkZpbHRlcikge1xuXHQgICAgICAgIHRoaXMuZGF0YS5wdXNoKG5ld09iaik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdyZW1vdmUnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZShyb3dLZXkpIHtcblx0ICAgICAgdmFyIGN1cnJlbnREaXNwbGF5RGF0YSA9IHRoaXMuZ2V0Q3VycmVudERpc3BsYXlEYXRhKCk7XG5cdCAgICAgIHZhciByZXN1bHQgPSBjdXJyZW50RGlzcGxheURhdGEuZmlsdGVyKGZ1bmN0aW9uIChyb3cpIHtcblx0ICAgICAgICByZXR1cm4gcm93S2V5LmluZGV4T2Yocm93W3RoaXMua2V5RmllbGRdKSA9PSAtMTtcblx0ICAgICAgfSwgdGhpcyk7XG5cdFxuXHQgICAgICBpZiAodGhpcy5pc09uRmlsdGVyKSB7XG5cdCAgICAgICAgdGhpcy5kYXRhID0gdGhpcy5kYXRhLmZpbHRlcihmdW5jdGlvbiAocm93KSB7XG5cdCAgICAgICAgICByZXR1cm4gcm93S2V5LmluZGV4T2Yocm93W3RoaXMua2V5RmllbGRdKSA9PSAtMTtcblx0ICAgICAgICB9LCB0aGlzKTtcblx0ICAgICAgICB0aGlzLmZpbHRlcmVkRGF0YSA9IHJlc3VsdDtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLmRhdGEgPSByZXN1bHQ7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdmaWx0ZXInLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbHRlcihmaWx0ZXJPYmopIHtcblx0ICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgICBpZiAoT2JqZWN0LmtleXMoZmlsdGVyT2JqKS5sZW5ndGggPT0gMCkge1xuXHQgICAgICAgIHRoaXMuZmlsdGVyZWREYXRhID0gbnVsbDtcblx0ICAgICAgICB0aGlzLmlzT25GaWx0ZXIgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLmZpbHRlck9iaiA9IG51bGw7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5maWx0ZXJPYmogPSBmaWx0ZXJPYmo7XG5cdCAgICAgICAgdGhpcy5maWx0ZXJlZERhdGEgPSB0aGlzLmRhdGEuZmlsdGVyKGZ1bmN0aW9uIChyb3cpIHtcblx0ICAgICAgICAgIHZhciB2YWxpZCA9IHRydWU7XG5cdCAgICAgICAgICB2YXIgZmlsdGVyVmFsID0gdW5kZWZpbmVkO1xuXHQgICAgICAgICAgZm9yICh2YXIga2V5IGluIGZpbHRlck9iaikge1xuXHQgICAgICAgICAgICB2YXIgdGFyZ2V0VmFsID0gcm93W2tleV07XG5cdFxuXHQgICAgICAgICAgICBzd2l0Y2ggKGZpbHRlck9ialtrZXldLnR5cGUpIHtcblx0ICAgICAgICAgICAgICBjYXNlIF9Db25zdDJbJ2RlZmF1bHQnXS5GSUxURVJfVFlQRS5OVU1CRVI6XG5cdCAgICAgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgICAgIGZpbHRlclZhbCA9IGZpbHRlck9ialtrZXldLnZhbHVlLm51bWJlcjtcblx0ICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgY2FzZSBfQ29uc3QyWydkZWZhdWx0J10uRklMVEVSX1RZUEUuQ1VTVE9NOlxuXHQgICAgICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgICAgICBmaWx0ZXJWYWwgPSB0eXBlb2YgZmlsdGVyT2JqW2tleV0udmFsdWUgPT09IFwib2JqZWN0XCIgPyB1bmRlZmluZWQgOiB0eXBlb2YgZmlsdGVyT2JqW2tleV0udmFsdWUgPT09IFwic3RyaW5nXCIgPyBmaWx0ZXJPYmpba2V5XS52YWx1ZS50b0xvd2VyQ2FzZSgpIDogZmlsdGVyT2JqW2tleV0udmFsdWU7XG5cdCAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgICAgIGZpbHRlclZhbCA9IHR5cGVvZiBmaWx0ZXJPYmpba2V5XS52YWx1ZSA9PT0gXCJzdHJpbmdcIiA/IGZpbHRlck9ialtrZXldLnZhbHVlLnRvTG93ZXJDYXNlKCkgOiBmaWx0ZXJPYmpba2V5XS52YWx1ZTtcblx0ICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlclZhbCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgLy8gU3VwcG9ydCBvbGQgZmlsdGVyXG5cdCAgICAgICAgICAgICAgICAgICAgZmlsdGVyVmFsID0gZmlsdGVyT2JqW2tleV0udG9Mb3dlckNhc2UoKTtcblx0ICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgaWYgKF90aGlzMi5jb2xJbmZvc1trZXldKSB7XG5cdCAgICAgICAgICAgICAgdmFyIF9jb2xJbmZvcyRrZXkgPSBfdGhpczIuY29sSW5mb3Nba2V5XTtcblx0ICAgICAgICAgICAgICB2YXIgZm9ybWF0ID0gX2NvbEluZm9zJGtleS5mb3JtYXQ7XG5cdCAgICAgICAgICAgICAgdmFyIGZpbHRlckZvcm1hdHRlZCA9IF9jb2xJbmZvcyRrZXkuZmlsdGVyRm9ybWF0dGVkO1xuXHQgICAgICAgICAgICAgIHZhciBmb3JtYXRFeHRyYURhdGEgPSBfY29sSW5mb3Mka2V5LmZvcm1hdEV4dHJhRGF0YTtcblx0XG5cdCAgICAgICAgICAgICAgaWYgKGZpbHRlckZvcm1hdHRlZCAmJiBmb3JtYXQpIHtcblx0ICAgICAgICAgICAgICAgIHRhcmdldFZhbCA9IGZvcm1hdChyb3dba2V5XSwgcm93LCBmb3JtYXRFeHRyYURhdGEpO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgc3dpdGNoIChmaWx0ZXJPYmpba2V5XS50eXBlKSB7XG5cdCAgICAgICAgICAgICAgY2FzZSBfQ29uc3QyWydkZWZhdWx0J10uRklMVEVSX1RZUEUuTlVNQkVSOlxuXHQgICAgICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgICAgICB2YWxpZCA9IF90aGlzMi5maWx0ZXJOdW1iZXIodGFyZ2V0VmFsLCBmaWx0ZXJWYWwsIGZpbHRlck9ialtrZXldLnZhbHVlLmNvbXBhcmF0b3IpO1xuXHQgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICBjYXNlIF9Db25zdDJbJ2RlZmF1bHQnXS5GSUxURVJfVFlQRS5EQVRFOlxuXHQgICAgICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgICAgICB2YWxpZCA9IF90aGlzMi5maWx0ZXJEYXRlKHRhcmdldFZhbCwgZmlsdGVyVmFsKTtcblx0ICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgY2FzZSBfQ29uc3QyWydkZWZhdWx0J10uRklMVEVSX1RZUEUuQ1VTVE9NOlxuXHQgICAgICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgICAgICB2YWxpZCA9IF90aGlzMi5maWx0ZXJDdXN0b20odGFyZ2V0VmFsLCBmaWx0ZXJWYWwsIGZpbHRlck9ialtrZXldLnZhbHVlKTtcblx0ICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgZGVmYXVsdDpcblx0ICAgICAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICAgICAgdmFsaWQgPSBfdGhpczIuZmlsdGVyVGV4dCh0YXJnZXRWYWwsIGZpbHRlclZhbCk7XG5cdCAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmICghdmFsaWQpIHtcblx0ICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgcmV0dXJuIHZhbGlkO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHRoaXMuaXNPbkZpbHRlciA9IHRydWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdmaWx0ZXJOdW1iZXInLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbHRlck51bWJlcih0YXJnZXRWYWwsIGZpbHRlclZhbCwgY29tcGFyYXRvcikge1xuXHQgICAgICB2YXIgdmFsaWQgPSB0cnVlO1xuXHQgICAgICBzd2l0Y2ggKGNvbXBhcmF0b3IpIHtcblx0ICAgICAgICBjYXNlIFwiPVwiOlxuXHQgICAgICAgICAge1xuXHQgICAgICAgICAgICBpZiAodGFyZ2V0VmFsICE9IGZpbHRlclZhbCkge1xuXHQgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgY2FzZSBcIj5cIjpcblx0ICAgICAgICAgIHtcblx0ICAgICAgICAgICAgaWYgKHRhcmdldFZhbCA8PSBmaWx0ZXJWYWwpIHtcblx0ICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIGNhc2UgXCI+PVwiOlxuXHQgICAgICAgICAge1xuXHQgICAgICAgICAgICBpZiAodGFyZ2V0VmFsIDwgZmlsdGVyVmFsKSB7XG5cdCAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgIH1cblx0ICAgICAgICBjYXNlIFwiPFwiOlxuXHQgICAgICAgICAge1xuXHQgICAgICAgICAgICBpZiAodGFyZ2V0VmFsID49IGZpbHRlclZhbCkge1xuXHQgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgY2FzZSBcIjw9XCI6XG5cdCAgICAgICAgICB7XG5cdCAgICAgICAgICAgIGlmICh0YXJnZXRWYWwgPiBmaWx0ZXJWYWwpIHtcblx0ICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIGNhc2UgXCIhPVwiOlxuXHQgICAgICAgICAge1xuXHQgICAgICAgICAgICBpZiAodGFyZ2V0VmFsID09IGZpbHRlclZhbCkge1xuXHQgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgZGVmYXVsdDpcblx0ICAgICAgICAgIHtcblx0ICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIk51bWJlciBjb21wYXJhdG9yIHByb3ZpZGVkIGlzIG5vdCBzdXBwb3J0ZWRcIik7XG5cdCAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2YWxpZDtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdmaWx0ZXJEYXRlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBmaWx0ZXJEYXRlKHRhcmdldFZhbCwgZmlsdGVyVmFsKSB7XG5cdCAgICAgIHJldHVybiB0YXJnZXRWYWwuZ2V0RGF0ZSgpID09IGZpbHRlclZhbC5nZXREYXRlKCkgJiYgdGFyZ2V0VmFsLmdldE1vbnRoKCkgPT0gZmlsdGVyVmFsLmdldE1vbnRoKCkgJiYgdGFyZ2V0VmFsLmdldEZ1bGxZZWFyKCkgPT0gZmlsdGVyVmFsLmdldEZ1bGxZZWFyKCk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZmlsdGVyQ3VzdG9tJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBmaWx0ZXJDdXN0b20odGFyZ2V0VmFsLCBmaWx0ZXJWYWwsIGNhbGxiYWNrSW5mbykge1xuXHQgICAgICBpZiAoY2FsbGJhY2tJbmZvICE9IG51bGwgJiYgdHlwZW9mIGNhbGxiYWNrSW5mbyA9PT0gXCJvYmplY3RcIikge1xuXHQgICAgICAgIHJldHVybiBjYWxsYmFja0luZm8uY2FsbGJhY2sodGFyZ2V0VmFsLCBjYWxsYmFja0luZm8uY2FsbGJhY2tQYXJhbWV0ZXJzKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIGZpbHRlclRleHQodGFyZ2V0VmFsLCBmaWx0ZXJWYWwpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2ZpbHRlclRleHQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbHRlclRleHQodGFyZ2V0VmFsLCBmaWx0ZXJWYWwpIHtcblx0ICAgICAgaWYgKHRhcmdldFZhbC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihmaWx0ZXJWYWwpID09IC0xKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0XG5cdCAgICAvKiBHZW5lcmFsIHNlYXJjaCBmdW5jdGlvblxyXG5cdCAgICAgKiBJdCB3aWxsIHNlYXJjaCBmb3IgdGhlIHRleHQgaWYgdGhlIGlucHV0IGluY2x1ZGVzIHRoYXQgdGV4dDtcclxuXHQgICAgICogSXQgd2lsbCBzZWFyY2ggZm9yIGV4YWN0IG51bWJlciBpZiB0aGUgaW5wdXQgaXMgdGhhdCBudW1iZXJcclxuXHQgICAgICovXG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2VhcmNoJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBzZWFyY2goc2VhcmNoVGV4dCkge1xuXHQgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblx0XG5cdCAgICAgIGlmIChzZWFyY2hUZXh0LnRyaW0oKSA9PT0gXCJcIikge1xuXHQgICAgICAgIHRoaXMuZmlsdGVyZWREYXRhID0gbnVsbDtcblx0ICAgICAgICB0aGlzLmlzT25GaWx0ZXIgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLnNlYXJjaFRleHQgPSBudWxsO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICBfdGhpczMuc2VhcmNoVGV4dCA9IHNlYXJjaFRleHQ7XG5cdCAgICAgICAgICB2YXIgc2VhcmNoVGV4dEFycmF5ID0gW107XG5cdFxuXHQgICAgICAgICAgaWYgKF90aGlzMy5tdWx0aUNvbHVtblNlYXJjaCkge1xuXHQgICAgICAgICAgICBzZWFyY2hUZXh0QXJyYXkgPSBzZWFyY2hUZXh0LnNwbGl0KCcgJyk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBzZWFyY2hUZXh0QXJyYXkucHVzaChzZWFyY2hUZXh0KTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBfdGhpczMuZmlsdGVyZWREYXRhID0gX3RoaXMzLmRhdGEuZmlsdGVyKGZ1bmN0aW9uIChyb3cpIHtcblx0ICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhyb3cpO1xuXHQgICAgICAgICAgICB2YXIgdmFsaWQgPSBmYWxzZTtcblx0ICAgICAgICAgICAgLy8gZm9yIGxvb3BzIGFyZSB1Z2x5LCBidXQgcGVyZm9ybWFuY2UgbWF0dGVycyBoZXJlLlxuXHQgICAgICAgICAgICAvLyBBbmQgeW91IGNhbnQgYnJlYWsgZnJvbSBhIGZvckVhY2guXG5cdCAgICAgICAgICAgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL2Zvci12cy1mb3JlYWNoLzY2XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBrZXlzTGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBrZXlzTGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcblx0ICAgICAgICAgICAgICBpZiAoX3RoaXMzLmNvbEluZm9zW2tleV0gJiYgcm93W2tleV0pIHtcblx0ICAgICAgICAgICAgICAgIHZhciBfY29sSW5mb3Mka2V5MiA9IF90aGlzMy5jb2xJbmZvc1trZXldO1xuXHQgICAgICAgICAgICAgICAgdmFyIGZvcm1hdCA9IF9jb2xJbmZvcyRrZXkyLmZvcm1hdDtcblx0ICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJGb3JtYXR0ZWQgPSBfY29sSW5mb3Mka2V5Mi5maWx0ZXJGb3JtYXR0ZWQ7XG5cdCAgICAgICAgICAgICAgICB2YXIgZm9ybWF0RXh0cmFEYXRhID0gX2NvbEluZm9zJGtleTIuZm9ybWF0RXh0cmFEYXRhO1xuXHQgICAgICAgICAgICAgICAgdmFyIHNlYXJjaGFibGUgPSBfY29sSW5mb3Mka2V5Mi5zZWFyY2hhYmxlO1xuXHQgICAgICAgICAgICAgICAgdmFyIGhpZGRlbiA9IF9jb2xJbmZvcyRrZXkyLmhpZGRlbjtcblx0XG5cdCAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0VmFsID0gcm93W2tleV07XG5cdCAgICAgICAgICAgICAgICBpZiAoIWhpZGRlbiAmJiBzZWFyY2hhYmxlKSB7XG5cdCAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJGb3JtYXR0ZWQgJiYgZm9ybWF0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGFyZ2V0VmFsID0gZm9ybWF0KHRhcmdldFZhbCwgcm93LCBmb3JtYXRFeHRyYURhdGEpO1xuXHQgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCB0ZXh0TGVuZ3RoID0gc2VhcmNoVGV4dEFycmF5Lmxlbmd0aDsgaiA8IHRleHRMZW5ndGg7IGorKykge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJWYWwgPSBzZWFyY2hUZXh0QXJyYXlbal0udG9Mb3dlckNhc2UoKTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0VmFsLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKGZpbHRlclZhbCkgIT09IC0xKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcmV0dXJuIHZhbGlkO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgICBfdGhpczMuaXNPbkZpbHRlciA9IHRydWU7XG5cdCAgICAgICAgfSkoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2dldERhdGFJZ25vcmluZ1BhZ2luYXRpb24nLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGdldERhdGFJZ25vcmluZ1BhZ2luYXRpb24oKSB7XG5cdCAgICAgIHZhciBfZGF0YSA9IHRoaXMuZ2V0Q3VycmVudERpc3BsYXlEYXRhKCk7XG5cdCAgICAgIHJldHVybiBfZGF0YTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdnZXQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgdmFyIF9kYXRhID0gdGhpcy5nZXRDdXJyZW50RGlzcGxheURhdGEoKTtcblx0XG5cdCAgICAgIGlmIChfZGF0YS5sZW5ndGggPT0gMCkgcmV0dXJuIF9kYXRhO1xuXHRcblx0ICAgICAgaWYgKHRoaXMucmVtb3RlIHx8ICF0aGlzLmVuYWJsZVBhZ2luYXRpb24pIHtcblx0ICAgICAgICByZXR1cm4gX2RhdGE7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSB0aGlzLnBhZ2VPYmouc3RhcnQ7IGkgPD0gdGhpcy5wYWdlT2JqLmVuZDsgaSsrKSB7XG5cdCAgICAgICAgICByZXN1bHQucHVzaChfZGF0YVtpXSk7XG5cdCAgICAgICAgICBpZiAoaSArIDEgPT0gX2RhdGEubGVuZ3RoKSBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2dldEtleUZpZWxkJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRLZXlGaWVsZCgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMua2V5RmllbGQ7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZ2V0RGF0YU51bScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGF0YU51bSgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudERpc3BsYXlEYXRhKCkubGVuZ3RoO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2lzQ2hhbmdlZFBhZ2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGlzQ2hhbmdlZFBhZ2UoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnBhZ2VPYmouc3RhcnQgJiYgdGhpcy5wYWdlT2JqLmVuZCA/IHRydWUgOiBmYWxzZTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdnZXRBbGxSb3drZXknLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFsbFJvd2tleSgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuZGF0YS5tYXAoZnVuY3Rpb24gKHJvdykge1xuXHQgICAgICAgIHJldHVybiByb3dbdGhpcy5rZXlGaWVsZF07XG5cdCAgICAgIH0sIHRoaXMpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFRhYmxlRGF0YVN0b3JlO1xuXHR9KSgpO1xuXHRcblx0ZXhwb3J0cy5UYWJsZURhdGFTdG9yZSA9IFRhYmxlRGF0YVN0b3JlO1xuXHRcblx0O1xuXG4vKioqLyB9LFxuLyogOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTtcblxuLyoqKi8gfSxcbi8qIDEwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG5cdFx0dmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfcmVhY3REb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0dmFyIF9yZWFjdERvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSk7XG5cdFxuXHR2YXIgX3JlYWN0SW5wdXRBdXRvc2l6ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHRcblx0dmFyIF9yZWFjdElucHV0QXV0b3NpemUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3RJbnB1dEF1dG9zaXplKTtcblx0XG5cdHZhciBfY2xhc3NuYW1lcyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX2NsYXNzbmFtZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NuYW1lcyk7XG5cdFxuXHR2YXIgX3V0aWxzU3RyaXBEaWFjcml0aWNzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHR2YXIgX3V0aWxzU3RyaXBEaWFjcml0aWNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3V0aWxzU3RyaXBEaWFjcml0aWNzKTtcblx0XG5cdHZhciBfQXN5bmMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTtcblx0XG5cdHZhciBfQXN5bmMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQXN5bmMpO1xuXHRcblx0dmFyIF9PcHRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTtcblx0XG5cdHZhciBfT3B0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX09wdGlvbik7XG5cdFxuXHR2YXIgX1ZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7XG5cdFxuXHR2YXIgX1ZhbHVlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1ZhbHVlKTtcblx0XG5cdGZ1bmN0aW9uIHN0cmluZ2lmeVZhbHVlKHZhbHVlKSB7XG5cdFx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHR9XG5cdH1cblx0XG5cdHZhciBzdHJpbmdPck5vZGUgPSBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm9uZU9mVHlwZShbX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsIF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMubm9kZV0pO1xuXHRcblx0dmFyIFNlbGVjdCA9IF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVDbGFzcyh7XG5cdFxuXHRcdGRpc3BsYXlOYW1lOiAnU2VsZWN0Jyxcblx0XG5cdFx0cHJvcFR5cGVzOiB7XG5cdFx0XHRhZGRMYWJlbFRleHQ6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLCAvLyBwbGFjZWhvbGRlciBkaXNwbGF5ZWQgd2hlbiB5b3Ugd2FudCB0byBhZGQgYSBsYWJlbCBvbiBhIG11bHRpLXZhbHVlIGlucHV0XG5cdFx0XHRhbGxvd0NyZWF0ZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLCAvLyB3aGV0aGVyIHRvIGFsbG93IGNyZWF0aW9uIG9mIG5ldyBlbnRyaWVzXG5cdFx0XHRhdXRvQmx1cjogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLFxuXHRcdFx0YXV0b2ZvY3VzOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsIC8vIGF1dG9mb2N1cyB0aGUgY29tcG9uZW50IG9uIG1vdW50XG5cdFx0XHRiYWNrc3BhY2VSZW1vdmVzOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsIC8vIHdoZXRoZXIgYmFja3NwYWNlIHJlbW92ZXMgYW4gaXRlbSBpZiB0aGVyZSBpcyBubyB0ZXh0IGlucHV0XG5cdFx0XHRjbGFzc05hbWU6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLCAvLyBjbGFzc05hbWUgZm9yIHRoZSBvdXRlciBlbGVtZW50XG5cdFx0XHRjbGVhckFsbFRleHQ6IHN0cmluZ09yTm9kZSwgLy8gdGl0bGUgZm9yIHRoZSBcImNsZWFyXCIgY29udHJvbCB3aGVuIG11bHRpOiB0cnVlXG5cdFx0XHRjbGVhclZhbHVlVGV4dDogc3RyaW5nT3JOb2RlLCAvLyB0aXRsZSBmb3IgdGhlIFwiY2xlYXJcIiBjb250cm9sXG5cdFx0XHRjbGVhcmFibGU6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCwgLy8gc2hvdWxkIGl0IGJlIHBvc3NpYmxlIHRvIHJlc2V0IHZhbHVlXG5cdFx0XHRkZWxpbWl0ZXI6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLCAvLyBkZWxpbWl0ZXIgdG8gdXNlIHRvIGpvaW4gbXVsdGlwbGUgdmFsdWVzIGZvciB0aGUgaGlkZGVuIGZpZWxkIHZhbHVlXG5cdFx0XHRkaXNhYmxlZDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLCAvLyB3aGV0aGVyIHRoZSBTZWxlY3QgaXMgZGlzYWJsZWQgb3Igbm90XG5cdFx0XHRlc2NhcGVDbGVhcnNWYWx1ZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLCAvLyB3aGV0aGVyIGVzY2FwZSBjbGVhcnMgdGhlIHZhbHVlIHdoZW4gdGhlIG1lbnUgaXMgY2xvc2VkXG5cdFx0XHRmaWx0ZXJPcHRpb246IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYywgLy8gbWV0aG9kIHRvIGZpbHRlciBhIHNpbmdsZSBvcHRpb24gKG9wdGlvbiwgZmlsdGVyU3RyaW5nKVxuXHRcdFx0ZmlsdGVyT3B0aW9uczogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5hbnksIC8vIGJvb2xlYW4gdG8gZW5hYmxlIGRlZmF1bHQgZmlsdGVyaW5nIG9yIGZ1bmN0aW9uIHRvIGZpbHRlciB0aGUgb3B0aW9ucyBhcnJheSAoW29wdGlvbnNdLCBmaWx0ZXJTdHJpbmcsIFt2YWx1ZXNdKVxuXHRcdFx0aWdub3JlQWNjZW50czogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLCAvLyB3aGV0aGVyIHRvIHN0cmlwIGRpYWNyaXRpY3Mgd2hlbiBmaWx0ZXJpbmdcblx0XHRcdGlnbm9yZUNhc2U6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCwgLy8gd2hldGhlciB0byBwZXJmb3JtIGNhc2UtaW5zZW5zaXRpdmUgZmlsdGVyaW5nXG5cdFx0XHRpbnB1dFByb3BzOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm9iamVjdCwgLy8gY3VzdG9tIGF0dHJpYnV0ZXMgZm9yIHRoZSBJbnB1dFxuXHRcdFx0aXNMb2FkaW5nOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsIC8vIHdoZXRoZXIgdGhlIFNlbGVjdCBpcyBsb2FkaW5nIGV4dGVybmFsbHkgb3Igbm90IChzdWNoIGFzIG9wdGlvbnMgYmVpbmcgbG9hZGVkKVxuXHRcdFx0bGFiZWxLZXk6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLCAvLyBwYXRoIG9mIHRoZSBsYWJlbCB2YWx1ZSBpbiBvcHRpb24gb2JqZWN0c1xuXHRcdFx0bWF0Y2hQb3M6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLCAvLyAoYW55fHN0YXJ0KSBtYXRjaCB0aGUgc3RhcnQgb3IgZW50aXJlIHN0cmluZyB3aGVuIGZpbHRlcmluZ1xuXHRcdFx0bWF0Y2hQcm9wOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZywgLy8gKGFueXxsYWJlbHx2YWx1ZSkgd2hpY2ggb3B0aW9uIHByb3BlcnR5IHRvIGZpbHRlciBvblxuXHRcdFx0bWVudUJ1ZmZlcjogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5udW1iZXIsIC8vIG9wdGlvbmFsIGJ1ZmZlciAoaW4gcHgpIGJldHdlZW4gdGhlIGJvdHRvbSBvZiB0aGUgdmlld3BvcnQgYW5kIHRoZSBib3R0b20gb2YgdGhlIG1lbnVcblx0XHRcdG1lbnVDb250YWluZXJTdHlsZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5vYmplY3QsIC8vIG9wdGlvbmFsIHN0eWxlIHRvIGFwcGx5IHRvIHRoZSBtZW51IGNvbnRhaW5lclxuXHRcdFx0bWVudVN0eWxlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm9iamVjdCwgLy8gb3B0aW9uYWwgc3R5bGUgdG8gYXBwbHkgdG8gdGhlIG1lbnVcblx0XHRcdG11bHRpOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsIC8vIG11bHRpLXZhbHVlIGlucHV0XG5cdFx0XHRuYW1lOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZywgLy8gZ2VuZXJhdGVzIGEgaGlkZGVuIDxpbnB1dCAvPiB0YWcgd2l0aCB0aGlzIGZpZWxkIG5hbWUgZm9yIGh0bWwgZm9ybXNcblx0XHRcdG5ld09wdGlvbkNyZWF0b3I6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYywgLy8gZmFjdG9yeSB0byBjcmVhdGUgbmV3IG9wdGlvbnMgd2hlbiBhbGxvd0NyZWF0ZSBzZXRcblx0XHRcdG5vUmVzdWx0c1RleHQ6IHN0cmluZ09yTm9kZSwgLy8gcGxhY2Vob2xkZXIgZGlzcGxheWVkIHdoZW4gdGhlcmUgYXJlIG5vIG1hdGNoaW5nIHNlYXJjaCByZXN1bHRzXG5cdFx0XHRvbkJsdXI6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYywgLy8gb25CbHVyIGhhbmRsZXI6IGZ1bmN0aW9uIChldmVudCkge31cblx0XHRcdG9uQmx1clJlc2V0c0lucHV0OiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsIC8vIHdoZXRoZXIgaW5wdXQgaXMgY2xlYXJlZCBvbiBibHVyXG5cdFx0XHRvbkNoYW5nZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLCAvLyBvbkNoYW5nZSBoYW5kbGVyOiBmdW5jdGlvbiAobmV3VmFsdWUpIHt9XG5cdFx0XHRvbkNsb3NlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmZ1bmMsIC8vIGZpcmVzIHdoZW4gdGhlIG1lbnUgaXMgY2xvc2VkXG5cdFx0XHRvbkZvY3VzOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmZ1bmMsIC8vIG9uRm9jdXMgaGFuZGxlcjogZnVuY3Rpb24gKGV2ZW50KSB7fVxuXHRcdFx0b25JbnB1dENoYW5nZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLCAvLyBvbklucHV0Q2hhbmdlIGhhbmRsZXI6IGZ1bmN0aW9uIChpbnB1dFZhbHVlKSB7fVxuXHRcdFx0b25NZW51U2Nyb2xsVG9Cb3R0b206IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYywgLy8gZmlyZXMgd2hlbiB0aGUgbWVudSBpcyBzY3JvbGxlZCB0byB0aGUgYm90dG9tOyBjYW4gYmUgdXNlZCB0byBwYWdpbmF0ZSBvcHRpb25zXG5cdFx0XHRvbk9wZW46IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYywgLy8gZmlyZXMgd2hlbiB0aGUgbWVudSBpcyBvcGVuZWRcblx0XHRcdG9uVmFsdWVDbGljazogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLCAvLyBvbkNsaWNrIGhhbmRsZXIgZm9yIHZhbHVlIGxhYmVsczogZnVuY3Rpb24gKHZhbHVlLCBldmVudCkge31cblx0XHRcdG9wdGlvbkNvbXBvbmVudDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLCAvLyBvcHRpb24gY29tcG9uZW50IHRvIHJlbmRlciBpbiBkcm9wZG93blxuXHRcdFx0b3B0aW9uUmVuZGVyZXI6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYywgLy8gb3B0aW9uUmVuZGVyZXI6IGZ1bmN0aW9uIChvcHRpb24pIHt9XG5cdFx0XHRvcHRpb25zOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmFycmF5LCAvLyBhcnJheSBvZiBvcHRpb25zXG5cdFx0XHRwbGFjZWhvbGRlcjogc3RyaW5nT3JOb2RlLCAvLyBmaWVsZCBwbGFjZWhvbGRlciwgZGlzcGxheWVkIHdoZW4gdGhlcmUncyBubyB2YWx1ZVxuXHRcdFx0cmVxdWlyZWQ6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCwgLy8gYXBwbGllcyBIVE1MNSByZXF1aXJlZCBhdHRyaWJ1dGUgd2hlbiBuZWVkZWRcblx0XHRcdHNjcm9sbE1lbnVJbnRvVmlldzogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLCAvLyBib29sZWFuIHRvIGVuYWJsZSB0aGUgdmlld3BvcnQgdG8gc2hpZnQgc28gdGhhdCB0aGUgZnVsbCBtZW51IGZ1bGx5IHZpc2libGUgd2hlbiBlbmdhZ2VkXG5cdFx0XHRzZWFyY2hhYmxlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsIC8vIHdoZXRoZXIgdG8gZW5hYmxlIHNlYXJjaGluZyBmZWF0dXJlIG9yIG5vdFxuXHRcdFx0c2ltcGxlVmFsdWU6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCwgLy8gcGFzcyB0aGUgdmFsdWUgdG8gb25DaGFuZ2UgYXMgYSBzaW1wbGUgdmFsdWUgKGxlZ2FjeSBwcmUgMS4wIG1vZGUpLCBkZWZhdWx0cyB0byBmYWxzZVxuXHRcdFx0c3R5bGU6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMub2JqZWN0LCAvLyBvcHRpb25hbCBzdHlsZSB0byBhcHBseSB0byB0aGUgY29udHJvbFxuXHRcdFx0dGFiSW5kZXg6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLCAvLyBvcHRpb25hbCB0YWIgaW5kZXggb2YgdGhlIGNvbnRyb2xcblx0XHRcdHZhbHVlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmFueSwgLy8gaW5pdGlhbCBmaWVsZCB2YWx1ZVxuXHRcdFx0dmFsdWVDb21wb25lbnQ6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYywgLy8gdmFsdWUgY29tcG9uZW50IHRvIHJlbmRlclxuXHRcdFx0dmFsdWVLZXk6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLCAvLyBwYXRoIG9mIHRoZSBsYWJlbCB2YWx1ZSBpbiBvcHRpb24gb2JqZWN0c1xuXHRcdFx0dmFsdWVSZW5kZXJlcjogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLCAvLyB2YWx1ZVJlbmRlcmVyOiBmdW5jdGlvbiAob3B0aW9uKSB7fVxuXHRcdFx0d3JhcHBlclN0eWxlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm9iamVjdCB9LFxuXHRcblx0XHQvLyBvcHRpb25hbCBzdHlsZSB0byBhcHBseSB0byB0aGUgY29tcG9uZW50IHdyYXBwZXJcblx0XHRzdGF0aWNzOiB7IEFzeW5jOiBfQXN5bmMyWydkZWZhdWx0J10gfSxcblx0XG5cdFx0Z2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRhZGRMYWJlbFRleHQ6ICdBZGQgXCJ7bGFiZWx9XCI/Jyxcblx0XHRcdFx0YWxsb3dDcmVhdGU6IGZhbHNlLFxuXHRcdFx0XHRiYWNrc3BhY2VSZW1vdmVzOiB0cnVlLFxuXHRcdFx0XHRjbGVhcmFibGU6IHRydWUsXG5cdFx0XHRcdGNsZWFyQWxsVGV4dDogJ0NsZWFyIGFsbCcsXG5cdFx0XHRcdGNsZWFyVmFsdWVUZXh0OiAnQ2xlYXIgdmFsdWUnLFxuXHRcdFx0XHRkZWxpbWl0ZXI6ICcsJyxcblx0XHRcdFx0ZGlzYWJsZWQ6IGZhbHNlLFxuXHRcdFx0XHRlc2NhcGVDbGVhcnNWYWx1ZTogdHJ1ZSxcblx0XHRcdFx0ZmlsdGVyT3B0aW9uczogdHJ1ZSxcblx0XHRcdFx0aWdub3JlQWNjZW50czogdHJ1ZSxcblx0XHRcdFx0aWdub3JlQ2FzZTogdHJ1ZSxcblx0XHRcdFx0aW5wdXRQcm9wczoge30sXG5cdFx0XHRcdGlzTG9hZGluZzogZmFsc2UsXG5cdFx0XHRcdGxhYmVsS2V5OiAnbGFiZWwnLFxuXHRcdFx0XHRtYXRjaFBvczogJ2FueScsXG5cdFx0XHRcdG1hdGNoUHJvcDogJ2FueScsXG5cdFx0XHRcdG1lbnVCdWZmZXI6IDAsXG5cdFx0XHRcdG11bHRpOiBmYWxzZSxcblx0XHRcdFx0bm9SZXN1bHRzVGV4dDogJ05vIHJlc3VsdHMgZm91bmQnLFxuXHRcdFx0XHRvbkJsdXJSZXNldHNJbnB1dDogdHJ1ZSxcblx0XHRcdFx0b3B0aW9uQ29tcG9uZW50OiBfT3B0aW9uMlsnZGVmYXVsdCddLFxuXHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NlbGVjdC4uLicsXG5cdFx0XHRcdHJlcXVpcmVkOiBmYWxzZSxcblx0XHRcdFx0c2Nyb2xsTWVudUludG9WaWV3OiB0cnVlLFxuXHRcdFx0XHRzZWFyY2hhYmxlOiB0cnVlLFxuXHRcdFx0XHRzaW1wbGVWYWx1ZTogZmFsc2UsXG5cdFx0XHRcdHZhbHVlQ29tcG9uZW50OiBfVmFsdWUyWydkZWZhdWx0J10sXG5cdFx0XHRcdHZhbHVlS2V5OiAndmFsdWUnXG5cdFx0XHR9O1xuXHRcdH0sXG5cdFxuXHRcdGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCkge1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0aW5wdXRWYWx1ZTogJycsXG5cdFx0XHRcdGlzRm9jdXNlZDogZmFsc2UsXG5cdFx0XHRcdGlzTG9hZGluZzogZmFsc2UsXG5cdFx0XHRcdGlzT3BlbjogZmFsc2UsXG5cdFx0XHRcdGlzUHNldWRvRm9jdXNlZDogZmFsc2UsXG5cdFx0XHRcdHJlcXVpcmVkOiB0aGlzLnByb3BzLnJlcXVpcmVkICYmIHRoaXMuaGFuZGxlUmVxdWlyZWQodGhpcy5wcm9wcy52YWx1ZSwgdGhpcy5wcm9wcy5tdWx0aSlcblx0XHRcdH07XG5cdFx0fSxcblx0XG5cdFx0Y29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuXHRcdFx0aWYgKHRoaXMucHJvcHMuYXV0b2ZvY3VzKSB7XG5cdFx0XHRcdHRoaXMuZm9jdXMoKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcblx0XHRjb21wb25lbnRXaWxsVXBkYXRlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVXBkYXRlKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XG5cdFx0XHRpZiAobmV4dFN0YXRlLmlzT3BlbiAhPT0gdGhpcy5zdGF0ZS5pc09wZW4pIHtcblx0XHRcdFx0dmFyIGhhbmRsZXIgPSBuZXh0U3RhdGUuaXNPcGVuID8gbmV4dFByb3BzLm9uT3BlbiA6IG5leHRQcm9wcy5vbkNsb3NlO1xuXHRcdFx0XHRoYW5kbGVyICYmIGhhbmRsZXIoKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcblx0XHRjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMsIHByZXZTdGF0ZSkge1xuXHRcdFx0Ly8gZm9jdXMgdG8gdGhlIHNlbGVjdGVkIG9wdGlvblxuXHRcdFx0aWYgKHRoaXMucmVmcy5tZW51ICYmIHRoaXMucmVmcy5mb2N1c2VkICYmIHRoaXMuc3RhdGUuaXNPcGVuICYmICF0aGlzLmhhc1Njcm9sbGVkVG9PcHRpb24pIHtcblx0XHRcdFx0dmFyIGZvY3VzZWRPcHRpb25Ob2RlID0gX3JlYWN0RG9tMlsnZGVmYXVsdCddLmZpbmRET01Ob2RlKHRoaXMucmVmcy5mb2N1c2VkKTtcblx0XHRcdFx0dmFyIG1lbnVOb2RlID0gX3JlYWN0RG9tMlsnZGVmYXVsdCddLmZpbmRET01Ob2RlKHRoaXMucmVmcy5tZW51KTtcblx0XHRcdFx0bWVudU5vZGUuc2Nyb2xsVG9wID0gZm9jdXNlZE9wdGlvbk5vZGUub2Zmc2V0VG9wO1xuXHRcdFx0XHR0aGlzLmhhc1Njcm9sbGVkVG9PcHRpb24gPSB0cnVlO1xuXHRcdFx0fSBlbHNlIGlmICghdGhpcy5zdGF0ZS5pc09wZW4pIHtcblx0XHRcdFx0dGhpcy5oYXNTY3JvbGxlZFRvT3B0aW9uID0gZmFsc2U7XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKHByZXZTdGF0ZS5pbnB1dFZhbHVlICE9PSB0aGlzLnN0YXRlLmlucHV0VmFsdWUgJiYgdGhpcy5wcm9wcy5vbklucHV0Q2hhbmdlKSB7XG5cdFx0XHRcdHRoaXMucHJvcHMub25JbnB1dENoYW5nZSh0aGlzLnN0YXRlLmlucHV0VmFsdWUpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRoaXMuX3Njcm9sbFRvRm9jdXNlZE9wdGlvbk9uVXBkYXRlICYmIHRoaXMucmVmcy5mb2N1c2VkICYmIHRoaXMucmVmcy5tZW51KSB7XG5cdFx0XHRcdHRoaXMuX3Njcm9sbFRvRm9jdXNlZE9wdGlvbk9uVXBkYXRlID0gZmFsc2U7XG5cdFx0XHRcdHZhciBmb2N1c2VkRE9NID0gX3JlYWN0RG9tMlsnZGVmYXVsdCddLmZpbmRET01Ob2RlKHRoaXMucmVmcy5mb2N1c2VkKTtcblx0XHRcdFx0dmFyIG1lbnVET00gPSBfcmVhY3REb20yWydkZWZhdWx0J10uZmluZERPTU5vZGUodGhpcy5yZWZzLm1lbnUpO1xuXHRcdFx0XHR2YXIgZm9jdXNlZFJlY3QgPSBmb2N1c2VkRE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdFx0XHR2YXIgbWVudVJlY3QgPSBtZW51RE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdFx0XHRpZiAoZm9jdXNlZFJlY3QuYm90dG9tID4gbWVudVJlY3QuYm90dG9tIHx8IGZvY3VzZWRSZWN0LnRvcCA8IG1lbnVSZWN0LnRvcCkge1xuXHRcdFx0XHRcdG1lbnVET00uc2Nyb2xsVG9wID0gZm9jdXNlZERPTS5vZmZzZXRUb3AgKyBmb2N1c2VkRE9NLmNsaWVudEhlaWdodCAtIG1lbnVET00ub2Zmc2V0SGVpZ2h0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhpcy5wcm9wcy5zY3JvbGxNZW51SW50b1ZpZXcgJiYgdGhpcy5yZWZzLm1lbnVDb250YWluZXIpIHtcblx0XHRcdFx0dmFyIG1lbnVDb250YWluZXJSZWN0ID0gdGhpcy5yZWZzLm1lbnVDb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0XHRcdGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgPCBtZW51Q29udGFpbmVyUmVjdC5ib3R0b20gKyB0aGlzLnByb3BzLm1lbnVCdWZmZXIpIHtcblx0XHRcdFx0XHR3aW5kb3cuc2Nyb2xsVG8oMCwgd2luZG93LnNjcm9sbFkgKyBtZW51Q29udGFpbmVyUmVjdC5ib3R0b20gKyB0aGlzLnByb3BzLm1lbnVCdWZmZXIgLSB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAocHJldlByb3BzLmRpc2FibGVkICE9PSB0aGlzLnByb3BzLmRpc2FibGVkKSB7XG5cdFx0XHRcdHRoaXMuc2V0U3RhdGUoeyBpc0ZvY3VzZWQ6IGZhbHNlIH0pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHJlYWN0L25vLWRpZC11cGRhdGUtc2V0LXN0YXRlXG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0Zm9jdXM6IGZ1bmN0aW9uIGZvY3VzKCkge1xuXHRcdFx0aWYgKCF0aGlzLnJlZnMuaW5wdXQpIHJldHVybjtcblx0XHRcdHRoaXMucmVmcy5pbnB1dC5mb2N1cygpO1xuXHRcdH0sXG5cdFxuXHRcdGJsdXJJbnB1dDogZnVuY3Rpb24gYmx1cklucHV0KCkge1xuXHRcdFx0aWYgKCF0aGlzLnJlZnMuaW5wdXQpIHJldHVybjtcblx0XHRcdHRoaXMucmVmcy5pbnB1dC5ibHVyKCk7XG5cdFx0fSxcblx0XG5cdFx0aGFuZGxlVG91Y2hNb3ZlOiBmdW5jdGlvbiBoYW5kbGVUb3VjaE1vdmUoZXZlbnQpIHtcblx0XHRcdC8vIFNldCBhIGZsYWcgdGhhdCB0aGUgdmlldyBpcyBiZWluZyBkcmFnZ2VkXG5cdFx0XHR0aGlzLmRyYWdnaW5nID0gdHJ1ZTtcblx0XHR9LFxuXHRcblx0XHRoYW5kbGVUb3VjaFN0YXJ0OiBmdW5jdGlvbiBoYW5kbGVUb3VjaFN0YXJ0KGV2ZW50KSB7XG5cdFx0XHQvLyBTZXQgYSBmbGFnIHRoYXQgdGhlIHZpZXcgaXMgbm90IGJlaW5nIGRyYWdnZWRcblx0XHRcdHRoaXMuZHJhZ2dpbmcgPSBmYWxzZTtcblx0XHR9LFxuXHRcblx0XHRoYW5kbGVUb3VjaEVuZDogZnVuY3Rpb24gaGFuZGxlVG91Y2hFbmQoZXZlbnQpIHtcblx0XHRcdC8vIENoZWNrIGlmIHRoZSB2aWV3IGlzIGJlaW5nIGRyYWdnZWQsIEluIHRoaXMgY2FzZVxuXHRcdFx0Ly8gd2UgZG9uJ3Qgd2FudCB0byBmaXJlIHRoZSBjbGljayBldmVudCAoYmVjYXVzZSB0aGUgdXNlciBvbmx5IHdhbnRzIHRvIHNjcm9sbClcblx0XHRcdGlmICh0aGlzLmRyYWdnaW5nKSByZXR1cm47XG5cdFxuXHRcdFx0Ly8gRmlyZSB0aGUgbW91c2UgZXZlbnRzXG5cdFx0XHR0aGlzLmhhbmRsZU1vdXNlRG93bihldmVudCk7XG5cdFx0fSxcblx0XG5cdFx0aGFuZGxlVG91Y2hFbmRDbGVhclZhbHVlOiBmdW5jdGlvbiBoYW5kbGVUb3VjaEVuZENsZWFyVmFsdWUoZXZlbnQpIHtcblx0XHRcdC8vIENoZWNrIGlmIHRoZSB2aWV3IGlzIGJlaW5nIGRyYWdnZWQsIEluIHRoaXMgY2FzZVxuXHRcdFx0Ly8gd2UgZG9uJ3Qgd2FudCB0byBmaXJlIHRoZSBjbGljayBldmVudCAoYmVjYXVzZSB0aGUgdXNlciBvbmx5IHdhbnRzIHRvIHNjcm9sbClcblx0XHRcdGlmICh0aGlzLmRyYWdnaW5nKSByZXR1cm47XG5cdFxuXHRcdFx0Ly8gQ2xlYXIgdGhlIHZhbHVlXG5cdFx0XHR0aGlzLmNsZWFyVmFsdWUoZXZlbnQpO1xuXHRcdH0sXG5cdFxuXHRcdGhhbmRsZU1vdXNlRG93bjogZnVuY3Rpb24gaGFuZGxlTW91c2VEb3duKGV2ZW50KSB7XG5cdFx0XHQvLyBpZiB0aGUgZXZlbnQgd2FzIHRyaWdnZXJlZCBieSBhIG1vdXNlZG93biBhbmQgbm90IHRoZSBwcmltYXJ5XG5cdFx0XHQvLyBidXR0b24sIG9yIGlmIHRoZSBjb21wb25lbnQgaXMgZGlzYWJsZWQsIGlnbm9yZSBpdC5cblx0XHRcdGlmICh0aGlzLnByb3BzLmRpc2FibGVkIHx8IGV2ZW50LnR5cGUgPT09ICdtb3VzZWRvd24nICYmIGV2ZW50LmJ1dHRvbiAhPT0gMCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gcHJldmVudCBkZWZhdWx0IGV2ZW50IGhhbmRsZXJzXG5cdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFxuXHRcdFx0Ly8gZm9yIHRoZSBub24tc2VhcmNoYWJsZSBzZWxlY3QsIHRvZ2dsZSB0aGUgbWVudVxuXHRcdFx0aWYgKCF0aGlzLnByb3BzLnNlYXJjaGFibGUpIHtcblx0XHRcdFx0dGhpcy5mb2N1cygpO1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5zZXRTdGF0ZSh7XG5cdFx0XHRcdFx0aXNPcGVuOiAhdGhpcy5zdGF0ZS5pc09wZW5cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKHRoaXMuc3RhdGUuaXNGb2N1c2VkKSB7XG5cdFx0XHRcdC8vIGlmIHRoZSBpbnB1dCBpcyBmb2N1c2VkLCBlbnN1cmUgdGhlIG1lbnUgaXMgb3BlblxuXHRcdFx0XHR0aGlzLnNldFN0YXRlKHtcblx0XHRcdFx0XHRpc09wZW46IHRydWUsXG5cdFx0XHRcdFx0aXNQc2V1ZG9Gb2N1c2VkOiBmYWxzZVxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIG90aGVyd2lzZSwgZm9jdXMgdGhlIGlucHV0IGFuZCBvcGVuIHRoZSBtZW51XG5cdFx0XHRcdHRoaXMuX29wZW5BZnRlckZvY3VzID0gdHJ1ZTtcblx0XHRcdFx0dGhpcy5mb2N1cygpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFxuXHRcdGhhbmRsZU1vdXNlRG93bk9uQXJyb3c6IGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93bk9uQXJyb3coZXZlbnQpIHtcblx0XHRcdC8vIGlmIHRoZSBldmVudCB3YXMgdHJpZ2dlcmVkIGJ5IGEgbW91c2Vkb3duIGFuZCBub3QgdGhlIHByaW1hcnlcblx0XHRcdC8vIGJ1dHRvbiwgb3IgaWYgdGhlIGNvbXBvbmVudCBpcyBkaXNhYmxlZCwgaWdub3JlIGl0LlxuXHRcdFx0aWYgKHRoaXMucHJvcHMuZGlzYWJsZWQgfHwgZXZlbnQudHlwZSA9PT0gJ21vdXNlZG93bicgJiYgZXZlbnQuYnV0dG9uICE9PSAwKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdC8vIElmIHRoZSBtZW51IGlzbid0IG9wZW4sIGxldCB0aGUgZXZlbnQgYnViYmxlIHRvIHRoZSBtYWluIGhhbmRsZU1vdXNlRG93blxuXHRcdFx0aWYgKCF0aGlzLnN0YXRlLmlzT3Blbikge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHQvLyBwcmV2ZW50IGRlZmF1bHQgZXZlbnQgaGFuZGxlcnNcblx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdC8vIGNsb3NlIHRoZSBtZW51XG5cdFx0XHR0aGlzLmNsb3NlTWVudSgpO1xuXHRcdH0sXG5cdFxuXHRcdGhhbmRsZU1vdXNlRG93bk9uTWVudTogZnVuY3Rpb24gaGFuZGxlTW91c2VEb3duT25NZW51KGV2ZW50KSB7XG5cdFx0XHQvLyBpZiB0aGUgZXZlbnQgd2FzIHRyaWdnZXJlZCBieSBhIG1vdXNlZG93biBhbmQgbm90IHRoZSBwcmltYXJ5XG5cdFx0XHQvLyBidXR0b24sIG9yIGlmIHRoZSBjb21wb25lbnQgaXMgZGlzYWJsZWQsIGlnbm9yZSBpdC5cblx0XHRcdGlmICh0aGlzLnByb3BzLmRpc2FibGVkIHx8IGV2ZW50LnR5cGUgPT09ICdtb3VzZWRvd24nICYmIGV2ZW50LmJ1dHRvbiAhPT0gMCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFxuXHRcdFx0dGhpcy5fb3BlbkFmdGVyRm9jdXMgPSB0cnVlO1xuXHRcdFx0dGhpcy5mb2N1cygpO1xuXHRcdH0sXG5cdFxuXHRcdGNsb3NlTWVudTogZnVuY3Rpb24gY2xvc2VNZW51KCkge1xuXHRcdFx0dGhpcy5zZXRTdGF0ZSh7XG5cdFx0XHRcdGlzT3BlbjogZmFsc2UsXG5cdFx0XHRcdGlzUHNldWRvRm9jdXNlZDogdGhpcy5zdGF0ZS5pc0ZvY3VzZWQgJiYgIXRoaXMucHJvcHMubXVsdGksXG5cdFx0XHRcdGlucHV0VmFsdWU6ICcnXG5cdFx0XHR9KTtcblx0XHRcdHRoaXMuaGFzU2Nyb2xsZWRUb09wdGlvbiA9IGZhbHNlO1xuXHRcdH0sXG5cdFxuXHRcdGhhbmRsZUlucHV0Rm9jdXM6IGZ1bmN0aW9uIGhhbmRsZUlucHV0Rm9jdXMoZXZlbnQpIHtcblx0XHRcdHZhciBpc09wZW4gPSB0aGlzLnN0YXRlLmlzT3BlbiB8fCB0aGlzLl9vcGVuQWZ0ZXJGb2N1cztcblx0XHRcdGlmICh0aGlzLnByb3BzLm9uRm9jdXMpIHtcblx0XHRcdFx0dGhpcy5wcm9wcy5vbkZvY3VzKGV2ZW50KTtcblx0XHRcdH1cblx0XHRcdHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0XHRpc0ZvY3VzZWQ6IHRydWUsXG5cdFx0XHRcdGlzT3BlbjogaXNPcGVuXG5cdFx0XHR9KTtcblx0XHRcdHRoaXMuX29wZW5BZnRlckZvY3VzID0gZmFsc2U7XG5cdFx0fSxcblx0XG5cdFx0aGFuZGxlSW5wdXRCbHVyOiBmdW5jdGlvbiBoYW5kbGVJbnB1dEJsdXIoZXZlbnQpIHtcblx0XHRcdGlmICh0aGlzLnJlZnMubWVudSAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmlzRXF1YWxOb2RlKHRoaXMucmVmcy5tZW51KSkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKHRoaXMucHJvcHMub25CbHVyKSB7XG5cdFx0XHRcdHRoaXMucHJvcHMub25CbHVyKGV2ZW50KTtcblx0XHRcdH1cblx0XHRcdHZhciBvbkJsdXJyZWRTdGF0ZSA9IHtcblx0XHRcdFx0aXNGb2N1c2VkOiBmYWxzZSxcblx0XHRcdFx0aXNPcGVuOiBmYWxzZSxcblx0XHRcdFx0aXNQc2V1ZG9Gb2N1c2VkOiBmYWxzZVxuXHRcdFx0fTtcblx0XHRcdGlmICh0aGlzLnByb3BzLm9uQmx1clJlc2V0c0lucHV0KSB7XG5cdFx0XHRcdG9uQmx1cnJlZFN0YXRlLmlucHV0VmFsdWUgPSAnJztcblx0XHRcdH1cblx0XHRcdHRoaXMuc2V0U3RhdGUob25CbHVycmVkU3RhdGUpO1xuXHRcdH0sXG5cdFxuXHRcdGhhbmRsZUlucHV0Q2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVJbnB1dENoYW5nZShldmVudCkge1xuXHRcdFx0dGhpcy5zZXRTdGF0ZSh7XG5cdFx0XHRcdGlzT3BlbjogdHJ1ZSxcblx0XHRcdFx0aXNQc2V1ZG9Gb2N1c2VkOiBmYWxzZSxcblx0XHRcdFx0aW5wdXRWYWx1ZTogZXZlbnQudGFyZ2V0LnZhbHVlXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcblx0XHRoYW5kbGVLZXlEb3duOiBmdW5jdGlvbiBoYW5kbGVLZXlEb3duKGV2ZW50KSB7XG5cdFx0XHRpZiAodGhpcy5wcm9wcy5kaXNhYmxlZCkgcmV0dXJuO1xuXHRcdFx0c3dpdGNoIChldmVudC5rZXlDb2RlKSB7XG5cdFx0XHRcdGNhc2UgODpcblx0XHRcdFx0XHQvLyBiYWNrc3BhY2Vcblx0XHRcdFx0XHRpZiAoIXRoaXMuc3RhdGUuaW5wdXRWYWx1ZSAmJiB0aGlzLnByb3BzLmJhY2tzcGFjZVJlbW92ZXMpIHtcblx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHR0aGlzLnBvcFZhbHVlKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0Y2FzZSA5OlxuXHRcdFx0XHRcdC8vIHRhYlxuXHRcdFx0XHRcdGlmIChldmVudC5zaGlmdEtleSB8fCAhdGhpcy5zdGF0ZS5pc09wZW4pIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhpcy5zZWxlY3RGb2N1c2VkT3B0aW9uKCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRjYXNlIDEzOlxuXHRcdFx0XHRcdC8vIGVudGVyXG5cdFx0XHRcdFx0aWYgKCF0aGlzLnN0YXRlLmlzT3BlbikgcmV0dXJuO1xuXHRcdFx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdHRoaXMuc2VsZWN0Rm9jdXNlZE9wdGlvbigpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIDI3OlxuXHRcdFx0XHRcdC8vIGVzY2FwZVxuXHRcdFx0XHRcdGlmICh0aGlzLnN0YXRlLmlzT3Blbikge1xuXHRcdFx0XHRcdFx0dGhpcy5jbG9zZU1lbnUoKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKHRoaXMucHJvcHMuY2xlYXJhYmxlICYmIHRoaXMucHJvcHMuZXNjYXBlQ2xlYXJzVmFsdWUpIHtcblx0XHRcdFx0XHRcdHRoaXMuY2xlYXJWYWx1ZShldmVudCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIDM4OlxuXHRcdFx0XHRcdC8vIHVwXG5cdFx0XHRcdFx0dGhpcy5mb2N1c1ByZXZpb3VzT3B0aW9uKCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgNDA6XG5cdFx0XHRcdFx0Ly8gZG93blxuXHRcdFx0XHRcdHRoaXMuZm9jdXNOZXh0T3B0aW9uKCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdC8vIGNhc2UgMTg4OiAvLyAsXG5cdFx0XHRcdC8vIFx0aWYgKHRoaXMucHJvcHMuYWxsb3dDcmVhdGUgJiYgdGhpcy5wcm9wcy5tdWx0aSkge1xuXHRcdFx0XHQvLyBcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0Ly8gXHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHQvLyBcdFx0dGhpcy5zZWxlY3RGb2N1c2VkT3B0aW9uKCk7XG5cdFx0XHRcdC8vIFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gXHRcdHJldHVybjtcblx0XHRcdFx0Ly8gXHR9XG5cdFx0XHRcdC8vIGJyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0fSxcblx0XG5cdFx0aGFuZGxlVmFsdWVDbGljazogZnVuY3Rpb24gaGFuZGxlVmFsdWVDbGljayhvcHRpb24sIGV2ZW50KSB7XG5cdFx0XHRpZiAoIXRoaXMucHJvcHMub25WYWx1ZUNsaWNrKSByZXR1cm47XG5cdFx0XHR0aGlzLnByb3BzLm9uVmFsdWVDbGljayhvcHRpb24sIGV2ZW50KTtcblx0XHR9LFxuXHRcblx0XHRoYW5kbGVNZW51U2Nyb2xsOiBmdW5jdGlvbiBoYW5kbGVNZW51U2Nyb2xsKGV2ZW50KSB7XG5cdFx0XHRpZiAoIXRoaXMucHJvcHMub25NZW51U2Nyb2xsVG9Cb3R0b20pIHJldHVybjtcblx0XHRcdHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG5cdFxuXHRcdFx0aWYgKHRhcmdldC5zY3JvbGxIZWlnaHQgPiB0YXJnZXQub2Zmc2V0SGVpZ2h0ICYmICEodGFyZ2V0LnNjcm9sbEhlaWdodCAtIHRhcmdldC5vZmZzZXRIZWlnaHQgLSB0YXJnZXQuc2Nyb2xsVG9wKSkge1xuXHRcdFx0XHR0aGlzLnByb3BzLm9uTWVudVNjcm9sbFRvQm90dG9tKCk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0aGFuZGxlUmVxdWlyZWQ6IGZ1bmN0aW9uIGhhbmRsZVJlcXVpcmVkKHZhbHVlLCBtdWx0aSkge1xuXHRcdFx0aWYgKCF2YWx1ZSkgcmV0dXJuIHRydWU7XG5cdFx0XHRyZXR1cm4gbXVsdGkgPyB2YWx1ZS5sZW5ndGggPT09IDAgOiBPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoID09PSAwO1xuXHRcdH0sXG5cdFxuXHRcdGdldE9wdGlvbkxhYmVsOiBmdW5jdGlvbiBnZXRPcHRpb25MYWJlbChvcCkge1xuXHRcdFx0cmV0dXJuIG9wW3RoaXMucHJvcHMubGFiZWxLZXldO1xuXHRcdH0sXG5cdFxuXHRcdGdldFZhbHVlQXJyYXk6IGZ1bmN0aW9uIGdldFZhbHVlQXJyYXkoKSB7XG5cdFx0XHR2YXIgdmFsdWUgPSB0aGlzLnByb3BzLnZhbHVlO1xuXHRcdFx0aWYgKHRoaXMucHJvcHMubXVsdGkpIHtcblx0XHRcdFx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHZhbHVlID0gdmFsdWUuc3BsaXQodGhpcy5wcm9wcy5kZWxpbWl0ZXIpO1xuXHRcdFx0XHRpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG5cdFx0XHRcdFx0aWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybiBbXTtcblx0XHRcdFx0XHR2YWx1ZSA9IFt2YWx1ZV07XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHZhbHVlLm1hcCh0aGlzLmV4cGFuZFZhbHVlKS5maWx0ZXIoZnVuY3Rpb24gKGkpIHtcblx0XHRcdFx0XHRyZXR1cm4gaTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHR2YXIgZXhwYW5kZWRWYWx1ZSA9IHRoaXMuZXhwYW5kVmFsdWUodmFsdWUpO1xuXHRcdFx0cmV0dXJuIGV4cGFuZGVkVmFsdWUgPyBbZXhwYW5kZWRWYWx1ZV0gOiBbXTtcblx0XHR9LFxuXHRcblx0XHRleHBhbmRWYWx1ZTogZnVuY3Rpb24gZXhwYW5kVmFsdWUodmFsdWUpIHtcblx0XHRcdGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnICYmIHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicpIHJldHVybiB2YWx1ZTtcblx0XHRcdHZhciBfcHJvcHMgPSB0aGlzLnByb3BzO1xuXHRcdFx0dmFyIG9wdGlvbnMgPSBfcHJvcHMub3B0aW9ucztcblx0XHRcdHZhciB2YWx1ZUtleSA9IF9wcm9wcy52YWx1ZUtleTtcblx0XG5cdFx0XHRpZiAoIW9wdGlvbnMpIHJldHVybjtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgb3B0aW9ucy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZiAob3B0aW9uc1tpXVt2YWx1ZUtleV0gPT09IHZhbHVlKSByZXR1cm4gb3B0aW9uc1tpXTtcblx0XHRcdH1cblx0XHR9LFxuXHRcblx0XHRzZXRWYWx1ZTogZnVuY3Rpb24gc2V0VmFsdWUodmFsdWUpIHtcblx0XHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHRcdFx0aWYgKHRoaXMucHJvcHMuYXV0b0JsdXIpIHtcblx0XHRcdFx0dGhpcy5ibHVySW5wdXQoKTtcblx0XHRcdH1cblx0XHRcdGlmICghdGhpcy5wcm9wcy5vbkNoYW5nZSkgcmV0dXJuO1xuXHRcdFx0aWYgKHRoaXMucHJvcHMucmVxdWlyZWQpIHtcblx0XHRcdFx0dmFyIHJlcXVpcmVkID0gdGhpcy5oYW5kbGVSZXF1aXJlZCh2YWx1ZSwgdGhpcy5wcm9wcy5tdWx0aSk7XG5cdFx0XHRcdHRoaXMuc2V0U3RhdGUoeyByZXF1aXJlZDogcmVxdWlyZWQgfSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhpcy5wcm9wcy5zaW1wbGVWYWx1ZSAmJiB2YWx1ZSkge1xuXHRcdFx0XHR2YWx1ZSA9IHRoaXMucHJvcHMubXVsdGkgPyB2YWx1ZS5tYXAoZnVuY3Rpb24gKGkpIHtcblx0XHRcdFx0XHRyZXR1cm4gaVtfdGhpcy5wcm9wcy52YWx1ZUtleV07XG5cdFx0XHRcdH0pLmpvaW4odGhpcy5wcm9wcy5kZWxpbWl0ZXIpIDogdmFsdWVbdGhpcy5wcm9wcy52YWx1ZUtleV07XG5cdFx0XHR9XG5cdFx0XHR0aGlzLnByb3BzLm9uQ2hhbmdlKHZhbHVlKTtcblx0XHR9LFxuXHRcblx0XHRzZWxlY3RWYWx1ZTogZnVuY3Rpb24gc2VsZWN0VmFsdWUodmFsdWUpIHtcblx0XHRcdHRoaXMuaGFzU2Nyb2xsZWRUb09wdGlvbiA9IGZhbHNlO1xuXHRcdFx0aWYgKHRoaXMucHJvcHMubXVsdGkpIHtcblx0XHRcdFx0dGhpcy5hZGRWYWx1ZSh2YWx1ZSk7XG5cdFx0XHRcdHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0XHRcdGlucHV0VmFsdWU6ICcnXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5zZXRWYWx1ZSh2YWx1ZSk7XG5cdFx0XHRcdHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0XHRcdGlzT3BlbjogZmFsc2UsXG5cdFx0XHRcdFx0aW5wdXRWYWx1ZTogJycsXG5cdFx0XHRcdFx0aXNQc2V1ZG9Gb2N1c2VkOiB0aGlzLnN0YXRlLmlzRm9jdXNlZFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9LFxuXHRcblx0XHRhZGRWYWx1ZTogZnVuY3Rpb24gYWRkVmFsdWUodmFsdWUpIHtcblx0XHRcdHZhciB2YWx1ZUFycmF5ID0gdGhpcy5nZXRWYWx1ZUFycmF5KCk7XG5cdFx0XHR0aGlzLnNldFZhbHVlKHZhbHVlQXJyYXkuY29uY2F0KHZhbHVlKSk7XG5cdFx0fSxcblx0XG5cdFx0cG9wVmFsdWU6IGZ1bmN0aW9uIHBvcFZhbHVlKCkge1xuXHRcdFx0dmFyIHZhbHVlQXJyYXkgPSB0aGlzLmdldFZhbHVlQXJyYXkoKTtcblx0XHRcdGlmICghdmFsdWVBcnJheS5sZW5ndGgpIHJldHVybjtcblx0XHRcdGlmICh2YWx1ZUFycmF5W3ZhbHVlQXJyYXkubGVuZ3RoIC0gMV0uY2xlYXJhYmxlVmFsdWUgPT09IGZhbHNlKSByZXR1cm47XG5cdFx0XHR0aGlzLnNldFZhbHVlKHZhbHVlQXJyYXkuc2xpY2UoMCwgdmFsdWVBcnJheS5sZW5ndGggLSAxKSk7XG5cdFx0fSxcblx0XG5cdFx0cmVtb3ZlVmFsdWU6IGZ1bmN0aW9uIHJlbW92ZVZhbHVlKHZhbHVlKSB7XG5cdFx0XHR2YXIgdmFsdWVBcnJheSA9IHRoaXMuZ2V0VmFsdWVBcnJheSgpO1xuXHRcdFx0dGhpcy5zZXRWYWx1ZSh2YWx1ZUFycmF5LmZpbHRlcihmdW5jdGlvbiAoaSkge1xuXHRcdFx0XHRyZXR1cm4gaSAhPT0gdmFsdWU7XG5cdFx0XHR9KSk7XG5cdFx0XHR0aGlzLmZvY3VzKCk7XG5cdFx0fSxcblx0XG5cdFx0Y2xlYXJWYWx1ZTogZnVuY3Rpb24gY2xlYXJWYWx1ZShldmVudCkge1xuXHRcdFx0Ly8gaWYgdGhlIGV2ZW50IHdhcyB0cmlnZ2VyZWQgYnkgYSBtb3VzZWRvd24gYW5kIG5vdCB0aGUgcHJpbWFyeVxuXHRcdFx0Ly8gYnV0dG9uLCBpZ25vcmUgaXQuXG5cdFx0XHRpZiAoZXZlbnQgJiYgZXZlbnQudHlwZSA9PT0gJ21vdXNlZG93bicgJiYgZXZlbnQuYnV0dG9uICE9PSAwKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdHRoaXMuc2V0VmFsdWUobnVsbCk7XG5cdFx0XHR0aGlzLnNldFN0YXRlKHtcblx0XHRcdFx0aXNPcGVuOiBmYWxzZSxcblx0XHRcdFx0aW5wdXRWYWx1ZTogJydcblx0XHRcdH0sIHRoaXMuZm9jdXMpO1xuXHRcdH0sXG5cdFxuXHRcdGZvY3VzT3B0aW9uOiBmdW5jdGlvbiBmb2N1c09wdGlvbihvcHRpb24pIHtcblx0XHRcdHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0XHRmb2N1c2VkT3B0aW9uOiBvcHRpb25cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFxuXHRcdGZvY3VzTmV4dE9wdGlvbjogZnVuY3Rpb24gZm9jdXNOZXh0T3B0aW9uKCkge1xuXHRcdFx0dGhpcy5mb2N1c0FkamFjZW50T3B0aW9uKCduZXh0Jyk7XG5cdFx0fSxcblx0XG5cdFx0Zm9jdXNQcmV2aW91c09wdGlvbjogZnVuY3Rpb24gZm9jdXNQcmV2aW91c09wdGlvbigpIHtcblx0XHRcdHRoaXMuZm9jdXNBZGphY2VudE9wdGlvbigncHJldmlvdXMnKTtcblx0XHR9LFxuXHRcblx0XHRmb2N1c0FkamFjZW50T3B0aW9uOiBmdW5jdGlvbiBmb2N1c0FkamFjZW50T3B0aW9uKGRpcikge1xuXHRcdFx0dmFyIG9wdGlvbnMgPSB0aGlzLl92aXNpYmxlT3B0aW9ucy5maWx0ZXIoZnVuY3Rpb24gKGkpIHtcblx0XHRcdFx0cmV0dXJuICFpLmRpc2FibGVkO1xuXHRcdFx0fSk7XG5cdFx0XHR0aGlzLl9zY3JvbGxUb0ZvY3VzZWRPcHRpb25PblVwZGF0ZSA9IHRydWU7XG5cdFx0XHRpZiAoIXRoaXMuc3RhdGUuaXNPcGVuKSB7XG5cdFx0XHRcdHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0XHRcdGlzT3BlbjogdHJ1ZSxcblx0XHRcdFx0XHRpbnB1dFZhbHVlOiAnJyxcblx0XHRcdFx0XHRmb2N1c2VkT3B0aW9uOiB0aGlzLl9mb2N1c2VkT3B0aW9uIHx8IG9wdGlvbnNbZGlyID09PSAnbmV4dCcgPyAwIDogb3B0aW9ucy5sZW5ndGggLSAxXVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFvcHRpb25zLmxlbmd0aCkgcmV0dXJuO1xuXHRcdFx0dmFyIGZvY3VzZWRJbmRleCA9IC0xO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBvcHRpb25zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmICh0aGlzLl9mb2N1c2VkT3B0aW9uID09PSBvcHRpb25zW2ldKSB7XG5cdFx0XHRcdFx0Zm9jdXNlZEluZGV4ID0gaTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0dmFyIGZvY3VzZWRPcHRpb24gPSBvcHRpb25zWzBdO1xuXHRcdFx0aWYgKGRpciA9PT0gJ25leHQnICYmIGZvY3VzZWRJbmRleCA+IC0xICYmIGZvY3VzZWRJbmRleCA8IG9wdGlvbnMubGVuZ3RoIC0gMSkge1xuXHRcdFx0XHRmb2N1c2VkT3B0aW9uID0gb3B0aW9uc1tmb2N1c2VkSW5kZXggKyAxXTtcblx0XHRcdH0gZWxzZSBpZiAoZGlyID09PSAncHJldmlvdXMnKSB7XG5cdFx0XHRcdGlmIChmb2N1c2VkSW5kZXggPiAwKSB7XG5cdFx0XHRcdFx0Zm9jdXNlZE9wdGlvbiA9IG9wdGlvbnNbZm9jdXNlZEluZGV4IC0gMV07XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Zm9jdXNlZE9wdGlvbiA9IG9wdGlvbnNbb3B0aW9ucy5sZW5ndGggLSAxXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0dGhpcy5zZXRTdGF0ZSh7XG5cdFx0XHRcdGZvY3VzZWRPcHRpb246IGZvY3VzZWRPcHRpb25cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFxuXHRcdHNlbGVjdEZvY3VzZWRPcHRpb246IGZ1bmN0aW9uIHNlbGVjdEZvY3VzZWRPcHRpb24oKSB7XG5cdFx0XHQvLyBpZiAodGhpcy5wcm9wcy5hbGxvd0NyZWF0ZSAmJiAhdGhpcy5zdGF0ZS5mb2N1c2VkT3B0aW9uKSB7XG5cdFx0XHQvLyBcdHJldHVybiB0aGlzLnNlbGVjdFZhbHVlKHRoaXMuc3RhdGUuaW5wdXRWYWx1ZSk7XG5cdFx0XHQvLyB9XG5cdFx0XHRpZiAodGhpcy5fZm9jdXNlZE9wdGlvbikge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5zZWxlY3RWYWx1ZSh0aGlzLl9mb2N1c2VkT3B0aW9uKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcblx0XHRyZW5kZXJMb2FkaW5nOiBmdW5jdGlvbiByZW5kZXJMb2FkaW5nKCkge1xuXHRcdFx0aWYgKCF0aGlzLnByb3BzLmlzTG9hZGluZykgcmV0dXJuO1xuXHRcdFx0cmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHRcdFx0XHQnc3BhbicsXG5cdFx0XHRcdHsgY2xhc3NOYW1lOiAnU2VsZWN0LWxvYWRpbmctem9uZScsICdhcmlhLWhpZGRlbic6ICd0cnVlJyB9LFxuXHRcdFx0XHRfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnU2VsZWN0LWxvYWRpbmcnIH0pXG5cdFx0XHQpO1xuXHRcdH0sXG5cdFxuXHRcdHJlbmRlclZhbHVlOiBmdW5jdGlvbiByZW5kZXJWYWx1ZSh2YWx1ZUFycmF5LCBpc09wZW4pIHtcblx0XHRcdHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0XHRcdHZhciByZW5kZXJMYWJlbCA9IHRoaXMucHJvcHMudmFsdWVSZW5kZXJlciB8fCB0aGlzLmdldE9wdGlvbkxhYmVsO1xuXHRcdFx0dmFyIFZhbHVlQ29tcG9uZW50ID0gdGhpcy5wcm9wcy52YWx1ZUNvbXBvbmVudDtcblx0XHRcdGlmICghdmFsdWVBcnJheS5sZW5ndGgpIHtcblx0XHRcdFx0cmV0dXJuICF0aGlzLnN0YXRlLmlucHV0VmFsdWUgPyBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0XHRcdFx0XHQnZGl2Jyxcblx0XHRcdFx0XHR7IGNsYXNzTmFtZTogJ1NlbGVjdC1wbGFjZWhvbGRlcicgfSxcblx0XHRcdFx0XHR0aGlzLnByb3BzLnBsYWNlaG9sZGVyXG5cdFx0XHRcdCkgOiBudWxsO1xuXHRcdFx0fVxuXHRcdFx0dmFyIG9uQ2xpY2sgPSB0aGlzLnByb3BzLm9uVmFsdWVDbGljayA/IHRoaXMuaGFuZGxlVmFsdWVDbGljayA6IG51bGw7XG5cdFx0XHRpZiAodGhpcy5wcm9wcy5tdWx0aSkge1xuXHRcdFx0XHRyZXR1cm4gdmFsdWVBcnJheS5tYXAoZnVuY3Rpb24gKHZhbHVlLCBpKSB7XG5cdFx0XHRcdFx0cmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHRcdFx0XHRcdFx0VmFsdWVDb21wb25lbnQsXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGRpc2FibGVkOiBfdGhpczIucHJvcHMuZGlzYWJsZWQgfHwgdmFsdWUuY2xlYXJhYmxlVmFsdWUgPT09IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRrZXk6ICd2YWx1ZS0nICsgaSArICctJyArIHZhbHVlW190aGlzMi5wcm9wcy52YWx1ZUtleV0sXG5cdFx0XHRcdFx0XHRcdG9uQ2xpY2s6IG9uQ2xpY2ssXG5cdFx0XHRcdFx0XHRcdG9uUmVtb3ZlOiBfdGhpczIucmVtb3ZlVmFsdWUsXG5cdFx0XHRcdFx0XHRcdHZhbHVlOiB2YWx1ZVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHJlbmRlckxhYmVsKHZhbHVlKVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIGlmICghdGhpcy5zdGF0ZS5pbnB1dFZhbHVlKSB7XG5cdFx0XHRcdGlmIChpc09wZW4pIG9uQ2xpY2sgPSBudWxsO1xuXHRcdFx0XHRyZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdFx0XHRcdFx0VmFsdWVDb21wb25lbnQsXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0ZGlzYWJsZWQ6IHRoaXMucHJvcHMuZGlzYWJsZWQsXG5cdFx0XHRcdFx0XHRvbkNsaWNrOiBvbkNsaWNrLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHZhbHVlQXJyYXlbMF1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHJlbmRlckxhYmVsKHZhbHVlQXJyYXlbMF0pXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0cmVuZGVySW5wdXQ6IGZ1bmN0aW9uIHJlbmRlcklucHV0KHZhbHVlQXJyYXkpIHtcblx0XHRcdHZhciBjbGFzc05hbWUgPSAoMCwgX2NsYXNzbmFtZXMyWydkZWZhdWx0J10pKCdTZWxlY3QtaW5wdXQnLCB0aGlzLnByb3BzLmlucHV0UHJvcHMuY2xhc3NOYW1lKTtcblx0XHRcdGlmICh0aGlzLnByb3BzLmRpc2FibGVkIHx8ICF0aGlzLnByb3BzLnNlYXJjaGFibGUpIHtcblx0XHRcdFx0cmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KCdkaXYnLCBfZXh0ZW5kcyh7fSwgdGhpcy5wcm9wcy5pbnB1dFByb3BzLCB7XG5cdFx0XHRcdFx0Y2xhc3NOYW1lOiBjbGFzc05hbWUsXG5cdFx0XHRcdFx0dGFiSW5kZXg6IHRoaXMucHJvcHMudGFiSW5kZXggfHwgMCxcblx0XHRcdFx0XHRvbkJsdXI6IHRoaXMuaGFuZGxlSW5wdXRCbHVyLFxuXHRcdFx0XHRcdG9uRm9jdXM6IHRoaXMuaGFuZGxlSW5wdXRGb2N1cyxcblx0XHRcdFx0XHRyZWY6ICdpbnB1dCcsXG5cdFx0XHRcdFx0c3R5bGU6IHsgYm9yZGVyOiAwLCB3aWR0aDogMSwgZGlzcGxheTogJ2lubGluZS1ibG9jaycgfSB9KSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoX3JlYWN0SW5wdXRBdXRvc2l6ZTJbJ2RlZmF1bHQnXSwgX2V4dGVuZHMoe30sIHRoaXMucHJvcHMuaW5wdXRQcm9wcywge1xuXHRcdFx0XHRjbGFzc05hbWU6IGNsYXNzTmFtZSxcblx0XHRcdFx0dGFiSW5kZXg6IHRoaXMucHJvcHMudGFiSW5kZXgsXG5cdFx0XHRcdG9uQmx1cjogdGhpcy5oYW5kbGVJbnB1dEJsdXIsXG5cdFx0XHRcdG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUlucHV0Q2hhbmdlLFxuXHRcdFx0XHRvbkZvY3VzOiB0aGlzLmhhbmRsZUlucHV0Rm9jdXMsXG5cdFx0XHRcdG1pbldpZHRoOiAnNScsXG5cdFx0XHRcdHJlZjogJ2lucHV0Jyxcblx0XHRcdFx0cmVxdWlyZWQ6IHRoaXMuc3RhdGUucmVxdWlyZWQsXG5cdFx0XHRcdHZhbHVlOiB0aGlzLnN0YXRlLmlucHV0VmFsdWVcblx0XHRcdH0pKTtcblx0XHR9LFxuXHRcblx0XHRyZW5kZXJDbGVhcjogZnVuY3Rpb24gcmVuZGVyQ2xlYXIoKSB7XG5cdFx0XHRpZiAoIXRoaXMucHJvcHMuY2xlYXJhYmxlIHx8ICF0aGlzLnByb3BzLnZhbHVlIHx8IHRoaXMucHJvcHMubXVsdGkgJiYgIXRoaXMucHJvcHMudmFsdWUubGVuZ3RoIHx8IHRoaXMucHJvcHMuZGlzYWJsZWQgfHwgdGhpcy5wcm9wcy5pc0xvYWRpbmcpIHJldHVybjtcblx0XHRcdHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0XHRcdFx0J3NwYW4nLFxuXHRcdFx0XHR7IGNsYXNzTmFtZTogJ1NlbGVjdC1jbGVhci16b25lJywgdGl0bGU6IHRoaXMucHJvcHMubXVsdGkgPyB0aGlzLnByb3BzLmNsZWFyQWxsVGV4dCA6IHRoaXMucHJvcHMuY2xlYXJWYWx1ZVRleHQsXG5cdFx0XHRcdFx0J2FyaWEtbGFiZWwnOiB0aGlzLnByb3BzLm11bHRpID8gdGhpcy5wcm9wcy5jbGVhckFsbFRleHQgOiB0aGlzLnByb3BzLmNsZWFyVmFsdWVUZXh0LFxuXHRcdFx0XHRcdG9uTW91c2VEb3duOiB0aGlzLmNsZWFyVmFsdWUsXG5cdFx0XHRcdFx0b25Ub3VjaFN0YXJ0OiB0aGlzLmhhbmRsZVRvdWNoU3RhcnQsXG5cdFx0XHRcdFx0b25Ub3VjaE1vdmU6IHRoaXMuaGFuZGxlVG91Y2hNb3ZlLFxuXHRcdFx0XHRcdG9uVG91Y2hFbmQ6IHRoaXMuaGFuZGxlVG91Y2hFbmRDbGVhclZhbHVlIH0sXG5cdFx0XHRcdF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdTZWxlY3QtY2xlYXInLCBkYW5nZXJvdXNseVNldElubmVySFRNTDogeyBfX2h0bWw6ICcmdGltZXM7JyB9IH0pXG5cdFx0XHQpO1xuXHRcdH0sXG5cdFxuXHRcdHJlbmRlckFycm93OiBmdW5jdGlvbiByZW5kZXJBcnJvdygpIHtcblx0XHRcdHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0XHRcdFx0J3NwYW4nLFxuXHRcdFx0XHR7IGNsYXNzTmFtZTogJ1NlbGVjdC1hcnJvdy16b25lJywgb25Nb3VzZURvd246IHRoaXMuaGFuZGxlTW91c2VEb3duT25BcnJvdyB9LFxuXHRcdFx0XHRfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnU2VsZWN0LWFycm93Jywgb25Nb3VzZURvd246IHRoaXMuaGFuZGxlTW91c2VEb3duT25BcnJvdyB9KVxuXHRcdFx0KTtcblx0XHR9LFxuXHRcblx0XHRmaWx0ZXJPcHRpb25zOiBmdW5jdGlvbiBmaWx0ZXJPcHRpb25zKGV4Y2x1ZGVPcHRpb25zKSB7XG5cdFx0XHR2YXIgX3RoaXMzID0gdGhpcztcblx0XG5cdFx0XHR2YXIgZmlsdGVyVmFsdWUgPSB0aGlzLnN0YXRlLmlucHV0VmFsdWU7XG5cdFx0XHR2YXIgb3B0aW9ucyA9IHRoaXMucHJvcHMub3B0aW9ucyB8fCBbXTtcblx0XHRcdGlmICh0eXBlb2YgdGhpcy5wcm9wcy5maWx0ZXJPcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLnByb3BzLmZpbHRlck9wdGlvbnMuY2FsbCh0aGlzLCBvcHRpb25zLCBmaWx0ZXJWYWx1ZSwgZXhjbHVkZU9wdGlvbnMpO1xuXHRcdFx0fSBlbHNlIGlmICh0aGlzLnByb3BzLmZpbHRlck9wdGlvbnMpIHtcblx0XHRcdFx0aWYgKHRoaXMucHJvcHMuaWdub3JlQWNjZW50cykge1xuXHRcdFx0XHRcdGZpbHRlclZhbHVlID0gKDAsIF91dGlsc1N0cmlwRGlhY3JpdGljczJbJ2RlZmF1bHQnXSkoZmlsdGVyVmFsdWUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh0aGlzLnByb3BzLmlnbm9yZUNhc2UpIHtcblx0XHRcdFx0XHRmaWx0ZXJWYWx1ZSA9IGZpbHRlclZhbHVlLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGV4Y2x1ZGVPcHRpb25zKSBleGNsdWRlT3B0aW9ucyA9IGV4Y2x1ZGVPcHRpb25zLm1hcChmdW5jdGlvbiAoaSkge1xuXHRcdFx0XHRcdHJldHVybiBpW190aGlzMy5wcm9wcy52YWx1ZUtleV07XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRyZXR1cm4gb3B0aW9ucy5maWx0ZXIoZnVuY3Rpb24gKG9wdGlvbikge1xuXHRcdFx0XHRcdGlmIChleGNsdWRlT3B0aW9ucyAmJiBleGNsdWRlT3B0aW9ucy5pbmRleE9mKG9wdGlvbltfdGhpczMucHJvcHMudmFsdWVLZXldKSA+IC0xKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0aWYgKF90aGlzMy5wcm9wcy5maWx0ZXJPcHRpb24pIHJldHVybiBfdGhpczMucHJvcHMuZmlsdGVyT3B0aW9uLmNhbGwoX3RoaXMzLCBvcHRpb24sIGZpbHRlclZhbHVlKTtcblx0XHRcdFx0XHRpZiAoIWZpbHRlclZhbHVlKSByZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR2YXIgdmFsdWVUZXN0ID0gU3RyaW5nKG9wdGlvbltfdGhpczMucHJvcHMudmFsdWVLZXldKTtcblx0XHRcdFx0XHR2YXIgbGFiZWxUZXN0ID0gU3RyaW5nKG9wdGlvbltfdGhpczMucHJvcHMubGFiZWxLZXldKTtcblx0XHRcdFx0XHRpZiAoX3RoaXMzLnByb3BzLmlnbm9yZUFjY2VudHMpIHtcblx0XHRcdFx0XHRcdGlmIChfdGhpczMucHJvcHMubWF0Y2hQcm9wICE9PSAnbGFiZWwnKSB2YWx1ZVRlc3QgPSAoMCwgX3V0aWxzU3RyaXBEaWFjcml0aWNzMlsnZGVmYXVsdCddKSh2YWx1ZVRlc3QpO1xuXHRcdFx0XHRcdFx0aWYgKF90aGlzMy5wcm9wcy5tYXRjaFByb3AgIT09ICd2YWx1ZScpIGxhYmVsVGVzdCA9ICgwLCBfdXRpbHNTdHJpcERpYWNyaXRpY3MyWydkZWZhdWx0J10pKGxhYmVsVGVzdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChfdGhpczMucHJvcHMuaWdub3JlQ2FzZSkge1xuXHRcdFx0XHRcdFx0aWYgKF90aGlzMy5wcm9wcy5tYXRjaFByb3AgIT09ICdsYWJlbCcpIHZhbHVlVGVzdCA9IHZhbHVlVGVzdC50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdFx0aWYgKF90aGlzMy5wcm9wcy5tYXRjaFByb3AgIT09ICd2YWx1ZScpIGxhYmVsVGVzdCA9IGxhYmVsVGVzdC50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gX3RoaXMzLnByb3BzLm1hdGNoUG9zID09PSAnc3RhcnQnID8gX3RoaXMzLnByb3BzLm1hdGNoUHJvcCAhPT0gJ2xhYmVsJyAmJiB2YWx1ZVRlc3Quc3Vic3RyKDAsIGZpbHRlclZhbHVlLmxlbmd0aCkgPT09IGZpbHRlclZhbHVlIHx8IF90aGlzMy5wcm9wcy5tYXRjaFByb3AgIT09ICd2YWx1ZScgJiYgbGFiZWxUZXN0LnN1YnN0cigwLCBmaWx0ZXJWYWx1ZS5sZW5ndGgpID09PSBmaWx0ZXJWYWx1ZSA6IF90aGlzMy5wcm9wcy5tYXRjaFByb3AgIT09ICdsYWJlbCcgJiYgdmFsdWVUZXN0LmluZGV4T2YoZmlsdGVyVmFsdWUpID49IDAgfHwgX3RoaXMzLnByb3BzLm1hdGNoUHJvcCAhPT0gJ3ZhbHVlJyAmJiBsYWJlbFRlc3QuaW5kZXhPZihmaWx0ZXJWYWx1ZSkgPj0gMDtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gb3B0aW9ucztcblx0XHRcdH1cblx0XHR9LFxuXHRcblx0XHRyZW5kZXJNZW51OiBmdW5jdGlvbiByZW5kZXJNZW51KG9wdGlvbnMsIHZhbHVlQXJyYXksIGZvY3VzZWRPcHRpb24pIHtcblx0XHRcdHZhciBfdGhpczQgPSB0aGlzO1xuXHRcblx0XHRcdGlmIChvcHRpb25zICYmIG9wdGlvbnMubGVuZ3RoKSB7XG5cdFx0XHRcdHZhciBfcmV0ID0gKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHR2YXIgT3B0aW9uID0gX3RoaXM0LnByb3BzLm9wdGlvbkNvbXBvbmVudDtcblx0XHRcdFx0XHR2YXIgcmVuZGVyTGFiZWwgPSBfdGhpczQucHJvcHMub3B0aW9uUmVuZGVyZXIgfHwgX3RoaXM0LmdldE9wdGlvbkxhYmVsO1xuXHRcblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0djogb3B0aW9ucy5tYXAoZnVuY3Rpb24gKG9wdGlvbiwgaSkge1xuXHRcdFx0XHRcdFx0XHR2YXIgaXNTZWxlY3RlZCA9IHZhbHVlQXJyYXkgJiYgdmFsdWVBcnJheS5pbmRleE9mKG9wdGlvbikgPiAtMTtcblx0XHRcdFx0XHRcdFx0dmFyIGlzRm9jdXNlZCA9IG9wdGlvbiA9PT0gZm9jdXNlZE9wdGlvbjtcblx0XHRcdFx0XHRcdFx0dmFyIG9wdGlvblJlZiA9IGlzRm9jdXNlZCA/ICdmb2N1c2VkJyA6IG51bGw7XG5cdFx0XHRcdFx0XHRcdHZhciBvcHRpb25DbGFzcyA9ICgwLCBfY2xhc3NuYW1lczJbJ2RlZmF1bHQnXSkoe1xuXHRcdFx0XHRcdFx0XHRcdCdTZWxlY3Qtb3B0aW9uJzogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHQnaXMtc2VsZWN0ZWQnOiBpc1NlbGVjdGVkLFxuXHRcdFx0XHRcdFx0XHRcdCdpcy1mb2N1c2VkJzogaXNGb2N1c2VkLFxuXHRcdFx0XHRcdFx0XHRcdCdpcy1kaXNhYmxlZCc6IG9wdGlvbi5kaXNhYmxlZFxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XG5cdFx0XHRcdFx0XHRcdHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0XHRcdFx0XHRcdFx0XHRPcHRpb24sXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0Y2xhc3NOYW1lOiBvcHRpb25DbGFzcyxcblx0XHRcdFx0XHRcdFx0XHRcdGlzRGlzYWJsZWQ6IG9wdGlvbi5kaXNhYmxlZCxcblx0XHRcdFx0XHRcdFx0XHRcdGlzRm9jdXNlZDogaXNGb2N1c2VkLFxuXHRcdFx0XHRcdFx0XHRcdFx0a2V5OiAnb3B0aW9uLScgKyBpICsgJy0nICsgb3B0aW9uW190aGlzNC5wcm9wcy52YWx1ZUtleV0sXG5cdFx0XHRcdFx0XHRcdFx0XHRvblNlbGVjdDogX3RoaXM0LnNlbGVjdFZhbHVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0b25Gb2N1czogX3RoaXM0LmZvY3VzT3B0aW9uLFxuXHRcdFx0XHRcdFx0XHRcdFx0b3B0aW9uOiBvcHRpb24sXG5cdFx0XHRcdFx0XHRcdFx0XHRpc1NlbGVjdGVkOiBpc1NlbGVjdGVkLFxuXHRcdFx0XHRcdFx0XHRcdFx0cmVmOiBvcHRpb25SZWZcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdHJlbmRlckxhYmVsKG9wdGlvbilcblx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fSkoKTtcblx0XG5cdFx0XHRcdGlmICh0eXBlb2YgX3JldCA9PT0gJ29iamVjdCcpIHJldHVybiBfcmV0LnY7XG5cdFx0XHR9IGVsc2UgaWYgKHRoaXMucHJvcHMubm9SZXN1bHRzVGV4dCkge1xuXHRcdFx0XHRyZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdFx0XHRcdFx0J2RpdicsXG5cdFx0XHRcdFx0eyBjbGFzc05hbWU6ICdTZWxlY3Qtbm9yZXN1bHRzJyB9LFxuXHRcdFx0XHRcdHRoaXMucHJvcHMubm9SZXN1bHRzVGV4dFxuXHRcdFx0XHQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0cmVuZGVySGlkZGVuRmllbGQ6IGZ1bmN0aW9uIHJlbmRlckhpZGRlbkZpZWxkKHZhbHVlQXJyYXkpIHtcblx0XHRcdHZhciBfdGhpczUgPSB0aGlzO1xuXHRcblx0XHRcdGlmICghdGhpcy5wcm9wcy5uYW1lKSByZXR1cm47XG5cdFx0XHR2YXIgdmFsdWUgPSB2YWx1ZUFycmF5Lm1hcChmdW5jdGlvbiAoaSkge1xuXHRcdFx0XHRyZXR1cm4gc3RyaW5naWZ5VmFsdWUoaVtfdGhpczUucHJvcHMudmFsdWVLZXldKTtcblx0XHRcdH0pLmpvaW4odGhpcy5wcm9wcy5kZWxpbWl0ZXIpO1xuXHRcdFx0cmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgdHlwZTogJ2hpZGRlbicsIHJlZjogJ3ZhbHVlJywgbmFtZTogdGhpcy5wcm9wcy5uYW1lLCB2YWx1ZTogdmFsdWUsIGRpc2FibGVkOiB0aGlzLnByb3BzLmRpc2FibGVkIH0pO1xuXHRcdH0sXG5cdFxuXHRcdGdldEZvY3VzYWJsZU9wdGlvbjogZnVuY3Rpb24gZ2V0Rm9jdXNhYmxlT3B0aW9uKHNlbGVjdGVkT3B0aW9uKSB7XG5cdFx0XHR2YXIgb3B0aW9ucyA9IHRoaXMuX3Zpc2libGVPcHRpb25zO1xuXHRcdFx0aWYgKCFvcHRpb25zLmxlbmd0aCkgcmV0dXJuO1xuXHRcdFx0dmFyIGZvY3VzZWRPcHRpb24gPSB0aGlzLnN0YXRlLmZvY3VzZWRPcHRpb24gfHwgc2VsZWN0ZWRPcHRpb247XG5cdFx0XHRpZiAoZm9jdXNlZE9wdGlvbiAmJiBvcHRpb25zLmluZGV4T2YoZm9jdXNlZE9wdGlvbikgPiAtMSkgcmV0dXJuIGZvY3VzZWRPcHRpb247XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG9wdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYgKCFvcHRpb25zW2ldLmRpc2FibGVkKSByZXR1cm4gb3B0aW9uc1tpXTtcblx0XHRcdH1cblx0XHR9LFxuXHRcblx0XHRyZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0XHRcdHZhciB2YWx1ZUFycmF5ID0gdGhpcy5nZXRWYWx1ZUFycmF5KCk7XG5cdFx0XHR2YXIgb3B0aW9ucyA9IHRoaXMuX3Zpc2libGVPcHRpb25zID0gdGhpcy5maWx0ZXJPcHRpb25zKHRoaXMucHJvcHMubXVsdGkgPyB2YWx1ZUFycmF5IDogbnVsbCk7XG5cdFx0XHR2YXIgaXNPcGVuID0gdGhpcy5zdGF0ZS5pc09wZW47XG5cdFx0XHRpZiAodGhpcy5wcm9wcy5tdWx0aSAmJiAhb3B0aW9ucy5sZW5ndGggJiYgdmFsdWVBcnJheS5sZW5ndGggJiYgIXRoaXMuc3RhdGUuaW5wdXRWYWx1ZSkgaXNPcGVuID0gZmFsc2U7XG5cdFx0XHR2YXIgZm9jdXNlZE9wdGlvbiA9IHRoaXMuX2ZvY3VzZWRPcHRpb24gPSB0aGlzLmdldEZvY3VzYWJsZU9wdGlvbih2YWx1ZUFycmF5WzBdKTtcblx0XHRcdHZhciBjbGFzc05hbWUgPSAoMCwgX2NsYXNzbmFtZXMyWydkZWZhdWx0J10pKCdTZWxlY3QnLCB0aGlzLnByb3BzLmNsYXNzTmFtZSwge1xuXHRcdFx0XHQnU2VsZWN0LS1tdWx0aSc6IHRoaXMucHJvcHMubXVsdGksXG5cdFx0XHRcdCdpcy1kaXNhYmxlZCc6IHRoaXMucHJvcHMuZGlzYWJsZWQsXG5cdFx0XHRcdCdpcy1mb2N1c2VkJzogdGhpcy5zdGF0ZS5pc0ZvY3VzZWQsXG5cdFx0XHRcdCdpcy1sb2FkaW5nJzogdGhpcy5wcm9wcy5pc0xvYWRpbmcsXG5cdFx0XHRcdCdpcy1vcGVuJzogaXNPcGVuLFxuXHRcdFx0XHQnaXMtcHNldWRvLWZvY3VzZWQnOiB0aGlzLnN0YXRlLmlzUHNldWRvRm9jdXNlZCxcblx0XHRcdFx0J2lzLXNlYXJjaGFibGUnOiB0aGlzLnByb3BzLnNlYXJjaGFibGUsXG5cdFx0XHRcdCdoYXMtdmFsdWUnOiB2YWx1ZUFycmF5Lmxlbmd0aFxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdFx0XHRcdCdkaXYnLFxuXHRcdFx0XHR7IHJlZjogJ3dyYXBwZXInLCBjbGFzc05hbWU6IGNsYXNzTmFtZSwgc3R5bGU6IHRoaXMucHJvcHMud3JhcHBlclN0eWxlIH0sXG5cdFx0XHRcdHRoaXMucmVuZGVySGlkZGVuRmllbGQodmFsdWVBcnJheSksXG5cdFx0XHRcdF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHRcdFx0XHRcdCdkaXYnLFxuXHRcdFx0XHRcdHsgcmVmOiAnY29udHJvbCcsXG5cdFx0XHRcdFx0XHRjbGFzc05hbWU6ICdTZWxlY3QtY29udHJvbCcsXG5cdFx0XHRcdFx0XHRzdHlsZTogdGhpcy5wcm9wcy5zdHlsZSxcblx0XHRcdFx0XHRcdG9uS2V5RG93bjogdGhpcy5oYW5kbGVLZXlEb3duLFxuXHRcdFx0XHRcdFx0b25Nb3VzZURvd246IHRoaXMuaGFuZGxlTW91c2VEb3duLFxuXHRcdFx0XHRcdFx0b25Ub3VjaEVuZDogdGhpcy5oYW5kbGVUb3VjaEVuZCxcblx0XHRcdFx0XHRcdG9uVG91Y2hTdGFydDogdGhpcy5oYW5kbGVUb3VjaFN0YXJ0LFxuXHRcdFx0XHRcdFx0b25Ub3VjaE1vdmU6IHRoaXMuaGFuZGxlVG91Y2hNb3ZlIH0sXG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJWYWx1ZSh2YWx1ZUFycmF5LCBpc09wZW4pLFxuXHRcdFx0XHRcdHRoaXMucmVuZGVySW5wdXQodmFsdWVBcnJheSksXG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJMb2FkaW5nKCksXG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJDbGVhcigpLFxuXHRcdFx0XHRcdHRoaXMucmVuZGVyQXJyb3coKVxuXHRcdFx0XHQpLFxuXHRcdFx0XHRpc09wZW4gPyBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0XHRcdFx0XHQnZGl2Jyxcblx0XHRcdFx0XHR7IHJlZjogJ21lbnVDb250YWluZXInLCBjbGFzc05hbWU6ICdTZWxlY3QtbWVudS1vdXRlcicsIHN0eWxlOiB0aGlzLnByb3BzLm1lbnVDb250YWluZXJTdHlsZSB9LFxuXHRcdFx0XHRcdF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHRcdFx0XHRcdFx0J2RpdicsXG5cdFx0XHRcdFx0XHR7IHJlZjogJ21lbnUnLCBjbGFzc05hbWU6ICdTZWxlY3QtbWVudScsXG5cdFx0XHRcdFx0XHRcdHN0eWxlOiB0aGlzLnByb3BzLm1lbnVTdHlsZSxcblx0XHRcdFx0XHRcdFx0b25TY3JvbGw6IHRoaXMuaGFuZGxlTWVudVNjcm9sbCxcblx0XHRcdFx0XHRcdFx0b25Nb3VzZURvd246IHRoaXMuaGFuZGxlTW91c2VEb3duT25NZW51IH0sXG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlck1lbnUob3B0aW9ucywgIXRoaXMucHJvcHMubXVsdGkgPyB2YWx1ZUFycmF5IDogbnVsbCwgZm9jdXNlZE9wdGlvbilcblx0XHRcdFx0XHQpXG5cdFx0XHRcdCkgOiBudWxsXG5cdFx0XHQpO1xuXHRcdH1cblx0XG5cdH0pO1xuXHRcblx0ZXhwb3J0c1snZGVmYXVsdCddID0gU2VsZWN0O1xuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSxcbi8qIDExICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgbWFwID0gW3sgJ2Jhc2UnOiAnQScsICdsZXR0ZXJzJzogL1tcXHUwMDQxXFx1MjRCNlxcdUZGMjFcXHUwMEMwXFx1MDBDMVxcdTAwQzJcXHUxRUE2XFx1MUVBNFxcdTFFQUFcXHUxRUE4XFx1MDBDM1xcdTAxMDBcXHUwMTAyXFx1MUVCMFxcdTFFQUVcXHUxRUI0XFx1MUVCMlxcdTAyMjZcXHUwMUUwXFx1MDBDNFxcdTAxREVcXHUxRUEyXFx1MDBDNVxcdTAxRkFcXHUwMUNEXFx1MDIwMFxcdTAyMDJcXHUxRUEwXFx1MUVBQ1xcdTFFQjZcXHUxRTAwXFx1MDEwNFxcdTAyM0FcXHUyQzZGXS9nIH0sIHsgJ2Jhc2UnOiAnQUEnLCAnbGV0dGVycyc6IC9bXFx1QTczMl0vZyB9LCB7ICdiYXNlJzogJ0FFJywgJ2xldHRlcnMnOiAvW1xcdTAwQzZcXHUwMUZDXFx1MDFFMl0vZyB9LCB7ICdiYXNlJzogJ0FPJywgJ2xldHRlcnMnOiAvW1xcdUE3MzRdL2cgfSwgeyAnYmFzZSc6ICdBVScsICdsZXR0ZXJzJzogL1tcXHVBNzM2XS9nIH0sIHsgJ2Jhc2UnOiAnQVYnLCAnbGV0dGVycyc6IC9bXFx1QTczOFxcdUE3M0FdL2cgfSwgeyAnYmFzZSc6ICdBWScsICdsZXR0ZXJzJzogL1tcXHVBNzNDXS9nIH0sIHsgJ2Jhc2UnOiAnQicsICdsZXR0ZXJzJzogL1tcXHUwMDQyXFx1MjRCN1xcdUZGMjJcXHUxRTAyXFx1MUUwNFxcdTFFMDZcXHUwMjQzXFx1MDE4MlxcdTAxODFdL2cgfSwgeyAnYmFzZSc6ICdDJywgJ2xldHRlcnMnOiAvW1xcdTAwNDNcXHUyNEI4XFx1RkYyM1xcdTAxMDZcXHUwMTA4XFx1MDEwQVxcdTAxMENcXHUwMEM3XFx1MUUwOFxcdTAxODdcXHUwMjNCXFx1QTczRV0vZyB9LCB7ICdiYXNlJzogJ0QnLCAnbGV0dGVycyc6IC9bXFx1MDA0NFxcdTI0QjlcXHVGRjI0XFx1MUUwQVxcdTAxMEVcXHUxRTBDXFx1MUUxMFxcdTFFMTJcXHUxRTBFXFx1MDExMFxcdTAxOEJcXHUwMThBXFx1MDE4OVxcdUE3NzldL2cgfSwgeyAnYmFzZSc6ICdEWicsICdsZXR0ZXJzJzogL1tcXHUwMUYxXFx1MDFDNF0vZyB9LCB7ICdiYXNlJzogJ0R6JywgJ2xldHRlcnMnOiAvW1xcdTAxRjJcXHUwMUM1XS9nIH0sIHsgJ2Jhc2UnOiAnRScsICdsZXR0ZXJzJzogL1tcXHUwMDQ1XFx1MjRCQVxcdUZGMjVcXHUwMEM4XFx1MDBDOVxcdTAwQ0FcXHUxRUMwXFx1MUVCRVxcdTFFQzRcXHUxRUMyXFx1MUVCQ1xcdTAxMTJcXHUxRTE0XFx1MUUxNlxcdTAxMTRcXHUwMTE2XFx1MDBDQlxcdTFFQkFcXHUwMTFBXFx1MDIwNFxcdTAyMDZcXHUxRUI4XFx1MUVDNlxcdTAyMjhcXHUxRTFDXFx1MDExOFxcdTFFMThcXHUxRTFBXFx1MDE5MFxcdTAxOEVdL2cgfSwgeyAnYmFzZSc6ICdGJywgJ2xldHRlcnMnOiAvW1xcdTAwNDZcXHUyNEJCXFx1RkYyNlxcdTFFMUVcXHUwMTkxXFx1QTc3Ql0vZyB9LCB7ICdiYXNlJzogJ0cnLCAnbGV0dGVycyc6IC9bXFx1MDA0N1xcdTI0QkNcXHVGRjI3XFx1MDFGNFxcdTAxMUNcXHUxRTIwXFx1MDExRVxcdTAxMjBcXHUwMUU2XFx1MDEyMlxcdTAxRTRcXHUwMTkzXFx1QTdBMFxcdUE3N0RcXHVBNzdFXS9nIH0sIHsgJ2Jhc2UnOiAnSCcsICdsZXR0ZXJzJzogL1tcXHUwMDQ4XFx1MjRCRFxcdUZGMjhcXHUwMTI0XFx1MUUyMlxcdTFFMjZcXHUwMjFFXFx1MUUyNFxcdTFFMjhcXHUxRTJBXFx1MDEyNlxcdTJDNjdcXHUyQzc1XFx1QTc4RF0vZyB9LCB7ICdiYXNlJzogJ0knLCAnbGV0dGVycyc6IC9bXFx1MDA0OVxcdTI0QkVcXHVGRjI5XFx1MDBDQ1xcdTAwQ0RcXHUwMENFXFx1MDEyOFxcdTAxMkFcXHUwMTJDXFx1MDEzMFxcdTAwQ0ZcXHUxRTJFXFx1MUVDOFxcdTAxQ0ZcXHUwMjA4XFx1MDIwQVxcdTFFQ0FcXHUwMTJFXFx1MUUyQ1xcdTAxOTddL2cgfSwgeyAnYmFzZSc6ICdKJywgJ2xldHRlcnMnOiAvW1xcdTAwNEFcXHUyNEJGXFx1RkYyQVxcdTAxMzRcXHUwMjQ4XS9nIH0sIHsgJ2Jhc2UnOiAnSycsICdsZXR0ZXJzJzogL1tcXHUwMDRCXFx1MjRDMFxcdUZGMkJcXHUxRTMwXFx1MDFFOFxcdTFFMzJcXHUwMTM2XFx1MUUzNFxcdTAxOThcXHUyQzY5XFx1QTc0MFxcdUE3NDJcXHVBNzQ0XFx1QTdBMl0vZyB9LCB7ICdiYXNlJzogJ0wnLCAnbGV0dGVycyc6IC9bXFx1MDA0Q1xcdTI0QzFcXHVGRjJDXFx1MDEzRlxcdTAxMzlcXHUwMTNEXFx1MUUzNlxcdTFFMzhcXHUwMTNCXFx1MUUzQ1xcdTFFM0FcXHUwMTQxXFx1MDIzRFxcdTJDNjJcXHUyQzYwXFx1QTc0OFxcdUE3NDZcXHVBNzgwXS9nIH0sIHsgJ2Jhc2UnOiAnTEonLCAnbGV0dGVycyc6IC9bXFx1MDFDN10vZyB9LCB7ICdiYXNlJzogJ0xqJywgJ2xldHRlcnMnOiAvW1xcdTAxQzhdL2cgfSwgeyAnYmFzZSc6ICdNJywgJ2xldHRlcnMnOiAvW1xcdTAwNERcXHUyNEMyXFx1RkYyRFxcdTFFM0VcXHUxRTQwXFx1MUU0MlxcdTJDNkVcXHUwMTlDXS9nIH0sIHsgJ2Jhc2UnOiAnTicsICdsZXR0ZXJzJzogL1tcXHUwMDRFXFx1MjRDM1xcdUZGMkVcXHUwMUY4XFx1MDE0M1xcdTAwRDFcXHUxRTQ0XFx1MDE0N1xcdTFFNDZcXHUwMTQ1XFx1MUU0QVxcdTFFNDhcXHUwMjIwXFx1MDE5RFxcdUE3OTBcXHVBN0E0XS9nIH0sIHsgJ2Jhc2UnOiAnTkonLCAnbGV0dGVycyc6IC9bXFx1MDFDQV0vZyB9LCB7ICdiYXNlJzogJ05qJywgJ2xldHRlcnMnOiAvW1xcdTAxQ0JdL2cgfSwgeyAnYmFzZSc6ICdPJywgJ2xldHRlcnMnOiAvW1xcdTAwNEZcXHUyNEM0XFx1RkYyRlxcdTAwRDJcXHUwMEQzXFx1MDBENFxcdTFFRDJcXHUxRUQwXFx1MUVENlxcdTFFRDRcXHUwMEQ1XFx1MUU0Q1xcdTAyMkNcXHUxRTRFXFx1MDE0Q1xcdTFFNTBcXHUxRTUyXFx1MDE0RVxcdTAyMkVcXHUwMjMwXFx1MDBENlxcdTAyMkFcXHUxRUNFXFx1MDE1MFxcdTAxRDFcXHUwMjBDXFx1MDIwRVxcdTAxQTBcXHUxRURDXFx1MUVEQVxcdTFFRTBcXHUxRURFXFx1MUVFMlxcdTFFQ0NcXHUxRUQ4XFx1MDFFQVxcdTAxRUNcXHUwMEQ4XFx1MDFGRVxcdTAxODZcXHUwMTlGXFx1QTc0QVxcdUE3NENdL2cgfSwgeyAnYmFzZSc6ICdPSScsICdsZXR0ZXJzJzogL1tcXHUwMUEyXS9nIH0sIHsgJ2Jhc2UnOiAnT08nLCAnbGV0dGVycyc6IC9bXFx1QTc0RV0vZyB9LCB7ICdiYXNlJzogJ09VJywgJ2xldHRlcnMnOiAvW1xcdTAyMjJdL2cgfSwgeyAnYmFzZSc6ICdQJywgJ2xldHRlcnMnOiAvW1xcdTAwNTBcXHUyNEM1XFx1RkYzMFxcdTFFNTRcXHUxRTU2XFx1MDFBNFxcdTJDNjNcXHVBNzUwXFx1QTc1MlxcdUE3NTRdL2cgfSwgeyAnYmFzZSc6ICdRJywgJ2xldHRlcnMnOiAvW1xcdTAwNTFcXHUyNEM2XFx1RkYzMVxcdUE3NTZcXHVBNzU4XFx1MDI0QV0vZyB9LCB7ICdiYXNlJzogJ1InLCAnbGV0dGVycyc6IC9bXFx1MDA1MlxcdTI0QzdcXHVGRjMyXFx1MDE1NFxcdTFFNThcXHUwMTU4XFx1MDIxMFxcdTAyMTJcXHUxRTVBXFx1MUU1Q1xcdTAxNTZcXHUxRTVFXFx1MDI0Q1xcdTJDNjRcXHVBNzVBXFx1QTdBNlxcdUE3ODJdL2cgfSwgeyAnYmFzZSc6ICdTJywgJ2xldHRlcnMnOiAvW1xcdTAwNTNcXHUyNEM4XFx1RkYzM1xcdTFFOUVcXHUwMTVBXFx1MUU2NFxcdTAxNUNcXHUxRTYwXFx1MDE2MFxcdTFFNjZcXHUxRTYyXFx1MUU2OFxcdTAyMThcXHUwMTVFXFx1MkM3RVxcdUE3QThcXHVBNzg0XS9nIH0sIHsgJ2Jhc2UnOiAnVCcsICdsZXR0ZXJzJzogL1tcXHUwMDU0XFx1MjRDOVxcdUZGMzRcXHUxRTZBXFx1MDE2NFxcdTFFNkNcXHUwMjFBXFx1MDE2MlxcdTFFNzBcXHUxRTZFXFx1MDE2NlxcdTAxQUNcXHUwMUFFXFx1MDIzRVxcdUE3ODZdL2cgfSwgeyAnYmFzZSc6ICdUWicsICdsZXR0ZXJzJzogL1tcXHVBNzI4XS9nIH0sIHsgJ2Jhc2UnOiAnVScsICdsZXR0ZXJzJzogL1tcXHUwMDU1XFx1MjRDQVxcdUZGMzVcXHUwMEQ5XFx1MDBEQVxcdTAwREJcXHUwMTY4XFx1MUU3OFxcdTAxNkFcXHUxRTdBXFx1MDE2Q1xcdTAwRENcXHUwMURCXFx1MDFEN1xcdTAxRDVcXHUwMUQ5XFx1MUVFNlxcdTAxNkVcXHUwMTcwXFx1MDFEM1xcdTAyMTRcXHUwMjE2XFx1MDFBRlxcdTFFRUFcXHUxRUU4XFx1MUVFRVxcdTFFRUNcXHUxRUYwXFx1MUVFNFxcdTFFNzJcXHUwMTcyXFx1MUU3NlxcdTFFNzRcXHUwMjQ0XS9nIH0sIHsgJ2Jhc2UnOiAnVicsICdsZXR0ZXJzJzogL1tcXHUwMDU2XFx1MjRDQlxcdUZGMzZcXHUxRTdDXFx1MUU3RVxcdTAxQjJcXHVBNzVFXFx1MDI0NV0vZyB9LCB7ICdiYXNlJzogJ1ZZJywgJ2xldHRlcnMnOiAvW1xcdUE3NjBdL2cgfSwgeyAnYmFzZSc6ICdXJywgJ2xldHRlcnMnOiAvW1xcdTAwNTdcXHUyNENDXFx1RkYzN1xcdTFFODBcXHUxRTgyXFx1MDE3NFxcdTFFODZcXHUxRTg0XFx1MUU4OFxcdTJDNzJdL2cgfSwgeyAnYmFzZSc6ICdYJywgJ2xldHRlcnMnOiAvW1xcdTAwNThcXHUyNENEXFx1RkYzOFxcdTFFOEFcXHUxRThDXS9nIH0sIHsgJ2Jhc2UnOiAnWScsICdsZXR0ZXJzJzogL1tcXHUwMDU5XFx1MjRDRVxcdUZGMzlcXHUxRUYyXFx1MDBERFxcdTAxNzZcXHUxRUY4XFx1MDIzMlxcdTFFOEVcXHUwMTc4XFx1MUVGNlxcdTFFRjRcXHUwMUIzXFx1MDI0RVxcdTFFRkVdL2cgfSwgeyAnYmFzZSc6ICdaJywgJ2xldHRlcnMnOiAvW1xcdTAwNUFcXHUyNENGXFx1RkYzQVxcdTAxNzlcXHUxRTkwXFx1MDE3QlxcdTAxN0RcXHUxRTkyXFx1MUU5NFxcdTAxQjVcXHUwMjI0XFx1MkM3RlxcdTJDNkJcXHVBNzYyXS9nIH0sIHsgJ2Jhc2UnOiAnYScsICdsZXR0ZXJzJzogL1tcXHUwMDYxXFx1MjREMFxcdUZGNDFcXHUxRTlBXFx1MDBFMFxcdTAwRTFcXHUwMEUyXFx1MUVBN1xcdTFFQTVcXHUxRUFCXFx1MUVBOVxcdTAwRTNcXHUwMTAxXFx1MDEwM1xcdTFFQjFcXHUxRUFGXFx1MUVCNVxcdTFFQjNcXHUwMjI3XFx1MDFFMVxcdTAwRTRcXHUwMURGXFx1MUVBM1xcdTAwRTVcXHUwMUZCXFx1MDFDRVxcdTAyMDFcXHUwMjAzXFx1MUVBMVxcdTFFQURcXHUxRUI3XFx1MUUwMVxcdTAxMDVcXHUyQzY1XFx1MDI1MF0vZyB9LCB7ICdiYXNlJzogJ2FhJywgJ2xldHRlcnMnOiAvW1xcdUE3MzNdL2cgfSwgeyAnYmFzZSc6ICdhZScsICdsZXR0ZXJzJzogL1tcXHUwMEU2XFx1MDFGRFxcdTAxRTNdL2cgfSwgeyAnYmFzZSc6ICdhbycsICdsZXR0ZXJzJzogL1tcXHVBNzM1XS9nIH0sIHsgJ2Jhc2UnOiAnYXUnLCAnbGV0dGVycyc6IC9bXFx1QTczN10vZyB9LCB7ICdiYXNlJzogJ2F2JywgJ2xldHRlcnMnOiAvW1xcdUE3MzlcXHVBNzNCXS9nIH0sIHsgJ2Jhc2UnOiAnYXknLCAnbGV0dGVycyc6IC9bXFx1QTczRF0vZyB9LCB7ICdiYXNlJzogJ2InLCAnbGV0dGVycyc6IC9bXFx1MDA2MlxcdTI0RDFcXHVGRjQyXFx1MUUwM1xcdTFFMDVcXHUxRTA3XFx1MDE4MFxcdTAxODNcXHUwMjUzXS9nIH0sIHsgJ2Jhc2UnOiAnYycsICdsZXR0ZXJzJzogL1tcXHUwMDYzXFx1MjREMlxcdUZGNDNcXHUwMTA3XFx1MDEwOVxcdTAxMEJcXHUwMTBEXFx1MDBFN1xcdTFFMDlcXHUwMTg4XFx1MDIzQ1xcdUE3M0ZcXHUyMTg0XS9nIH0sIHsgJ2Jhc2UnOiAnZCcsICdsZXR0ZXJzJzogL1tcXHUwMDY0XFx1MjREM1xcdUZGNDRcXHUxRTBCXFx1MDEwRlxcdTFFMERcXHUxRTExXFx1MUUxM1xcdTFFMEZcXHUwMTExXFx1MDE4Q1xcdTAyNTZcXHUwMjU3XFx1QTc3QV0vZyB9LCB7ICdiYXNlJzogJ2R6JywgJ2xldHRlcnMnOiAvW1xcdTAxRjNcXHUwMUM2XS9nIH0sIHsgJ2Jhc2UnOiAnZScsICdsZXR0ZXJzJzogL1tcXHUwMDY1XFx1MjRENFxcdUZGNDVcXHUwMEU4XFx1MDBFOVxcdTAwRUFcXHUxRUMxXFx1MUVCRlxcdTFFQzVcXHUxRUMzXFx1MUVCRFxcdTAxMTNcXHUxRTE1XFx1MUUxN1xcdTAxMTVcXHUwMTE3XFx1MDBFQlxcdTFFQkJcXHUwMTFCXFx1MDIwNVxcdTAyMDdcXHUxRUI5XFx1MUVDN1xcdTAyMjlcXHUxRTFEXFx1MDExOVxcdTFFMTlcXHUxRTFCXFx1MDI0N1xcdTAyNUJcXHUwMUREXS9nIH0sIHsgJ2Jhc2UnOiAnZicsICdsZXR0ZXJzJzogL1tcXHUwMDY2XFx1MjRENVxcdUZGNDZcXHUxRTFGXFx1MDE5MlxcdUE3N0NdL2cgfSwgeyAnYmFzZSc6ICdnJywgJ2xldHRlcnMnOiAvW1xcdTAwNjdcXHUyNEQ2XFx1RkY0N1xcdTAxRjVcXHUwMTFEXFx1MUUyMVxcdTAxMUZcXHUwMTIxXFx1MDFFN1xcdTAxMjNcXHUwMUU1XFx1MDI2MFxcdUE3QTFcXHUxRDc5XFx1QTc3Rl0vZyB9LCB7ICdiYXNlJzogJ2gnLCAnbGV0dGVycyc6IC9bXFx1MDA2OFxcdTI0RDdcXHVGRjQ4XFx1MDEyNVxcdTFFMjNcXHUxRTI3XFx1MDIxRlxcdTFFMjVcXHUxRTI5XFx1MUUyQlxcdTFFOTZcXHUwMTI3XFx1MkM2OFxcdTJDNzZcXHUwMjY1XS9nIH0sIHsgJ2Jhc2UnOiAnaHYnLCAnbGV0dGVycyc6IC9bXFx1MDE5NV0vZyB9LCB7ICdiYXNlJzogJ2knLCAnbGV0dGVycyc6IC9bXFx1MDA2OVxcdTI0RDhcXHVGRjQ5XFx1MDBFQ1xcdTAwRURcXHUwMEVFXFx1MDEyOVxcdTAxMkJcXHUwMTJEXFx1MDBFRlxcdTFFMkZcXHUxRUM5XFx1MDFEMFxcdTAyMDlcXHUwMjBCXFx1MUVDQlxcdTAxMkZcXHUxRTJEXFx1MDI2OFxcdTAxMzFdL2cgfSwgeyAnYmFzZSc6ICdqJywgJ2xldHRlcnMnOiAvW1xcdTAwNkFcXHUyNEQ5XFx1RkY0QVxcdTAxMzVcXHUwMUYwXFx1MDI0OV0vZyB9LCB7ICdiYXNlJzogJ2snLCAnbGV0dGVycyc6IC9bXFx1MDA2QlxcdTI0REFcXHVGRjRCXFx1MUUzMVxcdTAxRTlcXHUxRTMzXFx1MDEzN1xcdTFFMzVcXHUwMTk5XFx1MkM2QVxcdUE3NDFcXHVBNzQzXFx1QTc0NVxcdUE3QTNdL2cgfSwgeyAnYmFzZSc6ICdsJywgJ2xldHRlcnMnOiAvW1xcdTAwNkNcXHUyNERCXFx1RkY0Q1xcdTAxNDBcXHUwMTNBXFx1MDEzRVxcdTFFMzdcXHUxRTM5XFx1MDEzQ1xcdTFFM0RcXHUxRTNCXFx1MDE3RlxcdTAxNDJcXHUwMTlBXFx1MDI2QlxcdTJDNjFcXHVBNzQ5XFx1QTc4MVxcdUE3NDddL2cgfSwgeyAnYmFzZSc6ICdsaicsICdsZXR0ZXJzJzogL1tcXHUwMUM5XS9nIH0sIHsgJ2Jhc2UnOiAnbScsICdsZXR0ZXJzJzogL1tcXHUwMDZEXFx1MjREQ1xcdUZGNERcXHUxRTNGXFx1MUU0MVxcdTFFNDNcXHUwMjcxXFx1MDI2Rl0vZyB9LCB7ICdiYXNlJzogJ24nLCAnbGV0dGVycyc6IC9bXFx1MDA2RVxcdTI0RERcXHVGRjRFXFx1MDFGOVxcdTAxNDRcXHUwMEYxXFx1MUU0NVxcdTAxNDhcXHUxRTQ3XFx1MDE0NlxcdTFFNEJcXHUxRTQ5XFx1MDE5RVxcdTAyNzJcXHUwMTQ5XFx1QTc5MVxcdUE3QTVdL2cgfSwgeyAnYmFzZSc6ICduaicsICdsZXR0ZXJzJzogL1tcXHUwMUNDXS9nIH0sIHsgJ2Jhc2UnOiAnbycsICdsZXR0ZXJzJzogL1tcXHUwMDZGXFx1MjRERVxcdUZGNEZcXHUwMEYyXFx1MDBGM1xcdTAwRjRcXHUxRUQzXFx1MUVEMVxcdTFFRDdcXHUxRUQ1XFx1MDBGNVxcdTFFNERcXHUwMjJEXFx1MUU0RlxcdTAxNERcXHUxRTUxXFx1MUU1M1xcdTAxNEZcXHUwMjJGXFx1MDIzMVxcdTAwRjZcXHUwMjJCXFx1MUVDRlxcdTAxNTFcXHUwMUQyXFx1MDIwRFxcdTAyMEZcXHUwMUExXFx1MUVERFxcdTFFREJcXHUxRUUxXFx1MUVERlxcdTFFRTNcXHUxRUNEXFx1MUVEOVxcdTAxRUJcXHUwMUVEXFx1MDBGOFxcdTAxRkZcXHUwMjU0XFx1QTc0QlxcdUE3NERcXHUwMjc1XS9nIH0sIHsgJ2Jhc2UnOiAnb2knLCAnbGV0dGVycyc6IC9bXFx1MDFBM10vZyB9LCB7ICdiYXNlJzogJ291JywgJ2xldHRlcnMnOiAvW1xcdTAyMjNdL2cgfSwgeyAnYmFzZSc6ICdvbycsICdsZXR0ZXJzJzogL1tcXHVBNzRGXS9nIH0sIHsgJ2Jhc2UnOiAncCcsICdsZXR0ZXJzJzogL1tcXHUwMDcwXFx1MjRERlxcdUZGNTBcXHUxRTU1XFx1MUU1N1xcdTAxQTVcXHUxRDdEXFx1QTc1MVxcdUE3NTNcXHVBNzU1XS9nIH0sIHsgJ2Jhc2UnOiAncScsICdsZXR0ZXJzJzogL1tcXHUwMDcxXFx1MjRFMFxcdUZGNTFcXHUwMjRCXFx1QTc1N1xcdUE3NTldL2cgfSwgeyAnYmFzZSc6ICdyJywgJ2xldHRlcnMnOiAvW1xcdTAwNzJcXHUyNEUxXFx1RkY1MlxcdTAxNTVcXHUxRTU5XFx1MDE1OVxcdTAyMTFcXHUwMjEzXFx1MUU1QlxcdTFFNURcXHUwMTU3XFx1MUU1RlxcdTAyNERcXHUwMjdEXFx1QTc1QlxcdUE3QTdcXHVBNzgzXS9nIH0sIHsgJ2Jhc2UnOiAncycsICdsZXR0ZXJzJzogL1tcXHUwMDczXFx1MjRFMlxcdUZGNTNcXHUwMERGXFx1MDE1QlxcdTFFNjVcXHUwMTVEXFx1MUU2MVxcdTAxNjFcXHUxRTY3XFx1MUU2M1xcdTFFNjlcXHUwMjE5XFx1MDE1RlxcdTAyM0ZcXHVBN0E5XFx1QTc4NVxcdTFFOUJdL2cgfSwgeyAnYmFzZSc6ICd0JywgJ2xldHRlcnMnOiAvW1xcdTAwNzRcXHUyNEUzXFx1RkY1NFxcdTFFNkJcXHUxRTk3XFx1MDE2NVxcdTFFNkRcXHUwMjFCXFx1MDE2M1xcdTFFNzFcXHUxRTZGXFx1MDE2N1xcdTAxQURcXHUwMjg4XFx1MkM2NlxcdUE3ODddL2cgfSwgeyAnYmFzZSc6ICd0eicsICdsZXR0ZXJzJzogL1tcXHVBNzI5XS9nIH0sIHsgJ2Jhc2UnOiAndScsICdsZXR0ZXJzJzogL1tcXHUwMDc1XFx1MjRFNFxcdUZGNTVcXHUwMEY5XFx1MDBGQVxcdTAwRkJcXHUwMTY5XFx1MUU3OVxcdTAxNkJcXHUxRTdCXFx1MDE2RFxcdTAwRkNcXHUwMURDXFx1MDFEOFxcdTAxRDZcXHUwMURBXFx1MUVFN1xcdTAxNkZcXHUwMTcxXFx1MDFENFxcdTAyMTVcXHUwMjE3XFx1MDFCMFxcdTFFRUJcXHUxRUU5XFx1MUVFRlxcdTFFRURcXHUxRUYxXFx1MUVFNVxcdTFFNzNcXHUwMTczXFx1MUU3N1xcdTFFNzVcXHUwMjg5XS9nIH0sIHsgJ2Jhc2UnOiAndicsICdsZXR0ZXJzJzogL1tcXHUwMDc2XFx1MjRFNVxcdUZGNTZcXHUxRTdEXFx1MUU3RlxcdTAyOEJcXHVBNzVGXFx1MDI4Q10vZyB9LCB7ICdiYXNlJzogJ3Z5JywgJ2xldHRlcnMnOiAvW1xcdUE3NjFdL2cgfSwgeyAnYmFzZSc6ICd3JywgJ2xldHRlcnMnOiAvW1xcdTAwNzdcXHUyNEU2XFx1RkY1N1xcdTFFODFcXHUxRTgzXFx1MDE3NVxcdTFFODdcXHUxRTg1XFx1MUU5OFxcdTFFODlcXHUyQzczXS9nIH0sIHsgJ2Jhc2UnOiAneCcsICdsZXR0ZXJzJzogL1tcXHUwMDc4XFx1MjRFN1xcdUZGNThcXHUxRThCXFx1MUU4RF0vZyB9LCB7ICdiYXNlJzogJ3knLCAnbGV0dGVycyc6IC9bXFx1MDA3OVxcdTI0RThcXHVGRjU5XFx1MUVGM1xcdTAwRkRcXHUwMTc3XFx1MUVGOVxcdTAyMzNcXHUxRThGXFx1MDBGRlxcdTFFRjdcXHUxRTk5XFx1MUVGNVxcdTAxQjRcXHUwMjRGXFx1MUVGRl0vZyB9LCB7ICdiYXNlJzogJ3onLCAnbGV0dGVycyc6IC9bXFx1MDA3QVxcdTI0RTlcXHVGRjVBXFx1MDE3QVxcdTFFOTFcXHUwMTdDXFx1MDE3RVxcdTFFOTNcXHUxRTk1XFx1MDFCNlxcdTAyMjVcXHUwMjQwXFx1MkM2Q1xcdUE3NjNdL2cgfV07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHN0cmlwRGlhY3JpdGljcyhzdHIpIHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG1hcC5sZW5ndGg7IGkrKykge1xuXHRcdFx0c3RyID0gc3RyLnJlcGxhY2UobWFwW2ldLmxldHRlcnMsIG1hcFtpXS5iYXNlKTtcblx0XHR9XG5cdFx0cmV0dXJuIHN0cjtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmpRdWVyeSA9IGV4cG9ydHMuYW5pbWF0aW9uID0gdW5kZWZpbmVkO1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfcmVhY3RBZGRvbnNVcGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdHZhciBfcmVhY3RBZGRvbnNVcGRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3RBZGRvbnNVcGRhdGUpO1xuXHRcblx0dmFyIF9jbGFzc25hbWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblx0XG5cdHZhciBfYW5pbWF0aW9uTWl4aW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKTtcblx0XG5cdHZhciBfYW5pbWF0aW9uTWl4aW4yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYW5pbWF0aW9uTWl4aW4pO1xuXHRcblx0dmFyIF9qUXVlcnlNaXhpbiA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpO1xuXHRcblx0dmFyIF9qUXVlcnlNaXhpbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9qUXVlcnlNaXhpbik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gbm9vcCgpIHt9XG5cdFxuXHR2YXIgVG9hc3RNZXNzYWdlU3BlYyA9IHtcblx0ICBkaXNwbGF5TmFtZTogXCJUb2FzdE1lc3NhZ2VcIixcblx0XG5cdCAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG5cdCAgICB2YXIgaWNvbkNsYXNzTmFtZXMgPSB7XG5cdCAgICAgIGVycm9yOiBcInRvYXN0LWVycm9yXCIsXG5cdCAgICAgIGluZm86IFwidG9hc3QtaW5mb1wiLFxuXHQgICAgICBzdWNjZXNzOiBcInRvYXN0LXN1Y2Nlc3NcIixcblx0ICAgICAgd2FybmluZzogXCJ0b2FzdC13YXJuaW5nXCJcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgY2xhc3NOYW1lOiBcInRvYXN0XCIsXG5cdCAgICAgIGljb25DbGFzc05hbWVzOiBpY29uQ2xhc3NOYW1lcyxcblx0ICAgICAgdGl0bGVDbGFzc05hbWU6IFwidG9hc3QtdGl0bGVcIixcblx0ICAgICAgbWVzc2FnZUNsYXNzTmFtZTogXCJ0b2FzdC1tZXNzYWdlXCIsXG5cdCAgICAgIHRhcFRvRGlzbWlzczogdHJ1ZSxcblx0ICAgICAgY2xvc2VCdXR0b246IGZhbHNlXG5cdCAgICB9O1xuXHQgIH0sXG5cdCAgaGFuZGxlT25DbGljazogZnVuY3Rpb24gaGFuZGxlT25DbGljayhldmVudCkge1xuXHQgICAgdGhpcy5wcm9wcy5oYW5kbGVPbkNsaWNrKGV2ZW50KTtcblx0ICAgIGlmICh0aGlzLnByb3BzLnRhcFRvRGlzbWlzcykge1xuXHQgICAgICB0aGlzLmhpZGVUb2FzdCh0cnVlKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIF9oYW5kbGVfY2xvc2VfYnV0dG9uX2NsaWNrOiBmdW5jdGlvbiBfaGFuZGxlX2Nsb3NlX2J1dHRvbl9jbGljayhldmVudCkge1xuXHQgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdCAgICB0aGlzLmhpZGVUb2FzdCh0cnVlKTtcblx0ICB9LFxuXHQgIF9oYW5kbGVfcmVtb3ZlOiBmdW5jdGlvbiBfaGFuZGxlX3JlbW92ZSgpIHtcblx0ICAgIHRoaXMucHJvcHMuaGFuZGxlUmVtb3ZlKHRoaXMucHJvcHMudG9hc3RJZCk7XG5cdCAgfSxcblx0ICBfcmVuZGVyX2Nsb3NlX2J1dHRvbjogZnVuY3Rpb24gX3JlbmRlcl9jbG9zZV9idXR0b24oKSB7XG5cdCAgICByZXR1cm4gdGhpcy5wcm9wcy5jbG9zZUJ1dHRvbiA/IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcblx0ICAgICAgY2xhc3NOYW1lOiBcInRvYXN0LWNsb3NlLWJ1dHRvblwiLCByb2xlOiBcImJ1dHRvblwiLFxuXHQgICAgICBvbkNsaWNrOiB0aGlzLl9oYW5kbGVfY2xvc2VfYnV0dG9uX2NsaWNrLFxuXHQgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTDogeyBfX2h0bWw6IFwiJnRpbWVzO1wiIH1cblx0ICAgIH0pIDogZmFsc2U7XG5cdCAgfSxcblx0ICBfcmVuZGVyX3RpdGxlX2VsZW1lbnQ6IGZ1bmN0aW9uIF9yZW5kZXJfdGl0bGVfZWxlbWVudCgpIHtcblx0ICAgIHJldHVybiB0aGlzLnByb3BzLnRpdGxlID8gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgIFwiZGl2XCIsXG5cdCAgICAgIHsgY2xhc3NOYW1lOiB0aGlzLnByb3BzLnRpdGxlQ2xhc3NOYW1lIH0sXG5cdCAgICAgIHRoaXMucHJvcHMudGl0bGVcblx0ICAgICkgOiBmYWxzZTtcblx0ICB9LFxuXHQgIF9yZW5kZXJfbWVzc2FnZV9lbGVtZW50OiBmdW5jdGlvbiBfcmVuZGVyX21lc3NhZ2VfZWxlbWVudCgpIHtcblx0ICAgIHJldHVybiB0aGlzLnByb3BzLm1lc3NhZ2UgPyBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgXCJkaXZcIixcblx0ICAgICAgeyBjbGFzc05hbWU6IHRoaXMucHJvcHMubWVzc2FnZUNsYXNzTmFtZSB9LFxuXHQgICAgICB0aGlzLnByb3BzLm1lc3NhZ2Vcblx0ICAgICkgOiBmYWxzZTtcblx0ICB9LFxuXHQgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgdmFyIGljb25DbGFzc05hbWUgPSB0aGlzLnByb3BzLmljb25DbGFzc05hbWUgfHwgdGhpcy5wcm9wcy5pY29uQ2xhc3NOYW1lc1t0aGlzLnByb3BzLnR5cGVdO1xuXHRcblx0ICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgXCJkaXZcIixcblx0ICAgICAge1xuXHQgICAgICAgIGNsYXNzTmFtZTogKDAsIF9jbGFzc25hbWVzMi5kZWZhdWx0KSh0aGlzLnByb3BzLmNsYXNzTmFtZSwgaWNvbkNsYXNzTmFtZSksXG5cdCAgICAgICAgc3R5bGU6IHRoaXMucHJvcHMuc3R5bGUsXG5cdCAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVPbkNsaWNrLFxuXHQgICAgICAgIG9uTW91c2VFbnRlcjogdGhpcy5oYW5kbGVNb3VzZUVudGVyLFxuXHQgICAgICAgIG9uTW91c2VMZWF2ZTogdGhpcy5oYW5kbGVNb3VzZUxlYXZlXG5cdCAgICAgIH0sXG5cdCAgICAgIHRoaXMuX3JlbmRlcl9jbG9zZV9idXR0b24oKSxcblx0ICAgICAgdGhpcy5fcmVuZGVyX3RpdGxlX2VsZW1lbnQoKSxcblx0ICAgICAgdGhpcy5fcmVuZGVyX21lc3NhZ2VfZWxlbWVudCgpXG5cdCAgICApO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBhbmltYXRpb24gPSBleHBvcnRzLmFuaW1hdGlvbiA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVDbGFzcygoMCwgX3JlYWN0QWRkb25zVXBkYXRlMi5kZWZhdWx0KShUb2FzdE1lc3NhZ2VTcGVjLCB7XG5cdCAgZGlzcGxheU5hbWU6IHsgJHNldDogXCJUb2FzdE1lc3NhZ2UuYW5pbWF0aW9uXCIgfSxcblx0ICBtaXhpbnM6IHsgJHNldDogW19hbmltYXRpb25NaXhpbjIuZGVmYXVsdF0gfVxuXHR9KSk7XG5cdFxuXHR2YXIgalF1ZXJ5ID0gZXhwb3J0cy5qUXVlcnkgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlQ2xhc3MoKDAsIF9yZWFjdEFkZG9uc1VwZGF0ZTIuZGVmYXVsdCkoVG9hc3RNZXNzYWdlU3BlYywge1xuXHQgIGRpc3BsYXlOYW1lOiB7ICRzZXQ6IFwiVG9hc3RNZXNzYWdlLmpRdWVyeVwiIH0sXG5cdCAgbWl4aW5zOiB7ICRzZXQ6IFtfalF1ZXJ5TWl4aW4yLmRlZmF1bHRdIH1cblx0fSkpO1xuXHRcblx0Lypcblx0ICogYXNzaWduIGRlZmF1bHQgbm9vcCBmdW5jdGlvbnNcblx0ICovXG5cdFRvYXN0TWVzc2FnZVNwZWMuaGFuZGxlTW91c2VFbnRlciA9IG5vb3A7XG5cdFRvYXN0TWVzc2FnZVNwZWMuaGFuZGxlTW91c2VMZWF2ZSA9IG5vb3A7XG5cdFRvYXN0TWVzc2FnZVNwZWMuaGlkZVRvYXN0ID0gbm9vcDtcblx0XG5cdHZhciBUb2FzdE1lc3NhZ2UgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlQ2xhc3MoVG9hc3RNZXNzYWdlU3BlYyk7XG5cdFxuXHRUb2FzdE1lc3NhZ2UuYW5pbWF0aW9uID0gYW5pbWF0aW9uO1xuXHRUb2FzdE1lc3NhZ2UualF1ZXJ5ID0galF1ZXJ5O1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gVG9hc3RNZXNzYWdlO1xuXG4vKioqLyB9LFxuLyogMTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSk7XG5cbi8qKiovIH0sXG4vKiAxNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG5cdC8vXG5cdC8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG5cdC8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcblx0Ly8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG5cdC8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcblx0Ly8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuXHQvLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcblx0Ly8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cdC8vXG5cdC8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG5cdC8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXHQvL1xuXHQvLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG5cdC8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcblx0Ly8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuXHQvLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcblx0Ly8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG5cdC8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcblx0Ly8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblx0XG5cdGZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcblx0ICB0aGlzLl9ldmVudHMgPSB0aGlzLl9ldmVudHMgfHwge307XG5cdCAgdGhpcy5fbWF4TGlzdGVuZXJzID0gdGhpcy5fbWF4TGlzdGVuZXJzIHx8IHVuZGVmaW5lZDtcblx0fVxuXHRtb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcblx0XG5cdC8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuXHRFdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyO1xuXHRcblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnMgPSB1bmRlZmluZWQ7XG5cdFxuXHQvLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcblx0Ly8gYWRkZWQgdG8gaXQuIFRoaXMgaXMgYSB1c2VmdWwgZGVmYXVsdCB3aGljaCBoZWxwcyBmaW5kaW5nIG1lbW9yeSBsZWFrcy5cblx0RXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDtcblx0XG5cdC8vIE9idmlvdXNseSBub3QgYWxsIEVtaXR0ZXJzIHNob3VsZCBiZSBsaW1pdGVkIHRvIDEwLiBUaGlzIGZ1bmN0aW9uIGFsbG93c1xuXHQvLyB0aGF0IHRvIGJlIGluY3JlYXNlZC4gU2V0IHRvIHplcm8gZm9yIHVubGltaXRlZC5cblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbihuKSB7XG5cdCAgaWYgKCFpc051bWJlcihuKSB8fCBuIDwgMCB8fCBpc05hTihuKSlcblx0ICAgIHRocm93IFR5cGVFcnJvcignbiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG5cdCAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKHR5cGUpIHtcblx0ICB2YXIgZXIsIGhhbmRsZXIsIGxlbiwgYXJncywgaSwgbGlzdGVuZXJzO1xuXHRcblx0ICBpZiAoIXRoaXMuX2V2ZW50cylcblx0ICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXHRcblx0ICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG5cdCAgaWYgKHR5cGUgPT09ICdlcnJvcicpIHtcblx0ICAgIGlmICghdGhpcy5fZXZlbnRzLmVycm9yIHx8XG5cdCAgICAgICAgKGlzT2JqZWN0KHRoaXMuX2V2ZW50cy5lcnJvcikgJiYgIXRoaXMuX2V2ZW50cy5lcnJvci5sZW5ndGgpKSB7XG5cdCAgICAgIGVyID0gYXJndW1lbnRzWzFdO1xuXHQgICAgICBpZiAoZXIgaW5zdGFuY2VvZiBFcnJvcikge1xuXHQgICAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuXHQgICAgICB9XG5cdCAgICAgIHRocm93IFR5cGVFcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkIFwiZXJyb3JcIiBldmVudC4nKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGhhbmRsZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cdFxuXHQgIGlmIChpc1VuZGVmaW5lZChoYW5kbGVyKSlcblx0ICAgIHJldHVybiBmYWxzZTtcblx0XG5cdCAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcblx0ICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuXHQgICAgICAvLyBmYXN0IGNhc2VzXG5cdCAgICAgIGNhc2UgMTpcblx0ICAgICAgICBoYW5kbGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgMjpcblx0ICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdKTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSAzOlxuXHQgICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIC8vIHNsb3dlclxuXHQgICAgICBkZWZhdWx0OlxuXHQgICAgICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXHQgICAgICAgIGhhbmRsZXIuYXBwbHkodGhpcywgYXJncyk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChpc09iamVjdChoYW5kbGVyKSkge1xuXHQgICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG5cdCAgICBsaXN0ZW5lcnMgPSBoYW5kbGVyLnNsaWNlKCk7XG5cdCAgICBsZW4gPSBsaXN0ZW5lcnMubGVuZ3RoO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKVxuXHQgICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkodGhpcywgYXJncyk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gdHJ1ZTtcblx0fTtcblx0XG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuXHQgIHZhciBtO1xuXHRcblx0ICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuXHQgICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblx0XG5cdCAgaWYgKCF0aGlzLl9ldmVudHMpXG5cdCAgICB0aGlzLl9ldmVudHMgPSB7fTtcblx0XG5cdCAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gXCJuZXdMaXN0ZW5lclwiISBCZWZvcmVcblx0ICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG5cdCAgaWYgKHRoaXMuX2V2ZW50cy5uZXdMaXN0ZW5lcilcblx0ICAgIHRoaXMuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLFxuXHQgICAgICAgICAgICAgIGlzRnVuY3Rpb24obGlzdGVuZXIubGlzdGVuZXIpID9cblx0ICAgICAgICAgICAgICBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblx0XG5cdCAgaWYgKCF0aGlzLl9ldmVudHNbdHlwZV0pXG5cdCAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cblx0ICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xuXHQgIGVsc2UgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkpXG5cdCAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG5cdCAgICB0aGlzLl9ldmVudHNbdHlwZV0ucHVzaChsaXN0ZW5lcik7XG5cdCAgZWxzZVxuXHQgICAgLy8gQWRkaW5nIHRoZSBzZWNvbmQgZWxlbWVudCwgbmVlZCB0byBjaGFuZ2UgdG8gYXJyYXkuXG5cdCAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBbdGhpcy5fZXZlbnRzW3R5cGVdLCBsaXN0ZW5lcl07XG5cdFxuXHQgIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXG5cdCAgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkgJiYgIXRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQpIHtcblx0ICAgIGlmICghaXNVbmRlZmluZWQodGhpcy5fbWF4TGlzdGVuZXJzKSkge1xuXHQgICAgICBtID0gdGhpcy5fbWF4TGlzdGVuZXJzO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbSA9IEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChtICYmIG0gPiAwICYmIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGggPiBtKSB7XG5cdCAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQgPSB0cnVlO1xuXHQgICAgICBjb25zb2xlLmVycm9yKCcobm9kZSkgd2FybmluZzogcG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSAnICtcblx0ICAgICAgICAgICAgICAgICAgICAnbGVhayBkZXRlY3RlZC4gJWQgbGlzdGVuZXJzIGFkZGVkLiAnICtcblx0ICAgICAgICAgICAgICAgICAgICAnVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQuJyxcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoKTtcblx0ICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLnRyYWNlID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgLy8gbm90IHN1cHBvcnRlZCBpbiBJRSAxMFxuXHQgICAgICAgIGNvbnNvbGUudHJhY2UoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjtcblx0XG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG5cdCAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcblx0ICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cdFxuXHQgIHZhciBmaXJlZCA9IGZhbHNlO1xuXHRcblx0ICBmdW5jdGlvbiBnKCkge1xuXHQgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBnKTtcblx0XG5cdCAgICBpZiAoIWZpcmVkKSB7XG5cdCAgICAgIGZpcmVkID0gdHJ1ZTtcblx0ICAgICAgbGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGcubGlzdGVuZXIgPSBsaXN0ZW5lcjtcblx0ICB0aGlzLm9uKHR5cGUsIGcpO1xuXHRcblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdC8vIGVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZmYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkXG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuXHQgIHZhciBsaXN0LCBwb3NpdGlvbiwgbGVuZ3RoLCBpO1xuXHRcblx0ICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuXHQgICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblx0XG5cdCAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcblx0ICAgIHJldHVybiB0aGlzO1xuXHRcblx0ICBsaXN0ID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXHQgIGxlbmd0aCA9IGxpc3QubGVuZ3RoO1xuXHQgIHBvc2l0aW9uID0gLTE7XG5cdFxuXHQgIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fFxuXHQgICAgICAoaXNGdW5jdGlvbihsaXN0Lmxpc3RlbmVyKSAmJiBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcblx0ICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG5cdCAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuXHQgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuXHRcblx0ICB9IGVsc2UgaWYgKGlzT2JqZWN0KGxpc3QpKSB7XG5cdCAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSA+IDA7KSB7XG5cdCAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fFxuXHQgICAgICAgICAgKGxpc3RbaV0ubGlzdGVuZXIgJiYgbGlzdFtpXS5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7XG5cdCAgICAgICAgcG9zaXRpb24gPSBpO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHBvc2l0aW9uIDwgMClcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdFxuXHQgICAgaWYgKGxpc3QubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgIGxpc3QubGVuZ3RoID0gMDtcblx0ICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGxpc3Quc3BsaWNlKHBvc2l0aW9uLCAxKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuXHQgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcblx0ICB2YXIga2V5LCBsaXN0ZW5lcnM7XG5cdFxuXHQgIGlmICghdGhpcy5fZXZlbnRzKVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdFxuXHQgIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcblx0ICBpZiAoIXRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcikge1xuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApXG5cdCAgICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXHQgICAgZWxzZSBpZiAodGhpcy5fZXZlbnRzW3R5cGVdKVxuXHQgICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfVxuXHRcblx0ICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcblx0ICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgZm9yIChrZXkgaW4gdGhpcy5fZXZlbnRzKSB7XG5cdCAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xuXHQgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhrZXkpO1xuXHQgICAgfVxuXHQgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XG5cdCAgICB0aGlzLl9ldmVudHMgPSB7fTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH1cblx0XG5cdCAgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXHRcblx0ICBpZiAoaXNGdW5jdGlvbihsaXN0ZW5lcnMpKSB7XG5cdCAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG5cdCAgfSBlbHNlIGlmIChsaXN0ZW5lcnMpIHtcblx0ICAgIC8vIExJRk8gb3JkZXJcblx0ICAgIHdoaWxlIChsaXN0ZW5lcnMubGVuZ3RoKVxuXHQgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyc1tsaXN0ZW5lcnMubGVuZ3RoIC0gMV0pO1xuXHQgIH1cblx0ICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuXHRcblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkge1xuXHQgIHZhciByZXQ7XG5cdCAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcblx0ICAgIHJldCA9IFtdO1xuXHQgIGVsc2UgaWYgKGlzRnVuY3Rpb24odGhpcy5fZXZlbnRzW3R5cGVdKSlcblx0ICAgIHJldCA9IFt0aGlzLl9ldmVudHNbdHlwZV1dO1xuXHQgIGVsc2Vcblx0ICAgIHJldCA9IHRoaXMuX2V2ZW50c1t0eXBlXS5zbGljZSgpO1xuXHQgIHJldHVybiByZXQ7XG5cdH07XG5cdFxuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbih0eXBlKSB7XG5cdCAgaWYgKHRoaXMuX2V2ZW50cykge1xuXHQgICAgdmFyIGV2bGlzdGVuZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cdFxuXHQgICAgaWYgKGlzRnVuY3Rpb24oZXZsaXN0ZW5lcikpXG5cdCAgICAgIHJldHVybiAxO1xuXHQgICAgZWxzZSBpZiAoZXZsaXN0ZW5lcilcblx0ICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoO1xuXHQgIH1cblx0ICByZXR1cm4gMDtcblx0fTtcblx0XG5cdEV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuXHQgIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc051bWJlcihhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuXHQgIHJldHVybiBhcmcgPT09IHZvaWQgMDtcblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cdFxuXHR2YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cdHZhciBxdWV1ZSA9IFtdO1xuXHR2YXIgZHJhaW5pbmcgPSBmYWxzZTtcblx0dmFyIGN1cnJlbnRRdWV1ZTtcblx0dmFyIHF1ZXVlSW5kZXggPSAtMTtcblx0XG5cdGZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgIH1cblx0ICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBkcmFpblF1ZXVlKCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG5cdCAgICBpZiAoZHJhaW5pbmcpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcblx0ICAgIGRyYWluaW5nID0gdHJ1ZTtcblx0XG5cdCAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgd2hpbGUobGVuKSB7XG5cdCAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG5cdCAgICAgICAgcXVldWUgPSBbXTtcblx0ICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcblx0ICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG5cdCAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgfVxuXHQgICAgY3VycmVudFF1ZXVlID0gbnVsbDtcblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG5cdH1cblx0XG5cdHByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG5cdCAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcblx0ICAgICAgICBzZXRUaW1lb3V0KGRyYWluUXVldWUsIDApO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0Ly8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuXHRmdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcblx0ICAgIHRoaXMuZnVuID0gZnVuO1xuXHQgICAgdGhpcy5hcnJheSA9IGFycmF5O1xuXHR9XG5cdEl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xuXHR9O1xuXHRwcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xuXHRwcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xuXHRwcm9jZXNzLmVudiA9IHt9O1xuXHRwcm9jZXNzLmFyZ3YgPSBbXTtcblx0cHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5cdHByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblx0XG5cdGZ1bmN0aW9uIG5vb3AoKSB7fVxuXHRcblx0cHJvY2Vzcy5vbiA9IG5vb3A7XG5cdHByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLm9uY2UgPSBub29wO1xuXHRwcm9jZXNzLm9mZiA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5cdHByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cdFxuXHRwcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRcblx0cHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcblx0cHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdHByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuLyoqKi8gfSxcbi8qIDE2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXHRcblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQoX3gsIF94MiwgX3gzKSB7IHZhciBfYWdhaW4gPSB0cnVlOyBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHsgdmFyIG9iamVjdCA9IF94LCBwcm9wZXJ0eSA9IF94MiwgcmVjZWl2ZXIgPSBfeDM7IF9hZ2FpbiA9IGZhbHNlOyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgX3ggPSBwYXJlbnQ7IF94MiA9IHByb3BlcnR5OyBfeDMgPSByZWNlaXZlcjsgX2FnYWluID0gdHJ1ZTsgZGVzYyA9IHBhcmVudCA9IHVuZGVmaW5lZDsgY29udGludWUgX2Z1bmN0aW9uOyB9IH0gZWxzZSBpZiAoJ3ZhbHVlJyBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfSB9O1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAnZnVuY3Rpb24nICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfY2xhc3NuYW1lcyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX2NsYXNzbmFtZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NuYW1lcyk7XG5cdFxuXHR2YXIgX0NvbnN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfQ29uc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ29uc3QpO1xuXHRcblx0dmFyIF9UYWJsZUhlYWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHRcblx0dmFyIF9UYWJsZUhlYWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9UYWJsZUhlYWRlcik7XG5cdFxuXHR2YXIgX1RhYmxlQm9keSA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXHRcblx0dmFyIF9UYWJsZUJvZHkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfVGFibGVCb2R5KTtcblx0XG5cdHZhciBfcGFnaW5hdGlvblBhZ2luYXRpb25MaXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7XG5cdFxuXHR2YXIgX3BhZ2luYXRpb25QYWdpbmF0aW9uTGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wYWdpbmF0aW9uUGFnaW5hdGlvbkxpc3QpO1xuXHRcblx0dmFyIF90b29sYmFyVG9vbEJhciA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xuXHRcblx0dmFyIF90b29sYmFyVG9vbEJhcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90b29sYmFyVG9vbEJhcik7XG5cdFxuXHR2YXIgX1RhYmxlRmlsdGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cdFxuXHR2YXIgX1RhYmxlRmlsdGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1RhYmxlRmlsdGVyKTtcblx0XG5cdHZhciBfc3RvcmVUYWJsZURhdGFTdG9yZSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHR2YXIgX2Nzdl9leHBvcnRfdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHRcblx0dmFyIF9jc3ZfZXhwb3J0X3V0aWwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3N2X2V4cG9ydF91dGlsKTtcblx0XG5cdHZhciBfRmlsdGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cdFxuXHR2YXIgQm9vdHN0cmFwVGFibGUgPSAoZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcblx0ICBfaW5oZXJpdHMoQm9vdHN0cmFwVGFibGUsIF9SZWFjdCRDb21wb25lbnQpO1xuXHRcblx0ICBmdW5jdGlvbiBCb290c3RyYXBUYWJsZShwcm9wcykge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQm9vdHN0cmFwVGFibGUpO1xuXHRcblx0ICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKEJvb3RzdHJhcFRhYmxlLnByb3RvdHlwZSksICdjb25zdHJ1Y3RvcicsIHRoaXMpLmNhbGwodGhpcywgcHJvcHMpO1xuXHRcblx0ICAgIHRoaXMuX3Njcm9sbEhlYWRlciA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLnJlZnMuaGVhZGVyLnJlZnMuY29udGFpbmVyLnNjcm9sbExlZnQgPSBlLmN1cnJlbnRUYXJnZXQuc2Nyb2xsTGVmdDtcblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5fYWRqdXN0SGVhZGVyV2lkdGggPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciB0YWJsZUhlYWRlckRvbSA9IF90aGlzLnJlZnMuaGVhZGVyLnJlZnMuY29udGFpbmVyLmNoaWxkTm9kZXNbMF07XG5cdCAgICAgIHZhciB0YWJsZUJvZHlEb20gPSBfdGhpcy5yZWZzLmJvZHkucmVmcy5jb250YWluZXIuY2hpbGROb2Rlc1swXTtcblx0ICAgICAgaWYgKHRhYmxlSGVhZGVyRG9tLm9mZnNldFdpZHRoICE9PSB0YWJsZUJvZHlEb20ub2Zmc2V0V2lkdGgpIHtcblx0ICAgICAgICB0YWJsZUhlYWRlckRvbS5zdHlsZS53aWR0aCA9IHRhYmxlQm9keURvbS5vZmZzZXRXaWR0aCArIFwicHhcIjtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgaGVhZGVyUHJvcHMgPSBfdGhpcy5yZWZzLmJvZHkuZ2V0Qm9keUhlYWRlckRvbVByb3AoKTtcblx0ICAgICAgX3RoaXMucmVmcy5oZWFkZXIuZml0SGVhZGVyKGhlYWRlclByb3BzLCBfdGhpcy5yZWZzLmJvZHkucmVmcy5jb250YWluZXIuc2Nyb2xsSGVpZ2h0ID4gX3RoaXMucmVmcy5ib2R5LnJlZnMuY29udGFpbmVyLmNsaWVudEhlaWdodCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMuX2F0dGFjaENlbGxFZGl0RnVuYygpO1xuXHRcblx0ICAgIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLnByb3BzLmRhdGEpKSB7XG5cdCAgICAgIHRoaXMuc3RvcmUgPSBuZXcgX3N0b3JlVGFibGVEYXRhU3RvcmUuVGFibGVEYXRhU3RvcmUodGhpcy5wcm9wcy5kYXRhLmdldERhdGEoKSk7XG5cdCAgICAgIHRoaXMucHJvcHMuZGF0YS5jbGVhcigpO1xuXHQgICAgICB0aGlzLnByb3BzLmRhdGEub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgICAgX3RoaXMuc3RvcmUuc2V0RGF0YShkYXRhKTtcblx0ICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7XG5cdCAgICAgICAgICBkYXRhOiBfdGhpcy5nZXRUYWJsZURhdGEoKVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBjb3B5ID0gdGhpcy5wcm9wcy5kYXRhLnNsaWNlKCk7XG5cdCAgICAgIHRoaXMuc3RvcmUgPSBuZXcgX3N0b3JlVGFibGVEYXRhU3RvcmUuVGFibGVEYXRhU3RvcmUoY29weSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5pbml0VGFibGUodGhpcy5wcm9wcyk7XG5cdFxuXHQgICAgaWYgKHRoaXMuZmlsdGVyKSB7XG5cdCAgICAgIChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHNlbGYgPSBfdGhpcztcblx0ICAgICAgICBfdGhpcy5maWx0ZXIub24oJ29uRmlsdGVyQ2hhbmdlJywgZnVuY3Rpb24gKGN1cnJlbnRGaWx0ZXIpIHtcblx0ICAgICAgICAgIHNlbGYuaGFuZGxlRmlsdGVyRGF0YShjdXJyZW50RmlsdGVyKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSkoKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAodGhpcy5wcm9wcy5zZWxlY3RSb3cgJiYgdGhpcy5wcm9wcy5zZWxlY3RSb3cuc2VsZWN0ZWQpIHtcblx0ICAgICAgdmFyIGNvcHkgPSB0aGlzLnByb3BzLnNlbGVjdFJvdy5zZWxlY3RlZC5zbGljZSgpO1xuXHQgICAgICB0aGlzLnN0b3JlLnNldFNlbGVjdGVkUm93S2V5KGNvcHkpO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuc3RhdGUgPSB7XG5cdCAgICAgIGRhdGE6IHRoaXMuZ2V0VGFibGVEYXRhKCksXG5cdCAgICAgIGN1cnJQYWdlOiB0aGlzLnByb3BzLm9wdGlvbnMucGFnZSB8fCAxLFxuXHQgICAgICBzaXplUGVyUGFnZTogdGhpcy5wcm9wcy5vcHRpb25zLnNpemVQZXJQYWdlIHx8IF9Db25zdDJbJ2RlZmF1bHQnXS5TSVpFX1BFUl9QQUdFX0xJU1RbMF0sXG5cdCAgICAgIHNlbGVjdGVkUm93S2V5czogdGhpcy5zdG9yZS5nZXRTZWxlY3RlZFJvd0tleXMoKVxuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhCb290c3RyYXBUYWJsZSwgW3tcblx0ICAgIGtleTogJ2luaXRUYWJsZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdFRhYmxlKHByb3BzKSB7XG5cdCAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0ICAgICAgdmFyIGtleUZpZWxkID0gcHJvcHMua2V5RmllbGQ7XG5cdFxuXHQgICAgICB2YXIgaXNLZXlGaWVsZERlZmluZWQgPSB0eXBlb2Yga2V5RmllbGQgPT09ICdzdHJpbmcnICYmIGtleUZpZWxkLmxlbmd0aDtcblx0ICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLkNoaWxkcmVuLmZvckVhY2gocHJvcHMuY2hpbGRyZW4sIGZ1bmN0aW9uIChjb2x1bW4pIHtcblx0ICAgICAgICBpZiAoY29sdW1uLnByb3BzLmlzS2V5KSB7XG5cdCAgICAgICAgICBpZiAoa2V5RmllbGQpIHtcblx0ICAgICAgICAgICAgdGhyb3cgXCJFcnJvci4gTXVsdGlwbGUga2V5IGNvbHVtbiBiZSBkZXRlY3RlZCBpbiBUYWJsZUhlYWRlckNvbHVtbi5cIjtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGtleUZpZWxkID0gY29sdW1uLnByb3BzLmRhdGFGaWVsZDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGNvbHVtbi5wcm9wcy5maWx0ZXIpIHtcblx0ICAgICAgICAgIC8vIGEgY29sdW1uIGNvbnRhaW5zIGEgZmlsdGVyXG5cdCAgICAgICAgICBpZiAoIV90aGlzMi5maWx0ZXIpIHtcblx0ICAgICAgICAgICAgLy8gZmlyc3QgdGltZSBjcmVhdGUgdGhlIGZpbHRlciBvbiB0aGUgQm9vdHN0cmFwVGFibGVcblx0ICAgICAgICAgICAgX3RoaXMyLmZpbHRlciA9IG5ldyBfRmlsdGVyLkZpbHRlcigpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgLy8gcGFzcyB0aGUgZmlsdGVyIHRvIGNvbHVtbiB3aXRoIGZpbHRlclxuXHQgICAgICAgICAgY29sdW1uLnByb3BzLmZpbHRlci5lbWl0dGVyID0gX3RoaXMyLmZpbHRlcjtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sIHRoaXMpO1xuXHRcblx0ICAgICAgdmFyIGNvbEluZm9zID0gdGhpcy5nZXRDb2x1bW5zRGVzY3JpcHRpb24ocHJvcHMpLnJlZHVjZShmdW5jdGlvbiAocHJldiwgY3Vycikge1xuXHQgICAgICAgIHByZXZbY3Vyci5uYW1lXSA9IGN1cnI7XG5cdCAgICAgICAgcmV0dXJuIHByZXY7XG5cdCAgICAgIH0sIHt9KTtcblx0XG5cdCAgICAgIGlmICghaXNLZXlGaWVsZERlZmluZWQgJiYgIWtleUZpZWxkKSB0aHJvdyAnRXJyb3IuIE5vIGFueSBrZXkgY29sdW1uIGRlZmluZWQgaW4gVGFibGVIZWFkZXJDb2x1bW4uXFxuICAgICAgICAgICAgVXNlIFxcJ2lzS2V5PXt0cnVlfVxcJyB0byBzcGVjaWZ5IGEgdW5pcXVlIGNvbHVtbiBhZnRlciB2ZXJzaW9uIDAuNS40Lic7XG5cdFxuXHQgICAgICB0aGlzLnN0b3JlLnNldFByb3BzKHtcblx0ICAgICAgICBpc1BhZ2luYXRpb246IHByb3BzLnBhZ2luYXRpb24sXG5cdCAgICAgICAga2V5RmllbGQ6IGtleUZpZWxkLFxuXHQgICAgICAgIGNvbEluZm9zOiBjb2xJbmZvcyxcblx0ICAgICAgICBtdWx0aUNvbHVtblNlYXJjaDogcHJvcHMubXVsdGlDb2x1bW5TZWFyY2gsXG5cdCAgICAgICAgcmVtb3RlOiB0aGlzLmlzUmVtb3RlRGF0YVNvdXJjZSgpXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2dldFRhYmxlRGF0YScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGFibGVEYXRhKCkge1xuXHQgICAgICB2YXIgcmVzdWx0ID0gW107XG5cdFxuXHQgICAgICBpZiAodGhpcy5wcm9wcy5vcHRpb25zLnNvcnROYW1lICYmIHRoaXMucHJvcHMub3B0aW9ucy5zb3J0T3JkZXIpIHRoaXMuc3RvcmUuc29ydCh0aGlzLnByb3BzLm9wdGlvbnMuc29ydE9yZGVyLCB0aGlzLnByb3BzLm9wdGlvbnMuc29ydE5hbWUpO1xuXHRcblx0ICAgICAgaWYgKHRoaXMucHJvcHMucGFnaW5hdGlvbikge1xuXHQgICAgICAgIHZhciBwYWdlID0gdW5kZWZpbmVkLFxuXHQgICAgICAgICAgICBzaXplUGVyUGFnZSA9IHVuZGVmaW5lZDtcblx0ICAgICAgICBpZiAodGhpcy5zdG9yZS5pc0NoYW5nZWRQYWdlKCkpIHtcblx0ICAgICAgICAgIHNpemVQZXJQYWdlID0gdGhpcy5zdGF0ZS5zaXplUGVyUGFnZTtcblx0ICAgICAgICAgIHBhZ2UgPSB0aGlzLnN0YXRlLmN1cnJQYWdlO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBzaXplUGVyUGFnZSA9IHRoaXMucHJvcHMub3B0aW9ucy5zaXplUGVyUGFnZSB8fCBfQ29uc3QyWydkZWZhdWx0J10uU0laRV9QRVJfUEFHRV9MSVNUWzBdO1xuXHQgICAgICAgICAgcGFnZSA9IHRoaXMucHJvcHMub3B0aW9ucy5wYWdlIHx8IDE7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJlc3VsdCA9IHRoaXMuc3RvcmUucGFnZShwYWdlLCBzaXplUGVyUGFnZSkuZ2V0KCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmVzdWx0ID0gdGhpcy5zdG9yZS5nZXQoKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gcmVzdWx0O1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2dldENvbHVtbnNEZXNjcmlwdGlvbicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29sdW1uc0Rlc2NyaXB0aW9uKF9yZWYpIHtcblx0ICAgICAgdmFyIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbjtcblx0XG5cdCAgICAgIHJldHVybiBjaGlsZHJlbi5tYXAoZnVuY3Rpb24gKGNvbHVtbiwgaSkge1xuXHQgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICBuYW1lOiBjb2x1bW4ucHJvcHMuZGF0YUZpZWxkLFxuXHQgICAgICAgICAgYWxpZ246IGNvbHVtbi5wcm9wcy5kYXRhQWxpZ24sXG5cdCAgICAgICAgICBzb3J0OiBjb2x1bW4ucHJvcHMuZGF0YVNvcnQsXG5cdCAgICAgICAgICBmb3JtYXQ6IGNvbHVtbi5wcm9wcy5kYXRhRm9ybWF0LFxuXHQgICAgICAgICAgZm9ybWF0RXh0cmFEYXRhOiBjb2x1bW4ucHJvcHMuZm9ybWF0RXh0cmFEYXRhLFxuXHQgICAgICAgICAgZmlsdGVyRm9ybWF0dGVkOiBjb2x1bW4ucHJvcHMuZmlsdGVyRm9ybWF0dGVkLFxuXHQgICAgICAgICAgZWRpdGFibGU6IGNvbHVtbi5wcm9wcy5lZGl0YWJsZSxcblx0ICAgICAgICAgIGhpZGRlbjogY29sdW1uLnByb3BzLmhpZGRlbixcblx0ICAgICAgICAgIHNlYXJjaGFibGU6IGNvbHVtbi5wcm9wcy5zZWFyY2hhYmxlLFxuXHQgICAgICAgICAgY2xhc3NOYW1lOiBjb2x1bW4ucHJvcHMuY29sdW1uQ2xhc3NOYW1lLFxuXHQgICAgICAgICAgd2lkdGg6IGNvbHVtbi5wcm9wcy53aWR0aCxcblx0ICAgICAgICAgIHRleHQ6IGNvbHVtbi5wcm9wcy5jaGlsZHJlbixcblx0ICAgICAgICAgIHNvcnRGdW5jOiBjb2x1bW4ucHJvcHMuc29ydEZ1bmMsXG5cdCAgICAgICAgICBpbmRleDogaVxuXHQgICAgICAgIH07XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG5cdCAgICAgIHRoaXMuaW5pdFRhYmxlKG5leHRQcm9wcyk7XG5cdCAgICAgIGlmIChBcnJheS5pc0FycmF5KG5leHRQcm9wcy5kYXRhKSkge1xuXHQgICAgICAgIHRoaXMuc3RvcmUuc2V0RGF0YShuZXh0UHJvcHMuZGF0YS5zbGljZSgpKTtcblx0ICAgICAgICB2YXIgcGFnaW5hdGlvbkRvbSA9IHRoaXMucmVmcy5wYWdpbmF0aW9uO1xuXHQgICAgICAgIHZhciBwYWdlID0gcGFnaW5hdGlvbkRvbSAmJiBwYWdpbmF0aW9uRG9tLmdldEN1cnJlbnRQYWdlKCkgfHwgbmV4dFByb3BzLm9wdGlvbnMucGFnZSB8fCAxO1xuXHQgICAgICAgIHZhciBzaXplUGVyUGFnZSA9IHBhZ2luYXRpb25Eb20gJiYgcGFnaW5hdGlvbkRvbS5nZXRTaXplUGVyUGFnZSgpIHx8IG5leHRQcm9wcy5vcHRpb25zLnNpemVQZXJQYWdlIHx8IF9Db25zdDJbJ2RlZmF1bHQnXS5TSVpFX1BFUl9QQUdFX0xJU1RbMF07XG5cdCAgICAgICAgLy8gIzEyNVxuXHQgICAgICAgIGlmIChwYWdlID4gTWF0aC5jZWlsKG5leHRQcm9wcy5kYXRhLmxlbmd0aCAvIHNpemVQZXJQYWdlKSkgcGFnZSA9IDE7XG5cdCAgICAgICAgdmFyIHNvcnRJbmZvID0gdGhpcy5zdG9yZS5nZXRTb3J0SW5mbygpO1xuXHQgICAgICAgIHZhciBzb3J0RmllbGQgPSBuZXh0UHJvcHMub3B0aW9ucy5zb3J0TmFtZSB8fCAoc29ydEluZm8gPyBzb3J0SW5mby5zb3J0RmllbGQgOiB1bmRlZmluZWQpO1xuXHQgICAgICAgIHZhciBzb3J0T3JkZXIgPSBuZXh0UHJvcHMub3B0aW9ucy5zb3J0T3JkZXIgfHwgKHNvcnRJbmZvID8gc29ydEluZm8ub3JkZXIgOiB1bmRlZmluZWQpO1xuXHQgICAgICAgIGlmIChzb3J0RmllbGQgJiYgc29ydE9yZGVyKSB0aGlzLnN0b3JlLnNvcnQoc29ydE9yZGVyLCBzb3J0RmllbGQpO1xuXHQgICAgICAgIHZhciBkYXRhID0gdGhpcy5zdG9yZS5wYWdlKHBhZ2UsIHNpemVQZXJQYWdlKS5nZXQoKTtcblx0ICAgICAgICB0aGlzLnNldFN0YXRlKHtcblx0ICAgICAgICAgIGRhdGE6IGRhdGEsXG5cdCAgICAgICAgICBjdXJyUGFnZTogcGFnZSxcblx0ICAgICAgICAgIHNpemVQZXJQYWdlOiBzaXplUGVyUGFnZVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChuZXh0UHJvcHMuc2VsZWN0Um93ICYmIG5leHRQcm9wcy5zZWxlY3RSb3cuc2VsZWN0ZWQpIHtcblx0ICAgICAgICAvL3NldCBkZWZhdWx0IHNlbGVjdCByb3dzIHRvIHN0b3JlLlxuXHQgICAgICAgIHZhciBjb3B5ID0gbmV4dFByb3BzLnNlbGVjdFJvdy5zZWxlY3RlZC5zbGljZSgpO1xuXHQgICAgICAgIHRoaXMuc3RvcmUuc2V0U2VsZWN0ZWRSb3dLZXkoY29weSk7XG5cdCAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG5cdCAgICAgICAgICBzZWxlY3RlZFJvd0tleXM6IGNvcHlcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcblx0ICAgICAgdGhpcy5fYWRqdXN0SGVhZGVyV2lkdGgoKTtcblx0ICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX2FkanVzdEhlYWRlcldpZHRoKTtcblx0ICAgICAgdGhpcy5yZWZzLmJvZHkucmVmcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5fc2Nyb2xsSGVhZGVyKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdjb21wb25lbnRXaWxsVW5tb3VudCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG5cdCAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9hZGp1c3RIZWFkZXJXaWR0aCk7XG5cdCAgICAgIHRoaXMucmVmcy5ib2R5LnJlZnMuY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuX3Njcm9sbEhlYWRlcik7XG5cdCAgICAgIGlmICh0aGlzLmZpbHRlcikge1xuXHQgICAgICAgIHRoaXMuZmlsdGVyLnJlbW92ZUFsbExpc3RlbmVycyhcIm9uRmlsdGVyQ2hhbmdlXCIpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnY29tcG9uZW50RGlkVXBkYXRlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG5cdCAgICAgIHRoaXMuX2FkanVzdEhlYWRlcldpZHRoKCk7XG5cdCAgICAgIHRoaXMuX2F0dGFjaENlbGxFZGl0RnVuYygpO1xuXHQgICAgICBpZiAodGhpcy5wcm9wcy5vcHRpb25zLmFmdGVyVGFibGVDb21wbGV0ZSkgdGhpcy5wcm9wcy5vcHRpb25zLmFmdGVyVGFibGVDb21wbGV0ZSgpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ19hdHRhY2hDZWxsRWRpdEZ1bmMnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIF9hdHRhY2hDZWxsRWRpdEZ1bmMoKSB7XG5cdCAgICAgIGlmICh0aGlzLnByb3BzLmNlbGxFZGl0KSB7XG5cdCAgICAgICAgdGhpcy5wcm9wcy5jZWxsRWRpdC5fX29uQ29tcGxldGVFZGl0X18gPSB0aGlzLmhhbmRsZUVkaXRDZWxsLmJpbmQodGhpcyk7XG5cdCAgICAgICAgaWYgKHRoaXMucHJvcHMuY2VsbEVkaXQubW9kZSAhPT0gX0NvbnN0MlsnZGVmYXVsdCddLkNFTExfRURJVF9OT05FKSB0aGlzLnByb3BzLnNlbGVjdFJvdy5jbGlja1RvU2VsZWN0ID0gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvKipcclxuXHQgICAgICogUmV0dXJucyB0cnVlIGlmIGluIHRoZSBjdXJyZW50IGNvbmZpZ3VyYXRpb24sXHJcblx0ICAgICAqIHRoZSBkYXRhZ3JpZCBzaG91bGQgbG9hZCBpdHMgZGF0YSByZW1vdGVseS5cclxuXHQgICAgICpcclxuXHQgICAgICogQHBhcmFtICB7T2JqZWN0fSAgW3Byb3BzXSBPcHRpb25hbC4gSWYgbm90IGdpdmVuLCB0aGlzLnByb3BzIHdpbGwgYmUgdXNlZFxyXG5cdCAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG5cdCAgICAgKi9cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdpc1JlbW90ZURhdGFTb3VyY2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGlzUmVtb3RlRGF0YVNvdXJjZShwcm9wcykge1xuXHQgICAgICByZXR1cm4gKHByb3BzIHx8IHRoaXMucHJvcHMpLnJlbW90ZTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdyZW5kZXInLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0XG5cdCAgICAgIHZhciB0YWJsZUNsYXNzID0gKDAsIF9jbGFzc25hbWVzMlsnZGVmYXVsdCddKShcInJlYWN0LWJzLXRhYmxlXCIpO1xuXHQgICAgICB2YXIgY2hpbGRyZW5zID0gdGhpcy5wcm9wcy5jaGlsZHJlbjtcblx0ICAgICAgdmFyIHN0eWxlID0ge1xuXHQgICAgICAgIGhlaWdodDogdGhpcy5wcm9wcy5oZWlnaHQsXG5cdCAgICAgICAgbWF4SGVpZ2h0OiB0aGlzLnByb3BzLm1heEhlaWdodFxuXHQgICAgICB9O1xuXHQgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy5wcm9wcy5jaGlsZHJlbikpIHtcblx0ICAgICAgICBjaGlsZHJlbnMgPSBbdGhpcy5wcm9wcy5jaGlsZHJlbl07XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLmdldENvbHVtbnNEZXNjcmlwdGlvbih0aGlzLnByb3BzKTtcblx0ICAgICAgdmFyIHNvcnRJbmZvID0gdGhpcy5zdG9yZS5nZXRTb3J0SW5mbygpO1xuXHQgICAgICB2YXIgcGFnaW5hdGlvbiA9IHRoaXMucmVuZGVyUGFnaW5hdGlvbigpO1xuXHQgICAgICB2YXIgdG9vbEJhciA9IHRoaXMucmVuZGVyVG9vbEJhcigpO1xuXHQgICAgICB2YXIgdGFibGVGaWx0ZXIgPSB0aGlzLnJlbmRlclRhYmxlRmlsdGVyKGNvbHVtbnMpO1xuXHQgICAgICB2YXIgaXNTZWxlY3RBbGwgPSB0aGlzLmlzU2VsZWN0QWxsKCk7XG5cdCAgICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAnZGl2Jyxcblx0ICAgICAgICB7IGNsYXNzTmFtZTogJ3JlYWN0LWJzLWNvbnRhaW5lcicsIHJlZjogJ3RhYmxlJyB9LFxuXHQgICAgICAgIHRvb2xCYXIsXG5cdCAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgIHsgY2xhc3NOYW1lOiAncmVhY3QtYnMtdGFibGUtY29udGFpbmVyJyxcblx0ICAgICAgICAgICAgb25Nb3VzZUVudGVyOiB0aGlzLmhhbmRsZU1vdXNlRW50ZXIuYmluZCh0aGlzKSxcblx0ICAgICAgICAgICAgb25Nb3VzZUxlYXZlOiB0aGlzLmhhbmRsZU1vdXNlTGVhdmUuYmluZCh0aGlzKSxcblx0ICAgICAgICAgICAgc3R5bGU6IHN0eWxlIH0sXG5cdCAgICAgICAgICBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgX1RhYmxlSGVhZGVyMlsnZGVmYXVsdCddLFxuXHQgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgcmVmOiAnaGVhZGVyJyxcblx0ICAgICAgICAgICAgICByb3dTZWxlY3RUeXBlOiB0aGlzLnByb3BzLnNlbGVjdFJvdy5tb2RlLFxuXHQgICAgICAgICAgICAgIGhpZGVTZWxlY3RDb2x1bW46IHRoaXMucHJvcHMuc2VsZWN0Um93LmhpZGVTZWxlY3RDb2x1bW4sXG5cdCAgICAgICAgICAgICAgc29ydE5hbWU6IHNvcnRJbmZvID8gc29ydEluZm8uc29ydEZpZWxkIDogdW5kZWZpbmVkLFxuXHQgICAgICAgICAgICAgIHNvcnRPcmRlcjogc29ydEluZm8gPyBzb3J0SW5mby5vcmRlciA6IHVuZGVmaW5lZCxcblx0ICAgICAgICAgICAgICBvblNvcnQ6IHRoaXMuaGFuZGxlU29ydC5iaW5kKHRoaXMpLFxuXHQgICAgICAgICAgICAgIG9uU2VsZWN0QWxsUm93OiB0aGlzLmhhbmRsZVNlbGVjdEFsbFJvdy5iaW5kKHRoaXMpLFxuXHQgICAgICAgICAgICAgIGJvcmRlcmVkOiB0aGlzLnByb3BzLmJvcmRlcmVkLFxuXHQgICAgICAgICAgICAgIGNvbmRlbnNlZDogdGhpcy5wcm9wcy5jb25kZW5zZWQsXG5cdCAgICAgICAgICAgICAgaXNGaWx0ZXJlZDogdGhpcy5maWx0ZXIgPyB0cnVlIDogZmFsc2UsXG5cdCAgICAgICAgICAgICAgdGFibGVJRDogdGhpcy5wcm9wcy50YWJsZUlELFxuXHQgICAgICAgICAgICAgIGlzU2VsZWN0QWxsOiBpc1NlbGVjdEFsbCB9LFxuXHQgICAgICAgICAgICB0aGlzLnByb3BzLmNoaWxkcmVuXG5cdCAgICAgICAgICApLFxuXHQgICAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoX1RhYmxlQm9keTJbJ2RlZmF1bHQnXSwge1xuXHQgICAgICAgICAgICBoZWlnaHQ6IHRoaXMucHJvcHMuaGVpZ2h0LFxuXHQgICAgICAgICAgICBtYXhIZWlnaHQ6IHRoaXMucHJvcHMubWF4SGVpZ2h0LFxuXHQgICAgICAgICAgICByZWY6ICdib2R5Jyxcblx0ICAgICAgICAgICAgZGF0YTogdGhpcy5zdGF0ZS5kYXRhLFxuXHQgICAgICAgICAgICBjb2x1bW5zOiBjb2x1bW5zLFxuXHQgICAgICAgICAgICB0ckNsYXNzTmFtZTogdGhpcy5wcm9wcy50ckNsYXNzTmFtZSxcblx0ICAgICAgICAgICAgc3RyaXBlZDogdGhpcy5wcm9wcy5zdHJpcGVkLFxuXHQgICAgICAgICAgICBib3JkZXJlZDogdGhpcy5wcm9wcy5ib3JkZXJlZCxcblx0ICAgICAgICAgICAgaG92ZXI6IHRoaXMucHJvcHMuaG92ZXIsXG5cdCAgICAgICAgICAgIGtleUZpZWxkOiB0aGlzLnN0b3JlLmdldEtleUZpZWxkKCksXG5cdCAgICAgICAgICAgIGNvbmRlbnNlZDogdGhpcy5wcm9wcy5jb25kZW5zZWQsXG5cdCAgICAgICAgICAgIHNlbGVjdFJvdzogdGhpcy5wcm9wcy5zZWxlY3RSb3csXG5cdCAgICAgICAgICAgIGNlbGxFZGl0OiB0aGlzLnByb3BzLmNlbGxFZGl0LFxuXHQgICAgICAgICAgICBzZWxlY3RlZFJvd0tleXM6IHRoaXMuc3RhdGUuc2VsZWN0ZWRSb3dLZXlzLFxuXHQgICAgICAgICAgICBvblJvd0NsaWNrOiB0aGlzLmhhbmRsZVJvd0NsaWNrLmJpbmQodGhpcyksXG5cdCAgICAgICAgICAgIG9uUm93TW91c2VPdmVyOiB0aGlzLmhhbmRsZVJvd01vdXNlT3Zlci5iaW5kKHRoaXMpLFxuXHQgICAgICAgICAgICBvblJvd01vdXNlT3V0OiB0aGlzLmhhbmRsZVJvd01vdXNlT3V0LmJpbmQodGhpcyksXG5cdCAgICAgICAgICAgIG9uU2VsZWN0Um93OiB0aGlzLmhhbmRsZVNlbGVjdFJvdy5iaW5kKHRoaXMpLFxuXHQgICAgICAgICAgICBub0RhdGFUZXh0OiB0aGlzLnByb3BzLm9wdGlvbnMubm9EYXRhVGV4dFxuXHQgICAgICAgICAgfSlcblx0ICAgICAgICApLFxuXHQgICAgICAgIHRhYmxlRmlsdGVyLFxuXHQgICAgICAgIHBhZ2luYXRpb25cblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdpc1NlbGVjdEFsbCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gaXNTZWxlY3RBbGwoKSB7XG5cdCAgICAgIHZhciBkZWZhdWx0U2VsZWN0Um93S2V5cyA9IHRoaXMuc3RvcmUuZ2V0U2VsZWN0ZWRSb3dLZXlzKCk7XG5cdCAgICAgIHZhciBhbGxSb3dLZXlzID0gdGhpcy5zdG9yZS5nZXRBbGxSb3drZXkoKTtcblx0ICAgICAgaWYgKGRlZmF1bHRTZWxlY3RSb3dLZXlzLmxlbmd0aCAhPT0gYWxsUm93S2V5cy5sZW5ndGgpIHtcblx0ICAgICAgICByZXR1cm4gZGVmYXVsdFNlbGVjdFJvd0tleXMubGVuZ3RoID09PSAwID8gZmFsc2UgOiAnaW5kZXRlcm1pbmF0ZSc7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdjbGVhblNlbGVjdGVkJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhblNlbGVjdGVkKCkge1xuXHQgICAgICB0aGlzLnN0b3JlLnNldFNlbGVjdGVkUm93S2V5KFtdKTtcblx0ICAgICAgdGhpcy5zZXRTdGF0ZSh7XG5cdCAgICAgICAgc2VsZWN0ZWRSb3dLZXlzOiBbXVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdoYW5kbGVTb3J0Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVTb3J0KG9yZGVyLCBzb3J0RmllbGQpIHtcblx0ICAgICAgaWYgKHRoaXMucHJvcHMub3B0aW9ucy5vblNvcnRDaGFuZ2UpIHtcblx0ICAgICAgICB0aGlzLnByb3BzLm9wdGlvbnMub25Tb3J0Q2hhbmdlKHNvcnRGaWVsZCwgb3JkZXIsIHRoaXMucHJvcHMpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zdG9yZS5zb3J0KG9yZGVyLCBzb3J0RmllbGQpLmdldCgpO1xuXHQgICAgICB0aGlzLnNldFN0YXRlKHtcblx0ICAgICAgICBkYXRhOiByZXN1bHRcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnaGFuZGxlUGFnaW5hdGlvbkRhdGEnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVBhZ2luYXRpb25EYXRhKHBhZ2UsIHNpemVQZXJQYWdlKSB7XG5cdCAgICAgIHZhciBvblBhZ2VDaGFuZ2UgPSB0aGlzLnByb3BzLm9wdGlvbnMub25QYWdlQ2hhbmdlO1xuXHRcblx0ICAgICAgaWYgKG9uUGFnZUNoYW5nZSkge1xuXHQgICAgICAgIG9uUGFnZUNoYW5nZShwYWdlLCBzaXplUGVyUGFnZSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh0aGlzLmlzUmVtb3RlRGF0YVNvdXJjZSgpKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zdG9yZS5wYWdlKHBhZ2UsIHNpemVQZXJQYWdlKS5nZXQoKTtcblx0ICAgICAgdGhpcy5zZXRTdGF0ZSh7XG5cdCAgICAgICAgZGF0YTogcmVzdWx0LFxuXHQgICAgICAgIGN1cnJQYWdlOiBwYWdlLFxuXHQgICAgICAgIHNpemVQZXJQYWdlOiBzaXplUGVyUGFnZVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdoYW5kbGVNb3VzZUxlYXZlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVNb3VzZUxlYXZlKCkge1xuXHQgICAgICBpZiAodGhpcy5wcm9wcy5vcHRpb25zLm9uTW91c2VMZWF2ZSkge1xuXHQgICAgICAgIHRoaXMucHJvcHMub3B0aW9ucy5vbk1vdXNlTGVhdmUoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2hhbmRsZU1vdXNlRW50ZXInLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZU1vdXNlRW50ZXIoKSB7XG5cdCAgICAgIGlmICh0aGlzLnByb3BzLm9wdGlvbnMub25Nb3VzZUVudGVyKSB7XG5cdCAgICAgICAgdGhpcy5wcm9wcy5vcHRpb25zLm9uTW91c2VFbnRlcigpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnaGFuZGxlUm93TW91c2VPdXQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVJvd01vdXNlT3V0KHJvdykge1xuXHQgICAgICBpZiAodGhpcy5wcm9wcy5vcHRpb25zLm9uUm93TW91c2VPdXQpIHtcblx0ICAgICAgICB0aGlzLnByb3BzLm9wdGlvbnMub25Sb3dNb3VzZU91dChyb3cpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnaGFuZGxlUm93TW91c2VPdmVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVSb3dNb3VzZU92ZXIocm93KSB7XG5cdCAgICAgIGlmICh0aGlzLnByb3BzLm9wdGlvbnMub25Sb3dNb3VzZU92ZXIpIHtcblx0ICAgICAgICB0aGlzLnByb3BzLm9wdGlvbnMub25Sb3dNb3VzZU92ZXIocm93KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2hhbmRsZVJvd0NsaWNrJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVSb3dDbGljayhyb3cpIHtcblx0ICAgICAgaWYgKHRoaXMucHJvcHMub3B0aW9ucy5vblJvd0NsaWNrKSB7XG5cdCAgICAgICAgdGhpcy5wcm9wcy5vcHRpb25zLm9uUm93Q2xpY2socm93KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2hhbmRsZVNlbGVjdEFsbFJvdycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlU2VsZWN0QWxsUm93KGUpIHtcblx0ICAgICAgdmFyIGlzU2VsZWN0ZWQgPSBlLmN1cnJlbnRUYXJnZXQuY2hlY2tlZDtcblx0ICAgICAgdmFyIHNlbGVjdGVkUm93S2V5cyA9IFtdO1xuXHQgICAgICB2YXIgcmVzdWx0ID0gdHJ1ZTtcblx0ICAgICAgaWYgKHRoaXMucHJvcHMuc2VsZWN0Um93Lm9uU2VsZWN0QWxsKSB7XG5cdCAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9wcy5zZWxlY3RSb3cub25TZWxlY3RBbGwoaXNTZWxlY3RlZCwgaXNTZWxlY3RlZCA/IHRoaXMuc3RvcmUuZ2V0KCkgOiBbXSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh0eXBlb2YgcmVzdWx0ID09PSAndW5kZWZpbmVkJyB8fCByZXN1bHQgIT09IGZhbHNlKSB7XG5cdCAgICAgICAgaWYgKGlzU2VsZWN0ZWQpIHtcblx0ICAgICAgICAgIHNlbGVjdGVkUm93S2V5cyA9IHRoaXMuc3RvcmUuZ2V0QWxsUm93a2V5KCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0aGlzLnN0b3JlLnNldFNlbGVjdGVkUm93S2V5KHNlbGVjdGVkUm93S2V5cyk7XG5cdCAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG5cdCAgICAgICAgICBzZWxlY3RlZFJvd0tleXM6IHNlbGVjdGVkUm93S2V5c1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnaGFuZGxlU2hvd09ubHlTZWxlY3RlZCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlU2hvd09ubHlTZWxlY3RlZCgpIHtcblx0ICAgICAgdGhpcy5zdG9yZS5pZ25vcmVOb25TZWxlY3RlZCgpO1xuXHQgICAgICB2YXIgcmVzdWx0ID0gdW5kZWZpbmVkO1xuXHQgICAgICBpZiAodGhpcy5wcm9wcy5wYWdpbmF0aW9uKSB7XG5cdCAgICAgICAgcmVzdWx0ID0gdGhpcy5zdG9yZS5wYWdlKDEsIHRoaXMuc3RhdGUuc2l6ZVBlclBhZ2UpLmdldCgpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJlc3VsdCA9IHRoaXMuc3RvcmUuZ2V0KCk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5zZXRTdGF0ZSh7XG5cdCAgICAgICAgZGF0YTogcmVzdWx0LFxuXHQgICAgICAgIGN1cnJQYWdlOiAxXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2hhbmRsZVNlbGVjdFJvdycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlU2VsZWN0Um93KHJvdywgaXNTZWxlY3RlZCkge1xuXHQgICAgICB2YXIgY3VyclNlbGVjdGVkID0gdGhpcy5zdG9yZS5nZXRTZWxlY3RlZFJvd0tleXMoKTtcblx0ICAgICAgdmFyIHJvd0tleSA9IHJvd1t0aGlzLnN0b3JlLmdldEtleUZpZWxkKCldO1xuXHQgICAgICB2YXIgcmVzdWx0ID0gdHJ1ZTtcblx0ICAgICAgaWYgKHRoaXMucHJvcHMuc2VsZWN0Um93Lm9uU2VsZWN0KSB7XG5cdCAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9wcy5zZWxlY3RSb3cub25TZWxlY3Qocm93LCBpc1NlbGVjdGVkKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHR5cGVvZiByZXN1bHQgPT09ICd1bmRlZmluZWQnIHx8IHJlc3VsdCAhPT0gZmFsc2UpIHtcblx0ICAgICAgICBpZiAodGhpcy5wcm9wcy5zZWxlY3RSb3cubW9kZSA9PT0gX0NvbnN0MlsnZGVmYXVsdCddLlJPV19TRUxFQ1RfU0lOR0xFKSB7XG5cdCAgICAgICAgICBjdXJyU2VsZWN0ZWQgPSBpc1NlbGVjdGVkID8gW3Jvd0tleV0gOiBbXTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgaWYgKGlzU2VsZWN0ZWQpIHtcblx0ICAgICAgICAgICAgY3VyclNlbGVjdGVkLnB1c2gocm93S2V5KTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGN1cnJTZWxlY3RlZCA9IGN1cnJTZWxlY3RlZC5maWx0ZXIoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiByb3dLZXkgIT09IGtleTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0aGlzLnN0b3JlLnNldFNlbGVjdGVkUm93S2V5KGN1cnJTZWxlY3RlZCk7XG5cdCAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG5cdCAgICAgICAgICBzZWxlY3RlZFJvd0tleXM6IGN1cnJTZWxlY3RlZFxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnaGFuZGxlRWRpdENlbGwnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUVkaXRDZWxsKG5ld1ZhbCwgcm93SW5kZXgsIGNvbEluZGV4KSB7XG5cdCAgICAgIHZhciBmaWVsZE5hbWUgPSB1bmRlZmluZWQ7XG5cdCAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5DaGlsZHJlbi5mb3JFYWNoKHRoaXMucHJvcHMuY2hpbGRyZW4sIGZ1bmN0aW9uIChjb2x1bW4sIGkpIHtcblx0ICAgICAgICBpZiAoaSA9PSBjb2xJbmRleCkge1xuXHQgICAgICAgICAgZmllbGROYW1lID0gY29sdW1uLnByb3BzLmRhdGFGaWVsZDtcblx0ICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuc3RvcmUuZWRpdChuZXdWYWwsIHJvd0luZGV4LCBmaWVsZE5hbWUpLmdldCgpO1xuXHQgICAgICB0aGlzLnNldFN0YXRlKHtcblx0ICAgICAgICBkYXRhOiByZXN1bHRcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICBpZiAodGhpcy5wcm9wcy5jZWxsRWRpdC5hZnRlclNhdmVDZWxsKSB7XG5cdCAgICAgICAgdGhpcy5wcm9wcy5jZWxsRWRpdC5hZnRlclNhdmVDZWxsKHRoaXMuc3RhdGUuZGF0YVtyb3dJbmRleF0sIGZpZWxkTmFtZSwgbmV3VmFsKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2hhbmRsZUFkZFJvd0JlZ2luJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVBZGRSb3dCZWdpbigpIHtcblx0ICAgICAgaWYgKHRoaXMucmVmcy5ib2R5KSB7XG5cdCAgICAgICAgLy8gdGhpcy5yZWZzLmJvZHkuY2FuY2VsRWRpdCgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnaGFuZGxlQWRkUm93QXRCZWdpbicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQWRkUm93QXRCZWdpbihuZXdPYmopIHtcblx0ICAgICAgdmFyIHJlc3VsdCA9IHVuZGVmaW5lZDtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB0aGlzLnN0b3JlLmFkZEF0QmVnaW4obmV3T2JqKTtcblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIHJldHVybiBlO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuX2hhbmRsZUFmdGVyQWRkaW5nUm93KG5ld09iaik7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnaGFuZGxlQWRkUm93Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVBZGRSb3cobmV3T2JqKSB7XG5cdCAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXHRcblx0ICAgICAgdmFyIGJlZm9yZVByb21pc2UgPSB0aGlzLnByb3BzLm9wdGlvbnMuYmVmb3JlSW5zZXJ0Um93ID8gdGhpcy5wcm9wcy5vcHRpb25zLmJlZm9yZUluc2VydFJvdyhuZXdPYmopIDogbmV3T2JqO1xuXHRcblx0ICAgICAgLy9leGVjdXRlIGJlZm9yZSBhZGQgcm93XG5cdFxuXHQgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGJlZm9yZVByb21pc2UpLnRoZW4oZnVuY3Rpb24gKG1zZykge1xuXHQgICAgICAgIG5ld09iaiA9IG1zZztcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgX3RoaXMzLnN0b3JlLmFkZChuZXdPYmopO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIHJldHVybiBlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgX3RoaXMzLl9oYW5kbGVBZnRlckFkZGluZ1JvdyhuZXdPYmopO1xuXHQgICAgICB9KVsnY2F0Y2gnXShmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIGNvbnNvbGUubG9nKFwiZ2xlZGFqIG92ZGVcIik7XG5cdCAgICAgICAgY29uc29sZS5sb2coZSk7XG5cdCAgICAgICAgcmV0dXJuIGUuanNvbigpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdnZXRTaXplUGVyUGFnZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2l6ZVBlclBhZ2UoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnN0YXRlLnNpemVQZXJQYWdlO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2dldEN1cnJlbnRQYWdlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDdXJyZW50UGFnZSgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuY3VyclBhZ2U7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnaGFuZGxlRHJvcFJvdycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlRHJvcFJvdyhyb3dLZXlzKSB7XG5cdCAgICAgIHZhciB0aGF0ID0gdGhpcztcblx0ICAgICAgdmFyIGRyb3BSb3dLZXlzID0gcm93S2V5cyA/IHJvd0tleXMgOiB0aGlzLnN0b3JlLmdldFNlbGVjdGVkUm93S2V5cygpO1xuXHQgICAgICAvL2FkZCBjb25maXJtIGJlZm9yZSB0aGUgZGVsZXRlIGFjdGlvbiBpZiB0aGF0IG9wdGlvbiBpcyBzZXQuXG5cdCAgICAgIGlmIChkcm9wUm93S2V5cyAmJiBkcm9wUm93S2V5cy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgaWYgKHRoaXMucHJvcHMub3B0aW9ucy5oYW5kbGVDb25maXJtRGVsZXRlUm93KSB7XG5cdCAgICAgICAgICB0aGlzLnByb3BzLm9wdGlvbnMuaGFuZGxlQ29uZmlybURlbGV0ZVJvdyhmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIHRoYXQuZGVsZXRlUm93KGRyb3BSb3dLZXlzKTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoY29uZmlybSgnQXJlIHlvdSBzdXJlIHdhbnQgZGVsZXRlPycpKSB7XG5cdCAgICAgICAgICB0aGlzLmRlbGV0ZVJvdyhkcm9wUm93S2V5cyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZGVsZXRlUm93Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBkZWxldGVSb3coZHJvcFJvd0tleXMpIHtcblx0XG5cdCAgICAgIHZhciByZXN1bHQgPSB1bmRlZmluZWQ7XG5cdCAgICAgIHRoaXMuc3RvcmUucmVtb3ZlKGRyb3BSb3dLZXlzKTsgLy9yZW1vdmUgc2VsZWN0ZWQgUm93XG5cdCAgICAgIHRoaXMuc3RvcmUuc2V0U2VsZWN0ZWRSb3dLZXkoW10pOyAvL2NsZWFyIHNlbGVjdGVkIHJvdyBrZXlcblx0XG5cdCAgICAgIGlmICh0aGlzLnByb3BzLnBhZ2luYXRpb24pIHtcblx0ICAgICAgICB2YXIgc2l6ZVBlclBhZ2UgPSB0aGlzLnN0YXRlLnNpemVQZXJQYWdlO1xuXHQgICAgICAgIHZhciBjdXJyUGFnZSA9IHRoaXMuc3RhdGUuY3VyclBhZ2U7XG5cdFxuXHQgICAgICAgIHZhciBjdXJyTGFzdFBhZ2UgPSBNYXRoLmNlaWwodGhpcy5zdG9yZS5nZXREYXRhTnVtKCkgLyBzaXplUGVyUGFnZSk7XG5cdCAgICAgICAgaWYgKGN1cnJQYWdlID4gY3Vyckxhc3RQYWdlKSBjdXJyUGFnZSA9IGN1cnJMYXN0UGFnZTtcblx0ICAgICAgICByZXN1bHQgPSB0aGlzLnN0b3JlLnBhZ2UoY3VyclBhZ2UsIHNpemVQZXJQYWdlKS5nZXQoKTtcblx0ICAgICAgICB0aGlzLnNldFN0YXRlKHtcblx0ICAgICAgICAgIGRhdGE6IHJlc3VsdCxcblx0ICAgICAgICAgIHNlbGVjdGVkUm93S2V5czogdGhpcy5zdG9yZS5nZXRTZWxlY3RlZFJvd0tleXMoKSxcblx0ICAgICAgICAgIGN1cnJQYWdlOiBjdXJyUGFnZVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJlc3VsdCA9IHRoaXMuc3RvcmUuZ2V0KCk7XG5cdCAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG5cdCAgICAgICAgICBkYXRhOiByZXN1bHQsXG5cdCAgICAgICAgICBzZWxlY3RlZFJvd0tleXM6IHRoaXMuc3RvcmUuZ2V0U2VsZWN0ZWRSb3dLZXlzKClcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAodGhpcy5wcm9wcy5vcHRpb25zLmFmdGVyRGVsZXRlUm93KSB7XG5cdCAgICAgICAgdGhpcy5wcm9wcy5vcHRpb25zLmFmdGVyRGVsZXRlUm93KGRyb3BSb3dLZXlzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2hhbmRsZUZpbHRlckRhdGEnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUZpbHRlckRhdGEoZmlsdGVyT2JqKSB7XG5cdCAgICAgIHRoaXMuc3RvcmUuZmlsdGVyKGZpbHRlck9iaik7XG5cdCAgICAgIHZhciByZXN1bHQgPSB1bmRlZmluZWQ7XG5cdCAgICAgIGlmICh0aGlzLnByb3BzLnBhZ2luYXRpb24pIHtcblx0ICAgICAgICB2YXIgc2l6ZVBlclBhZ2UgPSB0aGlzLnN0YXRlLnNpemVQZXJQYWdlO1xuXHRcblx0ICAgICAgICByZXN1bHQgPSB0aGlzLnN0b3JlLnBhZ2UoMSwgc2l6ZVBlclBhZ2UpLmdldCgpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJlc3VsdCA9IHRoaXMuc3RvcmUuZ2V0KCk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHRoaXMucHJvcHMub3B0aW9ucy5hZnRlckNvbHVtbkZpbHRlcikgdGhpcy5wcm9wcy5vcHRpb25zLmFmdGVyQ29sdW1uRmlsdGVyKGZpbHRlck9iaiwgdGhpcy5zdG9yZS5nZXREYXRhSWdub3JpbmdQYWdpbmF0aW9uKCkpO1xuXHQgICAgICB0aGlzLnNldFN0YXRlKHtcblx0ICAgICAgICBkYXRhOiByZXN1bHQsXG5cdCAgICAgICAgY3VyclBhZ2U6IDFcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnaGFuZGxlRXhwb3J0Q1NWJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVFeHBvcnRDU1YoKSB7XG5cdCAgICAgIHZhciByZXN1bHQgPSB0aGlzLnN0b3JlLmdldERhdGFJZ25vcmluZ1BhZ2luYXRpb24oKTtcblx0ICAgICAgdmFyIGtleXMgPSBbXTtcblx0ICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlbi5tYXAoZnVuY3Rpb24gKGNvbHVtbikge1xuXHQgICAgICAgIGlmIChjb2x1bW4ucHJvcHMuaGlkZGVuID09PSBmYWxzZSkge1xuXHQgICAgICAgICAga2V5cy5wdXNoKGNvbHVtbi5wcm9wcy5kYXRhRmllbGQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgICgwLCBfY3N2X2V4cG9ydF91dGlsMlsnZGVmYXVsdCddKShyZXN1bHQsIGtleXMsIHRoaXMucHJvcHMuY3N2RmlsZU5hbWUpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2hhbmRsZVNlYXJjaCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlU2VhcmNoKHNlYXJjaFRleHQpIHtcblx0ICAgICAgdGhpcy5zdG9yZS5zZWFyY2goc2VhcmNoVGV4dCk7XG5cdCAgICAgIHZhciByZXN1bHQgPSB1bmRlZmluZWQ7XG5cdCAgICAgIGlmICh0aGlzLnByb3BzLnBhZ2luYXRpb24pIHtcblx0ICAgICAgICB2YXIgc2l6ZVBlclBhZ2UgPSB0aGlzLnN0YXRlLnNpemVQZXJQYWdlO1xuXHRcblx0ICAgICAgICByZXN1bHQgPSB0aGlzLnN0b3JlLnBhZ2UoMSwgc2l6ZVBlclBhZ2UpLmdldCgpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJlc3VsdCA9IHRoaXMuc3RvcmUuZ2V0KCk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHRoaXMucHJvcHMub3B0aW9ucy5hZnRlclNlYXJjaCkgdGhpcy5wcm9wcy5vcHRpb25zLmFmdGVyU2VhcmNoKHNlYXJjaFRleHQsIHRoaXMuc3RvcmUuZ2V0RGF0YUlnbm9yaW5nUGFnaW5hdGlvbigpKTtcblx0ICAgICAgdGhpcy5zZXRTdGF0ZSh7XG5cdCAgICAgICAgZGF0YTogcmVzdWx0LFxuXHQgICAgICAgIGN1cnJQYWdlOiAxXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3JlbmRlclBhZ2luYXRpb24nLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclBhZ2luYXRpb24oKSB7XG5cdCAgICAgIGlmICh0aGlzLnByb3BzLnBhZ2luYXRpb24pIHtcblx0ICAgICAgICB2YXIgZGF0YVNpemUgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgaWYgKHRoaXMuaXNSZW1vdGVEYXRhU291cmNlKCkpIHtcblx0ICAgICAgICAgIGRhdGFTaXplID0gdGhpcy5wcm9wcy5mZXRjaEluZm8uZGF0YVRvdGFsU2l6ZTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgZGF0YVNpemUgPSB0aGlzLnN0b3JlLmdldERhdGFOdW0oKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICB7IGNsYXNzTmFtZTogJ3RhYmxlLWZvb3Rlci1wYWdpbmF0aW9uJyB9LFxuXHQgICAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoX3BhZ2luYXRpb25QYWdpbmF0aW9uTGlzdDJbJ2RlZmF1bHQnXSwge1xuXHQgICAgICAgICAgICByZWY6ICdwYWdpbmF0aW9uJyxcblx0ICAgICAgICAgICAgY3VyclBhZ2U6IHRoaXMuc3RhdGUuY3VyclBhZ2UsXG5cdCAgICAgICAgICAgIGNoYW5nZVBhZ2U6IHRoaXMuaGFuZGxlUGFnaW5hdGlvbkRhdGEuYmluZCh0aGlzKSxcblx0ICAgICAgICAgICAgc2l6ZVBlclBhZ2U6IHRoaXMuc3RhdGUuc2l6ZVBlclBhZ2UsXG5cdCAgICAgICAgICAgIHNpemVQZXJQYWdlTGlzdDogdGhpcy5wcm9wcy5vcHRpb25zLnNpemVQZXJQYWdlTGlzdCB8fCBfQ29uc3QyWydkZWZhdWx0J10uU0laRV9QRVJfUEFHRV9MSVNULFxuXHQgICAgICAgICAgICBwYWdpbmF0aW9uU2l6ZTogdGhpcy5wcm9wcy5vcHRpb25zLnBhZ2luYXRpb25TaXplIHx8IF9Db25zdDJbJ2RlZmF1bHQnXS5QQUdJTkFUSU9OX1NJWkUsXG5cdCAgICAgICAgICAgIHJlbW90ZTogdGhpcy5pc1JlbW90ZURhdGFTb3VyY2UoKSxcblx0ICAgICAgICAgICAgZGF0YVNpemU6IGRhdGFTaXplLFxuXHQgICAgICAgICAgICBvblNpemVQZXJQYWdlTGlzdDogdGhpcy5wcm9wcy5vcHRpb25zLm9uU2l6ZVBlclBhZ2VMaXN0LFxuXHQgICAgICAgICAgICBwcmVQYWdlOiB0aGlzLnByb3BzLm9wdGlvbnMucHJlUGFnZSB8fCBfQ29uc3QyWydkZWZhdWx0J10uUFJFX1BBR0UsXG5cdCAgICAgICAgICAgIG5leHRQYWdlOiB0aGlzLnByb3BzLm9wdGlvbnMubmV4dFBhZ2UgfHwgX0NvbnN0MlsnZGVmYXVsdCddLk5FWFRfUEFHRSxcblx0ICAgICAgICAgICAgZmlyc3RQYWdlOiB0aGlzLnByb3BzLm9wdGlvbnMuZmlyc3RQYWdlIHx8IF9Db25zdDJbJ2RlZmF1bHQnXS5GSVJTVF9QQUdFLFxuXHQgICAgICAgICAgICBsYXN0UGFnZTogdGhpcy5wcm9wcy5vcHRpb25zLmxhc3RQYWdlIHx8IF9Db25zdDJbJ2RlZmF1bHQnXS5MQVNUX1BBR0Vcblx0ICAgICAgICAgIH0pXG5cdCAgICAgICAgKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gbnVsbDtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdyZW5kZXJUb29sQmFyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJUb29sQmFyKCkge1xuXHQgICAgICB2YXIgZW5hYmxlU2hvd09ubHlTZWxlY3RlZCA9IHRoaXMucHJvcHMuc2VsZWN0Um93ICYmIHRoaXMucHJvcHMuc2VsZWN0Um93LnNob3dPbmx5U2VsZWN0ZWQ7XG5cdCAgICAgIGlmIChlbmFibGVTaG93T25seVNlbGVjdGVkIHx8IHRoaXMucHJvcHMuaW5zZXJ0Um93IHx8IHRoaXMucHJvcHMuZGVsZXRlUm93IHx8IHRoaXMucHJvcHMuc2VhcmNoIHx8IHRoaXMucHJvcHMuZXhwb3J0Q1NWKSB7XG5cdCAgICAgICAgdmFyIGNvbHVtbnMgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5wcm9wcy5jaGlsZHJlbikpIHtcblx0ICAgICAgICAgIGNvbHVtbnMgPSB0aGlzLnByb3BzLmNoaWxkcmVuLm1hcChmdW5jdGlvbiAoY29sdW1uKSB7XG5cdCAgICAgICAgICAgIHZhciBwcm9wcyA9IGNvbHVtbi5wcm9wcztcblx0ICAgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgICBuYW1lOiBwcm9wcy5jaGlsZHJlbixcblx0ICAgICAgICAgICAgICBmaWVsZDogcHJvcHMuZGF0YUZpZWxkLFxuXHQgICAgICAgICAgICAgIC8vd2hlbiB5b3Ugd2FudCBzYW1lIGF1dG8gZ2VuZXJhdGUgdmFsdWUgYW5kIG5vdCBhbGxvdyBlZGl0LCBleGFtcGxlIElEIGZpZWxkXG5cdCAgICAgICAgICAgICAgYXV0b1ZhbHVlOiBwcm9wcy5hdXRvVmFsdWUgfHwgZmFsc2UsXG5cdCAgICAgICAgICAgICAgLy9mb3IgY3JlYXRlIGVkaXRvciwgbm8gcGFyYW1zIGZvciBjb2x1bW4uZWRpdGFibGUoKSBpbmRpY2F0ZSB0aGF0IGVkaXRvciBmb3IgbmV3IHJvd1xuXHQgICAgICAgICAgICAgIGVkaXRhYmxlOiBwcm9wcy5lZGl0YWJsZSAmJiB0eXBlb2YgcHJvcHMuZWRpdGFibGUgPT09IFwiZnVuY3Rpb25cIiA/IHByb3BzLmVkaXRhYmxlKCkgOiBwcm9wcy5lZGl0YWJsZSxcblx0ICAgICAgICAgICAgICAvL2hpZGRlbiBpbiBwb3B1cFxuXHQgICAgICAgICAgICAgIGhpZGRlbkluUG9wdXA6IHByb3BzLmhpZGRlbkluUG9wdXAsXG5cdCAgICAgICAgICAgICAgZm9ybWF0OiBwcm9wcy5kYXRhRm9ybWF0ID8gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gcHJvcHMuZGF0YUZvcm1hdCh2YWx1ZSwgbnVsbCwgcHJvcHMuZm9ybWF0RXh0cmFEYXRhKS5yZXBsYWNlKC88Lio/Pi9nLCAnJyk7XG5cdCAgICAgICAgICAgICAgfSA6IGZhbHNlXG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgY29sdW1ucyA9IFt7XG5cdCAgICAgICAgICAgIG5hbWU6IHRoaXMucHJvcHMuY2hpbGRyZW4ucHJvcHMuY2hpbGRyZW4sXG5cdCAgICAgICAgICAgIGZpZWxkOiB0aGlzLnByb3BzLmNoaWxkcmVuLnByb3BzLmRhdGFGaWVsZCxcblx0ICAgICAgICAgICAgZWRpdGFibGU6IHRoaXMucHJvcHMuY2hpbGRyZW4ucHJvcHMuZWRpdGFibGUsXG5cdCAgICAgICAgICAgIGhpZGRlbkluUG9wdXA6IHRoaXMucHJvcHMuY2hpbGRyZW4ucHJvcHMuaGlkZGVuSW5Qb3B1cFxuXHQgICAgICAgICAgfV07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgeyBjbGFzc05hbWU6ICd0b29sLWJhcicgfSxcblx0ICAgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KF90b29sYmFyVG9vbEJhcjJbJ2RlZmF1bHQnXSwge1xuXHQgICAgICAgICAgICBjbGVhclNlYXJjaDogdGhpcy5wcm9wcy5vcHRpb25zLmNsZWFyU2VhcmNoLFxuXHQgICAgICAgICAgICBlbmFibGVJbnNlcnQ6IHRoaXMucHJvcHMuaW5zZXJ0Um93LFxuXHQgICAgICAgICAgICBlbmFibGVEZWxldGU6IHRoaXMucHJvcHMuZGVsZXRlUm93LFxuXHQgICAgICAgICAgICBlbmFibGVTZWFyY2g6IHRoaXMucHJvcHMuc2VhcmNoLFxuXHQgICAgICAgICAgICBlbmFibGVFeHBvcnRDU1Y6IHRoaXMucHJvcHMuZXhwb3J0Q1NWLFxuXHQgICAgICAgICAgICBlbmFibGVTaG93T25seVNlbGVjdGVkOiBlbmFibGVTaG93T25seVNlbGVjdGVkLFxuXHQgICAgICAgICAgICBjb2x1bW5zOiBjb2x1bW5zLFxuXHQgICAgICAgICAgICBzZWFyY2hQbGFjZWhvbGRlcjogdGhpcy5wcm9wcy5zZWFyY2hQbGFjZWhvbGRlcixcblx0ICAgICAgICAgICAgb25BZGRSb3c6IHRoaXMuaGFuZGxlQWRkUm93LmJpbmQodGhpcyksXG5cdCAgICAgICAgICAgIG9uQWRkUm93QmVnaW46IHRoaXMuaGFuZGxlQWRkUm93QmVnaW4uYmluZCh0aGlzKSxcblx0ICAgICAgICAgICAgb25Ecm9wUm93OiB0aGlzLmhhbmRsZURyb3BSb3cuYmluZCh0aGlzKSxcblx0ICAgICAgICAgICAgb25TZWFyY2g6IHRoaXMuaGFuZGxlU2VhcmNoLmJpbmQodGhpcyksXG5cdCAgICAgICAgICAgIG9uRXhwb3J0Q1NWOiB0aGlzLmhhbmRsZUV4cG9ydENTVi5iaW5kKHRoaXMpLFxuXHQgICAgICAgICAgICBvblNob3dPbmx5U2VsZWN0ZWQ6IHRoaXMuaGFuZGxlU2hvd09ubHlTZWxlY3RlZC5iaW5kKHRoaXMpXG5cdCAgICAgICAgICB9KVxuXHQgICAgICAgICk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIG51bGw7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdyZW5kZXJUYWJsZUZpbHRlcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyVGFibGVGaWx0ZXIoY29sdW1ucykge1xuXHQgICAgICBpZiAodGhpcy5wcm9wcy5jb2x1bW5GaWx0ZXIpIHtcblx0ICAgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoX1RhYmxlRmlsdGVyMlsnZGVmYXVsdCddLCB7IGNvbHVtbnM6IGNvbHVtbnMsXG5cdCAgICAgICAgICByb3dTZWxlY3RUeXBlOiB0aGlzLnByb3BzLnNlbGVjdFJvdy5tb2RlLFxuXHQgICAgICAgICAgb25GaWx0ZXI6IHRoaXMuaGFuZGxlRmlsdGVyRGF0YS5iaW5kKHRoaXMpIH0pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiBudWxsO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnX2hhbmRsZUFmdGVyQWRkaW5nUm93Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlQWZ0ZXJBZGRpbmdSb3cobmV3T2JqKSB7XG5cdCAgICAgIHZhciByZXN1bHQgPSB1bmRlZmluZWQ7XG5cdCAgICAgIGlmICh0aGlzLnByb3BzLnBhZ2luYXRpb24pIHtcblx0ICAgICAgICAvL2lmIHBhZ2luYXRpb24gaXMgZW5hYmxlZCBhbmQgaW5zZXJ0IHJvdyBiZSB0cmlnZ2VyLCBjaGFuZ2UgdG8gbGFzdCBwYWdlXG5cdCAgICAgICAgdmFyIHNpemVQZXJQYWdlID0gdGhpcy5zdGF0ZS5zaXplUGVyUGFnZTtcblx0XG5cdCAgICAgICAgdmFyIGN1cnJMYXN0UGFnZSA9IE1hdGguY2VpbCh0aGlzLnN0b3JlLmdldERhdGFOdW0oKSAvIHNpemVQZXJQYWdlKTtcblx0ICAgICAgICByZXN1bHQgPSB0aGlzLnN0b3JlLnBhZ2UoY3Vyckxhc3RQYWdlLCBzaXplUGVyUGFnZSkuZ2V0KCk7XG5cdCAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG5cdCAgICAgICAgICBkYXRhOiByZXN1bHQsXG5cdCAgICAgICAgICBjdXJyUGFnZTogY3Vyckxhc3RQYWdlXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmVzdWx0ID0gdGhpcy5zdG9yZS5nZXQoKTtcblx0ICAgICAgICB0aGlzLnNldFN0YXRlKHtcblx0ICAgICAgICAgIGRhdGE6IHJlc3VsdFxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAodGhpcy5wcm9wcy5vcHRpb25zLmFmdGVySW5zZXJ0Um93KSB7XG5cdCAgICAgICAgdGhpcy5wcm9wcy5vcHRpb25zLmFmdGVySW5zZXJ0Um93KG5ld09iaik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBCb290c3RyYXBUYWJsZTtcblx0fSkoX3JlYWN0MlsnZGVmYXVsdCddLkNvbXBvbmVudCk7XG5cdFxuXHRCb290c3RyYXBUYWJsZS5wcm9wVHlwZXMgPSB7XG5cdCAga2V5RmllbGQ6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgIGhlaWdodDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsXG5cdCAgbWF4SGVpZ2h0OiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZyxcblx0ICB0YWJsZUlEOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZyxcblx0ICBkYXRhOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm9uZU9mVHlwZShbX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5hcnJheSwgX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5vYmplY3RdKSxcblx0ICByZW1vdGU6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCwgLy8gcmVtb3RlIGRhdGEsIGRlZmF1bHQgaXMgZmFsc2Vcblx0ICBzdHJpcGVkOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsXG5cdCAgYm9yZGVyZWQ6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCxcblx0ICBob3ZlcjogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLFxuXHQgIGNvbmRlbnNlZDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLFxuXHQgIHBhZ2luYXRpb246IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCxcblx0ICBzZWFyY2hQbGFjZWhvbGRlcjogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsXG5cdCAgc2VsZWN0Um93OiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnNoYXBlKHtcblx0ICAgIG1vZGU6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMub25lT2YoW19Db25zdDJbJ2RlZmF1bHQnXS5ST1dfU0VMRUNUX05PTkUsIF9Db25zdDJbJ2RlZmF1bHQnXS5ST1dfU0VMRUNUX1NJTkdMRSwgX0NvbnN0MlsnZGVmYXVsdCddLlJPV19TRUxFQ1RfTVVMVEldKSxcblx0ICAgIGJnQ29sb3I6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgICAgc2VsZWN0ZWQ6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYXJyYXksXG5cdCAgICBvblNlbGVjdDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLFxuXHQgICAgb25TZWxlY3RBbGw6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYyxcblx0ICAgIGNsaWNrVG9TZWxlY3Q6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCxcblx0ICAgIGhpZGVTZWxlY3RDb2x1bW46IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCxcblx0ICAgIGNsaWNrVG9TZWxlY3RBbmRFZGl0Q2VsbDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLFxuXHQgICAgc2hvd09ubHlTZWxlY3RlZDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sXG5cdCAgfSksXG5cdCAgY2VsbEVkaXQ6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc2hhcGUoe1xuXHQgICAgbW9kZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsXG5cdCAgICBibHVyVG9TYXZlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsXG5cdCAgICBhZnRlclNhdmVDZWxsOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmZ1bmNcblx0ICB9KSxcblx0ICBpbnNlcnRSb3c6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCxcblx0ICBkZWxldGVSb3c6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCxcblx0ICBzZWFyY2g6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCxcblx0ICBjb2x1bW5GaWx0ZXI6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCxcblx0ICB0ckNsYXNzTmFtZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5hbnksXG5cdCAgb3B0aW9uczogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zaGFwZSh7XG5cdCAgICBiZWZvcmVJbnNlcnRSb3c6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYyxcblx0ICAgIGNsZWFyU2VhcmNoOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsXG5cdCAgICBzb3J0TmFtZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsXG5cdCAgICBzb3J0T3JkZXI6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgICAgYWZ0ZXJUYWJsZUNvbXBsZXRlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmZ1bmMsXG5cdCAgICBhZnRlckRlbGV0ZVJvdzogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLFxuXHQgICAgYWZ0ZXJJbnNlcnRSb3c6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYyxcblx0ICAgIGFmdGVyU2VhcmNoOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmZ1bmMsXG5cdCAgICBhZnRlckNvbHVtbkZpbHRlcjogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLFxuXHQgICAgb25Sb3dDbGljazogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLFxuXHQgICAgcGFnZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5udW1iZXIsXG5cdCAgICBzaXplUGVyUGFnZUxpc3Q6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYXJyYXksXG5cdCAgICBzaXplUGVyUGFnZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5udW1iZXIsXG5cdCAgICBwYWdpbmF0aW9uU2l6ZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5udW1iZXIsXG5cdCAgICBvblNvcnRDaGFuZ2U6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYyxcblx0ICAgIG9uUGFnZUNoYW5nZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLFxuXHQgICAgb25TaXplUGVyUGFnZUxpc3Q6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYyxcblx0ICAgIG5vRGF0YVRleHQ6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgICAgaGFuZGxlQ29uZmlybURlbGV0ZVJvdzogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLFxuXHQgICAgcHJlUGFnZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsXG5cdCAgICBuZXh0UGFnZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsXG5cdCAgICBmaXJzdFBhZ2U6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgICAgbGFzdFBhZ2U6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nXG5cdCAgfSksXG5cdCAgZmV0Y2hJbmZvOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnNoYXBlKHtcblx0ICAgIGRhdGFUb3RhbFNpemU6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMubnVtYmVyXG5cdCAgfSksXG5cdCAgZXhwb3J0Q1NWOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsXG5cdCAgY3N2RmlsZU5hbWU6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nXG5cdH07XG5cdEJvb3RzdHJhcFRhYmxlLmRlZmF1bHRQcm9wcyA9IHtcblx0ICBoZWlnaHQ6IFwiMTAwJVwiLFxuXHQgIG1heEhlaWdodDogdW5kZWZpbmVkLFxuXHQgIHRhYmxlSUQ6IHVuZGVmaW5lZCxcblx0ICBzdHJpcGVkOiBmYWxzZSxcblx0ICBib3JkZXJlZDogdHJ1ZSxcblx0ICBob3ZlcjogZmFsc2UsXG5cdCAgY29uZGVuc2VkOiBmYWxzZSxcblx0ICBwYWdpbmF0aW9uOiBmYWxzZSxcblx0ICBzZWFyY2hQbGFjZWhvbGRlcjogdW5kZWZpbmVkLFxuXHQgIHNlbGVjdFJvdzoge1xuXHQgICAgbW9kZTogX0NvbnN0MlsnZGVmYXVsdCddLlJPV19TRUxFQ1RfTk9ORSxcblx0ICAgIGJnQ29sb3I6IF9Db25zdDJbJ2RlZmF1bHQnXS5ST1dfU0VMRUNUX0JHX0NPTE9SLFxuXHQgICAgc2VsZWN0ZWQ6IFtdLFxuXHQgICAgb25TZWxlY3Q6IHVuZGVmaW5lZCxcblx0ICAgIG9uU2VsZWN0QWxsOiB1bmRlZmluZWQsXG5cdCAgICBjbGlja1RvU2VsZWN0OiBmYWxzZSxcblx0ICAgIGhpZGVTZWxlY3RDb2x1bW46IGZhbHNlLFxuXHQgICAgY2xpY2tUb1NlbGVjdEFuZEVkaXRDZWxsOiBmYWxzZSxcblx0ICAgIHNob3dPbmx5U2VsZWN0ZWQ6IGZhbHNlXG5cdCAgfSxcblx0ICBjZWxsRWRpdDoge1xuXHQgICAgbW9kZTogX0NvbnN0MlsnZGVmYXVsdCddLkNFTExfRURJVF9OT05FLFxuXHQgICAgYmx1clRvU2F2ZTogZmFsc2UsXG5cdCAgICBhZnRlclNhdmVDZWxsOiB1bmRlZmluZWRcblx0ICB9LFxuXHQgIGluc2VydFJvdzogZmFsc2UsXG5cdCAgZGVsZXRlUm93OiBmYWxzZSxcblx0ICBzZWFyY2g6IGZhbHNlLFxuXHQgIG11bHRpQ29sdW1uU2VhcmNoOiBmYWxzZSxcblx0ICBjb2x1bW5GaWx0ZXI6IGZhbHNlLFxuXHQgIHRyQ2xhc3NOYW1lOiAnJyxcblx0ICBvcHRpb25zOiB7XG5cdCAgICBjbGVhclNlYXJjaDogZmFsc2UsXG5cdCAgICBzb3J0TmFtZTogdW5kZWZpbmVkLFxuXHQgICAgc29ydE9yZGVyOiB1bmRlZmluZWQsXG5cdCAgICBhZnRlclRhYmxlQ29tcGxldGU6IHVuZGVmaW5lZCxcblx0ICAgIGFmdGVyRGVsZXRlUm93OiB1bmRlZmluZWQsXG5cdCAgICBhZnRlckluc2VydFJvdzogdW5kZWZpbmVkLFxuXHQgICAgYWZ0ZXJTZWFyY2g6IHVuZGVmaW5lZCxcblx0ICAgIGFmdGVyQ29sdW1uRmlsdGVyOiB1bmRlZmluZWQsXG5cdCAgICBvblJvd0NsaWNrOiB1bmRlZmluZWQsXG5cdCAgICBvbk1vdXNlTGVhdmU6IHVuZGVmaW5lZCxcblx0ICAgIG9uTW91c2VFbnRlcjogdW5kZWZpbmVkLFxuXHQgICAgb25Sb3dNb3VzZU91dDogdW5kZWZpbmVkLFxuXHQgICAgb25Sb3dNb3VzZU92ZXI6IHVuZGVmaW5lZCxcblx0ICAgIHBhZ2U6IHVuZGVmaW5lZCxcblx0ICAgIHNpemVQZXJQYWdlTGlzdDogX0NvbnN0MlsnZGVmYXVsdCddLlNJWkVfUEVSX1BBR0VfTElTVCxcblx0ICAgIHNpemVQZXJQYWdlOiB1bmRlZmluZWQsXG5cdCAgICBwYWdpbmF0aW9uU2l6ZTogX0NvbnN0MlsnZGVmYXVsdCddLlBBR0lOQVRJT05fU0laRSxcblx0ICAgIG9uU2l6ZVBlclBhZ2VMaXN0OiB1bmRlZmluZWQsXG5cdCAgICBub0RhdGFUZXh0OiB1bmRlZmluZWQsXG5cdCAgICBoYW5kbGVDb25maXJtRGVsZXRlUm93OiB1bmRlZmluZWQsXG5cdCAgICBwcmVQYWdlOiBfQ29uc3QyWydkZWZhdWx0J10uUFJFX1BBR0UsXG5cdCAgICBuZXh0UGFnZTogX0NvbnN0MlsnZGVmYXVsdCddLk5FWFRfUEFHRSxcblx0ICAgIGZpcnN0UGFnZTogX0NvbnN0MlsnZGVmYXVsdCddLkZJUlNUX1BBR0UsXG5cdCAgICBsYXN0UGFnZTogX0NvbnN0MlsnZGVmYXVsdCddLkxBU1RfUEFHRVxuXHQgIH0sXG5cdCAgZmV0Y2hJbmZvOiB7XG5cdCAgICBkYXRhVG90YWxTaXplOiAwXG5cdCAgfSxcblx0ICBleHBvcnRDU1Y6IGZhbHNlLFxuXHQgIGNzdkZpbGVOYW1lOiB1bmRlZmluZWRcblx0fTtcblx0XG5cdGV4cG9ydHNbJ2RlZmF1bHQnXSA9IEJvb3RzdHJhcFRhYmxlO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSxcbi8qIDE3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCd2YWx1ZScgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cdFxuXHR2YXIgX2dldCA9IGZ1bmN0aW9uIGdldChfeCwgX3gyLCBfeDMpIHsgdmFyIF9hZ2FpbiA9IHRydWU7IF9mdW5jdGlvbjogd2hpbGUgKF9hZ2FpbikgeyB2YXIgb2JqZWN0ID0gX3gsIHByb3BlcnR5ID0gX3gyLCByZWNlaXZlciA9IF94MzsgX2FnYWluID0gZmFsc2U7IGlmIChvYmplY3QgPT09IG51bGwpIG9iamVjdCA9IEZ1bmN0aW9uLnByb3RvdHlwZTsgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpOyBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7IHZhciBwYXJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsgaWYgKHBhcmVudCA9PT0gbnVsbCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IGVsc2UgeyBfeCA9IHBhcmVudDsgX3gyID0gcHJvcGVydHk7IF94MyA9IHJlY2VpdmVyOyBfYWdhaW4gPSB0cnVlOyBkZXNjID0gcGFyZW50ID0gdW5kZWZpbmVkOyBjb250aW51ZSBfZnVuY3Rpb247IH0gfSBlbHNlIGlmICgndmFsdWUnIGluIGRlc2MpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9IH07XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICdmdW5jdGlvbicgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICcgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgX0NvbnN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfQ29uc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ29uc3QpO1xuXHRcblx0dmFyIEV2ZW50RW1pdHRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpLkV2ZW50RW1pdHRlcjtcblx0XG5cdHZhciBGaWx0ZXIgPSAoZnVuY3Rpb24gKF9FdmVudEVtaXR0ZXIpIHtcblx0ICAgIF9pbmhlcml0cyhGaWx0ZXIsIF9FdmVudEVtaXR0ZXIpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIEZpbHRlcihkYXRhKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbHRlcik7XG5cdFxuXHQgICAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKEZpbHRlci5wcm90b3R5cGUpLCAnY29uc3RydWN0b3InLCB0aGlzKS5jYWxsKHRoaXMsIGRhdGEpO1xuXHQgICAgICAgIHRoaXMuY3VycmVudEZpbHRlciA9IHt9O1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhGaWx0ZXIsIFt7XG5cdCAgICAgICAga2V5OiAnaGFuZGxlRmlsdGVyJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlRmlsdGVyKGRhdGFGaWVsZCwgdmFsdWUsIHR5cGUpIHtcblx0ICAgICAgICAgICAgdmFyIGZpbHRlclR5cGUgPSB0eXBlIHx8IF9Db25zdDJbJ2RlZmF1bHQnXS5GSUxURVJfVFlQRS5DVVNUT007XG5cdFxuXHQgICAgICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgICAgICAgICAvLyB2YWx1ZSBvZiB0aGUgZmlsdGVyIGlzIGFuIG9iamVjdFxuXHQgICAgICAgICAgICAgICAgdmFyIGhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gdmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbHVlW3Byb3BdIHx8IHZhbHVlW3Byb3BdID09PSBcIlwiKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIC8vIGlmIG9uZSBvZiB0aGUgb2JqZWN0IHByb3BlcnRpZXMgaXMgdW5kZWZpbmVkIG9yIGVtcHR5LCB3ZSByZW1vdmUgdGhlIGZpbHRlclxuXHQgICAgICAgICAgICAgICAgaGFzVmFsdWUgPyB0aGlzLmN1cnJlbnRGaWx0ZXJbZGF0YUZpZWxkXSA9IHsgdmFsdWU6IHZhbHVlLCB0eXBlOiBmaWx0ZXJUeXBlIH0gOiBkZWxldGUgdGhpcy5jdXJyZW50RmlsdGVyW2RhdGFGaWVsZF07XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoIXZhbHVlIHx8IHZhbHVlLnRyaW0oKSA9PT0gXCJcIikge1xuXHQgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY3VycmVudEZpbHRlcltkYXRhRmllbGRdO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVyW2RhdGFGaWVsZF0gPSB7IHZhbHVlOiB2YWx1ZS50cmltKCksIHR5cGU6IGZpbHRlclR5cGUgfTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLmVtaXQoJ29uRmlsdGVyQ2hhbmdlJywgdGhpcy5jdXJyZW50RmlsdGVyKTtcblx0ICAgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIEZpbHRlcjtcblx0fSkoRXZlbnRFbWl0dGVyKTtcblx0XG5cdGV4cG9ydHMuRmlsdGVyID0gRmlsdGVyO1xuXG4vKioqLyB9LFxuLyogMTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCd2YWx1ZScgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cdFxuXHR2YXIgX2dldCA9IGZ1bmN0aW9uIGdldChfeCwgX3gyLCBfeDMpIHsgdmFyIF9hZ2FpbiA9IHRydWU7IF9mdW5jdGlvbjogd2hpbGUgKF9hZ2FpbikgeyB2YXIgb2JqZWN0ID0gX3gsIHByb3BlcnR5ID0gX3gyLCByZWNlaXZlciA9IF94MzsgX2FnYWluID0gZmFsc2U7IGlmIChvYmplY3QgPT09IG51bGwpIG9iamVjdCA9IEZ1bmN0aW9uLnByb3RvdHlwZTsgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpOyBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7IHZhciBwYXJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsgaWYgKHBhcmVudCA9PT0gbnVsbCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IGVsc2UgeyBfeCA9IHBhcmVudDsgX3gyID0gcHJvcGVydHk7IF94MyA9IHJlY2VpdmVyOyBfYWdhaW4gPSB0cnVlOyBkZXNjID0gcGFyZW50ID0gdW5kZWZpbmVkOyBjb250aW51ZSBfZnVuY3Rpb247IH0gfSBlbHNlIGlmICgndmFsdWUnIGluIGRlc2MpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9IH07XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICdmdW5jdGlvbicgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICcgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9jbGFzc25hbWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblx0XG5cdHZhciBfQ29uc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9Db25zdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Db25zdCk7XG5cdFxuXHR2YXIgU2VsZWN0Um93SGVhZGVyQ29sdW1uID0gKGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG5cdCAgX2luaGVyaXRzKFNlbGVjdFJvd0hlYWRlckNvbHVtbiwgX1JlYWN0JENvbXBvbmVudCk7XG5cdFxuXHQgIGZ1bmN0aW9uIFNlbGVjdFJvd0hlYWRlckNvbHVtbigpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTZWxlY3RSb3dIZWFkZXJDb2x1bW4pO1xuXHRcblx0ICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKFNlbGVjdFJvd0hlYWRlckNvbHVtbi5wcm90b3R5cGUpLCAnY29uc3RydWN0b3InLCB0aGlzKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFNlbGVjdFJvd0hlYWRlckNvbHVtbiwgW3tcblx0ICAgIGtleTogJ3JlbmRlcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgICB2YXIgdGhTdHlsZSA9IHtcblx0ICAgICAgICB3aWR0aDogcGFyc2VJbnQodGhpcy5wcm9wcy53aWR0aCkgPyB0aGlzLnByb3BzLndpZHRoIDogMzVcblx0ICAgICAgfTtcblx0XG5cdCAgICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAndGgnLFxuXHQgICAgICAgIHsgc3R5bGU6IHRoU3R5bGUgfSxcblx0ICAgICAgICBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgeyBjbGFzc05hbWU6ICd0aC1pbm5lciB0YWJsZS1oZWFkZXItY29sdW1uJyB9LFxuXHQgICAgICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlblxuXHQgICAgICAgIClcblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBTZWxlY3RSb3dIZWFkZXJDb2x1bW47XG5cdH0pKF9yZWFjdDJbJ2RlZmF1bHQnXS5Db21wb25lbnQpO1xuXHRcblx0ZXhwb3J0c1snZGVmYXVsdCddID0gU2VsZWN0Um93SGVhZGVyQ29sdW1uO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSxcbi8qIDE5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXHRcblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQoX3gsIF94MiwgX3gzKSB7IHZhciBfYWdhaW4gPSB0cnVlOyBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHsgdmFyIG9iamVjdCA9IF94LCBwcm9wZXJ0eSA9IF94MiwgcmVjZWl2ZXIgPSBfeDM7IF9hZ2FpbiA9IGZhbHNlOyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgX3ggPSBwYXJlbnQ7IF94MiA9IHByb3BlcnR5OyBfeDMgPSByZWNlaXZlcjsgX2FnYWluID0gdHJ1ZTsgZGVzYyA9IHBhcmVudCA9IHVuZGVmaW5lZDsgY29udGludWUgX2Z1bmN0aW9uOyB9IH0gZWxzZSBpZiAoJ3ZhbHVlJyBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfSB9O1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAnZnVuY3Rpb24nICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfQ29uc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9Db25zdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Db25zdCk7XG5cdFxuXHR2YXIgX3V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIF91dGlsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3V0aWwpO1xuXHRcblx0dmFyIF9UYWJsZVJvdyA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0dmFyIF9UYWJsZVJvdzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9UYWJsZVJvdyk7XG5cdFxuXHR2YXIgX1RhYmxlQ29sdW1uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdFxuXHR2YXIgX1RhYmxlQ29sdW1uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1RhYmxlQ29sdW1uKTtcblx0XG5cdHZhciBfVGFibGVFZGl0Q29sdW1uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG5cdFxuXHR2YXIgX1RhYmxlRWRpdENvbHVtbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9UYWJsZUVkaXRDb2x1bW4pO1xuXHRcblx0dmFyIF9jbGFzc25hbWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblx0XG5cdHZhciBpc0Z1biA9IGZ1bmN0aW9uIGlzRnVuKG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgdHlwZW9mIG9iaiA9PT0gXCJmdW5jdGlvblwiO1xuXHR9O1xuXHRcblx0dmFyIFRhYmxlQm9keSA9IChmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuXHQgIF9pbmhlcml0cyhUYWJsZUJvZHksIF9SZWFjdCRDb21wb25lbnQpO1xuXHRcblx0ICBmdW5jdGlvbiBUYWJsZUJvZHkocHJvcHMpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUYWJsZUJvZHkpO1xuXHRcblx0ICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKFRhYmxlQm9keS5wcm90b3R5cGUpLCAnY29uc3RydWN0b3InLCB0aGlzKS5jYWxsKHRoaXMsIHByb3BzKTtcblx0ICAgIHRoaXMuc3RhdGUgPSB7XG5cdCAgICAgIGN1cnJFZGl0Q2VsbDogbnVsbFxuXHQgICAgfTtcblx0ICAgIHRoaXMuZWRpdGluZyA9IGZhbHNlO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFRhYmxlQm9keSwgW3tcblx0ICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcblx0ICAgICAgdGhpcy5hZGp1c3RCb2R5KCk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnY29tcG9uZW50RGlkVXBkYXRlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG5cdCAgICAgIHRoaXMuYWRqdXN0Qm9keSgpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3JlbmRlcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgICB2YXIgY29udGFpbmVyQ2xhc3NlcyA9ICgwLCBfY2xhc3NuYW1lczJbJ2RlZmF1bHQnXSkoXCJ0YWJsZS1jb250YWluZXJcIik7XG5cdFxuXHQgICAgICB2YXIgdGFibGVDbGFzc2VzID0gKDAsIF9jbGFzc25hbWVzMlsnZGVmYXVsdCddKShcInRhYmxlXCIsIHtcblx0ICAgICAgICAndGFibGUtc3RyaXBlZCc6IHRoaXMucHJvcHMuc3RyaXBlZCxcblx0ICAgICAgICAndGFibGUtYm9yZGVyZWQnOiB0aGlzLnByb3BzLmJvcmRlcmVkLFxuXHQgICAgICAgICd0YWJsZS1ob3Zlcic6IHRoaXMucHJvcHMuaG92ZXIsXG5cdCAgICAgICAgJ3RhYmxlLWNvbmRlbnNlZCc6IHRoaXMucHJvcHMuY29uZGVuc2VkXG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgdmFyIGlzU2VsZWN0Um93RGVmaW5lZCA9IHRoaXMuX2lzU2VsZWN0Um93RGVmaW5lZCgpO1xuXHQgICAgICB2YXIgdGFibGVIZWFkZXIgPSB0aGlzLnJlbmRlclRhYmxlSGVhZGVyKGlzU2VsZWN0Um93RGVmaW5lZCk7XG5cdFxuXHQgICAgICB2YXIgdGFibGVSb3dzID0gdGhpcy5wcm9wcy5kYXRhLm1hcChmdW5jdGlvbiAoZGF0YSwgcikge1xuXHQgICAgICAgIHZhciB0YWJsZUNvbHVtbnMgPSB0aGlzLnByb3BzLmNvbHVtbnMubWFwKGZ1bmN0aW9uIChjb2x1bW4sIGkpIHtcblx0ICAgICAgICAgIHZhciBmaWVsZFZhbHVlID0gZGF0YVtjb2x1bW4ubmFtZV07XG5cdCAgICAgICAgICBpZiAodGhpcy5lZGl0aW5nICYmIGNvbHVtbi5uYW1lICE9PSB0aGlzLnByb3BzLmtleUZpZWxkICYmIC8vIEtleSBmaWVsZCBjYW4ndCBiZSBlZGl0XG5cdCAgICAgICAgICBjb2x1bW4uZWRpdGFibGUgJiYgLy8gY29sdW1uIGlzIGVkaXRhYmxlPyBkZWZhdWx0IGlzIHRydWUsIHVzZXIgY2FuIHNldCBpdCBmYWxzZVxuXHQgICAgICAgICAgdGhpcy5zdGF0ZS5jdXJyRWRpdENlbGwgIT0gbnVsbCAmJiB0aGlzLnN0YXRlLmN1cnJFZGl0Q2VsbC5yaWQgPT0gciAmJiB0aGlzLnN0YXRlLmN1cnJFZGl0Q2VsbC5jaWQgPT0gaSkge1xuXHQgICAgICAgICAgICB2YXIgZm9ybWF0ID0gY29sdW1uLmZvcm1hdCA/IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBjb2x1bW4uZm9ybWF0KHZhbHVlLCBkYXRhLCBjb2x1bW4uZm9ybWF0RXh0cmFEYXRhKS5yZXBsYWNlKC88Lio/Pi9nLCAnJyk7XG5cdCAgICAgICAgICAgIH0gOiBmYWxzZTtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICBfVGFibGVFZGl0Q29sdW1uMlsnZGVmYXVsdCddLFxuXHQgICAgICAgICAgICAgIHsgY29tcGxldGVFZGl0OiB0aGlzLmhhbmRsZUNvbXBsZXRlRWRpdENlbGwuYmluZCh0aGlzKSxcblx0ICAgICAgICAgICAgICAgIC8vYWRkIGJ5IGJsdWVzcHJpbmcgZm9yIGNvbHVtbiBlZGl0b3IgY3VzdG9taXplXG5cdCAgICAgICAgICAgICAgICBlZGl0YWJsZTogaXNGdW4oY29sdW1uLmVkaXRhYmxlKSA/IGNvbHVtbi5lZGl0YWJsZShmaWVsZFZhbHVlLCBkYXRhLCByLCBpKSA6IGNvbHVtbi5lZGl0YWJsZSxcblx0ICAgICAgICAgICAgICAgIGZvcm1hdDogY29sdW1uLmZvcm1hdCA/IGZvcm1hdCA6IGZhbHNlLFxuXHQgICAgICAgICAgICAgICAga2V5OiBpLFxuXHQgICAgICAgICAgICAgICAgYmx1clRvU2F2ZTogdGhpcy5wcm9wcy5jZWxsRWRpdC5ibHVyVG9TYXZlLFxuXHQgICAgICAgICAgICAgICAgcm93SW5kZXg6IHIsXG5cdCAgICAgICAgICAgICAgICBjb2xJbmRleDogaSB9LFxuXHQgICAgICAgICAgICAgIGZpZWxkVmFsdWVcblx0ICAgICAgICAgICAgKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIC8vYWRkIGJ5IGJsdWVzcHJpbmcgZm9yIGNsYXNzTmFtZSBjdXN0b21pemVcblx0ICAgICAgICAgICAgdmFyIHRkQ2xhc3NOYW1lID0gaXNGdW4oY29sdW1uLmNsYXNzTmFtZSkgPyBjb2x1bW4uY2xhc3NOYW1lKGZpZWxkVmFsdWUsIGRhdGEsIHIsIGkpIDogY29sdW1uLmNsYXNzTmFtZTtcblx0XG5cdCAgICAgICAgICAgIGlmICh0eXBlb2YgY29sdW1uLmZvcm1hdCAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHQgICAgICAgICAgICAgIHZhciBmb3JtYXR0ZWRWYWx1ZSA9IGNvbHVtbi5mb3JtYXQoZmllbGRWYWx1ZSwgZGF0YSwgY29sdW1uLmZvcm1hdEV4dHJhRGF0YSk7XG5cdCAgICAgICAgICAgICAgaWYgKCFfcmVhY3QyWydkZWZhdWx0J10uaXNWYWxpZEVsZW1lbnQoZm9ybWF0dGVkVmFsdWUpKSB7XG5cdCAgICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZSA9IF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB7IF9faHRtbDogZm9ybWF0dGVkVmFsdWUgfSB9KTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgX1RhYmxlQ29sdW1uMlsnZGVmYXVsdCddLFxuXHQgICAgICAgICAgICAgICAgeyBkYXRhQWxpZ246IGNvbHVtbi5hbGlnbixcblx0ICAgICAgICAgICAgICAgICAga2V5OiBpLFxuXHQgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHRkQ2xhc3NOYW1lLFxuXHQgICAgICAgICAgICAgICAgICBjZWxsRWRpdDogdGhpcy5wcm9wcy5jZWxsRWRpdCxcblx0ICAgICAgICAgICAgICAgICAgaGlkZGVuOiBjb2x1bW4uaGlkZGVuLFxuXHQgICAgICAgICAgICAgICAgICBvbkVkaXQ6IHRoaXMuaGFuZGxlRWRpdENlbGwuYmluZCh0aGlzKSxcblx0ICAgICAgICAgICAgICAgICAgd2lkdGg6IGNvbHVtbi53aWR0aCB9LFxuXHQgICAgICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWVcblx0ICAgICAgICAgICAgICApO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgIF9UYWJsZUNvbHVtbjJbJ2RlZmF1bHQnXSxcblx0ICAgICAgICAgICAgICAgIHsgZGF0YUFsaWduOiBjb2x1bW4uYWxpZ24sXG5cdCAgICAgICAgICAgICAgICAgIGtleTogaSxcblx0ICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiB0ZENsYXNzTmFtZSxcblx0ICAgICAgICAgICAgICAgICAgY2VsbEVkaXQ6IHRoaXMucHJvcHMuY2VsbEVkaXQsXG5cdCAgICAgICAgICAgICAgICAgIGhpZGRlbjogY29sdW1uLmhpZGRlbixcblx0ICAgICAgICAgICAgICAgICAgb25FZGl0OiB0aGlzLmhhbmRsZUVkaXRDZWxsLmJpbmQodGhpcyksXG5cdCAgICAgICAgICAgICAgICAgIHdpZHRoOiBjb2x1bW4ud2lkdGggfSxcblx0ICAgICAgICAgICAgICAgIGZpZWxkVmFsdWVcblx0ICAgICAgICAgICAgICApO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSwgdGhpcyk7XG5cdCAgICAgICAgdmFyIHNlbGVjdGVkID0gdGhpcy5wcm9wcy5zZWxlY3RlZFJvd0tleXMuaW5kZXhPZihkYXRhW3RoaXMucHJvcHMua2V5RmllbGRdKSAhPSAtMTtcblx0ICAgICAgICB2YXIgc2VsZWN0Um93Q29sdW1uID0gaXNTZWxlY3RSb3dEZWZpbmVkICYmICF0aGlzLnByb3BzLnNlbGVjdFJvdy5oaWRlU2VsZWN0Q29sdW1uID8gdGhpcy5yZW5kZXJTZWxlY3RSb3dDb2x1bW4oc2VsZWN0ZWQpIDogbnVsbDtcblx0ICAgICAgICAvL2FkZCBieSBibHVlc3ByaW5nIGZvciBjbGFzc05hbWUgY3VzdG9taXplXG5cdCAgICAgICAgdmFyIHRyQ2xhc3NOYW1lID0gaXNGdW4odGhpcy5wcm9wcy50ckNsYXNzTmFtZSkgPyB0aGlzLnByb3BzLnRyQ2xhc3NOYW1lKGRhdGEsIHIpIDogdGhpcy5wcm9wcy50ckNsYXNzTmFtZTtcblx0ICAgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICBfVGFibGVSb3cyWydkZWZhdWx0J10sXG5cdCAgICAgICAgICB7IGlzU2VsZWN0ZWQ6IHNlbGVjdGVkLCBrZXk6IHIsIGNsYXNzTmFtZTogdHJDbGFzc05hbWUsXG5cdCAgICAgICAgICAgIHNlbGVjdFJvdzogaXNTZWxlY3RSb3dEZWZpbmVkID8gdGhpcy5wcm9wcy5zZWxlY3RSb3cgOiB1bmRlZmluZWQsXG5cdCAgICAgICAgICAgIGVuYWJsZUNlbGxFZGl0OiB0aGlzLnByb3BzLmNlbGxFZGl0Lm1vZGUgIT09IF9Db25zdDJbJ2RlZmF1bHQnXS5DRUxMX0VESVRfTk9ORSxcblx0ICAgICAgICAgICAgb25Sb3dDbGljazogdGhpcy5oYW5kbGVSb3dDbGljay5iaW5kKHRoaXMpLFxuXHQgICAgICAgICAgICBvblJvd01vdXNlT3ZlcjogdGhpcy5oYW5kbGVSb3dNb3VzZU92ZXIuYmluZCh0aGlzKSxcblx0ICAgICAgICAgICAgb25Sb3dNb3VzZU91dDogdGhpcy5oYW5kbGVSb3dNb3VzZU91dC5iaW5kKHRoaXMpLFxuXHQgICAgICAgICAgICBvblNlbGVjdFJvdzogdGhpcy5oYW5kbGVTZWxlY3RSb3cuYmluZCh0aGlzKSB9LFxuXHQgICAgICAgICAgc2VsZWN0Um93Q29sdW1uLFxuXHQgICAgICAgICAgdGFibGVDb2x1bW5zXG5cdCAgICAgICAgKTtcblx0ICAgICAgfSwgdGhpcyk7XG5cdFxuXHQgICAgICBpZiAodGFibGVSb3dzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgIHRhYmxlUm93cy5wdXNoKF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgX1RhYmxlUm93MlsnZGVmYXVsdCddLFxuXHQgICAgICAgICAgeyBrZXk6ICcjI3RhYmxlLWVtcHR5IyMnIH0sXG5cdCAgICAgICAgICBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgJ3RkJyxcblx0ICAgICAgICAgICAgeyBjb2xTcGFuOiB0aGlzLnByb3BzLmNvbHVtbnMubGVuZ3RoICsgKGlzU2VsZWN0Um93RGVmaW5lZCA/IDEgOiAwKSxcblx0ICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyZWFjdC1icy10YWJsZS1uby1kYXRhJyB9LFxuXHQgICAgICAgICAgICB0aGlzLnByb3BzLm5vRGF0YVRleHQgfHwgX0NvbnN0MlsnZGVmYXVsdCddLk5PX0RBVEFfVEVYVFxuXHQgICAgICAgICAgKVxuXHQgICAgICAgICkpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLmVkaXRpbmcgPSBmYWxzZTtcblx0XG5cdCAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmNhbGN1bGF0ZUNvbnRhaW5lckhlaWdodCgpLnRvU3RyaW5nKCk7XG5cdFxuXHQgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgeyByZWY6ICdjb250YWluZXInLCBjbGFzc05hbWU6IGNvbnRhaW5lckNsYXNzZXMsIHN0eWxlOiB7IGhlaWdodDogaGVpZ2h0IH0gfSxcblx0ICAgICAgICBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICd0YWJsZScsXG5cdCAgICAgICAgICB7IHJlZjogJ2JvZHknLCBjbGFzc05hbWU6IHRhYmxlQ2xhc3NlcyB9LFxuXHQgICAgICAgICAgdGFibGVIZWFkZXIsXG5cdCAgICAgICAgICBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgJ3Rib2R5Jyxcblx0ICAgICAgICAgICAgbnVsbCxcblx0ICAgICAgICAgICAgdGFibGVSb3dzXG5cdCAgICAgICAgICApXG5cdCAgICAgICAgKVxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3JlbmRlclRhYmxlSGVhZGVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJUYWJsZUhlYWRlcihpc1NlbGVjdFJvd0RlZmluZWQpIHtcblx0ICAgICAgdmFyIHNlbGVjdFJvd0hlYWRlciA9IG51bGw7XG5cdFxuXHQgICAgICBpZiAoaXNTZWxlY3RSb3dEZWZpbmVkKSB7XG5cdCAgICAgICAgdmFyIHN0eWxlID0ge1xuXHQgICAgICAgICAgd2lkdGg6IDM1LFxuXHQgICAgICAgICAgbWluV2lkdGg6IDM1XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBzZWxlY3RSb3dIZWFkZXIgPSB0aGlzLnByb3BzLnNlbGVjdFJvdy5oaWRlU2VsZWN0Q29sdW1uID8gbnVsbCA6IF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KCd0aCcsIHsgc3R5bGU6IHN0eWxlLCBrZXk6IC0xIH0pO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciB0aGVhZGVyID0gdGhpcy5wcm9wcy5jb2x1bW5zLm1hcChmdW5jdGlvbiAoY29sdW1uLCBpKSB7XG5cdCAgICAgICAgdmFyIHdpZHRoID0gY29sdW1uLndpZHRoID09IG51bGwgPyBjb2x1bW4ud2lkdGggOiBwYXJzZUludChjb2x1bW4ud2lkdGgpO1xuXHQgICAgICAgIHZhciBzdHlsZSA9IHtcblx0ICAgICAgICAgIGRpc3BsYXk6IGNvbHVtbi5oaWRkZW4gPyBcIm5vbmVcIiA6IG51bGwsXG5cdCAgICAgICAgICB3aWR0aDogd2lkdGgsXG5cdCAgICAgICAgICBtYXhXaWR0aDogd2lkdGhcblx0ICAgICAgICAgIC8qKiBhZGQgbWluLXdkdGggdG8gZml4IHVzZXIgYXNzaWduIGNvbHVtbiB3aWR0aCBub3QgZXEgb2Zmc2V0V2lkdGggaW4gbGFyZ2UgY29sdW1uIHRhYmxlICoqL1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgdmFyIHNvcnRDYWVydCA9IGNvbHVtbi5zb3J0ID8gX3V0aWwyWydkZWZhdWx0J10ucmVuZGVyUmVhY3RTb3J0Q2FyZXQoX0NvbnN0MlsnZGVmYXVsdCddLlNPUlRfREVTQykgOiBudWxsO1xuXHQgICAgICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICd0aCcsXG5cdCAgICAgICAgICB7IHN0eWxlOiBzdHlsZSwga2V5OiBpLCBjbGFzc05hbWU6IGNvbHVtbi5jbGFzc05hbWUgfSxcblx0ICAgICAgICAgIGNvbHVtbi50ZXh0LFxuXHQgICAgICAgICAgc29ydENhZXJ0XG5cdCAgICAgICAgKTtcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgJ3RoZWFkJyxcblx0ICAgICAgICB7IHJlZjogJ2hlYWRlcicgfSxcblx0ICAgICAgICBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICd0cicsXG5cdCAgICAgICAgICBudWxsLFxuXHQgICAgICAgICAgc2VsZWN0Um93SGVhZGVyLFxuXHQgICAgICAgICAgdGhlYWRlclxuXHQgICAgICAgIClcblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdoYW5kbGVSb3dNb3VzZU91dCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlUm93TW91c2VPdXQocm93SW5kZXgpIHtcblx0ICAgICAgdmFyIHRhcmdldFJvdyA9IHRoaXMucHJvcHMuZGF0YVtyb3dJbmRleCAtIDFdO1xuXHQgICAgICB0aGlzLnByb3BzLm9uUm93TW91c2VPdXQodGFyZ2V0Um93KTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdoYW5kbGVSb3dNb3VzZU92ZXInLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVJvd01vdXNlT3Zlcihyb3dJbmRleCkge1xuXHQgICAgICB2YXIgdGFyZ2V0Um93ID0gdGhpcy5wcm9wcy5kYXRhW3Jvd0luZGV4IC0gMV07XG5cdCAgICAgIHRoaXMucHJvcHMub25Sb3dNb3VzZU92ZXIodGFyZ2V0Um93KTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdoYW5kbGVSb3dDbGljaycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlUm93Q2xpY2socm93SW5kZXgpIHtcblx0ICAgICAgdmFyIGtleSwgc2VsZWN0ZWRSb3c7XG5cdCAgICAgIHRoaXMucHJvcHMuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChyb3csIGkpIHtcblx0ICAgICAgICBpZiAoaSA9PSByb3dJbmRleCAtIDEpIHtcblx0ICAgICAgICAgIGtleSA9IHJvd1t0aGlzLnByb3BzLmtleUZpZWxkXTtcblx0ICAgICAgICAgIHNlbGVjdGVkUm93ID0gcm93O1xuXHQgICAgICAgIH1cblx0ICAgICAgfSwgdGhpcyk7XG5cdCAgICAgIHRoaXMucHJvcHMub25Sb3dDbGljayhzZWxlY3RlZFJvdyk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnaGFuZGxlU2VsZWN0Um93Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVTZWxlY3RSb3cocm93SW5kZXgsIGlzU2VsZWN0ZWQpIHtcblx0ICAgICAgdmFyIGtleSwgc2VsZWN0ZWRSb3c7XG5cdCAgICAgIHRoaXMucHJvcHMuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChyb3csIGkpIHtcblx0ICAgICAgICBpZiAoaSA9PSByb3dJbmRleCAtIDEpIHtcblx0ICAgICAgICAgIGtleSA9IHJvd1t0aGlzLnByb3BzLmtleUZpZWxkXTtcblx0ICAgICAgICAgIHNlbGVjdGVkUm93ID0gcm93O1xuXHQgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSwgdGhpcyk7XG5cdCAgICAgIHRoaXMucHJvcHMub25TZWxlY3RSb3coc2VsZWN0ZWRSb3csIGlzU2VsZWN0ZWQpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2hhbmRsZVNlbGVjdFJvd0NvbHVtQ2hhbmdlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVTZWxlY3RSb3dDb2x1bUNoYW5nZShlKSB7XG5cdCAgICAgIGlmICghdGhpcy5wcm9wcy5zZWxlY3RSb3cuY2xpY2tUb1NlbGVjdCB8fCAhdGhpcy5wcm9wcy5zZWxlY3RSb3cuY2xpY2tUb1NlbGVjdEFuZEVkaXRDZWxsKSB7XG5cdCAgICAgICAgdGhpcy5oYW5kbGVTZWxlY3RSb3coZS5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5yb3dJbmRleCwgZS5jdXJyZW50VGFyZ2V0LmNoZWNrZWQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnaGFuZGxlRWRpdENlbGwnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUVkaXRDZWxsKHJvd0luZGV4LCBjb2x1bW5JbmRleCkge1xuXHQgICAgICB0aGlzLmVkaXRpbmcgPSB0cnVlO1xuXHQgICAgICBpZiAodGhpcy5faXNTZWxlY3RSb3dEZWZpbmVkKCkpIHtcblx0ICAgICAgICBjb2x1bW5JbmRleC0tO1xuXHQgICAgICAgIGlmICh0aGlzLnByb3BzLnNlbGVjdFJvdy5oaWRlU2VsZWN0Q29sdW1uKSBjb2x1bW5JbmRleCsrO1xuXHQgICAgICB9XG5cdCAgICAgIHJvd0luZGV4LS07XG5cdCAgICAgIHZhciBzdGF0ZU9iaiA9IHtcblx0ICAgICAgICBjdXJyRWRpdENlbGw6IHtcblx0ICAgICAgICAgIHJpZDogcm93SW5kZXgsXG5cdCAgICAgICAgICBjaWQ6IGNvbHVtbkluZGV4XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHRcblx0ICAgICAgaWYgKHRoaXMucHJvcHMuc2VsZWN0Um93LmNsaWNrVG9TZWxlY3RBbmRFZGl0Q2VsbCkge1xuXHQgICAgICAgIHRoaXMuaGFuZGxlU2VsZWN0Um93KHJvd0luZGV4ICsgMSwgdHJ1ZSk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZU9iaik7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnY2FuY2VsRWRpdCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY2FuY2VsRWRpdCgpIHtcblx0ICAgICAgdmFyIGN1cnJFZGl0Q2VsbCA9IHRoaXMuc3RhdGUuY3VyckVkaXRDZWxsO1xuXHQgICAgICBpZiAoY3VyckVkaXRDZWxsKSB7XG5cdCAgICAgICAgdGhpcy5oYW5kbGVDb21wbGV0ZUVkaXRDZWxsKG51bGwsIGN1cnJFZGl0Q2VsbC5yaWQsIGN1cnJFZGl0Q2VsbC5jaWQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnaGFuZGxlQ29tcGxldGVFZGl0Q2VsbCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ29tcGxldGVFZGl0Q2VsbChuZXdWYWwsIHJvd0luZGV4LCBjb2x1bW5JbmRleCkge1xuXHQgICAgICB0aGlzLnNldFN0YXRlKHsgY3VyckVkaXRDZWxsOiBudWxsIH0pO1xuXHQgICAgICBpZiAobnVsbCAhPSBuZXdWYWwpIHRoaXMucHJvcHMuY2VsbEVkaXQuX19vbkNvbXBsZXRlRWRpdF9fKG5ld1ZhbCwgcm93SW5kZXgsIGNvbHVtbkluZGV4KTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdyZW5kZXJTZWxlY3RSb3dDb2x1bW4nLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclNlbGVjdFJvd0NvbHVtbihzZWxlY3RlZCkge1xuXHQgICAgICBpZiAodGhpcy5wcm9wcy5zZWxlY3RSb3cubW9kZSA9PSBfQ29uc3QyWydkZWZhdWx0J10uUk9XX1NFTEVDVF9TSU5HTEUpIHtcblx0ICAgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICBfVGFibGVDb2x1bW4yWydkZWZhdWx0J10sXG5cdCAgICAgICAgICBudWxsLFxuXHQgICAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyB0eXBlOiAncmFkaW8nLCBjaGVja2VkOiBzZWxlY3RlZCwgb25DaGFuZ2U6IHRoaXMuaGFuZGxlU2VsZWN0Um93Q29sdW1DaGFuZ2UuYmluZCh0aGlzKSB9KVxuXHQgICAgICAgICk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgX1RhYmxlQ29sdW1uMlsnZGVmYXVsdCddLFxuXHQgICAgICAgICAgbnVsbCxcblx0ICAgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JywgY2hlY2tlZDogc2VsZWN0ZWQsIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZVNlbGVjdFJvd0NvbHVtQ2hhbmdlLmJpbmQodGhpcykgfSlcblx0ICAgICAgICApO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZ2V0Qm9keUhlYWRlckRvbVByb3AnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEJvZHlIZWFkZXJEb21Qcm9wKCkge1xuXHQgICAgICB2YXIgaGVhZGVycyA9IHRoaXMucmVmcy5oZWFkZXIuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzO1xuXHQgICAgICB2YXIgaGVhZGVyRG9tUHJvcHMgPSBbXTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWFkZXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgaGVhZGVyRG9tUHJvcHMucHVzaCh7XG5cdCAgICAgICAgICB3aWR0aDogaGVhZGVyc1tpXS5vZmZzZXRXaWR0aFxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBoZWFkZXJEb21Qcm9wcztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdhZGp1c3RCb2R5Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBhZGp1c3RCb2R5KCkge1xuXHQgICAgICB0aGlzLmhhcmRGaXhIZWFkZXJXaWR0aCgpO1xuXHQgICAgICBpZiAodGhpcy5wcm9wcy5jb25kZW5zZWQpIHtcblx0ICAgICAgICB0aGlzLnJlZnMuYm9keS5zdHlsZS5tYXJnaW5Ub3AgPSBcIi0zNnB4XCI7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh0aGlzLnByb3BzLm1heEhlaWdodCAmJiBwYXJzZUludCh0aGlzLnByb3BzLm1heEhlaWdodCkgPCB0aGlzLnJlZnMuY29udGFpbmVyLm9mZnNldEhlaWdodCkge1xuXHQgICAgICAgIHRoaXMucmVmcy5jb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gdGhpcy5wcm9wcy5tYXhIZWlnaHQgLSA0MiArIFwicHhcIjtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2hhcmRGaXhIZWFkZXJXaWR0aCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gaGFyZEZpeEhlYWRlcldpZHRoKCkge1xuXHQgICAgICB2YXIgaGVhZGVycyA9IHRoaXMucmVmcy5oZWFkZXIuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzO1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhlYWRlcnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBoZWFkZXJzW2ldLnN0eWxlLndpZHRoID0gaGVhZGVyc1tpXS5vZmZzZXRXaWR0aCArIFwicHhcIjtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2NhbGN1bGF0ZUNvbnRhaW5lckhlaWdodCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY2FsY3VsYXRlQ29udGFpbmVySGVpZ2h0KCkge1xuXHQgICAgICBpZiAodGhpcy5wcm9wcy5oZWlnaHQgPT0gXCIxMDAlXCIpIHJldHVybiB0aGlzLnByb3BzLmhlaWdodDtlbHNlIHtcblx0ICAgICAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5wcm9wcy5oZWlnaHQpIC0gNDI7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdfaXNTZWxlY3RSb3dEZWZpbmVkJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBfaXNTZWxlY3RSb3dEZWZpbmVkKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5wcm9wcy5zZWxlY3RSb3cubW9kZSA9PT0gX0NvbnN0MlsnZGVmYXVsdCddLlJPV19TRUxFQ1RfU0lOR0xFIHx8IHRoaXMucHJvcHMuc2VsZWN0Um93Lm1vZGUgPT09IF9Db25zdDJbJ2RlZmF1bHQnXS5ST1dfU0VMRUNUX01VTFRJO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFRhYmxlQm9keTtcblx0fSkoX3JlYWN0MlsnZGVmYXVsdCddLkNvbXBvbmVudCk7XG5cdFxuXHRUYWJsZUJvZHkucHJvcFR5cGVzID0ge1xuXHQgIGhlaWdodDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsXG5cdCAgZGF0YTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5hcnJheSxcblx0ICBjb2x1bW5zOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmFycmF5LFxuXHQgIHN0cmlwZWQ6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCxcblx0ICBib3JkZXJlZDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLFxuXHQgIGhvdmVyOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsXG5cdCAgY29uZGVuc2VkOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsXG5cdCAga2V5RmllbGQ6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgIHNlbGVjdGVkUm93S2V5czogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5hcnJheSxcblx0ICBvblJvd0NsaWNrOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmZ1bmMsXG5cdCAgb25TZWxlY3RSb3c6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYyxcblx0ICBub0RhdGFUZXh0OiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZ1xuXHR9O1xuXHRleHBvcnRzWydkZWZhdWx0J10gPSBUYWJsZUJvZHk7XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9LFxuLyogMjAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCd2YWx1ZScgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cdFxuXHR2YXIgX2dldCA9IGZ1bmN0aW9uIGdldChfeCwgX3gyLCBfeDMpIHsgdmFyIF9hZ2FpbiA9IHRydWU7IF9mdW5jdGlvbjogd2hpbGUgKF9hZ2FpbikgeyB2YXIgb2JqZWN0ID0gX3gsIHByb3BlcnR5ID0gX3gyLCByZWNlaXZlciA9IF94MzsgX2FnYWluID0gZmFsc2U7IGlmIChvYmplY3QgPT09IG51bGwpIG9iamVjdCA9IEZ1bmN0aW9uLnByb3RvdHlwZTsgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpOyBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7IHZhciBwYXJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsgaWYgKHBhcmVudCA9PT0gbnVsbCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IGVsc2UgeyBfeCA9IHBhcmVudDsgX3gyID0gcHJvcGVydHk7IF94MyA9IHJlY2VpdmVyOyBfYWdhaW4gPSB0cnVlOyBkZXNjID0gcGFyZW50ID0gdW5kZWZpbmVkOyBjb250aW51ZSBfZnVuY3Rpb247IH0gfSBlbHNlIGlmICgndmFsdWUnIGluIGRlc2MpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9IH07XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICdmdW5jdGlvbicgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICcgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9Db25zdCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX0NvbnN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NvbnN0KTtcblx0XG5cdHZhciBUYWJsZUNvbHVtbiA9IChmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuXHQgICAgX2luaGVyaXRzKFRhYmxlQ29sdW1uLCBfUmVhY3QkQ29tcG9uZW50KTtcblx0XG5cdCAgICBmdW5jdGlvbiBUYWJsZUNvbHVtbihwcm9wcykge1xuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUYWJsZUNvbHVtbik7XG5cdFxuXHQgICAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKFRhYmxlQ29sdW1uLnByb3RvdHlwZSksICdjb25zdHJ1Y3RvcicsIHRoaXMpLmNhbGwodGhpcywgcHJvcHMpO1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhUYWJsZUNvbHVtbiwgW3tcblx0ICAgICAgICBrZXk6ICdzaG91bGRDb21wb25lbnRVcGRhdGUnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzLCBuZXh0U3RhdGUpIHtcblx0ICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gdGhpcy5wcm9wcy5jaGlsZHJlbjtcblx0XG5cdCAgICAgICAgICAgIHZhciBzaG91bGRVcGRhdGVkID0gdGhpcy5wcm9wcy53aWR0aCAhPT0gbmV4dFByb3BzLndpZHRoIHx8IHRoaXMucHJvcHMuY2xhc3NOYW1lICE9PSBuZXh0UHJvcHMuY2xhc3NOYW1lIHx8IHRoaXMucHJvcHMuaGlkZGVuICE9PSBuZXh0UHJvcHMuaGlkZGVuIHx8IHRoaXMucHJvcHMuZGF0YUFsaWduICE9PSBuZXh0UHJvcHMuZGF0YUFsaWduIHx8IHR5cGVvZiBjaGlsZHJlbiAhPT0gdHlwZW9mIG5leHRQcm9wcy5jaGlsZHJlbiB8fCAoJycgKyB0aGlzLnByb3BzLm9uRWRpdCkudG9TdHJpbmcoKSAhPT0gKCcnICsgbmV4dFByb3BzLm9uRWRpdCkudG9TdHJpbmcoKTtcblx0XG5cdCAgICAgICAgICAgIGlmIChzaG91bGRVcGRhdGVkKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gc2hvdWxkVXBkYXRlZDtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgaWYgKHR5cGVvZiBjaGlsZHJlbiA9PT0gJ29iamVjdCcgJiYgY2hpbGRyZW4gIT09IG51bGwpIHtcblx0ICAgICAgICAgICAgICAgIGlmIChjaGlsZHJlbi5wcm9wcy50eXBlID09PSAnY2hlY2tib3gnIHx8IGNoaWxkcmVuLnByb3BzLnR5cGUgPT09ICdyYWRpbycpIHtcblx0ICAgICAgICAgICAgICAgICAgICBzaG91bGRVcGRhdGVkID0gc2hvdWxkVXBkYXRlZCB8fCBjaGlsZHJlbi5wcm9wcy50eXBlICE9PSBuZXh0UHJvcHMuY2hpbGRyZW4ucHJvcHMudHlwZSB8fCBjaGlsZHJlbi5wcm9wcy5jaGVja2VkICE9PSBuZXh0UHJvcHMuY2hpbGRyZW4ucHJvcHMuY2hlY2tlZDtcblx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc2hvdWxkVXBkYXRlZCA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICBzaG91bGRVcGRhdGVkID0gc2hvdWxkVXBkYXRlZCB8fCBjaGlsZHJlbiAhPT0gbmV4dFByb3BzLmNoaWxkcmVuO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICBpZiAoc2hvdWxkVXBkYXRlZCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHNob3VsZFVwZGF0ZWQ7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIGlmICghKHRoaXMucHJvcHMuY2VsbEVkaXQgJiYgbmV4dFByb3BzLmNlbGxFZGl0KSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHNob3VsZFVwZGF0ZWQgfHwgdGhpcy5wcm9wcy5jZWxsRWRpdC5tb2RlICE9PSBuZXh0UHJvcHMuY2VsbEVkaXQubW9kZTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdoYW5kbGVDZWxsRWRpdCcsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNlbGxFZGl0KGUpIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuY2VsbEVkaXQubW9kZSA9PSBfQ29uc3QyWydkZWZhdWx0J10uQ0VMTF9FRElUX0RCQ0xJQ0spIHtcblx0ICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5zZWxlY3Rpb24gJiYgZG9jdW1lbnQuc2VsZWN0aW9uLmVtcHR5KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuc2VsZWN0aW9uLmVtcHR5KCk7XG5cdCAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5nZXRTZWxlY3Rpb24pIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuXHQgICAgICAgICAgICAgICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLnByb3BzLm9uRWRpdChlLmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5yb3dJbmRleCwgZS5jdXJyZW50VGFyZ2V0LmNlbGxJbmRleCk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ3JlbmRlcicsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgICAgICAgdmFyIHdpZHRoID0gdGhpcy5wcm9wcy53aWR0aCA9PSBudWxsID8gdGhpcy5wcm9wcy53aWR0aCA6IHRoaXMucHJvcHMud2lkdGguaW5kZXhPZignJScpICE9PSAtMSA/IHRoaXMucHJvcHMud2lkdGggOiBwYXJzZUludCh0aGlzLnByb3BzLndpZHRoKTtcblx0ICAgICAgICAgICAgdmFyIHRkU3R5bGUgPSB7XG5cdCAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IHRoaXMucHJvcHMuZGF0YUFsaWduLFxuXHQgICAgICAgICAgICAgICAgZGlzcGxheTogdGhpcy5wcm9wcy5oaWRkZW4gPyBcIm5vbmVcIiA6IG51bGwsXG5cdCAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGgsXG5cdCAgICAgICAgICAgICAgICBtYXhXaWR0aDogd2lkdGhcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgdmFyIGNsYXNzbmFtZSA9IHRoaXMucHJvcHMuY2xhc3NOYW1lO1xuXHQgICAgICAgICAgICBpZiAodGhpcy5wcm9wcy53aWR0aCkge1xuXHQgICAgICAgICAgICAgICAgY2xhc3NuYW1lICs9IFwiIGNvbC1tZC1cIiArIHdpZHRoO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICB2YXIgb3B0cyA9IHt9O1xuXHQgICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5jZWxsRWRpdCkge1xuXHQgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuY2VsbEVkaXQubW9kZSA9PSBfQ29uc3QyWydkZWZhdWx0J10uQ0VMTF9FRElUX0NMSUNLKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgb3B0cy5vbkNsaWNrID0gdGhpcy5oYW5kbGVDZWxsRWRpdC5iaW5kKHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLmNlbGxFZGl0Lm1vZGUgPT0gX0NvbnN0MlsnZGVmYXVsdCddLkNFTExfRURJVF9EQkNMSUNLKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgb3B0cy5vbkRvdWJsZUNsaWNrID0gdGhpcy5oYW5kbGVDZWxsRWRpdC5iaW5kKHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICd0ZCcsXG5cdCAgICAgICAgICAgICAgICBfZXh0ZW5kcyh7IHN0eWxlOiB0ZFN0eWxlLCBjbGFzc05hbWU6IGNsYXNzbmFtZSB9LCBvcHRzKSxcblx0ICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY2hpbGRyZW5cblx0ICAgICAgICAgICAgKTtcblx0ICAgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIFRhYmxlQ29sdW1uO1xuXHR9KShfcmVhY3QyWydkZWZhdWx0J10uQ29tcG9uZW50KTtcblx0XG5cdFRhYmxlQ29sdW1uLnByb3BUeXBlcyA9IHtcblx0ICAgIGRhdGFBbGlnbjogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsXG5cdCAgICBoaWRkZW46IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCxcblx0ICAgIGNsYXNzTmFtZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmdcblx0fTtcblx0XG5cdFRhYmxlQ29sdW1uLmRlZmF1bHRQcm9wcyA9IHtcblx0ICAgIGRhdGFBbGlnbjogXCJsZWZ0XCIsXG5cdCAgICBoaWRkZW46IGZhbHNlLFxuXHQgICAgY2xhc3NOYW1lOiBcIlwiXG5cdH07XG5cdGV4cG9ydHNbJ2RlZmF1bHQnXSA9IFRhYmxlQ29sdW1uO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSxcbi8qIDIxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCd2YWx1ZScgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cdFxuXHR2YXIgX2dldCA9IGZ1bmN0aW9uIGdldChfeCwgX3gyLCBfeDMpIHsgdmFyIF9hZ2FpbiA9IHRydWU7IF9mdW5jdGlvbjogd2hpbGUgKF9hZ2FpbikgeyB2YXIgb2JqZWN0ID0gX3gsIHByb3BlcnR5ID0gX3gyLCByZWNlaXZlciA9IF94MzsgX2FnYWluID0gZmFsc2U7IGlmIChvYmplY3QgPT09IG51bGwpIG9iamVjdCA9IEZ1bmN0aW9uLnByb3RvdHlwZTsgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpOyBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7IHZhciBwYXJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsgaWYgKHBhcmVudCA9PT0gbnVsbCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IGVsc2UgeyBfeCA9IHBhcmVudDsgX3gyID0gcHJvcGVydHk7IF94MyA9IHJlY2VpdmVyOyBfYWdhaW4gPSB0cnVlOyBkZXNjID0gcGFyZW50ID0gdW5kZWZpbmVkOyBjb250aW51ZSBfZnVuY3Rpb247IH0gfSBlbHNlIGlmICgndmFsdWUnIGluIGRlc2MpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9IH07XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICdmdW5jdGlvbicgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICcgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9Db25zdCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX0NvbnN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NvbnN0KTtcblx0XG5cdHZhciBfRWRpdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfRWRpdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0VkaXRvcik7XG5cdFxuXHR2YXIgX05vdGlmaWNhdGlvbkpzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdHZhciBfTm90aWZpY2F0aW9uSnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTm90aWZpY2F0aW9uSnMpO1xuXHRcblx0dmFyIF9jbGFzc25hbWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblx0XG5cdHZhciBUYWJsZUVkaXRDb2x1bW4gPSAoZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcblx0ICAgIF9pbmhlcml0cyhUYWJsZUVkaXRDb2x1bW4sIF9SZWFjdCRDb21wb25lbnQpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIFRhYmxlRWRpdENvbHVtbihwcm9wcykge1xuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUYWJsZUVkaXRDb2x1bW4pO1xuXHRcblx0ICAgICAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihUYWJsZUVkaXRDb2x1bW4ucHJvdG90eXBlKSwgJ2NvbnN0cnVjdG9yJywgdGhpcykuY2FsbCh0aGlzLCBwcm9wcyk7XG5cdCAgICAgICAgdGhpcy50aW1lb3V0ZUNsZWFyID0gMDtcblx0ICAgICAgICB0aGlzLnN0YXRlID0ge1xuXHQgICAgICAgICAgICBzaGFrZUVkaXRvcjogZmFsc2Vcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhUYWJsZUVkaXRDb2x1bW4sIFt7XG5cdCAgICAgICAga2V5OiAnaGFuZGxlS2V5UHJlc3MnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVLZXlQcmVzcyhlKSB7XG5cdCAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMTMpIHtcblx0ICAgICAgICAgICAgICAgIC8vUHJlc3NlZCBFTlRFUlxuXHQgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gZS5jdXJyZW50VGFyZ2V0LnR5cGUgPT0gJ2NoZWNrYm94JyA/IHRoaXMuX2dldENoZWNrQm94VmFsdWUoZSkgOiBlLmN1cnJlbnRUYXJnZXQudmFsdWU7XG5cdFxuXHQgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnZhbGlkYXRvcih2YWx1ZSkpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmNvbXBsZXRlRWRpdCh2YWx1ZSwgdGhpcy5wcm9wcy5yb3dJbmRleCwgdGhpcy5wcm9wcy5jb2xJbmRleCk7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09IDI3KSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmNvbXBsZXRlRWRpdChudWxsLCB0aGlzLnByb3BzLnJvd0luZGV4LCB0aGlzLnByb3BzLmNvbEluZGV4KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdoYW5kbGVCbHVyJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQmx1cihlKSB7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmJsdXJUb1NhdmUpIHtcblx0ICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGUuY3VycmVudFRhcmdldC50eXBlID09ICdjaGVja2JveCcgPyB0aGlzLl9nZXRDaGVja0JveFZhbHVlKGUpIDogZS5jdXJyZW50VGFyZ2V0LnZhbHVlO1xuXHQgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnZhbGlkYXRvcih2YWx1ZSkpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmNvbXBsZXRlRWRpdCh2YWx1ZSwgdGhpcy5wcm9wcy5yb3dJbmRleCwgdGhpcy5wcm9wcy5jb2xJbmRleCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAndmFsaWRhdG9yJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsaWRhdG9yKHZhbHVlKSB7XG5cdCAgICAgICAgICAgIHZhciB0cyA9IHRoaXM7XG5cdCAgICAgICAgICAgIGlmICh0cy5wcm9wcy5lZGl0YWJsZS52YWxpZGF0b3IpIHtcblx0ICAgICAgICAgICAgICAgIHZhciB2YWxpZCA9IHRzLnByb3BzLmVkaXRhYmxlLnZhbGlkYXRvcih2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICBpZiAodmFsaWQgIT09IHRydWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0cy5yZWZzLm5vdGlmaWVyLm5vdGljZSgnZXJyb3InLCB2YWxpZCwgXCJQcmVzc2VkIEVTQyBjYW4gY2FuY2VsXCIpO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IHRzLnJlZnMuaW5wdXRSZWY7XG5cdCAgICAgICAgICAgICAgICAgICAgLy9hbmltYXRlIGlucHV0XG5cdCAgICAgICAgICAgICAgICAgICAgdHMuY2xlYXJUaW1lb3V0KCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdHMuc2V0U3RhdGUoeyBzaGFrZUVkaXRvcjogdHJ1ZSB9KTtcblx0ICAgICAgICAgICAgICAgICAgICB0cy50aW1lb3V0ZUNsZWFyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRzLnNldFN0YXRlKHsgc2hha2VFZGl0b3I6IGZhbHNlIH0pO1xuXHQgICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7XG5cdCAgICAgICAgICAgICAgICAgICAgaW5wdXQuZm9jdXMoKTtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2NsZWFyVGltZW91dCcsXG5cdCAgICAgICAgdmFsdWU6IChmdW5jdGlvbiAoX2NsZWFyVGltZW91dCkge1xuXHQgICAgICAgICAgICBmdW5jdGlvbiBjbGVhclRpbWVvdXQoKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gX2NsZWFyVGltZW91dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICBjbGVhclRpbWVvdXQudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gX2NsZWFyVGltZW91dC50b1N0cmluZygpO1xuXHQgICAgICAgICAgICB9O1xuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dDtcblx0ICAgICAgICB9KShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnRpbWVvdXRlQ2xlYXIgIT0gMCkge1xuXHQgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dGVDbGVhcik7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnRpbWVvdXRlQ2xlYXIgPSAwO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSlcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuXHQgICAgICAgICAgICB2YXIgaW5wdXQgPSB0aGlzLnJlZnMuaW5wdXRSZWY7XG5cdCAgICAgICAgICAgIC8vIGlucHV0LnZhbHVlID0gdGhpcy5wcm9wcy5jaGlsZHJlbnx8Jyc7XG5cdCAgICAgICAgICAgIGlucHV0LmZvY3VzKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2NvbXBvbmVudFdpbGxVbm1vdW50Jyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG5cdCAgICAgICAgICAgIHRoaXMuY2xlYXJUaW1lb3V0KCk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ3JlbmRlcicsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgICAgICAgdmFyIGVkaXRhYmxlID0gdGhpcy5wcm9wcy5lZGl0YWJsZSxcblx0ICAgICAgICAgICAgICAgIGZvcm1hdCA9IHRoaXMucHJvcHMuZm9ybWF0LFxuXHQgICAgICAgICAgICAgICAgYXR0ciA9IHtcblx0ICAgICAgICAgICAgICAgIHJlZjogXCJpbnB1dFJlZlwiLFxuXHQgICAgICAgICAgICAgICAgb25LZXlEb3duOiB0aGlzLmhhbmRsZUtleVByZXNzLmJpbmQodGhpcyksXG5cdCAgICAgICAgICAgICAgICBvbkJsdXI6IHRoaXMuaGFuZGxlQmx1ci5iaW5kKHRoaXMpXG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIC8vcHV0IHBsYWNlaG9sZGVyIGlmIGV4aXN0XG5cdCAgICAgICAgICAgIGVkaXRhYmxlLnBsYWNlaG9sZGVyICYmIChhdHRyLnBsYWNlaG9sZGVyID0gZWRpdGFibGUucGxhY2Vob2xkZXIpO1xuXHRcblx0ICAgICAgICAgICAgdmFyIGVkaXRvckNsYXNzID0gKDAsIF9jbGFzc25hbWVzMlsnZGVmYXVsdCddKSh7ICdhbmltYXRlZCc6IHRoaXMuc3RhdGUuc2hha2VFZGl0b3IsICdzaGFrZSc6IHRoaXMuc3RhdGUuc2hha2VFZGl0b3IgfSk7XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICd0ZCcsXG5cdCAgICAgICAgICAgICAgICB7IHJlZjogJ3RkJywgc3R5bGU6IHsgcG9zaXRpb246ICdyZWxhdGl2ZScgfSB9LFxuXHQgICAgICAgICAgICAgICAgKDAsIF9FZGl0b3IyWydkZWZhdWx0J10pKGVkaXRhYmxlLCBhdHRyLCBmb3JtYXQsIGVkaXRvckNsYXNzLCB0aGlzLnByb3BzLmNoaWxkcmVuIHx8ICcnKSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KF9Ob3RpZmljYXRpb25KczJbJ2RlZmF1bHQnXSwgeyByZWY6ICdub3RpZmllcicgfSlcblx0ICAgICAgICAgICAgKTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnX2dldENoZWNrQm94VmFsdWUnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0Q2hlY2tCb3hWYWx1ZShlKSB7XG5cdCAgICAgICAgICAgIHZhciB2YWx1ZSA9ICcnO1xuXHQgICAgICAgICAgICB2YXIgdmFsdWVzID0gZS5jdXJyZW50VGFyZ2V0LnZhbHVlLnNwbGl0KCc6Jyk7XG5cdCAgICAgICAgICAgIHZhbHVlID0gZS5jdXJyZW50VGFyZ2V0LmNoZWNrZWQgPyB2YWx1ZXNbMF0gOiB2YWx1ZXNbMV07XG5cdCAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcblx0ICAgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIFRhYmxlRWRpdENvbHVtbjtcblx0fSkoX3JlYWN0MlsnZGVmYXVsdCddLkNvbXBvbmVudCk7XG5cdFxuXHRUYWJsZUVkaXRDb2x1bW4ucHJvcFR5cGVzID0ge1xuXHQgICAgY29tcGxldGVFZGl0OiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmZ1bmMsXG5cdCAgICByb3dJbmRleDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5udW1iZXIsXG5cdCAgICBjb2xJbmRleDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5udW1iZXIsXG5cdCAgICBibHVyVG9TYXZlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2xcblx0fTtcblx0XG5cdGV4cG9ydHNbJ2RlZmF1bHQnXSA9IFRhYmxlRWRpdENvbHVtbjtcblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0sXG4vKiAyMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblx0XG5cdHZhciBfZ2V0ID0gZnVuY3Rpb24gZ2V0KF94LCBfeDIsIF94MykgeyB2YXIgX2FnYWluID0gdHJ1ZTsgX2Z1bmN0aW9uOiB3aGlsZSAoX2FnYWluKSB7IHZhciBvYmplY3QgPSBfeCwgcHJvcGVydHkgPSBfeDIsIHJlY2VpdmVyID0gX3gzOyBfYWdhaW4gPSBmYWxzZTsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IF94ID0gcGFyZW50OyBfeDIgPSBwcm9wZXJ0eTsgX3gzID0gcmVjZWl2ZXI7IF9hZ2FpbiA9IHRydWU7IGRlc2MgPSBwYXJlbnQgPSB1bmRlZmluZWQ7IGNvbnRpbnVlIF9mdW5jdGlvbjsgfSB9IGVsc2UgaWYgKCd2YWx1ZScgaW4gZGVzYykgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH0gfTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gJ2Z1bmN0aW9uJyAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ1N1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgJyArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgX0NvbnN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfQ29uc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ29uc3QpO1xuXHRcblx0dmFyIF9jbGFzc25hbWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblx0XG5cdHZhciBUYWJsZUZpbHRlciA9IChmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuXHQgIF9pbmhlcml0cyhUYWJsZUZpbHRlciwgX1JlYWN0JENvbXBvbmVudCk7XG5cdFxuXHQgIGZ1bmN0aW9uIFRhYmxlRmlsdGVyKHByb3BzKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGFibGVGaWx0ZXIpO1xuXHRcblx0ICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKFRhYmxlRmlsdGVyLnByb3RvdHlwZSksICdjb25zdHJ1Y3RvcicsIHRoaXMpLmNhbGwodGhpcywgcHJvcHMpO1xuXHQgICAgdGhpcy5maWx0ZXJPYmogPSB7fTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhUYWJsZUZpbHRlciwgW3tcblx0ICAgIGtleTogJ2hhbmRsZUtleVVwJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVLZXlVcChlKSB7XG5cdCAgICAgIGlmIChlLmN1cnJlbnRUYXJnZXQudmFsdWUudHJpbSgpID09PSBcIlwiKSBkZWxldGUgdGhpcy5maWx0ZXJPYmpbZS5jdXJyZW50VGFyZ2V0Lm5hbWVdO2Vsc2UgdGhpcy5maWx0ZXJPYmpbZS5jdXJyZW50VGFyZ2V0Lm5hbWVdID0gZS5jdXJyZW50VGFyZ2V0LnZhbHVlO1xuXHRcblx0ICAgICAgdGhpcy5wcm9wcy5vbkZpbHRlcih0aGlzLmZpbHRlck9iaik7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncmVuZGVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgIHZhciB0YWJsZUNsYXNzZXMgPSAoMCwgX2NsYXNzbmFtZXMyWydkZWZhdWx0J10pKFwidGFibGVcIiwge1xuXHQgICAgICAgICd0YWJsZS1zdHJpcGVkJzogdGhpcy5wcm9wcy5zdHJpcGVkLFxuXHQgICAgICAgICd0YWJsZS1jb25kZW5zZWQnOiB0aGlzLnByb3BzLmNvbmRlbnNlZFxuXHQgICAgICB9KTtcblx0ICAgICAgdmFyIHNlbGVjdFJvd0hlYWRlciA9IG51bGw7XG5cdFxuXHQgICAgICBpZiAodGhpcy5wcm9wcy5yb3dTZWxlY3RUeXBlID09IF9Db25zdDJbJ2RlZmF1bHQnXS5ST1dfU0VMRUNUX1NJTkdMRSB8fCB0aGlzLnByb3BzLnJvd1NlbGVjdFR5cGUgPT0gX0NvbnN0MlsnZGVmYXVsdCddLlJPV19TRUxFQ1RfTVVMVEkpIHtcblx0ICAgICAgICB2YXIgc3R5bGUgPSB7XG5cdCAgICAgICAgICB3aWR0aDogMzUsXG5cdCAgICAgICAgICBwYWRkaW5nTGVmdDogMCxcblx0ICAgICAgICAgIHBhZGRpbmdSaWdodDogMFxuXHQgICAgICAgIH07XG5cdCAgICAgICAgc2VsZWN0Um93SGVhZGVyID0gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAndGgnLFxuXHQgICAgICAgICAgeyBzdHlsZTogc3R5bGUsIGtleTogLTEgfSxcblx0ICAgICAgICAgICdGaWx0ZXInXG5cdCAgICAgICAgKTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgZmlsdGVyRmllbGQgPSB0aGlzLnByb3BzLmNvbHVtbnMubWFwKGZ1bmN0aW9uIChjb2x1bW4pIHtcblx0ICAgICAgICB2YXIgdGhTdHlsZSA9IHtcblx0ICAgICAgICAgIGRpc3BsYXk6IGNvbHVtbi5oaWRkZW4gPyBcIm5vbmVcIiA6IG51bGwsXG5cdCAgICAgICAgICB3aWR0aDogY29sdW1uLndpZHRoXG5cdCAgICAgICAgfTtcblx0ICAgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAndGgnLFxuXHQgICAgICAgICAgeyBrZXk6IGNvbHVtbi5uYW1lLCBzdHlsZTogdGhTdHlsZSB9LFxuXHQgICAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3RoLWlubmVyIHRhYmxlLWhlYWRlci1jb2x1bW4nIH0sXG5cdCAgICAgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgc2l6ZTogJzEwJywgdHlwZTogJ3RleHQnLCBwbGFjZWhvbGRlcjogY29sdW1uLm5hbWUsIG5hbWU6IGNvbHVtbi5uYW1lLCBvbktleVVwOiB0aGlzLmhhbmRsZUtleVVwLmJpbmQodGhpcykgfSlcblx0ICAgICAgICAgIClcblx0ICAgICAgICApO1xuXHQgICAgICB9LCB0aGlzKTtcblx0ICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICd0YWJsZScsXG5cdCAgICAgICAgeyBjbGFzc05hbWU6IHRhYmxlQ2xhc3Nlcywgc3R5bGU6IHsgbWFyZ2luVG9wOiA1IH0gfSxcblx0ICAgICAgICBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICd0aGVhZCcsXG5cdCAgICAgICAgICBudWxsLFxuXHQgICAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICd0cicsXG5cdCAgICAgICAgICAgIHsgc3R5bGU6IHsgYm9yZGVyQm90dG9tU3R5bGU6ICdoaWRkZW4nIH0gfSxcblx0ICAgICAgICAgICAgc2VsZWN0Um93SGVhZGVyLFxuXHQgICAgICAgICAgICBmaWx0ZXJGaWVsZFxuXHQgICAgICAgICAgKVxuXHQgICAgICAgIClcblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBUYWJsZUZpbHRlcjtcblx0fSkoX3JlYWN0MlsnZGVmYXVsdCddLkNvbXBvbmVudCk7XG5cdFxuXHRUYWJsZUZpbHRlci5wcm9wVHlwZXMgPSB7XG5cdCAgY29sdW1uczogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5hcnJheSxcblx0ICByb3dTZWxlY3RUeXBlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZyxcblx0ICBvbkZpbHRlcjogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jXG5cdH07XG5cdGV4cG9ydHNbJ2RlZmF1bHQnXSA9IFRhYmxlRmlsdGVyO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSxcbi8qIDIzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXHRcblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQoX3gsIF94MiwgX3gzKSB7IHZhciBfYWdhaW4gPSB0cnVlOyBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHsgdmFyIG9iamVjdCA9IF94LCBwcm9wZXJ0eSA9IF94MiwgcmVjZWl2ZXIgPSBfeDM7IF9hZ2FpbiA9IGZhbHNlOyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgX3ggPSBwYXJlbnQ7IF94MiA9IHByb3BlcnR5OyBfeDMgPSByZWNlaXZlcjsgX2FnYWluID0gdHJ1ZTsgZGVzYyA9IHBhcmVudCA9IHVuZGVmaW5lZDsgY29udGludWUgX2Z1bmN0aW9uOyB9IH0gZWxzZSBpZiAoJ3ZhbHVlJyBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfSB9O1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAnZnVuY3Rpb24nICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfcmVhY3REb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0dmFyIF9yZWFjdERvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSk7XG5cdFxuXHR2YXIgX0NvbnN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfQ29uc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ29uc3QpO1xuXHRcblx0dmFyIF91dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdHZhciBfdXRpbDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91dGlsKTtcblx0XG5cdHZhciBfY2xhc3NuYW1lcyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX2NsYXNzbmFtZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NuYW1lcyk7XG5cdFxuXHR2YXIgX1NlbGVjdFJvd0hlYWRlckNvbHVtbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0dmFyIF9TZWxlY3RSb3dIZWFkZXJDb2x1bW4yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU2VsZWN0Um93SGVhZGVyQ29sdW1uKTtcblx0XG5cdHZhciBDaGVja2JveCA9IChmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuXHQgIF9pbmhlcml0cyhDaGVja2JveCwgX1JlYWN0JENvbXBvbmVudCk7XG5cdFxuXHQgIGZ1bmN0aW9uIENoZWNrYm94KCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENoZWNrYm94KTtcblx0XG5cdCAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihDaGVja2JveC5wcm90b3R5cGUpLCAnY29uc3RydWN0b3InLCB0aGlzKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKENoZWNrYm94LCBbe1xuXHQgICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuXHQgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnByb3BzLmNoZWNrZWQpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMocHJvcHMpIHtcblx0ICAgICAgdGhpcy51cGRhdGUocHJvcHMuY2hlY2tlZCk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAndXBkYXRlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGUoY2hlY2tlZCkge1xuXHQgICAgICBfcmVhY3REb20yWydkZWZhdWx0J10uZmluZERPTU5vZGUodGhpcykuaW5kZXRlcm1pbmF0ZSA9IGNoZWNrZWQgPT09ICdpbmRldGVybWluYXRlJztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdyZW5kZXInLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgY2xhc3NOYW1lOiAncmVhY3QtYnMtc2VsZWN0LWFsbCcsIHR5cGU6ICdjaGVja2JveCcsIGNoZWNrZWQ6IHRoaXMucHJvcHMuY2hlY2tlZCwgb25DaGFuZ2U6IHRoaXMucHJvcHMub25DaGFuZ2UgfSk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gQ2hlY2tib3g7XG5cdH0pKF9yZWFjdDJbJ2RlZmF1bHQnXS5Db21wb25lbnQpO1xuXHRcblx0dmFyIFRhYmxlSGVhZGVyID0gKGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50Mikge1xuXHQgIF9pbmhlcml0cyhUYWJsZUhlYWRlciwgX1JlYWN0JENvbXBvbmVudDIpO1xuXHRcblx0ICBmdW5jdGlvbiBUYWJsZUhlYWRlcihwcm9wcykge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRhYmxlSGVhZGVyKTtcblx0XG5cdCAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihUYWJsZUhlYWRlci5wcm90b3R5cGUpLCAnY29uc3RydWN0b3InLCB0aGlzKS5jYWxsKHRoaXMsIHByb3BzKTtcblx0ICAgIHRoaXMuc2VsZWN0Um93Q29sdW1uV2lkdGggPSBudWxsO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFRhYmxlSGVhZGVyLCBbe1xuXHQgICAga2V5OiAncmVuZGVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgIHZhciBjb250YWluZXJDbGFzc2VzID0gKDAsIF9jbGFzc25hbWVzMlsnZGVmYXVsdCddKShcInRhYmxlLWhlYWRlclwiKTtcblx0ICAgICAgdmFyIHRhYmxlQ2xhc3NlcyA9ICgwLCBfY2xhc3NuYW1lczJbJ2RlZmF1bHQnXSkoXCJ0YWJsZVwiLCBcInRhYmxlLWhvdmVyXCIsIHtcblx0ICAgICAgICBcInRhYmxlLWJvcmRlcmVkXCI6IHRoaXMucHJvcHMuYm9yZGVyZWQsXG5cdCAgICAgICAgXCJ0YWJsZS1jb25kZW5zZWRcIjogdGhpcy5wcm9wcy5jb25kZW5zZWRcblx0ICAgICAgfSk7XG5cdCAgICAgIHZhciBzZWxlY3RSb3dIZWFkZXJDb2wgPSB0aGlzLnByb3BzLmhpZGVTZWxlY3RDb2x1bW4gPyBudWxsIDogdGhpcy5yZW5kZXJTZWxlY3RSb3dIZWFkZXIoKTtcblx0ICAgICAgdGhpcy5fYXR0YWNoQ2xlYXJTb3J0Q2FyZXRGdW5jKCk7XG5cdFxuXHQgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgeyBjbGFzc05hbWU6ICd0YWJsZS1oZWFkZXItd3JhcHBlcicgfSxcblx0ICAgICAgICBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgeyByZWY6ICdjb250YWluZXInLCBjbGFzc05hbWU6IGNvbnRhaW5lckNsYXNzZXMgfSxcblx0ICAgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAndGFibGUnLFxuXHQgICAgICAgICAgICB7IGNsYXNzTmFtZTogdGFibGVDbGFzc2VzLCBpZDogdGhpcy5wcm9wcy50YWJsZUlEIH0sXG5cdCAgICAgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICd0aGVhZCcsXG5cdCAgICAgICAgICAgICAgbnVsbCxcblx0ICAgICAgICAgICAgICBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICd0cicsXG5cdCAgICAgICAgICAgICAgICB7IHJlZjogJ2hlYWRlcicgfSxcblx0ICAgICAgICAgICAgICAgIHNlbGVjdFJvd0hlYWRlckNvbCxcblx0ICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY2hpbGRyZW5cblx0ICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgIClcblx0ICAgICAgICAgIClcblx0ICAgICAgICApXG5cdCAgICAgICk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncmVuZGVyU2VsZWN0Um93SGVhZGVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJTZWxlY3RSb3dIZWFkZXIoKSB7XG5cdCAgICAgIGlmICh0aGlzLnByb3BzLnJvd1NlbGVjdFR5cGUgPT0gX0NvbnN0MlsnZGVmYXVsdCddLlJPV19TRUxFQ1RfU0lOR0xFKSB7XG5cdCAgICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KF9TZWxlY3RSb3dIZWFkZXJDb2x1bW4yWydkZWZhdWx0J10sIHsgd2lkdGg6IHRoaXMuc2VsZWN0Um93Q29sdW1uV2lkdGggfSk7XG5cdCAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5yb3dTZWxlY3RUeXBlID09IF9Db25zdDJbJ2RlZmF1bHQnXS5ST1dfU0VMRUNUX01VTFRJKSB7XG5cdCAgICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgX1NlbGVjdFJvd0hlYWRlckNvbHVtbjJbJ2RlZmF1bHQnXSxcblx0ICAgICAgICAgIHsgd2lkdGg6IHRoaXMuc2VsZWN0Um93Q29sdW1uV2lkdGggfSxcblx0ICAgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KENoZWNrYm94LCB7IG9uQ2hhbmdlOiB0aGlzLnByb3BzLm9uU2VsZWN0QWxsUm93LCBjaGVja2VkOiB0aGlzLnByb3BzLmlzU2VsZWN0QWxsIH0pXG5cdCAgICAgICAgKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gbnVsbDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ19hdHRhY2hDbGVhclNvcnRDYXJldEZ1bmMnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIF9hdHRhY2hDbGVhclNvcnRDYXJldEZ1bmMoKSB7XG5cdCAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMucHJvcHMuY2hpbGRyZW4pKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnByb3BzLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICB2YXIgZmllbGQgPSB0aGlzLnByb3BzLmNoaWxkcmVuW2ldLnByb3BzLmRhdGFGaWVsZDtcblx0ICAgICAgICAgIHZhciBzb3J0ID0gZmllbGQgPT09IHRoaXMucHJvcHMuc29ydE5hbWUgPyB0aGlzLnByb3BzLnNvcnRPcmRlciA6IHVuZGVmaW5lZDtcblx0ICAgICAgICAgIHRoaXMucHJvcHMuY2hpbGRyZW5baV0gPSBfcmVhY3QyWydkZWZhdWx0J10uY2xvbmVFbGVtZW50KHRoaXMucHJvcHMuY2hpbGRyZW5baV0sIHsga2V5OiBpLCBvblNvcnQ6IHRoaXMucHJvcHMub25Tb3J0LCBzb3J0OiBzb3J0IH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB2YXIgZmllbGQgPSB0aGlzLnByb3BzLmNoaWxkcmVuLnByb3BzLmRhdGFGaWVsZDtcblx0ICAgICAgICB2YXIgc29ydCA9IGZpZWxkID09PSB0aGlzLnByb3BzLnNvcnROYW1lID8gdGhpcy5wcm9wcy5zb3J0T3JkZXIgOiB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlbiA9IF9yZWFjdDJbJ2RlZmF1bHQnXS5jbG9uZUVsZW1lbnQodGhpcy5wcm9wcy5jaGlsZHJlbiwgeyBrZXk6IDAsIG9uU29ydDogdGhpcy5wcm9wcy5vblNvcnQsIHNvcnQ6IHNvcnQgfSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdmaXRIZWFkZXInLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGZpdEhlYWRlcihoZWFkZXJQcm9wcywgaXNWZXJ0aWNhbFNjcm9sbEJhcikge1xuXHQgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnByb3BzLmNoaWxkcmVuKSkge1xuXHQgICAgICAgIHZhciBzdGFydFBvc2l0aW9uID0gKHRoaXMucHJvcHMucm93U2VsZWN0VHlwZSA9PSBfQ29uc3QyWydkZWZhdWx0J10uUk9XX1NFTEVDVF9TSU5HTEUgfHwgdGhpcy5wcm9wcy5yb3dTZWxlY3RUeXBlID09IF9Db25zdDJbJ2RlZmF1bHQnXS5ST1dfU0VMRUNUX01VTFRJKSAmJiAhdGhpcy5wcm9wcy5oaWRlU2VsZWN0Q29sdW1uID8gMSA6IDA7XG5cdCAgICAgICAgaWYgKHN0YXJ0UG9zaXRpb24gPT0gMSkgdGhpcy5zZWxlY3RSb3dDb2x1bW5XaWR0aCA9IGhlYWRlclByb3BzWzBdLndpZHRoO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wcm9wcy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlbltpXSA9IF9yZWFjdDJbJ2RlZmF1bHQnXS5jbG9uZUVsZW1lbnQodGhpcy5wcm9wcy5jaGlsZHJlbltpXSwgeyB3aWR0aDogaGVhZGVyUHJvcHNbaSArIHN0YXJ0UG9zaXRpb25dLndpZHRoICsgXCJweFwiIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLnByb3BzLmNoaWxkcmVuID0gX3JlYWN0MlsnZGVmYXVsdCddLmNsb25lRWxlbWVudCh0aGlzLnByb3BzLmNoaWxkcmVuLCB7IHdpZHRoOiBoZWFkZXJQcm9wc1swXS53aWR0aCArIFwicHhcIiB9KTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAodGhpcy5wcm9wcy5jb25kZW5zZWQgJiYgIXRoaXMucHJvcHMuaXNGaWx0ZXJlZCkge1xuXHQgICAgICAgIHRoaXMucmVmcy5jb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gXCIzNnB4XCI7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xuXHQgICAgICBpZiAoaXNWZXJ0aWNhbFNjcm9sbEJhcikgdGhpcy5yZWZzLmNvbnRhaW5lci5zdHlsZS5tYXJnaW5SaWdodCA9IF91dGlsMlsnZGVmYXVsdCddLmdldFNjcm9sbEJhcldpZHRoKCkgKyBcInB4XCI7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gVGFibGVIZWFkZXI7XG5cdH0pKF9yZWFjdDJbJ2RlZmF1bHQnXS5Db21wb25lbnQpO1xuXHRcblx0VGFibGVIZWFkZXIucHJvcFR5cGVzID0ge1xuXHQgIHJvd1NlbGVjdFR5cGU6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgIG9uU29ydDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLFxuXHQgIG9uU2VsZWN0QWxsUm93OiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmZ1bmMsXG5cdCAgc29ydE5hbWU6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgIHNvcnRPcmRlcjogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsXG5cdCAgaGlkZVNlbGVjdENvbHVtbjogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLFxuXHQgIGJvcmRlcmVkOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsXG5cdCAgY29uZGVuc2VkOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsXG5cdCAgaXNGaWx0ZXJlZDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLFxuXHQgIGlzU2VsZWN0QWxsOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm9uZU9mKFt0cnVlLCAnaW5kZXRlcm1pbmF0ZScsIGZhbHNlXSlcblx0fTtcblx0XG5cdFRhYmxlSGVhZGVyLmRlZmF1bHRQcm9wcyA9IHt9O1xuXHRleHBvcnRzWydkZWZhdWx0J10gPSBUYWJsZUhlYWRlcjtcblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0sXG4vKiAyNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCd2YWx1ZScgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cdFxuXHR2YXIgX2dldCA9IGZ1bmN0aW9uIGdldChfeCwgX3gyLCBfeDMpIHsgdmFyIF9hZ2FpbiA9IHRydWU7IF9mdW5jdGlvbjogd2hpbGUgKF9hZ2FpbikgeyB2YXIgb2JqZWN0ID0gX3gsIHByb3BlcnR5ID0gX3gyLCByZWNlaXZlciA9IF94MzsgX2FnYWluID0gZmFsc2U7IGlmIChvYmplY3QgPT09IG51bGwpIG9iamVjdCA9IEZ1bmN0aW9uLnByb3RvdHlwZTsgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpOyBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7IHZhciBwYXJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsgaWYgKHBhcmVudCA9PT0gbnVsbCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IGVsc2UgeyBfeCA9IHBhcmVudDsgX3gyID0gcHJvcGVydHk7IF94MyA9IHJlY2VpdmVyOyBfYWdhaW4gPSB0cnVlOyBkZXNjID0gcGFyZW50ID0gdW5kZWZpbmVkOyBjb250aW51ZSBfZnVuY3Rpb247IH0gfSBlbHNlIGlmICgndmFsdWUnIGluIGRlc2MpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9IH07XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICdmdW5jdGlvbicgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICcgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9jbGFzc25hbWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblx0XG5cdHZhciBfQ29uc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9Db25zdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Db25zdCk7XG5cdFxuXHR2YXIgX3V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIF91dGlsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3V0aWwpO1xuXHRcblx0dmFyIF9maWx0ZXJzRGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHRcblx0dmFyIF9maWx0ZXJzRGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9maWx0ZXJzRGF0ZSk7XG5cdFxuXHR2YXIgX2ZpbHRlcnNUZXh0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSk7XG5cdFxuXHR2YXIgX2ZpbHRlcnNUZXh0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ZpbHRlcnNUZXh0KTtcblx0XG5cdHZhciBfZmlsdGVyc1NlbGVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHRcblx0dmFyIF9maWx0ZXJzU2VsZWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ZpbHRlcnNTZWxlY3QpO1xuXHRcblx0dmFyIF9maWx0ZXJzTnVtYmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cdFxuXHR2YXIgX2ZpbHRlcnNOdW1iZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZmlsdGVyc051bWJlcik7XG5cdFxuXHR2YXIgVGFibGVIZWFkZXJDb2x1bW4gPSAoZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcblx0ICBfaW5oZXJpdHMoVGFibGVIZWFkZXJDb2x1bW4sIF9SZWFjdCRDb21wb25lbnQpO1xuXHRcblx0ICBmdW5jdGlvbiBUYWJsZUhlYWRlckNvbHVtbihwcm9wcykge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRhYmxlSGVhZGVyQ29sdW1uKTtcblx0XG5cdCAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihUYWJsZUhlYWRlckNvbHVtbi5wcm90b3R5cGUpLCAnY29uc3RydWN0b3InLCB0aGlzKS5jYWxsKHRoaXMsIHByb3BzKTtcblx0ICAgIHRoaXMuaGFuZGxlRmlsdGVyID0gdGhpcy5oYW5kbGVGaWx0ZXIuYmluZCh0aGlzKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhUYWJsZUhlYWRlckNvbHVtbiwgW3tcblx0ICAgIGtleTogJ2hhbmRsZUNvbHVtbkNsaWNrJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDb2x1bW5DbGljayhlKSB7XG5cdCAgICAgIGlmICghdGhpcy5wcm9wcy5kYXRhU29ydCkgcmV0dXJuO1xuXHQgICAgICB2YXIgb3JkZXIgPSB0aGlzLnByb3BzLnNvcnQgPT0gX0NvbnN0MlsnZGVmYXVsdCddLlNPUlRfREVTQyA/IF9Db25zdDJbJ2RlZmF1bHQnXS5TT1JUX0FTQyA6IF9Db25zdDJbJ2RlZmF1bHQnXS5TT1JUX0RFU0M7XG5cdCAgICAgIHRoaXMucHJvcHMub25Tb3J0KG9yZGVyLCB0aGlzLnByb3BzLmRhdGFGaWVsZCk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnaGFuZGxlRmlsdGVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVGaWx0ZXIodmFsdWUsIHR5cGUpIHtcblx0ICAgICAgdGhpcy5wcm9wcy5maWx0ZXIuZW1pdHRlci5oYW5kbGVGaWx0ZXIodGhpcy5wcm9wcy5kYXRhRmllbGQsIHZhbHVlLCB0eXBlKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdnZXRGaWx0ZXJzJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRGaWx0ZXJzKCkge1xuXHQgICAgICBzd2l0Y2ggKHRoaXMucHJvcHMuZmlsdGVyLnR5cGUpIHtcblx0ICAgICAgICBjYXNlIF9Db25zdDJbJ2RlZmF1bHQnXS5GSUxURVJfVFlQRS5URVhUOlxuXHQgICAgICAgICAge1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoX2ZpbHRlcnNUZXh0MlsnZGVmYXVsdCddLCBfZXh0ZW5kcyh7fSwgdGhpcy5wcm9wcy5maWx0ZXIsIHsgY29sdW1uTmFtZTogdGhpcy5wcm9wcy5jaGlsZHJlbiwgZmlsdGVySGFuZGxlcjogdGhpcy5oYW5kbGVGaWx0ZXIgfSkpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIGNhc2UgX0NvbnN0MlsnZGVmYXVsdCddLkZJTFRFUl9UWVBFLlNFTEVDVDpcblx0ICAgICAgICAgIHtcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KF9maWx0ZXJzU2VsZWN0MlsnZGVmYXVsdCddLCBfZXh0ZW5kcyh7fSwgdGhpcy5wcm9wcy5maWx0ZXIsIHsgY29sdW1uTmFtZTogdGhpcy5wcm9wcy5jaGlsZHJlbixcblx0ICAgICAgICAgICAgICBmaWx0ZXJIYW5kbGVyOiB0aGlzLmhhbmRsZUZpbHRlciB9KSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgY2FzZSBfQ29uc3QyWydkZWZhdWx0J10uRklMVEVSX1RZUEUuTlVNQkVSOlxuXHQgICAgICAgICAge1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoX2ZpbHRlcnNOdW1iZXIyWydkZWZhdWx0J10sIF9leHRlbmRzKHt9LCB0aGlzLnByb3BzLmZpbHRlciwgeyBjb2x1bW5OYW1lOiB0aGlzLnByb3BzLmNoaWxkcmVuLFxuXHQgICAgICAgICAgICAgIGZpbHRlckhhbmRsZXI6IHRoaXMuaGFuZGxlRmlsdGVyIH0pKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICBjYXNlIF9Db25zdDJbJ2RlZmF1bHQnXS5GSUxURVJfVFlQRS5EQVRFOlxuXHQgICAgICAgICAge1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoX2ZpbHRlcnNEYXRlMlsnZGVmYXVsdCddLCBfZXh0ZW5kcyh7fSwgdGhpcy5wcm9wcy5maWx0ZXIsIHsgY29sdW1uTmFtZTogdGhpcy5wcm9wcy5jaGlsZHJlbiwgZmlsdGVySGFuZGxlcjogdGhpcy5oYW5kbGVGaWx0ZXIgfSkpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIGNhc2UgX0NvbnN0MlsnZGVmYXVsdCddLkZJTFRFUl9UWVBFLkNVU1RPTTpcblx0ICAgICAgICAgIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuZmlsdGVyLmdldEVsZW1lbnQodGhpcy5oYW5kbGVGaWx0ZXIsIHRoaXMucHJvcHMuZmlsdGVyLmN1c3RvbUZpbHRlclBhcmFtZXRlcnMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuXHQgICAgICB0aGlzLnJlZnMuaW5uZXJEaXYuc2V0QXR0cmlidXRlKFwiZGF0YS1maWVsZFwiLCB0aGlzLnByb3BzLmRhdGFGaWVsZCk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncmVuZGVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgIHZhciB3aWR0aCA9IHRoaXMucHJvcHMud2lkdGggIT09IG51bGwgPyBwYXJzZUludCh0aGlzLnByb3BzLndpZHRoKSA6IG51bGw7XG5cdCAgICAgIHZhciB0aFN0eWxlID0ge1xuXHQgICAgICAgIHRleHRBbGlnbjogdGhpcy5wcm9wcy5kYXRhQWxpZ24sXG5cdCAgICAgICAgZGlzcGxheTogdGhpcy5wcm9wcy5oaWRkZW4gPyBcIm5vbmVcIiA6IG51bGwsXG5cdCAgICAgICAgd2lkdGg6IHdpZHRoLFxuXHQgICAgICAgIG1heFdpZHRoOiB3aWR0aFxuXHQgICAgICB9O1xuXHRcblx0ICAgICAgdmFyIGRlZmF1bHRDYXJldCA9ICF0aGlzLnByb3BzLmRhdGFTb3J0ID8gbnVsbCA6IF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICdzcGFuJyxcblx0ICAgICAgICB7IGNsYXNzTmFtZTogJ29yZGVyJyB9LFxuXHQgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgJ3NwYW4nLFxuXHQgICAgICAgICAgeyBjbGFzc05hbWU6ICdkcm9wZG93bicgfSxcblx0ICAgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdjYXJldCcsIHN0eWxlOiB7IG1hcmdpbjogJzEwcHggMCAxMHB4IDVweCcsIGNvbG9yOiAnI2NjYycgfSB9KVxuXHQgICAgICAgICksXG5cdCAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAnc3BhbicsXG5cdCAgICAgICAgICB7IGNsYXNzTmFtZTogJ2Ryb3B1cCcgfSxcblx0ICAgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdjYXJldCcsIHN0eWxlOiB7IG1hcmdpbjogJzEwcHggMCcsIGNvbG9yOiAnI2NjYycgfSB9KVxuXHQgICAgICAgIClcblx0ICAgICAgKTtcblx0ICAgICAgdmFyIHNvcnRDYXJldCA9IHRoaXMucHJvcHMuc29ydCA/IF91dGlsMlsnZGVmYXVsdCddLnJlbmRlclJlYWN0U29ydENhcmV0KHRoaXMucHJvcHMuc29ydCkgOiBkZWZhdWx0Q2FyZXQ7XG5cdFxuXHQgICAgICB2YXIgY2xhc3NlcyA9IHRoaXMucHJvcHMuY2xhc3NOYW1lICsgXCIgXCIgKyAodGhpcy5wcm9wcy5kYXRhU29ydCA/IFwic29ydC1jb2x1bW5cIiA6IFwiXCIpO1xuXHQgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgJ3RoJyxcblx0ICAgICAgICB7IHJlZjogJ2hlYWRlci1jb2wnLCBjbGFzc05hbWU6IGNsYXNzZXMsIHN0eWxlOiB0aFN0eWxlIH0sXG5cdCAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgIHsgcmVmOiAnaW5uZXJEaXYnLCBjbGFzc05hbWU6ICd0aC1pbm5lciB0YWJsZS1oZWFkZXItY29sdW1uJyxcblx0ICAgICAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVDb2x1bW5DbGljay5iaW5kKHRoaXMpIH0sXG5cdCAgICAgICAgICB0aGlzLnByb3BzLmNoaWxkcmVuLFxuXHQgICAgICAgICAgc29ydENhcmV0XG5cdCAgICAgICAgKSxcblx0ICAgICAgICB0aGlzLnByb3BzLmZpbHRlciA/IHRoaXMuZ2V0RmlsdGVycygpIDogbnVsbFxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFRhYmxlSGVhZGVyQ29sdW1uO1xuXHR9KShfcmVhY3QyWydkZWZhdWx0J10uQ29tcG9uZW50KTtcblx0XG5cdHZhciBmaWx0ZXJUeXBlQXJyYXkgPSBbXTtcblx0Zm9yICh2YXIga2V5IGluIF9Db25zdDJbJ2RlZmF1bHQnXS5GSUxURVJfVFlQRSkge1xuXHQgIGZpbHRlclR5cGVBcnJheS5wdXNoKF9Db25zdDJbJ2RlZmF1bHQnXS5GSUxURVJfVFlQRVtrZXldKTtcblx0fVxuXHRcblx0VGFibGVIZWFkZXJDb2x1bW4ucHJvcFR5cGVzID0ge1xuXHQgIGRhdGFGaWVsZDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsXG5cdCAgZGF0YUFsaWduOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZyxcblx0ICBkYXRhU29ydDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLFxuXHQgIG9uU29ydDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLFxuXHQgIGRhdGFGb3JtYXQ6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYyxcblx0ICBpc0tleTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLFxuXHQgIGVkaXRhYmxlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmFueSxcblx0ICBoaWRkZW46IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCxcblx0ICBoaWRkZW5JblBvcHVwOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsXG5cdCAgc2VhcmNoYWJsZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLFxuXHQgIGNsYXNzTmFtZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsXG5cdCAgd2lkdGg6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgIHNvcnRGdW5jOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmZ1bmMsXG5cdCAgY29sdW1uQ2xhc3NOYW1lOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmFueSxcblx0ICBmaWx0ZXJGb3JtYXR0ZWQ6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCxcblx0ICBzb3J0OiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZyxcblx0ICBmb3JtYXRFeHRyYURhdGE6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYW55LFxuXHQgIGZpbHRlcjogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zaGFwZSh7XG5cdCAgICB0eXBlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm9uZU9mKGZpbHRlclR5cGVBcnJheSksXG5cdCAgICBkZWxheTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5udW1iZXIsXG5cdCAgICBvcHRpb25zOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm9uZU9mVHlwZShbX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5vYmplY3QsIC8vIGZvciBTZWxlY3RGaWx0ZXJcblx0ICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYXJyYXlPZihfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm51bWJlcikgLy9mb3IgTnVtYmVyRmlsdGVyXG5cdCAgICBdKSxcblx0ICAgIG51bWJlckNvbXBhcmF0b3JzOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmFycmF5T2YoX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcpLFxuXHQgICAgZW1pdHRlcjogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5vYmplY3QsXG5cdCAgICBwbGFjZWhvbGRlcjogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsXG5cdCAgICBnZXRFbGVtZW50OiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmZ1bmMsXG5cdCAgICBjdXN0b21GaWx0ZXJQYXJhbWV0ZXJzOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm9iamVjdFxuXHQgIH0pXG5cdH07XG5cdFxuXHRUYWJsZUhlYWRlckNvbHVtbi5kZWZhdWx0UHJvcHMgPSB7XG5cdCAgZGF0YUFsaWduOiBcImxlZnRcIixcblx0ICBkYXRhU29ydDogZmFsc2UsXG5cdCAgZGF0YUZvcm1hdDogdW5kZWZpbmVkLFxuXHQgIGlzS2V5OiBmYWxzZSxcblx0ICBlZGl0YWJsZTogdHJ1ZSxcblx0ICBvblNvcnQ6IHVuZGVmaW5lZCxcblx0ICBoaWRkZW46IGZhbHNlLFxuXHQgIGhpZGRlbkluUG9wdXA6IGZhbHNlLFxuXHQgIHNlYXJjaGFibGU6IHRydWUsXG5cdCAgY2xhc3NOYW1lOiBcIlwiLFxuXHQgIHdpZHRoOiBudWxsLFxuXHQgIHNvcnRGdW5jOiB1bmRlZmluZWQsXG5cdCAgY29sdW1uQ2xhc3NOYW1lOiAnJyxcblx0ICBmaWx0ZXJGb3JtYXR0ZWQ6IGZhbHNlLFxuXHQgIHNvcnQ6IHVuZGVmaW5lZCxcblx0ICBmb3JtYXRFeHRyYURhdGE6IHVuZGVmaW5lZCxcblx0ICBmaWx0ZXI6IHVuZGVmaW5lZFxuXHR9O1xuXHRcblx0ZXhwb3J0c1snZGVmYXVsdCddID0gVGFibGVIZWFkZXJDb2x1bW47XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9LFxuLyogMjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXHRcblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQoX3gsIF94MiwgX3gzKSB7IHZhciBfYWdhaW4gPSB0cnVlOyBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHsgdmFyIG9iamVjdCA9IF94LCBwcm9wZXJ0eSA9IF94MiwgcmVjZWl2ZXIgPSBfeDM7IF9hZ2FpbiA9IGZhbHNlOyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgX3ggPSBwYXJlbnQ7IF94MiA9IHByb3BlcnR5OyBfeDMgPSByZWNlaXZlcjsgX2FnYWluID0gdHJ1ZTsgZGVzYyA9IHBhcmVudCA9IHVuZGVmaW5lZDsgY29udGludWUgX2Z1bmN0aW9uOyB9IH0gZWxzZSBpZiAoJ3ZhbHVlJyBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfSB9O1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAnZnVuY3Rpb24nICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfQ29uc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9Db25zdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Db25zdCk7XG5cdFxuXHR2YXIgVGFibGVSb3cgPSAoZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcblx0ICBfaW5oZXJpdHMoVGFibGVSb3csIF9SZWFjdCRDb21wb25lbnQpO1xuXHRcblx0ICBmdW5jdGlvbiBUYWJsZVJvdyhwcm9wcykge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRhYmxlUm93KTtcblx0XG5cdCAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihUYWJsZVJvdy5wcm90b3R5cGUpLCAnY29uc3RydWN0b3InLCB0aGlzKS5jYWxsKHRoaXMsIHByb3BzKTtcblx0ICAgIHRoaXMuY2xpY2tOdW0gPSAwO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFRhYmxlUm93LCBbe1xuXHQgICAga2V5OiAncm93Q2xpY2snLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHJvd0NsaWNrKGUpIHtcblx0ICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAgIGlmIChlLnRhcmdldC50YWdOYW1lICE9PSBcIklOUFVUXCIgJiYgZS50YXJnZXQudGFnTmFtZSAhPT0gXCJTRUxFQ1RcIiAmJiBlLnRhcmdldC50YWdOYW1lICE9PSBcIlRFWFRBUkVBXCIpIHtcblx0ICAgICAgICAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgdmFyIHJvd0luZGV4ID0gZS5jdXJyZW50VGFyZ2V0LnJvd0luZGV4O1xuXHQgICAgICAgICAgaWYgKF90aGlzLnByb3BzLnNlbGVjdFJvdykge1xuXHQgICAgICAgICAgICBpZiAoX3RoaXMucHJvcHMuc2VsZWN0Um93LmNsaWNrVG9TZWxlY3QpIHtcblx0ICAgICAgICAgICAgICBfdGhpcy5wcm9wcy5vblNlbGVjdFJvdyhyb3dJbmRleCwgIV90aGlzLnByb3BzLmlzU2VsZWN0ZWQpO1xuXHQgICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLnByb3BzLnNlbGVjdFJvdy5jbGlja1RvU2VsZWN0QW5kRWRpdENlbGwpIHtcblx0ICAgICAgICAgICAgICBfdGhpcy5jbGlja051bSsrO1xuXHQgICAgICAgICAgICAgIC8qKiBpZiBjbGlja1RvU2VsZWN0QW5kRWRpdENlbGwgaXMgZW5hYmxlZCxcclxuXHQgICAgICAgICAgICAgICAqICB0aGVyZSBzaG91bGQgYmUgYSBkZWxheSB0byBwcmV2ZW50IGEgc2VsZWN0aW9uIGNoYW5nZWQgd2hlblxyXG5cdCAgICAgICAgICAgICAgICogIHVzZXIgZGJsaWNrIHRvIGVkaXQgY2VsbCBvbiBzYW1lIHJvdyBidXQgZGlmZmVyZW50IGNlbGxcclxuXHQgICAgICAgICAgICAgICoqL1xuXHQgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgaWYgKF90aGlzLmNsaWNrTnVtID09PSAxKSB7XG5cdCAgICAgICAgICAgICAgICAgIF90aGlzLnByb3BzLm9uU2VsZWN0Um93KHJvd0luZGV4LCAhX3RoaXMucHJvcHMuaXNTZWxlY3RlZCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBfdGhpcy5jbGlja051bSA9IDA7XG5cdCAgICAgICAgICAgICAgfSwgMjAwKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgaWYgKF90aGlzLnByb3BzLm9uUm93Q2xpY2spIF90aGlzLnByb3BzLm9uUm93Q2xpY2socm93SW5kZXgpO1xuXHQgICAgICAgIH0pKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdyb3dNb3VzZU91dCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcm93TW91c2VPdXQoZSkge1xuXHQgICAgICBpZiAodGhpcy5wcm9wcy5vblJvd01vdXNlT3V0KSB7XG5cdCAgICAgICAgdGhpcy5wcm9wcy5vblJvd01vdXNlT3V0KGUuY3VycmVudFRhcmdldC5yb3dJbmRleCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdyb3dNb3VzZU92ZXInLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHJvd01vdXNlT3ZlcihlKSB7XG5cdCAgICAgIGlmICh0aGlzLnByb3BzLm9uUm93TW91c2VPdmVyKSB7XG5cdCAgICAgICAgdGhpcy5wcm9wcy5vblJvd01vdXNlT3ZlcihlLmN1cnJlbnRUYXJnZXQucm93SW5kZXgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncmVuZGVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgIHRoaXMuY2xpY2tOdW0gPSAwO1xuXHQgICAgICB2YXIgdHJDc3MgPSB7XG5cdCAgICAgICAgc3R5bGU6IHtcblx0ICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogdGhpcy5wcm9wcy5pc1NlbGVjdGVkID8gdGhpcy5wcm9wcy5zZWxlY3RSb3cuYmdDb2xvciA6IG51bGxcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGNsYXNzTmFtZTogKHRoaXMucHJvcHMuaXNTZWxlY3RlZCAmJiB0aGlzLnByb3BzLnNlbGVjdFJvdy5jbGFzc05hbWUgPyB0aGlzLnByb3BzLnNlbGVjdFJvdy5jbGFzc05hbWUgOiAnJykgKyAodGhpcy5wcm9wcy5jbGFzc05hbWUgfHwgJycpXG5cdCAgICAgIH07XG5cdFxuXHQgICAgICBpZiAodGhpcy5wcm9wcy5zZWxlY3RSb3cgJiYgKHRoaXMucHJvcHMuc2VsZWN0Um93LmNsaWNrVG9TZWxlY3QgfHwgdGhpcy5wcm9wcy5zZWxlY3RSb3cuY2xpY2tUb1NlbGVjdEFuZEVkaXRDZWxsKSB8fCB0aGlzLnByb3BzLm9uUm93Q2xpY2spIHtcblx0ICAgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAndHInLFxuXHQgICAgICAgICAgX2V4dGVuZHMoe30sIHRyQ3NzLCB7XG5cdCAgICAgICAgICAgIG9uTW91c2VPdmVyOiB0aGlzLnJvd01vdXNlT3Zlci5iaW5kKHRoaXMpLFxuXHQgICAgICAgICAgICBvbk1vdXNlT3V0OiB0aGlzLnJvd01vdXNlT3V0LmJpbmQodGhpcyksXG5cdCAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucm93Q2xpY2suYmluZCh0aGlzKSB9KSxcblx0ICAgICAgICAgIHRoaXMucHJvcHMuY2hpbGRyZW5cblx0ICAgICAgICApO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICd0cicsXG5cdCAgICAgICAgICB0ckNzcyxcblx0ICAgICAgICAgIHRoaXMucHJvcHMuY2hpbGRyZW5cblx0ICAgICAgICApO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gVGFibGVSb3c7XG5cdH0pKF9yZWFjdDJbJ2RlZmF1bHQnXS5Db21wb25lbnQpO1xuXHRcblx0VGFibGVSb3cucHJvcFR5cGVzID0ge1xuXHQgIGlzU2VsZWN0ZWQ6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCxcblx0ICBlbmFibGVDZWxsRWRpdDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLFxuXHQgIG9uUm93Q2xpY2s6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYyxcblx0ICBvblNlbGVjdFJvdzogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLFxuXHQgIG9uUm93TW91c2VPdXQ6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYyxcblx0ICBvblJvd01vdXNlT3ZlcjogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jXG5cdH07XG5cdFRhYmxlUm93LmRlZmF1bHRQcm9wcyA9IHtcblx0ICBvblJvd0NsaWNrOiB1bmRlZmluZWRcblx0fTtcblx0ZXhwb3J0c1snZGVmYXVsdCddID0gVGFibGVSb3c7XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9LFxuLyogMjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0aWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgdmFyIGZpbGVzYXZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHQgIHZhciBzYXZlQXMgPSBmaWxlc2F2ZXIuc2F2ZUFzO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB0b1N0cmluZyhkYXRhLCBrZXlzKSB7XG5cdCAgdmFyIGRhdGFTdHJpbmcgPSBcIlwiO1xuXHQgIGlmIChkYXRhLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGRhdGFTdHJpbmc7XG5cdFxuXHQgIGRhdGFTdHJpbmcgKz0ga2V5cy5qb2luKCcsJykgKyAnXFxuJztcblx0XG5cdCAgZGF0YS5tYXAoZnVuY3Rpb24gKHJvdykge1xuXHQgICAga2V5cy5tYXAoZnVuY3Rpb24gKGNvbCwgaSkge1xuXHQgICAgICB2YXIgY2VsbCA9IHR5cGVvZiByb3dbY29sXSAhPT0gJ3VuZGVmaW5lZCcgPyAnXCInICsgcm93W2NvbF0gKyAnXCInIDogXCJcIjtcblx0ICAgICAgZGF0YVN0cmluZyArPSBjZWxsO1xuXHQgICAgICBpZiAoaSArIDEgPCBrZXlzLmxlbmd0aCkgZGF0YVN0cmluZyArPSAnLCc7XG5cdCAgICB9KTtcblx0XG5cdCAgICBkYXRhU3RyaW5nICs9ICdcXG4nO1xuXHQgIH0pO1xuXHRcblx0ICByZXR1cm4gZGF0YVN0cmluZztcblx0fTtcblx0XG5cdHZhciBleHBvcnRDU1YgPSBmdW5jdGlvbiBleHBvcnRDU1YoZGF0YSwga2V5cywgZmlsZW5hbWUpIHtcblx0ICB2YXIgZGF0YVN0cmluZyA9IHRvU3RyaW5nKGRhdGEsIGtleXMpO1xuXHQgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgc2F2ZUFzKG5ldyBCbG9iKFtkYXRhU3RyaW5nXSwgeyB0eXBlOiBcInRleHQvcGxhaW47Y2hhcnNldD11dGYtOFwiIH0pLCBmaWxlbmFtZSB8fCAnc3ByZWFkc2hlZXQuY3N2Jyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZXhwb3J0c1snZGVmYXVsdCddID0gZXhwb3J0Q1NWO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSxcbi8qIDI3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187LyogRmlsZVNhdmVyLmpzXHJcblx0ICogQSBzYXZlQXMoKSBGaWxlU2F2ZXIgaW1wbGVtZW50YXRpb24uXHJcblx0ICogMS4xLjIwMTUxMDAzXHJcblx0ICpcclxuXHQgKiBCeSBFbGkgR3JleSwgaHR0cDovL2VsaWdyZXkuY29tXHJcblx0ICogTGljZW5zZTogTUlUXHJcblx0ICogICBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2VsaWdyZXkvRmlsZVNhdmVyLmpzL2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWRcclxuXHQgKi9cblx0XG5cdC8qZ2xvYmFsIHNlbGYgKi9cblx0Lypqc2xpbnQgYml0d2lzZTogdHJ1ZSwgaW5kZW50OiA0LCBsYXhicmVhazogdHJ1ZSwgbGF4Y29tbWE6IHRydWUsIHNtYXJ0dGFiczogdHJ1ZSwgcGx1c3BsdXM6IHRydWUgKi9cblx0XG5cdC8qISBAc291cmNlIGh0dHA6Ly9wdXJsLmVsaWdyZXkuY29tL2dpdGh1Yi9GaWxlU2F2ZXIuanMvYmxvYi9tYXN0ZXIvRmlsZVNhdmVyLmpzICovXG5cdFxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdHZhciBzYXZlQXMgPSBzYXZlQXMgfHwgKGZ1bmN0aW9uICh2aWV3KSB7XG5cdFx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFx0Ly8gSUUgPDEwIGlzIGV4cGxpY2l0bHkgdW5zdXBwb3J0ZWRcblx0XHRpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJiAvTVNJRSBbMS05XVxcLi8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR2YXIgZG9jID0gdmlldy5kb2N1bWVudCxcblx0XHQgICBcblx0XHQvLyBvbmx5IGdldCBVUkwgd2hlbiBuZWNlc3NhcnkgaW4gY2FzZSBCbG9iLmpzIGhhc24ndCBvdmVycmlkZGVuIGl0IHlldFxuXHRcdGdldF9VUkwgPSBmdW5jdGlvbiBnZXRfVVJMKCkge1xuXHRcdFx0cmV0dXJuIHZpZXcuVVJMIHx8IHZpZXcud2Via2l0VVJMIHx8IHZpZXc7XG5cdFx0fSxcblx0XHQgICAgc2F2ZV9saW5rID0gZG9jLmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIiwgXCJhXCIpLFxuXHRcdCAgICBjYW5fdXNlX3NhdmVfbGluayA9IChcImRvd25sb2FkXCIgaW4gc2F2ZV9saW5rKSxcblx0XHQgICAgY2xpY2sgPSBmdW5jdGlvbiBjbGljayhub2RlKSB7XG5cdFx0XHR2YXIgZXZlbnQgPSBuZXcgTW91c2VFdmVudChcImNsaWNrXCIpO1xuXHRcdFx0bm9kZS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcblx0XHR9LFxuXHRcdCAgICBpc19zYWZhcmkgPSAvVmVyc2lvblxcL1tcXGRcXC5dKy4qU2FmYXJpLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLFxuXHRcdCAgICB3ZWJraXRfcmVxX2ZzID0gdmlldy53ZWJraXRSZXF1ZXN0RmlsZVN5c3RlbSxcblx0XHQgICAgcmVxX2ZzID0gdmlldy5yZXF1ZXN0RmlsZVN5c3RlbSB8fCB3ZWJraXRfcmVxX2ZzIHx8IHZpZXcubW96UmVxdWVzdEZpbGVTeXN0ZW0sXG5cdFx0ICAgIHRocm93X291dHNpZGUgPSBmdW5jdGlvbiB0aHJvd19vdXRzaWRlKGV4KSB7XG5cdFx0XHQodmlldy5zZXRJbW1lZGlhdGUgfHwgdmlldy5zZXRUaW1lb3V0KShmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHRocm93IGV4O1xuXHRcdFx0fSwgMCk7XG5cdFx0fSxcblx0XHQgICAgZm9yY2Vfc2F2ZWFibGVfdHlwZSA9IFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCIsXG5cdFx0ICAgIGZzX21pbl9zaXplID0gMCxcblx0XHQgICBcblx0XHQvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTM3NTI5NyNjNyBhbmRcblx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vZWxpZ3JleS9GaWxlU2F2ZXIuanMvY29tbWl0LzQ4NTkzMGEjY29tbWl0Y29tbWVudC04NzY4MDQ3XG5cdFx0Ly8gZm9yIHRoZSByZWFzb25pbmcgYmVoaW5kIHRoZSB0aW1lb3V0IGFuZCByZXZvY2F0aW9uIGZsb3dcblx0XHRhcmJpdHJhcnlfcmV2b2tlX3RpbWVvdXQgPSA1MDAsXG5cdFx0ICAgIC8vIGluIG1zXG5cdFx0cmV2b2tlID0gZnVuY3Rpb24gcmV2b2tlKGZpbGUpIHtcblx0XHRcdHZhciByZXZva2VyID0gZnVuY3Rpb24gcmV2b2tlcigpIHtcblx0XHRcdFx0aWYgKHR5cGVvZiBmaWxlID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRcdFx0Ly8gZmlsZSBpcyBhbiBvYmplY3QgVVJMXG5cdFx0XHRcdFx0Z2V0X1VSTCgpLnJldm9rZU9iamVjdFVSTChmaWxlKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBmaWxlIGlzIGEgRmlsZVxuXHRcdFx0XHRcdGZpbGUucmVtb3ZlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRpZiAodmlldy5jaHJvbWUpIHtcblx0XHRcdFx0cmV2b2tlcigpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c2V0VGltZW91dChyZXZva2VyLCBhcmJpdHJhcnlfcmV2b2tlX3RpbWVvdXQpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0ICAgIGRpc3BhdGNoID0gZnVuY3Rpb24gZGlzcGF0Y2goZmlsZXNhdmVyLCBldmVudF90eXBlcywgZXZlbnQpIHtcblx0XHRcdGV2ZW50X3R5cGVzID0gW10uY29uY2F0KGV2ZW50X3R5cGVzKTtcblx0XHRcdHZhciBpID0gZXZlbnRfdHlwZXMubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKGktLSkge1xuXHRcdFx0XHR2YXIgbGlzdGVuZXIgPSBmaWxlc2F2ZXJbXCJvblwiICsgZXZlbnRfdHlwZXNbaV1dO1xuXHRcdFx0XHRpZiAodHlwZW9mIGxpc3RlbmVyID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0bGlzdGVuZXIuY2FsbChmaWxlc2F2ZXIsIGV2ZW50IHx8IGZpbGVzYXZlcik7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXgpIHtcblx0XHRcdFx0XHRcdHRocm93X291dHNpZGUoZXgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0ICAgIGF1dG9fYm9tID0gZnVuY3Rpb24gYXV0b19ib20oYmxvYikge1xuXHRcdFx0Ly8gcHJlcGVuZCBCT00gZm9yIFVURi04IFhNTCBhbmQgdGV4dC8qIHR5cGVzIChpbmNsdWRpbmcgSFRNTClcblx0XHRcdGlmICgvXlxccyooPzp0ZXh0XFwvXFxTKnxhcHBsaWNhdGlvblxcL3htbHxcXFMqXFwvXFxTKlxcK3htbClcXHMqOy4qY2hhcnNldFxccyo9XFxzKnV0Zi04L2kudGVzdChibG9iLnR5cGUpKSB7XG5cdFx0XHRcdHJldHVybiBuZXcgQmxvYihbXCLvu79cIiwgYmxvYl0sIHsgdHlwZTogYmxvYi50eXBlIH0pO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGJsb2I7XG5cdFx0fSxcblx0XHQgICAgRmlsZVNhdmVyID0gZnVuY3Rpb24gRmlsZVNhdmVyKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKSB7XG5cdFx0XHRpZiAoIW5vX2F1dG9fYm9tKSB7XG5cdFx0XHRcdGJsb2IgPSBhdXRvX2JvbShibG9iKTtcblx0XHRcdH1cblx0XHRcdC8vIEZpcnN0IHRyeSBhLmRvd25sb2FkLCB0aGVuIHdlYiBmaWxlc3lzdGVtLCB0aGVuIG9iamVjdCBVUkxzXG5cdFx0XHR2YXIgZmlsZXNhdmVyID0gdGhpcyxcblx0XHRcdCAgICB0eXBlID0gYmxvYi50eXBlLFxuXHRcdFx0ICAgIGJsb2JfY2hhbmdlZCA9IGZhbHNlLFxuXHRcdFx0ICAgIG9iamVjdF91cmwsXG5cdFx0XHQgICAgdGFyZ2V0X3ZpZXcsXG5cdFx0XHQgICAgZGlzcGF0Y2hfYWxsID0gZnVuY3Rpb24gZGlzcGF0Y2hfYWxsKCkge1xuXHRcdFx0XHRkaXNwYXRjaChmaWxlc2F2ZXIsIFwid3JpdGVzdGFydCBwcm9ncmVzcyB3cml0ZSB3cml0ZWVuZFwiLnNwbGl0KFwiIFwiKSk7XG5cdFx0XHR9LFxuXHRcdFx0ICAgXG5cdFx0XHQvLyBvbiBhbnkgZmlsZXN5cyBlcnJvcnMgcmV2ZXJ0IHRvIHNhdmluZyB3aXRoIG9iamVjdCBVUkxzXG5cdFx0XHRmc19lcnJvciA9IGZ1bmN0aW9uIGZzX2Vycm9yKCkge1xuXHRcdFx0XHRpZiAodGFyZ2V0X3ZpZXcgJiYgaXNfc2FmYXJpICYmIHR5cGVvZiBGaWxlUmVhZGVyICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHRcdFx0Ly8gU2FmYXJpIGRvZXNuJ3QgYWxsb3cgZG93bmxvYWRpbmcgb2YgYmxvYiB1cmxzXG5cdFx0XHRcdFx0dmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cdFx0XHRcdFx0cmVhZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdHZhciBiYXNlNjREYXRhID0gcmVhZGVyLnJlc3VsdDtcblx0XHRcdFx0XHRcdHRhcmdldF92aWV3LmxvY2F0aW9uLmhyZWYgPSBcImRhdGE6YXR0YWNobWVudC9maWxlXCIgKyBiYXNlNjREYXRhLnNsaWNlKGJhc2U2NERhdGEuc2VhcmNoKC9bLDtdLykpO1xuXHRcdFx0XHRcdFx0ZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTtcblx0XHRcdFx0XHRcdGRpc3BhdGNoX2FsbCgpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0cmVhZGVyLnJlYWRBc0RhdGFVUkwoYmxvYik7XG5cdFx0XHRcdFx0ZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuSU5JVDtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gZG9uJ3QgY3JlYXRlIG1vcmUgb2JqZWN0IFVSTHMgdGhhbiBuZWVkZWRcblx0XHRcdFx0aWYgKGJsb2JfY2hhbmdlZCB8fCAhb2JqZWN0X3VybCkge1xuXHRcdFx0XHRcdG9iamVjdF91cmwgPSBnZXRfVVJMKCkuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh0YXJnZXRfdmlldykge1xuXHRcdFx0XHRcdHRhcmdldF92aWV3LmxvY2F0aW9uLmhyZWYgPSBvYmplY3RfdXJsO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHZhciBuZXdfdGFiID0gdmlldy5vcGVuKG9iamVjdF91cmwsIFwiX2JsYW5rXCIpO1xuXHRcdFx0XHRcdGlmIChuZXdfdGFiID09IHVuZGVmaW5lZCAmJiBpc19zYWZhcmkpIHtcblx0XHRcdFx0XHRcdC8vQXBwbGUgZG8gbm90IGFsbG93IHdpbmRvdy5vcGVuLCBzZWUgaHR0cDovL2JpdC5seS8xa1pmZlJJXG5cdFx0XHRcdFx0XHR2aWV3LmxvY2F0aW9uLmhyZWYgPSBvYmplY3RfdXJsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5ET05FO1xuXHRcdFx0XHRkaXNwYXRjaF9hbGwoKTtcblx0XHRcdFx0cmV2b2tlKG9iamVjdF91cmwpO1xuXHRcdFx0fSxcblx0XHRcdCAgICBhYm9ydGFibGUgPSBmdW5jdGlvbiBhYm9ydGFibGUoZnVuYykge1xuXHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdGlmIChmaWxlc2F2ZXIucmVhZHlTdGF0ZSAhPT0gZmlsZXNhdmVyLkRPTkUpIHtcblx0XHRcdFx0XHRcdHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdFx0fSxcblx0XHRcdCAgICBjcmVhdGVfaWZfbm90X2ZvdW5kID0geyBjcmVhdGU6IHRydWUsIGV4Y2x1c2l2ZTogZmFsc2UgfSxcblx0XHRcdCAgICBzbGljZTtcblx0XHRcdGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLklOSVQ7XG5cdFx0XHRpZiAoIW5hbWUpIHtcblx0XHRcdFx0bmFtZSA9IFwiZG93bmxvYWRcIjtcblx0XHRcdH1cblx0XHRcdGlmIChjYW5fdXNlX3NhdmVfbGluaykge1xuXHRcdFx0XHRvYmplY3RfdXJsID0gZ2V0X1VSTCgpLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcblx0XHRcdFx0c2F2ZV9saW5rLmhyZWYgPSBvYmplY3RfdXJsO1xuXHRcdFx0XHRzYXZlX2xpbmsuZG93bmxvYWQgPSBuYW1lO1xuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRjbGljayhzYXZlX2xpbmspO1xuXHRcdFx0XHRcdGRpc3BhdGNoX2FsbCgpO1xuXHRcdFx0XHRcdHJldm9rZShvYmplY3RfdXJsKTtcblx0XHRcdFx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5ET05FO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0Ly8gT2JqZWN0IGFuZCB3ZWIgZmlsZXN5c3RlbSBVUkxzIGhhdmUgYSBwcm9ibGVtIHNhdmluZyBpbiBHb29nbGUgQ2hyb21lIHdoZW5cblx0XHRcdC8vIHZpZXdlZCBpbiBhIHRhYiwgc28gSSBmb3JjZSBzYXZlIHdpdGggYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXG5cdFx0XHQvLyBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD05MTE1OFxuXHRcdFx0Ly8gVXBkYXRlOiBHb29nbGUgZXJyYW50bHkgY2xvc2VkIDkxMTU4LCBJIHN1Ym1pdHRlZCBpdCBhZ2Fpbjpcblx0XHRcdC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0zODk2NDJcblx0XHRcdGlmICh2aWV3LmNocm9tZSAmJiB0eXBlICYmIHR5cGUgIT09IGZvcmNlX3NhdmVhYmxlX3R5cGUpIHtcblx0XHRcdFx0c2xpY2UgPSBibG9iLnNsaWNlIHx8IGJsb2Iud2Via2l0U2xpY2U7XG5cdFx0XHRcdGJsb2IgPSBzbGljZS5jYWxsKGJsb2IsIDAsIGJsb2Iuc2l6ZSwgZm9yY2Vfc2F2ZWFibGVfdHlwZSk7XG5cdFx0XHRcdGJsb2JfY2hhbmdlZCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHQvLyBTaW5jZSBJIGNhbid0IGJlIHN1cmUgdGhhdCB0aGUgZ3Vlc3NlZCBtZWRpYSB0eXBlIHdpbGwgdHJpZ2dlciBhIGRvd25sb2FkXG5cdFx0XHQvLyBpbiBXZWJLaXQsIEkgYXBwZW5kIC5kb3dubG9hZCB0byB0aGUgZmlsZW5hbWUuXG5cdFx0XHQvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NjU0NDBcblx0XHRcdGlmICh3ZWJraXRfcmVxX2ZzICYmIG5hbWUgIT09IFwiZG93bmxvYWRcIikge1xuXHRcdFx0XHRuYW1lICs9IFwiLmRvd25sb2FkXCI7XG5cdFx0XHR9XG5cdFx0XHRpZiAodHlwZSA9PT0gZm9yY2Vfc2F2ZWFibGVfdHlwZSB8fCB3ZWJraXRfcmVxX2ZzKSB7XG5cdFx0XHRcdHRhcmdldF92aWV3ID0gdmlldztcblx0XHRcdH1cblx0XHRcdGlmICghcmVxX2ZzKSB7XG5cdFx0XHRcdGZzX2Vycm9yKCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGZzX21pbl9zaXplICs9IGJsb2Iuc2l6ZTtcblx0XHRcdHJlcV9mcyh2aWV3LlRFTVBPUkFSWSwgZnNfbWluX3NpemUsIGFib3J0YWJsZShmdW5jdGlvbiAoZnMpIHtcblx0XHRcdFx0ZnMucm9vdC5nZXREaXJlY3RvcnkoXCJzYXZlZFwiLCBjcmVhdGVfaWZfbm90X2ZvdW5kLCBhYm9ydGFibGUoZnVuY3Rpb24gKGRpcikge1xuXHRcdFx0XHRcdHZhciBzYXZlID0gZnVuY3Rpb24gc2F2ZSgpIHtcblx0XHRcdFx0XHRcdGRpci5nZXRGaWxlKG5hbWUsIGNyZWF0ZV9pZl9ub3RfZm91bmQsIGFib3J0YWJsZShmdW5jdGlvbiAoZmlsZSkge1xuXHRcdFx0XHRcdFx0XHRmaWxlLmNyZWF0ZVdyaXRlcihhYm9ydGFibGUoZnVuY3Rpb24gKHdyaXRlcikge1xuXHRcdFx0XHRcdFx0XHRcdHdyaXRlci5vbndyaXRlZW5kID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0YXJnZXRfdmlldy5sb2NhdGlvbi5ocmVmID0gZmlsZS50b1VSTCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTtcblx0XHRcdFx0XHRcdFx0XHRcdGRpc3BhdGNoKGZpbGVzYXZlciwgXCJ3cml0ZWVuZFwiLCBldmVudCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXZva2UoZmlsZSk7XG5cdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHR3cml0ZXIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciBlcnJvciA9IHdyaXRlci5lcnJvcjtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChlcnJvci5jb2RlICE9PSBlcnJvci5BQk9SVF9FUlIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZnNfZXJyb3IoKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdFwid3JpdGVzdGFydCBwcm9ncmVzcyB3cml0ZSBhYm9ydFwiLnNwbGl0KFwiIFwiKS5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0d3JpdGVyW1wib25cIiArIGV2ZW50XSA9IGZpbGVzYXZlcltcIm9uXCIgKyBldmVudF07XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0d3JpdGVyLndyaXRlKGJsb2IpO1xuXHRcdFx0XHRcdFx0XHRcdGZpbGVzYXZlci5hYm9ydCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHdyaXRlci5hYm9ydCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTtcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLldSSVRJTkc7XG5cdFx0XHRcdFx0XHRcdH0pLCBmc19lcnJvcik7XG5cdFx0XHRcdFx0XHR9KSwgZnNfZXJyb3IpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0ZGlyLmdldEZpbGUobmFtZSwgeyBjcmVhdGU6IGZhbHNlIH0sIGFib3J0YWJsZShmdW5jdGlvbiAoZmlsZSkge1xuXHRcdFx0XHRcdFx0Ly8gZGVsZXRlIGZpbGUgaWYgaXQgYWxyZWFkeSBleGlzdHNcblx0XHRcdFx0XHRcdGZpbGUucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRzYXZlKCk7XG5cdFx0XHRcdFx0fSksIGFib3J0YWJsZShmdW5jdGlvbiAoZXgpIHtcblx0XHRcdFx0XHRcdGlmIChleC5jb2RlID09PSBleC5OT1RfRk9VTkRfRVJSKSB7XG5cdFx0XHRcdFx0XHRcdHNhdmUoKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGZzX2Vycm9yKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSkpO1xuXHRcdFx0XHR9KSwgZnNfZXJyb3IpO1xuXHRcdFx0fSksIGZzX2Vycm9yKTtcblx0XHR9LFxuXHRcdCAgICBGU19wcm90byA9IEZpbGVTYXZlci5wcm90b3R5cGUsXG5cdFx0ICAgIHNhdmVBcyA9IGZ1bmN0aW9uIHNhdmVBcyhibG9iLCBuYW1lLCBub19hdXRvX2JvbSkge1xuXHRcdFx0cmV0dXJuIG5ldyBGaWxlU2F2ZXIoYmxvYiwgbmFtZSwgbm9fYXV0b19ib20pO1xuXHRcdH07XG5cdFx0Ly8gSUUgMTArIChuYXRpdmUgc2F2ZUFzKVxuXHRcdGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiICYmIG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKSB7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24gKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKSB7XG5cdFx0XHRcdGlmICghbm9fYXV0b19ib20pIHtcblx0XHRcdFx0XHRibG9iID0gYXV0b19ib20oYmxvYik7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKGJsb2IsIG5hbWUgfHwgXCJkb3dubG9hZFwiKTtcblx0XHRcdH07XG5cdFx0fVxuXHRcblx0XHRGU19wcm90by5hYm9ydCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciBmaWxlc2F2ZXIgPSB0aGlzO1xuXHRcdFx0ZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTtcblx0XHRcdGRpc3BhdGNoKGZpbGVzYXZlciwgXCJhYm9ydFwiKTtcblx0XHR9O1xuXHRcdEZTX3Byb3RvLnJlYWR5U3RhdGUgPSBGU19wcm90by5JTklUID0gMDtcblx0XHRGU19wcm90by5XUklUSU5HID0gMTtcblx0XHRGU19wcm90by5ET05FID0gMjtcblx0XG5cdFx0RlNfcHJvdG8uZXJyb3IgPSBGU19wcm90by5vbndyaXRlc3RhcnQgPSBGU19wcm90by5vbnByb2dyZXNzID0gRlNfcHJvdG8ub253cml0ZSA9IEZTX3Byb3RvLm9uYWJvcnQgPSBGU19wcm90by5vbmVycm9yID0gRlNfcHJvdG8ub253cml0ZWVuZCA9IG51bGw7XG5cdFxuXHRcdHJldHVybiBzYXZlQXM7XG5cdH0pKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYgfHwgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cgfHwgdW5kZWZpbmVkLmNvbnRlbnQpO1xuXHQvLyBgc2VsZmAgaXMgdW5kZWZpbmVkIGluIEZpcmVmb3ggZm9yIEFuZHJvaWQgY29udGVudCBzY3JpcHQgY29udGV4dFxuXHQvLyB3aGlsZSBgdGhpc2AgaXMgbnNJQ29udGVudEZyYW1lTWVzc2FnZU1hbmFnZXJcblx0Ly8gd2l0aCBhbiBhdHRyaWJ1dGUgYGNvbnRlbnRgIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlIHdpbmRvd1xuXHRcblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cy5zYXZlQXMgPSBzYXZlQXM7XG5cdH0gZWxzZSBpZiAoXCJmdW5jdGlvblwiICE9PSBcInVuZGVmaW5lZFwiICYmIF9fd2VicGFja19yZXF1aXJlX18oNTUpICE9PSBudWxsICYmIF9fd2VicGFja19yZXF1aXJlX18oNTYpICE9IG51bGwpIHtcblx0XHQhKF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18gPSBbXSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gc2F2ZUFzO1xuXHRcdH0uYXBwbHkoZXhwb3J0cywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblx0XG5cdHZhciBfZ2V0ID0gZnVuY3Rpb24gZ2V0KF94LCBfeDIsIF94MykgeyB2YXIgX2FnYWluID0gdHJ1ZTsgX2Z1bmN0aW9uOiB3aGlsZSAoX2FnYWluKSB7IHZhciBvYmplY3QgPSBfeCwgcHJvcGVydHkgPSBfeDIsIHJlY2VpdmVyID0gX3gzOyBfYWdhaW4gPSBmYWxzZTsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IF94ID0gcGFyZW50OyBfeDIgPSBwcm9wZXJ0eTsgX3gzID0gcmVjZWl2ZXI7IF9hZ2FpbiA9IHRydWU7IGRlc2MgPSBwYXJlbnQgPSB1bmRlZmluZWQ7IGNvbnRpbnVlIF9mdW5jdGlvbjsgfSB9IGVsc2UgaWYgKCd2YWx1ZScgaW4gZGVzYykgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH0gfTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gJ2Z1bmN0aW9uJyAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ1N1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgJyArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgX0NvbnN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfQ29uc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ29uc3QpO1xuXHRcblx0dmFyIERhdGVGaWx0ZXIgPSAoZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcblx0ICAgIF9pbmhlcml0cyhEYXRlRmlsdGVyLCBfUmVhY3QkQ29tcG9uZW50KTtcblx0XG5cdCAgICBmdW5jdGlvbiBEYXRlRmlsdGVyKHByb3BzKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERhdGVGaWx0ZXIpO1xuXHRcblx0ICAgICAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihEYXRlRmlsdGVyLnByb3RvdHlwZSksICdjb25zdHJ1Y3RvcicsIHRoaXMpLmNhbGwodGhpcywgcHJvcHMpO1xuXHQgICAgICAgIHRoaXMuZmlsdGVyID0gdGhpcy5maWx0ZXIuYmluZCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoRGF0ZUZpbHRlciwgW3tcblx0ICAgICAgICBrZXk6ICdzZXREZWZhdWx0RGF0ZScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldERlZmF1bHREYXRlKCkge1xuXHQgICAgICAgICAgICB2YXIgZGVmYXVsdERhdGUgPSBcIlwiO1xuXHQgICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5kZWZhdWx0VmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgYXBwcm9wcmlhdGUgZm9ybWF0IGZvciB0aGUgaW5wdXQgdHlwZT1kYXRlLCBpLmUuIFwiWVlZWS1NTS1ERFwiXG5cdCAgICAgICAgICAgICAgICB2YXIgZGVmYXVsdFZhbHVlID0gbmV3IERhdGUodGhpcy5wcm9wcy5kZWZhdWx0VmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgZGVmYXVsdERhdGUgPSBkZWZhdWx0VmFsdWUuZ2V0RnVsbFllYXIoKSArICctJyArIChcIjBcIiArIChkZWZhdWx0VmFsdWUuZ2V0TW9udGgoKSArIDEpKS5zbGljZSgtMikgKyAnLScgKyAoXCIwXCIgKyBkZWZhdWx0VmFsdWUuZ2V0RGF0ZSgpKS5zbGljZSgtMik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHREYXRlO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdmaWx0ZXInLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaWx0ZXIoZXZlbnQpIHtcblx0ICAgICAgICAgICAgdmFyIGRhdGVWYWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcblx0ICAgICAgICAgICAgaWYgKGRhdGVWYWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5maWx0ZXJIYW5kbGVyKG5ldyBEYXRlKGRhdGVWYWx1ZSksIF9Db25zdDJbJ2RlZmF1bHQnXS5GSUxURVJfVFlQRS5EQVRFKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZmlsdGVySGFuZGxlcihudWxsLCBfQ29uc3QyWydkZWZhdWx0J10uRklMVEVSX1RZUEUuREFURSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcblx0ICAgICAgICAgICAgdmFyIGRhdGVWYWx1ZSA9IHRoaXMucmVmcy5pbnB1dERhdGUuZGVmYXVsdFZhbHVlO1xuXHQgICAgICAgICAgICBpZiAoZGF0ZVZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmZpbHRlckhhbmRsZXIobmV3IERhdGUoZGF0ZVZhbHVlKSwgX0NvbnN0MlsnZGVmYXVsdCddLkZJTFRFUl9UWVBFLkRBVEUpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ3JlbmRlcicsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgcmVmOiAnaW5wdXREYXRlJyxcblx0ICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2ZpbHRlciBkYXRlLWZpbHRlciBmb3JtLWNvbnRyb2wnLFxuXHQgICAgICAgICAgICAgICAgdHlwZTogJ2RhdGUnLFxuXHQgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuZmlsdGVyLFxuXHQgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiB0aGlzLnNldERlZmF1bHREYXRlKCkgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBEYXRlRmlsdGVyO1xuXHR9KShfcmVhY3QyWydkZWZhdWx0J10uQ29tcG9uZW50KTtcblx0XG5cdDtcblx0XG5cdERhdGVGaWx0ZXIucHJvcFR5cGVzID0ge1xuXHQgICAgZmlsdGVySGFuZGxlcjogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG5cdCAgICBkZWZhdWx0VmFsdWU6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMub2JqZWN0LFxuXHQgICAgY29sdW1uTmFtZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmdcblx0fTtcblx0XG5cdGV4cG9ydHNbJ2RlZmF1bHQnXSA9IERhdGVGaWx0ZXI7XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9LFxuLyogMjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblx0XG5cdHZhciBfZ2V0ID0gZnVuY3Rpb24gZ2V0KF94LCBfeDIsIF94MykgeyB2YXIgX2FnYWluID0gdHJ1ZTsgX2Z1bmN0aW9uOiB3aGlsZSAoX2FnYWluKSB7IHZhciBvYmplY3QgPSBfeCwgcHJvcGVydHkgPSBfeDIsIHJlY2VpdmVyID0gX3gzOyBfYWdhaW4gPSBmYWxzZTsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IF94ID0gcGFyZW50OyBfeDIgPSBwcm9wZXJ0eTsgX3gzID0gcmVjZWl2ZXI7IF9hZ2FpbiA9IHRydWU7IGRlc2MgPSBwYXJlbnQgPSB1bmRlZmluZWQ7IGNvbnRpbnVlIF9mdW5jdGlvbjsgfSB9IGVsc2UgaWYgKCd2YWx1ZScgaW4gZGVzYykgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH0gfTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gJ2Z1bmN0aW9uJyAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ1N1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgJyArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgX2NsYXNzbmFtZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9jbGFzc25hbWVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzbmFtZXMpO1xuXHRcblx0dmFyIF9Db25zdCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX0NvbnN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NvbnN0KTtcblx0XG5cdHZhciBsZWdhbENvbXBhcmF0b3JzID0gW1wiPVwiLCBcIj5cIiwgXCI+PVwiLCBcIjxcIiwgXCI8PVwiLCBcIiE9XCJdO1xuXHRcblx0dmFyIE51bWJlckZpbHRlciA9IChmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuXHQgICAgX2luaGVyaXRzKE51bWJlckZpbHRlciwgX1JlYWN0JENvbXBvbmVudCk7XG5cdFxuXHQgICAgZnVuY3Rpb24gTnVtYmVyRmlsdGVyKHByb3BzKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE51bWJlckZpbHRlcik7XG5cdFxuXHQgICAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKE51bWJlckZpbHRlci5wcm90b3R5cGUpLCAnY29uc3RydWN0b3InLCB0aGlzKS5jYWxsKHRoaXMsIHByb3BzKTtcblx0ICAgICAgICB0aGlzLm51bWJlckNvbXBhcmF0b3JzID0gdGhpcy5wcm9wcy5udW1iZXJDb21wYXJhdG9ycyB8fCBsZWdhbENvbXBhcmF0b3JzO1xuXHQgICAgICAgIHRoaXMudGltZW91dCA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5zdGF0ZSA9IHtcblx0ICAgICAgICAgICAgaXNQbGFjZWhvbGRlclNlbGVjdGVkOiB0aGlzLnByb3BzLmRlZmF1bHRWYWx1ZSA9PSB1bmRlZmluZWQgfHwgdGhpcy5wcm9wcy5kZWZhdWx0VmFsdWUubnVtYmVyID09IHVuZGVmaW5lZCB8fCB0aGlzLnByb3BzLm9wdGlvbnMgJiYgdGhpcy5wcm9wcy5vcHRpb25zLmluZGV4T2YodGhpcy5wcm9wcy5kZWZhdWx0VmFsdWUubnVtYmVyKSA9PSAtMVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgdGhpcy5vbkNoYW5nZU51bWJlciA9IHRoaXMub25DaGFuZ2VOdW1iZXIuYmluZCh0aGlzKTtcblx0ICAgICAgICB0aGlzLm9uQ2hhbmdlTnVtYmVyU2V0ID0gdGhpcy5vbkNoYW5nZU51bWJlclNldC5iaW5kKHRoaXMpO1xuXHQgICAgICAgIHRoaXMub25DaGFuZ2VDb21wYXJhdG9yID0gdGhpcy5vbkNoYW5nZUNvbXBhcmF0b3IuYmluZCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoTnVtYmVyRmlsdGVyLCBbe1xuXHQgICAgICAgIGtleTogJ29uQ2hhbmdlTnVtYmVyJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25DaGFuZ2VOdW1iZXIoZXZlbnQpIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMucmVmcy5udW1iZXJGaWx0ZXJDb21wYXJhdG9yLnZhbHVlID09PSBcIlwiKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKHRoaXMudGltZW91dCkge1xuXHQgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICAgICAgICB2YXIgZmlsdGVyVmFsdWUgPSBldmVudC50YXJnZXQudmFsdWU7XG5cdCAgICAgICAgICAgIHRoaXMudGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgc2VsZi5wcm9wcy5maWx0ZXJIYW5kbGVyKHsgbnVtYmVyOiBmaWx0ZXJWYWx1ZSwgY29tcGFyYXRvcjogc2VsZi5yZWZzLm51bWJlckZpbHRlckNvbXBhcmF0b3IudmFsdWUgfSwgX0NvbnN0MlsnZGVmYXVsdCddLkZJTFRFUl9UWVBFLk5VTUJFUik7XG5cdCAgICAgICAgICAgIH0sIHNlbGYucHJvcHMuZGVsYXkpO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdvbkNoYW5nZU51bWJlclNldCcsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2hhbmdlTnVtYmVyU2V0KGV2ZW50KSB7XG5cdCAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc1BsYWNlaG9sZGVyU2VsZWN0ZWQ6IGV2ZW50LnRhcmdldC52YWx1ZSA9PT0gXCJcIiB9KTtcblx0ICAgICAgICAgICAgaWYgKHRoaXMucmVmcy5udW1iZXJGaWx0ZXJDb21wYXJhdG9yLnZhbHVlID09PSBcIlwiKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdGhpcy5wcm9wcy5maWx0ZXJIYW5kbGVyKHsgbnVtYmVyOiBldmVudC50YXJnZXQudmFsdWUsIGNvbXBhcmF0b3I6IHRoaXMucmVmcy5udW1iZXJGaWx0ZXJDb21wYXJhdG9yLnZhbHVlIH0sIF9Db25zdDJbJ2RlZmF1bHQnXS5GSUxURVJfVFlQRS5OVU1CRVIpO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdvbkNoYW5nZUNvbXBhcmF0b3InLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNoYW5nZUNvbXBhcmF0b3IoZXZlbnQpIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMucmVmcy5udW1iZXJGaWx0ZXIudmFsdWUgPT09IFwiXCIpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLnByb3BzLmZpbHRlckhhbmRsZXIoeyBudW1iZXI6IHRoaXMucmVmcy5udW1iZXJGaWx0ZXIudmFsdWUsIGNvbXBhcmF0b3I6IGV2ZW50LnRhcmdldC52YWx1ZSB9LCBfQ29uc3QyWydkZWZhdWx0J10uRklMVEVSX1RZUEUuTlVNQkVSKTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnZ2V0Q29tcGFyYXRvck9wdGlvbnMnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDb21wYXJhdG9yT3B0aW9ucygpIHtcblx0ICAgICAgICAgICAgdmFyIG9wdGlvblRhZ3MgPSBbXTtcblx0ICAgICAgICAgICAgb3B0aW9uVGFncy5wdXNoKF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KCdvcHRpb24nLCB7IGtleTogJy0xJyB9KSk7XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5udW1iZXJDb21wYXJhdG9ycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgb3B0aW9uVGFncy5wdXNoKF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdvcHRpb24nLFxuXHQgICAgICAgICAgICAgICAgICAgIHsga2V5OiBpLCB2YWx1ZTogdGhpcy5udW1iZXJDb21wYXJhdG9yc1tpXSB9LFxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMubnVtYmVyQ29tcGFyYXRvcnNbaV1cblx0ICAgICAgICAgICAgICAgICkpO1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICByZXR1cm4gb3B0aW9uVGFncztcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnZ2V0TnVtYmVyT3B0aW9ucycsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE51bWJlck9wdGlvbnMoKSB7XG5cdCAgICAgICAgICAgIHZhciBvcHRpb25UYWdzID0gW107XG5cdCAgICAgICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5wcm9wcy5vcHRpb25zO1xuXHRcblx0ICAgICAgICAgICAgb3B0aW9uVGFncy5wdXNoKF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgJ29wdGlvbicsXG5cdCAgICAgICAgICAgICAgICB7IGtleTogJy0xJywgdmFsdWU6ICcnIH0sXG5cdCAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnBsYWNlaG9sZGVyIHx8ICdTZWxlY3QgJyArIHRoaXMucHJvcHMuY29sdW1uTmFtZSArICcuLi4nXG5cdCAgICAgICAgICAgICkpO1xuXHQgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgICAgIG9wdGlvblRhZ3MucHVzaChfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAnb3B0aW9uJyxcblx0ICAgICAgICAgICAgICAgICAgICB7IGtleTogaSwgdmFsdWU6IG9wdGlvbnNbaV0gfSxcblx0ICAgICAgICAgICAgICAgICAgICBvcHRpb25zW2ldXG5cdCAgICAgICAgICAgICAgICApKTtcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgcmV0dXJuIG9wdGlvblRhZ3M7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50Jyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnJlZnMubnVtYmVyRmlsdGVyQ29tcGFyYXRvci52YWx1ZSAmJiB0aGlzLnJlZnMubnVtYmVyRmlsdGVyLnZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmZpbHRlckhhbmRsZXIoeyBudW1iZXI6IHRoaXMucmVmcy5udW1iZXJGaWx0ZXIudmFsdWUsXG5cdCAgICAgICAgICAgICAgICAgICAgY29tcGFyYXRvcjogdGhpcy5yZWZzLm51bWJlckZpbHRlckNvbXBhcmF0b3IudmFsdWUgfSwgX0NvbnN0MlsnZGVmYXVsdCddLkZJTFRFUl9UWVBFLk5VTUJFUik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnY29tcG9uZW50V2lsbFVubW91bnQnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcblx0ICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ3JlbmRlcicsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgICAgICAgdmFyIHNlbGVjdENsYXNzID0gKDAsIF9jbGFzc25hbWVzMlsnZGVmYXVsdCddKShcInNlbGVjdC1maWx0ZXJcIiwgXCJudW1iZXItZmlsdGVyLWlucHV0XCIsIFwiZm9ybS1jb250cm9sXCIsIHsgXCJwbGFjZWhvbGRlci1zZWxlY3RlZFwiOiB0aGlzLnN0YXRlLmlzUGxhY2Vob2xkZXJTZWxlY3RlZCB9KTtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdmaWx0ZXIgbnVtYmVyLWZpbHRlcicgfSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdzZWxlY3QnLFxuXHQgICAgICAgICAgICAgICAgICAgIHsgcmVmOiAnbnVtYmVyRmlsdGVyQ29tcGFyYXRvcicsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ251bWJlci1maWx0ZXItY29tcGFyYXRvciBmb3JtLWNvbnRyb2wnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogdGhpcy5vbkNoYW5nZUNvbXBhcmF0b3IsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogdGhpcy5wcm9wcy5kZWZhdWx0VmFsdWUgPyB0aGlzLnByb3BzLmRlZmF1bHRWYWx1ZS5jb21wYXJhdG9yIDogXCJcIiB9LFxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q29tcGFyYXRvck9wdGlvbnMoKVxuXHQgICAgICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub3B0aW9ucyA/IF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdzZWxlY3QnLFxuXHQgICAgICAgICAgICAgICAgICAgIHsgcmVmOiAnbnVtYmVyRmlsdGVyJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBzZWxlY3RDbGFzcyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMub25DaGFuZ2VOdW1iZXJTZXQsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogdGhpcy5wcm9wcy5kZWZhdWx0VmFsdWUgPyB0aGlzLnByb3BzLmRlZmF1bHRWYWx1ZS5udW1iZXIgOiBcIlwiIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXROdW1iZXJPcHRpb25zKClcblx0ICAgICAgICAgICAgICAgICkgOiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IHJlZjogJ251bWJlckZpbHRlcicsXG5cdCAgICAgICAgICAgICAgICAgICAgdHlwZTogJ251bWJlcicsXG5cdCAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnbnVtYmVyLWZpbHRlci1pbnB1dCBmb3JtLWNvbnRyb2wnLFxuXHQgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiB0aGlzLnByb3BzLnBsYWNlaG9sZGVyIHx8ICdFbnRlciAnICsgdGhpcy5wcm9wcy5jb2x1bW5OYW1lICsgJy4uLicsXG5cdCAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMub25DaGFuZ2VOdW1iZXIsXG5cdCAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiB0aGlzLnByb3BzLmRlZmF1bHRWYWx1ZSA/IHRoaXMucHJvcHMuZGVmYXVsdFZhbHVlLm51bWJlciA6IFwiXCIgfSlcblx0ICAgICAgICAgICAgKTtcblx0ICAgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIE51bWJlckZpbHRlcjtcblx0fSkoX3JlYWN0MlsnZGVmYXVsdCddLkNvbXBvbmVudCk7XG5cdFxuXHQ7XG5cdFxuXHROdW1iZXJGaWx0ZXIucHJvcFR5cGVzID0ge1xuXHQgICAgZmlsdGVySGFuZGxlcjogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG5cdCAgICBvcHRpb25zOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmFycmF5T2YoX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5udW1iZXIpLFxuXHQgICAgZGVmYXVsdFZhbHVlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnNoYXBlKHtcblx0ICAgICAgICBudW1iZXI6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMubnVtYmVyLFxuXHQgICAgICAgIGNvbXBhcmF0b3I6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMub25lT2YobGVnYWxDb21wYXJhdG9ycylcblx0ICAgIH0pLFxuXHQgICAgZGVsYXk6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMubnVtYmVyLFxuXHQgICAgbnVtYmVyQ29tcGFyYXRvcnM6IGZ1bmN0aW9uIG51bWJlckNvbXBhcmF0b3JzKHByb3BzLCBwcm9wTmFtZSkge1xuXHQgICAgICAgIGlmICghcHJvcHNbcHJvcE5hbWVdKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wc1twcm9wTmFtZV0ubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgdmFyIGNvbXBhcmF0b3JJc1ZhbGlkID0gZmFsc2U7XG5cdCAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGVnYWxDb21wYXJhdG9ycy5sZW5ndGg7IGorKykge1xuXHQgICAgICAgICAgICAgICAgaWYgKGxlZ2FsQ29tcGFyYXRvcnNbal0gPT09IHByb3BzW3Byb3BOYW1lXVtpXSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGNvbXBhcmF0b3JJc1ZhbGlkID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAoIWNvbXBhcmF0b3JJc1ZhbGlkKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdOdW1iZXIgY29tcGFyYXRvciBwcm92aWRlZCBpcyBub3Qgc3VwcG9ydGVkLiBVc2Ugb25seSAnICsgbGVnYWxDb21wYXJhdG9ycyk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHQgICAgcGxhY2Vob2xkZXI6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgICAgY29sdW1uTmFtZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmdcblx0fTtcblx0XG5cdE51bWJlckZpbHRlci5kZWZhdWx0UHJvcHMgPSB7XG5cdCAgICBkZWxheTogX0NvbnN0MlsnZGVmYXVsdCddLkZJTFRFUl9ERUxBWVxuXHR9O1xuXHRcblx0ZXhwb3J0c1snZGVmYXVsdCddID0gTnVtYmVyRmlsdGVyO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSxcbi8qIDMwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG5cdFx0dmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXHRcblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQoX3gsIF94MiwgX3gzKSB7IHZhciBfYWdhaW4gPSB0cnVlOyBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHsgdmFyIG9iamVjdCA9IF94LCBwcm9wZXJ0eSA9IF94MiwgcmVjZWl2ZXIgPSBfeDM7IF9hZ2FpbiA9IGZhbHNlOyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgX3ggPSBwYXJlbnQ7IF94MiA9IHByb3BlcnR5OyBfeDMgPSByZWNlaXZlcjsgX2FnYWluID0gdHJ1ZTsgZGVzYyA9IHBhcmVudCA9IHVuZGVmaW5lZDsgY29udGludWUgX2Z1bmN0aW9uOyB9IH0gZWxzZSBpZiAoJ3ZhbHVlJyBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfSB9O1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAnZnVuY3Rpb24nICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfY2xhc3NuYW1lcyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX2NsYXNzbmFtZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NuYW1lcyk7XG5cdFxuXHR2YXIgX0NvbnN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfQ29uc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ29uc3QpO1xuXHRcblx0dmFyIFNlbGVjdEZpbHRlciA9IChmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuXHRcdF9pbmhlcml0cyhTZWxlY3RGaWx0ZXIsIF9SZWFjdCRDb21wb25lbnQpO1xuXHRcblx0XHRmdW5jdGlvbiBTZWxlY3RGaWx0ZXIocHJvcHMpIHtcblx0XHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTZWxlY3RGaWx0ZXIpO1xuXHRcblx0XHRcdF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKFNlbGVjdEZpbHRlci5wcm90b3R5cGUpLCAnY29uc3RydWN0b3InLCB0aGlzKS5jYWxsKHRoaXMsIHByb3BzKTtcblx0XHRcdHRoaXMuZmlsdGVyID0gdGhpcy5maWx0ZXIuYmluZCh0aGlzKTtcblx0XHRcdHRoaXMuc3RhdGUgPSB7XG5cdFx0XHRcdGlzUGxhY2Vob2xkZXJTZWxlY3RlZDogdGhpcy5wcm9wcy5kZWZhdWx0VmFsdWUgPT0gdW5kZWZpbmVkIHx8ICF0aGlzLnByb3BzLm9wdGlvbnMuaGFzT3duUHJvcGVydHkodGhpcy5wcm9wcy5kZWZhdWx0VmFsdWUpXG5cdFx0XHR9O1xuXHRcdH1cblx0XG5cdFx0X2NyZWF0ZUNsYXNzKFNlbGVjdEZpbHRlciwgW3tcblx0XHRcdGtleTogJ2ZpbHRlcicsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gZmlsdGVyKGV2ZW50KSB7XG5cdFx0XHRcdHRoaXMuc2V0U3RhdGUoeyBpc1BsYWNlaG9sZGVyU2VsZWN0ZWQ6IGV2ZW50LnRhcmdldC52YWx1ZSA9PT0gXCJcIiB9KTtcblx0XHRcdFx0dGhpcy5wcm9wcy5maWx0ZXJIYW5kbGVyKGV2ZW50LnRhcmdldC52YWx1ZSwgX0NvbnN0MlsnZGVmYXVsdCddLkZJTFRFUl9UWVBFLlNFTEVDVCk7XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnZ2V0T3B0aW9ucycsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gZ2V0T3B0aW9ucygpIHtcblx0XHRcdFx0dmFyIG9wdGlvblRhZ3MgPSBbXTtcblx0XHRcdFx0dmFyIG9wdGlvbnMgPSB0aGlzLnByb3BzLm9wdGlvbnM7XG5cdFx0XHRcdG9wdGlvblRhZ3MucHVzaChfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0XHRcdFx0XHQnb3B0aW9uJyxcblx0XHRcdFx0XHR7IGtleTogJy0xJywgdmFsdWU6ICcnIH0sXG5cdFx0XHRcdFx0dGhpcy5wcm9wcy5wbGFjZWhvbGRlciB8fCAnU2VsZWN0ICcgKyB0aGlzLnByb3BzLmNvbHVtbk5hbWUgKyAnLi4uJ1xuXHRcdFx0XHQpKTtcblx0XHRcdFx0T2JqZWN0LmtleXMob3B0aW9ucykubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRcdFx0XHRvcHRpb25UYWdzLnB1c2goX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdFx0XHRcdFx0XHQnb3B0aW9uJyxcblx0XHRcdFx0XHRcdHsga2V5OiBrZXksIHZhbHVlOiBrZXkgfSxcblx0XHRcdFx0XHRcdG9wdGlvbnNba2V5XVxuXHRcdFx0XHRcdCkpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0cmV0dXJuIG9wdGlvblRhZ3M7XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuXHRcdFx0XHRpZiAodGhpcy5yZWZzLnNlbGVjdElucHV0LnZhbHVlKSB7XG5cdFx0XHRcdFx0dGhpcy5wcm9wcy5maWx0ZXJIYW5kbGVyKHRoaXMucmVmcy5zZWxlY3RJbnB1dC52YWx1ZSwgX0NvbnN0MlsnZGVmYXVsdCddLkZJTFRFUl9UWVBFLlNFTEVDVCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRrZXk6ICdyZW5kZXInLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0XHRcdFx0dmFyIHNlbGVjdENsYXNzID0gKDAsIF9jbGFzc25hbWVzMlsnZGVmYXVsdCddKShcImZpbHRlclwiLCBcInNlbGVjdC1maWx0ZXJcIiwgXCJmb3JtLWNvbnRyb2xcIiwgeyBcInBsYWNlaG9sZGVyLXNlbGVjdGVkXCI6IHRoaXMuc3RhdGUuaXNQbGFjZWhvbGRlclNlbGVjdGVkIH0pO1xuXHRcblx0XHRcdFx0cmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHRcdFx0XHRcdCdzZWxlY3QnLFxuXHRcdFx0XHRcdHsgcmVmOiAnc2VsZWN0SW5wdXQnLFxuXHRcdFx0XHRcdFx0Y2xhc3NOYW1lOiBzZWxlY3RDbGFzcyxcblx0XHRcdFx0XHRcdG9uQ2hhbmdlOiB0aGlzLmZpbHRlcixcblx0XHRcdFx0XHRcdGRlZmF1bHRWYWx1ZTogdGhpcy5wcm9wcy5kZWZhdWx0VmFsdWUgIT0gdW5kZWZpbmVkID8gdGhpcy5wcm9wcy5kZWZhdWx0VmFsdWUgOiBcIlwiIH0sXG5cdFx0XHRcdFx0dGhpcy5nZXRPcHRpb25zKClcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9XSk7XG5cdFxuXHRcdHJldHVybiBTZWxlY3RGaWx0ZXI7XG5cdH0pKF9yZWFjdDJbJ2RlZmF1bHQnXS5Db21wb25lbnQpO1xuXHRcblx0O1xuXHRcblx0U2VsZWN0RmlsdGVyLnByb3BUeXBlcyA9IHtcblx0XHRmaWx0ZXJIYW5kbGVyOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcblx0XHRvcHRpb25zOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuXHRcdHBsYWNlaG9sZGVyOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZyxcblx0XHRjb2x1bW5OYW1lOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZ1xuXHR9O1xuXHRcblx0ZXhwb3J0c1snZGVmYXVsdCddID0gU2VsZWN0RmlsdGVyO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSxcbi8qIDMxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG5cdFx0dmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXHRcblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQoX3gsIF94MiwgX3gzKSB7IHZhciBfYWdhaW4gPSB0cnVlOyBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHsgdmFyIG9iamVjdCA9IF94LCBwcm9wZXJ0eSA9IF94MiwgcmVjZWl2ZXIgPSBfeDM7IF9hZ2FpbiA9IGZhbHNlOyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgX3ggPSBwYXJlbnQ7IF94MiA9IHByb3BlcnR5OyBfeDMgPSByZWNlaXZlcjsgX2FnYWluID0gdHJ1ZTsgZGVzYyA9IHBhcmVudCA9IHVuZGVmaW5lZDsgY29udGludWUgX2Z1bmN0aW9uOyB9IH0gZWxzZSBpZiAoJ3ZhbHVlJyBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfSB9O1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAnZnVuY3Rpb24nICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfQ29uc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9Db25zdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Db25zdCk7XG5cdFxuXHR2YXIgVGV4dEZpbHRlciA9IChmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuXHRcdF9pbmhlcml0cyhUZXh0RmlsdGVyLCBfUmVhY3QkQ29tcG9uZW50KTtcblx0XG5cdFx0ZnVuY3Rpb24gVGV4dEZpbHRlcihwcm9wcykge1xuXHRcdFx0X2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRleHRGaWx0ZXIpO1xuXHRcblx0XHRcdF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKFRleHRGaWx0ZXIucHJvdG90eXBlKSwgJ2NvbnN0cnVjdG9yJywgdGhpcykuY2FsbCh0aGlzLCBwcm9wcyk7XG5cdFx0XHR0aGlzLmZpbHRlciA9IHRoaXMuZmlsdGVyLmJpbmQodGhpcyk7XG5cdFx0XHR0aGlzLnRpbWVvdXQgPSBudWxsO1xuXHRcdH1cblx0XG5cdFx0X2NyZWF0ZUNsYXNzKFRleHRGaWx0ZXIsIFt7XG5cdFx0XHRrZXk6ICdmaWx0ZXInLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGZpbHRlcihldmVudCkge1xuXHRcdFx0XHRpZiAodGhpcy50aW1lb3V0KSB7XG5cdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0XHR2YXIgZmlsdGVyVmFsdWUgPSBldmVudC50YXJnZXQudmFsdWU7XG5cdFx0XHRcdHRoaXMudGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdHNlbGYucHJvcHMuZmlsdGVySGFuZGxlcihmaWx0ZXJWYWx1ZSwgX0NvbnN0MlsnZGVmYXVsdCddLkZJTFRFUl9UWVBFLlRFWFQpO1xuXHRcdFx0XHR9LCBzZWxmLnByb3BzLmRlbGF5KTtcblx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG5cdFx0XHRcdGlmICh0aGlzLnJlZnMuaW5wdXRUZXh0LmRlZmF1bHRWYWx1ZSkge1xuXHRcdFx0XHRcdHRoaXMucHJvcHMuZmlsdGVySGFuZGxlcih0aGlzLnJlZnMuaW5wdXRUZXh0LmRlZmF1bHRWYWx1ZSwgX0NvbnN0MlsnZGVmYXVsdCddLkZJTFRFUl9UWVBFLlRFWFQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnY29tcG9uZW50V2lsbFVubW91bnQnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuXHRcdFx0XHRjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTtcblx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRrZXk6ICdyZW5kZXInLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0XHRcdFx0cmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgcmVmOiAnaW5wdXRUZXh0Jyxcblx0XHRcdFx0XHRjbGFzc05hbWU6ICdmaWx0ZXIgdGV4dC1maWx0ZXIgZm9ybS1jb250cm9sJyxcblx0XHRcdFx0XHR0eXBlOiAndGV4dCcsXG5cdFx0XHRcdFx0b25DaGFuZ2U6IHRoaXMuZmlsdGVyLFxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyOiB0aGlzLnByb3BzLnBsYWNlaG9sZGVyIHx8ICdFbnRlciAnICsgdGhpcy5wcm9wcy5jb2x1bW5OYW1lICsgJy4uLicsXG5cdFx0XHRcdFx0ZGVmYXVsdFZhbHVlOiB0aGlzLnByb3BzLmRlZmF1bHRWYWx1ZSA/IHRoaXMucHJvcHMuZGVmYXVsdFZhbHVlIDogXCJcIiB9KTtcblx0XHRcdH1cblx0XHR9XSk7XG5cdFxuXHRcdHJldHVybiBUZXh0RmlsdGVyO1xuXHR9KShfcmVhY3QyWydkZWZhdWx0J10uQ29tcG9uZW50KTtcblx0XG5cdDtcblx0XG5cdFRleHRGaWx0ZXIucHJvcFR5cGVzID0ge1xuXHRcdGZpbHRlckhhbmRsZXI6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuXHRcdGRlZmF1bHRWYWx1ZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsXG5cdFx0ZGVsYXk6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMubnVtYmVyLFxuXHRcdHBsYWNlaG9sZGVyOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZyxcblx0XHRjb2x1bW5OYW1lOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZ1xuXHR9O1xuXHRcblx0VGV4dEZpbHRlci5kZWZhdWx0UHJvcHMgPSB7XG5cdFx0ZGVsYXk6IF9Db25zdDJbJ2RlZmF1bHQnXS5GSUxURVJfREVMQVlcblx0fTtcblx0XG5cdGV4cG9ydHNbJ2RlZmF1bHQnXSA9IFRleHRGaWx0ZXI7XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9LFxuLyogMzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCd2YWx1ZScgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cdFxuXHR2YXIgX2dldCA9IGZ1bmN0aW9uIGdldChfeCwgX3gyLCBfeDMpIHsgdmFyIF9hZ2FpbiA9IHRydWU7IF9mdW5jdGlvbjogd2hpbGUgKF9hZ2FpbikgeyB2YXIgb2JqZWN0ID0gX3gsIHByb3BlcnR5ID0gX3gyLCByZWNlaXZlciA9IF94MzsgX2FnYWluID0gZmFsc2U7IGlmIChvYmplY3QgPT09IG51bGwpIG9iamVjdCA9IEZ1bmN0aW9uLnByb3RvdHlwZTsgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpOyBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7IHZhciBwYXJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsgaWYgKHBhcmVudCA9PT0gbnVsbCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IGVsc2UgeyBfeCA9IHBhcmVudDsgX3gyID0gcHJvcGVydHk7IF94MyA9IHJlY2VpdmVyOyBfYWdhaW4gPSB0cnVlOyBkZXNjID0gcGFyZW50ID0gdW5kZWZpbmVkOyBjb250aW51ZSBfZnVuY3Rpb247IH0gfSBlbHNlIGlmICgndmFsdWUnIGluIGRlc2MpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9IH07XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICdmdW5jdGlvbicgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICcgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9jbGFzc25hbWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblx0XG5cdHZhciBQYWdlQnV0dG9uID0gKGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG5cdCAgX2luaGVyaXRzKFBhZ2VCdXR0b24sIF9SZWFjdCRDb21wb25lbnQpO1xuXHRcblx0ICBmdW5jdGlvbiBQYWdlQnV0dG9uKHByb3BzKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGFnZUJ1dHRvbik7XG5cdFxuXHQgICAgX2dldChPYmplY3QuZ2V0UHJvdG90eXBlT2YoUGFnZUJ1dHRvbi5wcm90b3R5cGUpLCAnY29uc3RydWN0b3InLCB0aGlzKS5jYWxsKHRoaXMsIHByb3BzKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhQYWdlQnV0dG9uLCBbe1xuXHQgICAga2V5OiAncGFnZUJ0bkNsaWNrJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBwYWdlQnRuQ2xpY2soZSkge1xuXHQgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICAgIHRoaXMucHJvcHMuY2hhbmdlUGFnZShlLmN1cnJlbnRUYXJnZXQudGV4dCk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncmVuZGVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgIHZhciBjbGFzc2VzID0gKDAsIF9jbGFzc25hbWVzMlsnZGVmYXVsdCddKSh7XG5cdCAgICAgICAgJ2FjdGl2ZSc6IHRoaXMucHJvcHMuYWN0aXZlLFxuXHQgICAgICAgICdkaXNhYmxlZCc6IHRoaXMucHJvcHMuZGlzYWJsZSxcblx0ICAgICAgICAnaGlkZGVuJzogdGhpcy5wcm9wcy5oaWRkZW5cblx0ICAgICAgfSk7XG5cdCAgICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAnbGknLFxuXHQgICAgICAgIHsgY2xhc3NOYW1lOiBjbGFzc2VzIH0sXG5cdCAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAnYScsXG5cdCAgICAgICAgICB7IGhyZWY6ICcjJywgb25DbGljazogdGhpcy5wYWdlQnRuQ2xpY2suYmluZCh0aGlzKSB9LFxuXHQgICAgICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlblxuXHQgICAgICAgIClcblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBQYWdlQnV0dG9uO1xuXHR9KShfcmVhY3QyWydkZWZhdWx0J10uQ29tcG9uZW50KTtcblx0XG5cdFBhZ2VCdXR0b24ucHJvcFR5cGVzID0ge1xuXHQgIGNoYW5nZVBhZ2U6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYyxcblx0ICBhY3RpdmU6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCxcblx0ICBkaXNhYmxlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2xcblx0fTtcblx0XG5cdGV4cG9ydHNbJ2RlZmF1bHQnXSA9IFBhZ2VCdXR0b247XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9LFxuLyogMzMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCd2YWx1ZScgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cdFxuXHR2YXIgX2dldCA9IGZ1bmN0aW9uIGdldChfeCwgX3gyLCBfeDMpIHsgdmFyIF9hZ2FpbiA9IHRydWU7IF9mdW5jdGlvbjogd2hpbGUgKF9hZ2FpbikgeyB2YXIgb2JqZWN0ID0gX3gsIHByb3BlcnR5ID0gX3gyLCByZWNlaXZlciA9IF94MzsgX2FnYWluID0gZmFsc2U7IGlmIChvYmplY3QgPT09IG51bGwpIG9iamVjdCA9IEZ1bmN0aW9uLnByb3RvdHlwZTsgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpOyBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7IHZhciBwYXJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsgaWYgKHBhcmVudCA9PT0gbnVsbCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IGVsc2UgeyBfeCA9IHBhcmVudDsgX3gyID0gcHJvcGVydHk7IF94MyA9IHJlY2VpdmVyOyBfYWdhaW4gPSB0cnVlOyBkZXNjID0gcGFyZW50ID0gdW5kZWZpbmVkOyBjb250aW51ZSBfZnVuY3Rpb247IH0gfSBlbHNlIGlmICgndmFsdWUnIGluIGRlc2MpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9IH07XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICdmdW5jdGlvbicgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICcgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9QYWdlQnV0dG9uSnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTtcblx0XG5cdHZhciBfUGFnZUJ1dHRvbkpzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1BhZ2VCdXR0b25Kcyk7XG5cdFxuXHR2YXIgX0NvbnN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfQ29uc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ29uc3QpO1xuXHRcblx0dmFyIFBhZ2luYXRpb25MaXN0ID0gKGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG5cdCAgX2luaGVyaXRzKFBhZ2luYXRpb25MaXN0LCBfUmVhY3QkQ29tcG9uZW50KTtcblx0XG5cdCAgZnVuY3Rpb24gUGFnaW5hdGlvbkxpc3QoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGFnaW5hdGlvbkxpc3QpO1xuXHRcblx0ICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKFBhZ2luYXRpb25MaXN0LnByb3RvdHlwZSksICdjb25zdHJ1Y3RvcicsIHRoaXMpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoUGFnaW5hdGlvbkxpc3QsIFt7XG5cdCAgICBrZXk6ICdjaGFuZ2VQYWdlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjaGFuZ2VQYWdlKHBhZ2UpIHtcblx0ICAgICAgaWYgKHBhZ2UgPT0gdGhpcy5wcm9wcy5wcmVQYWdlKSB7XG5cdCAgICAgICAgcGFnZSA9IHRoaXMucHJvcHMuY3VyclBhZ2UgLSAxIDwgMSA/IDEgOiB0aGlzLnByb3BzLmN1cnJQYWdlIC0gMTtcblx0ICAgICAgfSBlbHNlIGlmIChwYWdlID09IHRoaXMucHJvcHMubmV4dFBhZ2UpIHtcblx0ICAgICAgICBwYWdlID0gdGhpcy5wcm9wcy5jdXJyUGFnZSArIDEgPiB0aGlzLnRvdGFsUGFnZXMgPyB0aGlzLnRvdGFsUGFnZXMgOiB0aGlzLnByb3BzLmN1cnJQYWdlICsgMTtcblx0ICAgICAgfSBlbHNlIGlmIChwYWdlID09IHRoaXMucHJvcHMubGFzdFBhZ2UpIHtcblx0ICAgICAgICBwYWdlID0gdGhpcy50b3RhbFBhZ2VzO1xuXHQgICAgICB9IGVsc2UgaWYgKHBhZ2UgPT0gdGhpcy5wcm9wcy5maXJzdFBhZ2UpIHtcblx0ICAgICAgICBwYWdlID0gMTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwYWdlID0gcGFyc2VJbnQocGFnZSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChwYWdlICE9IHRoaXMucHJvcHMuY3VyclBhZ2UpIHtcblx0ICAgICAgICB0aGlzLnByb3BzLmNoYW5nZVBhZ2UocGFnZSwgdGhpcy5wcm9wcy5zaXplUGVyUGFnZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdjaGFuZ2VTaXplUGVyUGFnZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY2hhbmdlU2l6ZVBlclBhZ2UoZSkge1xuXHQgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cdFxuXHQgICAgICB2YXIgc2VsZWN0U2l6ZSA9IHBhcnNlSW50KGUuY3VycmVudFRhcmdldC50ZXh0KTtcblx0ICAgICAgdmFyIGN1cnJQYWdlID0gdGhpcy5wcm9wcy5jdXJyUGFnZTtcblx0XG5cdCAgICAgIGlmIChzZWxlY3RTaXplICE9IHRoaXMucHJvcHMuc2l6ZVBlclBhZ2UpIHtcblx0ICAgICAgICB0aGlzLnRvdGFsUGFnZXMgPSBNYXRoLmNlaWwodGhpcy5wcm9wcy5kYXRhU2l6ZSAvIHNlbGVjdFNpemUpO1xuXHQgICAgICAgIGlmIChjdXJyUGFnZSA+IHRoaXMudG90YWxQYWdlcykgY3VyclBhZ2UgPSB0aGlzLnRvdGFsUGFnZXM7XG5cdFxuXHQgICAgICAgIHRoaXMucHJvcHMuY2hhbmdlUGFnZShjdXJyUGFnZSwgc2VsZWN0U2l6ZSk7XG5cdCAgICAgICAgaWYgKHRoaXMucHJvcHMub25TaXplUGVyUGFnZUxpc3QpIHtcblx0ICAgICAgICAgIHRoaXMucHJvcHMub25TaXplUGVyUGFnZUxpc3Qoc2VsZWN0U2l6ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncmVuZGVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICB0aGlzLnRvdGFsUGFnZXMgPSBNYXRoLmNlaWwodGhpcy5wcm9wcy5kYXRhU2l6ZSAvIHRoaXMucHJvcHMuc2l6ZVBlclBhZ2UpO1xuXHQgICAgICB2YXIgcGFnZUJ0bnMgPSB0aGlzLm1ha2VQYWdlKCk7XG5cdCAgICAgIHZhciBwYWdlTGlzdFN0eWxlID0ge1xuXHQgICAgICAgIGZsb2F0OiBcInJpZ2h0XCIsXG5cdCAgICAgICAgbWFyZ2luVG9wOiBcIjBweFwiIC8vb3ZlcnJpZGUgdGhlIG1hcmdpbi10b3AgZGVmaW5lZCBpbiAucGFnaW5hdGlvbiBjbGFzcyBpbiBib290c3RyYXAuXG5cdCAgICAgIH07XG5cdFxuXHQgICAgICB2YXIgc2l6ZVBlclBhZ2VMaXN0ID0gdGhpcy5wcm9wcy5zaXplUGVyUGFnZUxpc3QubWFwKGZ1bmN0aW9uIChzaXplUGVyUGFnZSkge1xuXHQgICAgICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICdsaScsXG5cdCAgICAgICAgICB7IGtleTogc2l6ZVBlclBhZ2UsIHJvbGU6ICdwcmVzZW50YXRpb24nIH0sXG5cdCAgICAgICAgICBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgJ2EnLFxuXHQgICAgICAgICAgICB7IHJvbGU6ICdtZW51aXRlbScsIHRhYkluZGV4OiAnLTEnLCBocmVmOiAnIycsIG9uQ2xpY2s6IF90aGlzLmNoYW5nZVNpemVQZXJQYWdlLmJpbmQoX3RoaXMpIH0sXG5cdCAgICAgICAgICAgIHNpemVQZXJQYWdlXG5cdCAgICAgICAgICApXG5cdCAgICAgICAgKTtcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgeyBjbGFzc05hbWU6ICdyb3cnLCBzdHlsZTogeyBtYXJnaW5Ub3A6IDE1IH0gfSxcblx0ICAgICAgICB0aGlzLnByb3BzLnNpemVQZXJQYWdlTGlzdC5sZW5ndGggPiAxID8gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgIG51bGwsXG5cdCAgICAgICAgICBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sLW1kLTYnIH0sXG5cdCAgICAgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZHJvcGRvd24nIH0sXG5cdCAgICAgICAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnYnV0dG9uJyxcblx0ICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnYnRuIGJ0bi1kZWZhdWx0IGRyb3Bkb3duLXRvZ2dsZScsIHR5cGU6ICdidXR0b24nLCBpZDogJ3BhZ2VEcm9wRG93bicsICdkYXRhLXRvZ2dsZSc6ICdkcm9wZG93bicsXG5cdCAgICAgICAgICAgICAgICAgICdhcmlhLWV4cGFuZGVkJzogJ3RydWUnIH0sXG5cdCAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnNpemVQZXJQYWdlLFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICdzcGFuJyxcblx0ICAgICAgICAgICAgICAgICAgbnVsbCxcblx0ICAgICAgICAgICAgICAgICAgXCIgXCIsXG5cdCAgICAgICAgICAgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdjYXJldCcgfSlcblx0ICAgICAgICAgICAgICAgIClcblx0ICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgJ3VsJyxcblx0ICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZHJvcGRvd24tbWVudScsIHJvbGU6ICdtZW51JywgJ2FyaWEtbGFiZWxsZWRieSc6ICdwYWdlRHJvcERvd24nIH0sXG5cdCAgICAgICAgICAgICAgICBzaXplUGVyUGFnZUxpc3Rcblx0ICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgIClcblx0ICAgICAgICAgICksXG5cdCAgICAgICAgICBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sLW1kLTYnIH0sXG5cdCAgICAgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICd1bCcsXG5cdCAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYWdpbmF0aW9uJywgc3R5bGU6IHBhZ2VMaXN0U3R5bGUgfSxcblx0ICAgICAgICAgICAgICBwYWdlQnRuc1xuXHQgICAgICAgICAgICApXG5cdCAgICAgICAgICApXG5cdCAgICAgICAgKSA6IF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC1tZC0xMicgfSxcblx0ICAgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAndWwnLFxuXHQgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhZ2luYXRpb24nLCBzdHlsZTogcGFnZUxpc3RTdHlsZSB9LFxuXHQgICAgICAgICAgICBwYWdlQnRuc1xuXHQgICAgICAgICAgKVxuXHQgICAgICAgIClcblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdtYWtlUGFnZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gbWFrZVBhZ2UoKSB7XG5cdCAgICAgIHZhciBwYWdlcyA9IHRoaXMuZ2V0UGFnZXMoKTtcblx0ICAgICAgcmV0dXJuIHBhZ2VzLm1hcChmdW5jdGlvbiAocGFnZSkge1xuXHQgICAgICAgIHZhciBpc0FjdGl2ZSA9IHBhZ2UgPT09IHRoaXMucHJvcHMuY3VyclBhZ2U7XG5cdCAgICAgICAgdmFyIGRpc2FibGVkID0gZmFsc2U7XG5cdCAgICAgICAgdmFyIGhpZGRlbiA9IGZhbHNlO1xuXHQgICAgICAgIGlmICh0aGlzLnByb3BzLmN1cnJQYWdlID09IDEgJiYgKHBhZ2UgPT09IHRoaXMucHJvcHMuZmlyc3RQYWdlIHx8IHBhZ2UgPT09IHRoaXMucHJvcHMucHJlUGFnZSkpIHtcblx0ICAgICAgICAgIGRpc2FibGVkID0gdHJ1ZTtcblx0ICAgICAgICAgIGhpZGRlbiA9IHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICh0aGlzLnByb3BzLmN1cnJQYWdlID09IHRoaXMudG90YWxQYWdlcyAmJiAocGFnZSA9PT0gdGhpcy5wcm9wcy5uZXh0UGFnZSB8fCBwYWdlID09PSB0aGlzLnByb3BzLmxhc3RQYWdlKSkge1xuXHQgICAgICAgICAgZGlzYWJsZWQgPSB0cnVlO1xuXHQgICAgICAgICAgaGlkZGVuID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgX1BhZ2VCdXR0b25KczJbJ2RlZmF1bHQnXSxcblx0ICAgICAgICAgIHsgY2hhbmdlUGFnZTogdGhpcy5jaGFuZ2VQYWdlLmJpbmQodGhpcyksIGFjdGl2ZTogaXNBY3RpdmUsIGRpc2FibGU6IGRpc2FibGVkLCBoaWRkZW46IGhpZGRlbiwga2V5OiBwYWdlIH0sXG5cdCAgICAgICAgICBwYWdlXG5cdCAgICAgICAgKTtcblx0ICAgICAgfSwgdGhpcyk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZ2V0UGFnZXMnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBhZ2VzKCkge1xuXHQgICAgICB2YXIgc3RhcnRQYWdlID0gMSxcblx0ICAgICAgICAgIGVuZFBhZ2UgPSB0aGlzLnRvdGFsUGFnZXM7XG5cdFxuXHQgICAgICBzdGFydFBhZ2UgPSBNYXRoLm1heCh0aGlzLnByb3BzLmN1cnJQYWdlIC0gTWF0aC5mbG9vcih0aGlzLnByb3BzLnBhZ2luYXRpb25TaXplIC8gMiksIDEpO1xuXHQgICAgICBlbmRQYWdlID0gc3RhcnRQYWdlICsgdGhpcy5wcm9wcy5wYWdpbmF0aW9uU2l6ZSAtIDE7XG5cdFxuXHQgICAgICBpZiAoZW5kUGFnZSA+IHRoaXMudG90YWxQYWdlcykge1xuXHQgICAgICAgIGVuZFBhZ2UgPSB0aGlzLnRvdGFsUGFnZXM7XG5cdCAgICAgICAgc3RhcnRQYWdlID0gZW5kUGFnZSAtIHRoaXMucHJvcHMucGFnaW5hdGlvblNpemUgKyAxO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBwYWdlcztcblx0ICAgICAgaWYgKHN0YXJ0UGFnZSAhPSAxICYmIHRoaXMudG90YWxQYWdlcyA+IHRoaXMucHJvcHMucGFnaW5hdGlvblNpemUpIHtcblx0ICAgICAgICBwYWdlcyA9IFt0aGlzLnByb3BzLmZpcnN0UGFnZSwgdGhpcy5wcm9wcy5wcmVQYWdlXTtcblx0ICAgICAgfSBlbHNlIGlmICh0aGlzLnRvdGFsUGFnZXMgPiAxKSB7XG5cdCAgICAgICAgcGFnZXMgPSBbdGhpcy5wcm9wcy5wcmVQYWdlXTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwYWdlcyA9IFtdO1xuXHQgICAgICB9XG5cdCAgICAgIGZvciAodmFyIGkgPSBzdGFydFBhZ2U7IGkgPD0gZW5kUGFnZTsgaSsrKSB7XG5cdCAgICAgICAgaWYgKGkgPiAwKSBwYWdlcy5wdXNoKGkpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChlbmRQYWdlICE9IHRoaXMudG90YWxQYWdlcykge1xuXHQgICAgICAgIHBhZ2VzLnB1c2godGhpcy5wcm9wcy5uZXh0UGFnZSk7XG5cdCAgICAgICAgcGFnZXMucHVzaCh0aGlzLnByb3BzLmxhc3RQYWdlKTtcblx0ICAgICAgfSBlbHNlIGlmICh0aGlzLnRvdGFsUGFnZXMgPiAxKSB7XG5cdCAgICAgICAgcGFnZXMucHVzaCh0aGlzLnByb3BzLm5leHRQYWdlKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gcGFnZXM7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZ2V0Q3VycmVudFBhZ2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEN1cnJlbnRQYWdlKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5wcm9wcy5jdXJyUGFnZTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdnZXRTaXplUGVyUGFnZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2l6ZVBlclBhZ2UoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnByb3BzLnNpemVQZXJQYWdlO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFBhZ2luYXRpb25MaXN0O1xuXHR9KShfcmVhY3QyWydkZWZhdWx0J10uQ29tcG9uZW50KTtcblx0XG5cdFBhZ2luYXRpb25MaXN0LnByb3BUeXBlcyA9IHtcblx0ICBjdXJyUGFnZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5udW1iZXIsXG5cdCAgc2l6ZVBlclBhZ2U6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMubnVtYmVyLFxuXHQgIGRhdGFTaXplOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm51bWJlcixcblx0ICBjaGFuZ2VQYWdlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmZ1bmMsXG5cdCAgc2l6ZVBlclBhZ2VMaXN0OiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmFycmF5LFxuXHQgIHBhZ2luYXRpb25TaXplOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm51bWJlcixcblx0ICByZW1vdGU6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCxcblx0ICBvblNpemVQZXJQYWdlTGlzdDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLFxuXHQgIHByZVBhZ2U6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nXG5cdH07XG5cdFxuXHRQYWdpbmF0aW9uTGlzdC5kZWZhdWx0UHJvcHMgPSB7XG5cdCAgc2l6ZVBlclBhZ2U6IF9Db25zdDJbJ2RlZmF1bHQnXS5TSVpFX1BFUl9QQUdFXG5cdH07XG5cdFxuXHRleHBvcnRzWydkZWZhdWx0J10gPSBQYWdpbmF0aW9uTGlzdDtcblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0sXG4vKiAzNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXHRcblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQoX3gsIF94MiwgX3gzKSB7IHZhciBfYWdhaW4gPSB0cnVlOyBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHsgdmFyIG9iamVjdCA9IF94LCBwcm9wZXJ0eSA9IF94MiwgcmVjZWl2ZXIgPSBfeDM7IF9hZ2FpbiA9IGZhbHNlOyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgX3ggPSBwYXJlbnQ7IF94MiA9IHByb3BlcnR5OyBfeDMgPSByZWNlaXZlcjsgX2FnYWluID0gdHJ1ZTsgZGVzYyA9IHBhcmVudCA9IHVuZGVmaW5lZDsgY29udGludWUgX2Z1bmN0aW9uOyB9IH0gZWxzZSBpZiAoJ3ZhbHVlJyBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfSB9O1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAnZnVuY3Rpb24nICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfY2xhc3NuYW1lcyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX2NsYXNzbmFtZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NuYW1lcyk7XG5cdFxuXHR2YXIgX0NvbnN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfQ29uc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ29uc3QpO1xuXHRcblx0dmFyIF9FZGl0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9FZGl0b3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRWRpdG9yKTtcblx0XG5cdHZhciBfTm90aWZpY2F0aW9uSnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0dmFyIF9Ob3RpZmljYXRpb25KczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Ob3RpZmljYXRpb25Kcyk7XG5cdFxuXHR2YXIgX3JjU3dpdGNoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0XG5cdHZhciBfcmNTd2l0Y2gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmNTd2l0Y2gpO1xuXHRcblx0dmFyIFRvb2xCYXIgPSAoZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcblx0ICAgIF9pbmhlcml0cyhUb29sQmFyLCBfUmVhY3QkQ29tcG9uZW50KTtcblx0XG5cdCAgICBmdW5jdGlvbiBUb29sQmFyKHByb3BzKSB7XG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRvb2xCYXIpO1xuXHRcblx0ICAgICAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihUb29sQmFyLnByb3RvdHlwZSksICdjb25zdHJ1Y3RvcicsIHRoaXMpLmNhbGwodGhpcywgcHJvcHMpO1xuXHRcblx0ICAgICAgICB0aGlzLmhhbmRsZVNob3dPbmx5VG9nZ2xlID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuXHQgICAgICAgICAgICAgICAgc2hvd1NlbGVjdGVkOiAhX3RoaXMuc3RhdGUuc2hvd1NlbGVjdGVkXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICBfdGhpcy5wcm9wcy5vblNob3dPbmx5U2VsZWN0ZWQoKTtcblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICB0aGlzLmhhbmRsZUNsZWFyQnRuQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIF90aGlzLnJlZnMuc2VhY2hJbnB1dC52YWx1ZSA9ICcnO1xuXHQgICAgICAgICAgICBfdGhpcy5wcm9wcy5vblNlYXJjaCgnJyk7XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgdGhpcy50aW1lb3V0ZUNsZWFyID0gMDtcblx0ICAgICAgICB0aGlzLnN0YXRlID0ge1xuXHQgICAgICAgICAgICBpc0luc2VydFJvd1RyaWdnZXI6IHRydWUsXG5cdCAgICAgICAgICAgIHZhbGlkYXRlU3RhdGU6IG51bGwsXG5cdCAgICAgICAgICAgIHNoYWtlRWRpdG9yOiBmYWxzZSxcblx0ICAgICAgICAgICAgc2hvd1NlbGVjdGVkOiBmYWxzZVxuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKFRvb2xCYXIsIFt7XG5cdCAgICAgICAga2V5OiAnY29tcG9uZW50V2lsbFVubW91bnQnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcblx0ICAgICAgICAgICAgdGhpcy5jbGVhclRpbWVvdXQoKTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnY2xlYXJUaW1lb3V0Jyxcblx0ICAgICAgICB2YWx1ZTogKGZ1bmN0aW9uIChfY2xlYXJUaW1lb3V0KSB7XG5cdCAgICAgICAgICAgIGZ1bmN0aW9uIGNsZWFyVGltZW91dCgpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBfY2xlYXJUaW1lb3V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIGNsZWFyVGltZW91dC50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBfY2xlYXJUaW1lb3V0LnRvU3RyaW5nKCk7XG5cdCAgICAgICAgICAgIH07XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIH0pKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMudGltZW91dGVDbGVhcikge1xuXHQgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dGVDbGVhcik7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnRpbWVvdXRlQ2xlYXIgPSAwO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSlcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdjaGVja0FuZFBhcnNlRm9ybScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrQW5kUGFyc2VGb3JtKCkge1xuXHQgICAgICAgICAgICB2YXIgdHMgPSB0aGlzLFxuXHQgICAgICAgICAgICAgICAgbmV3T2JqID0ge30sXG5cdCAgICAgICAgICAgICAgICBpc1ZhbGlkID0gdHJ1ZSxcblx0ICAgICAgICAgICAgICAgIHRlbXBWYWx1ZSxcblx0ICAgICAgICAgICAgICAgIHRlbXBNc2csXG5cdCAgICAgICAgICAgICAgICB2YWxpZGF0ZVN0YXRlID0ge307XG5cdCAgICAgICAgICAgIHRoaXMucHJvcHMuY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb2x1bW4sIGkpIHtcblx0ICAgICAgICAgICAgICAgIGlmIChjb2x1bW4uYXV0b1ZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgLy93aGVuIHlvdSB3YW50IHNhbWUgYXV0byBnZW5lcmF0ZSB2YWx1ZSBhbmQgbm90IGFsbG93IGVkaXQsIGV4YW1wbGUgSUQgZmllbGRcblx0ICAgICAgICAgICAgICAgICAgICB0ZW1wVmFsdWUgPSB0eXBlb2YgY29sdW1uLmF1dG9WYWx1ZSA9PSAnZnVuY3Rpb24nID8gY29sdW1uLmF1dG9WYWx1ZSgpIDogJ2F1dG92YWx1ZS0nICsgbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBkb20gPSB0aGlzLnJlZnNbY29sdW1uLmZpZWxkICsgaV07XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkb20gIT09ICd1bmRlZmluZWQnKSB0ZW1wVmFsdWUgPSBkb20udmFsdWU7ZWxzZSB0ZW1wVmFsdWUgPSB0cnVlO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoY29sdW1uLmVkaXRhYmxlICYmIGNvbHVtbi5lZGl0YWJsZS50eXBlID09ICdjaGVja2JveCcpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlcyA9IGRvbS52YWx1ZS5zcGxpdCgnOicpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wVmFsdWUgPSBkb20uY2hlY2tlZCA/IHZhbHVlc1swXSA6IHZhbHVlc1sxXTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgIGlmIChjb2x1bW4uZWRpdGFibGUgJiYgY29sdW1uLmVkaXRhYmxlLnZhbGlkYXRvcikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAvL3Byb2Nlc3MgdmFsaWRhdGVcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGVtcE1zZyA9IGNvbHVtbi5lZGl0YWJsZS52YWxpZGF0b3IodGVtcFZhbHVlKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXBNc2cgIT09IHRydWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVmFsaWQgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlU3RhdGVbY29sdW1uLmZpZWxkXSA9IHRlbXBNc2c7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgbmV3T2JqW2NvbHVtbi5maWVsZF0gPSB0ZW1wVmFsdWU7XG5cdCAgICAgICAgICAgIH0sIHRoaXMpO1xuXHRcblx0ICAgICAgICAgICAgaWYgKGlzVmFsaWQpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBuZXdPYmo7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICB0cy5jbGVhclRpbWVvdXQoKTtcblx0ICAgICAgICAgICAgICAgIC8vc2hvdyBlcnJvciBpbiBmb3JtIGFuZCBzaGFrZSBpdFxuXHQgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHZhbGlkYXRlU3RhdGU6IHZhbGlkYXRlU3RhdGUsIHNoYWtlRWRpdG9yOiB0cnVlIH0pO1xuXHQgICAgICAgICAgICAgICAgLy9ub3RpZmllciBlcnJvclxuXHQgICAgICAgICAgICAgICAgdHMucmVmcy5ub3RpZmllci5ub3RpY2UoJ2Vycm9yJywgXCJGb3JtIHZhbGlkYXRlIGVycm9ycywgcGxlYXNlIGNoZWNraW5nIVwiLCBcIlByZXNzZWQgRVNDIGNhbiBjYW5jZWxcIik7XG5cdCAgICAgICAgICAgICAgICAvL2NsZWFyIGFuaW1hdGUgY2xhc3Ncblx0ICAgICAgICAgICAgICAgIHRzLnRpbWVvdXRlQ2xlYXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0cy5zZXRTdGF0ZSh7IHNoYWtlRWRpdG9yOiBmYWxzZSB9KTtcblx0ICAgICAgICAgICAgICAgIH0sIDMwMCk7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdoYW5kbGVTYXZlQnRuQ2xpY2snLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVTYXZlQnRuQ2xpY2soZSkge1xuXHQgICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblx0XG5cdCAgICAgICAgICAgIHZhciBuZXdPYmogPSB0aGlzLmNoZWNrQW5kUGFyc2VGb3JtKCk7XG5cdCAgICAgICAgICAgIGlmICghbmV3T2JqKSB7XG5cdCAgICAgICAgICAgICAgICAvL3ZhbGlkYXRlIGVycm9yc1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRoaXMucHJvcHMub25BZGRSb3cobmV3T2JqKS50aGVuKGZ1bmN0aW9uIChtc2cpIHtcblx0XG5cdCAgICAgICAgICAgICAgICBpZiAobXNnKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSAnJztcblx0ICAgICAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBtc2cuZXJyb3JzLm1hcChmdW5jdGlvbiAoZXJyb3IpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgKz0gZXJyb3IubWVzc2FnZSArICcuICc7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGV4KTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSArPSBtc2cudG9TdHJpbmcoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgIHZhciB0cyA9IF90aGlzMjtcblx0ICAgICAgICAgICAgICAgICAgICB0cy5yZWZzLm5vdGlmaWVyLm5vdGljZSgnZXJyb3InLCBtZXNzYWdlLCBcIlByZXNzZWQgRVNDIGNhbiBjYW5jZWxcIik7XG5cdCAgICAgICAgICAgICAgICAgICAgdHMuY2xlYXJUaW1lb3V0KCk7XG5cdCAgICAgICAgICAgICAgICAgICAgLy9zaGFrZSBmb3JtIGFuZCBoYWNrIHByZXZlbnQgbW9kYWwgaGlkZVxuXHQgICAgICAgICAgICAgICAgICAgIHRzLnNldFN0YXRlKHsgc2hha2VFZGl0b3I6IHRydWUsIHZhbGlkYXRlU3RhdGU6IFwidGhpcyBpcyBoYWNrIGZvciBwcmV2ZW50IGJvb3RzdHJhcCBtb2RhbCBoaWRlXCIgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgLy9jbGVhciBhbmltYXRlIGNsYXNzXG5cdCAgICAgICAgICAgICAgICAgICAgdHMudGltZW91dGVDbGVhciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0cy5zZXRTdGF0ZSh7IHNoYWtlRWRpdG9yOiBmYWxzZSB9KTtcblx0ICAgICAgICAgICAgICAgICAgICB9LCAzMDApO1xuXHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICAvL3Jlc2V0IHN0YXRlIGFuZCBoaWRlIG1vZGFsIGhpZGVcblx0ICAgICAgICAgICAgICAgICAgICBfdGhpczIuc2V0U3RhdGUoe1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZVN0YXRlOiBudWxsLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBzaGFrZUVkaXRvcjogZmFsc2Vcblx0ICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5cIiArIFwibW9kYWxcIik7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbS5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgbVtpXS5jbGljaygpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgLy9yZXNldCBmb3JtXG5cdCAgICAgICAgICAgICAgICAgICAgX3RoaXMyLnJlZnMuZm9ybS5yZXNldCgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnaGFuZGxlRHJvcFJvd0J0bkNsaWNrJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlRHJvcFJvd0J0bkNsaWNrKGUpIHtcblx0ICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkRyb3BSb3coKTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnaGFuZGxlQ2xvc2VCdG4nLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDbG9zZUJ0bihlKSB7XG5cdCAgICAgICAgICAgIHRoaXMucmVmcy53YXJuaW5nLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnaGFuZGxlS2V5VXAnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVLZXlVcChlKSB7XG5cdCAgICAgICAgICAgIHRoaXMucHJvcHMub25TZWFyY2goZS5jdXJyZW50VGFyZ2V0LnZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnaGFuZGxlRXhwb3J0Q1NWJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlRXhwb3J0Q1NWKCkge1xuXHQgICAgICAgICAgICB0aGlzLnByb3BzLm9uRXhwb3J0Q1NWKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ3JlbmRlcicsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgICAgICAgdmFyIG1vZGFsQ2xhc3NOYW1lID0gXCJicy10YWJsZS1tb2RhbC1zbVwiICsgbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdCAgICAgICAgICAgIHZhciBpbnNlcnRCdG4gPSB0aGlzLnByb3BzLmVuYWJsZUluc2VydCA/IF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG5cdCAgICAgICAgICAgICAgICB7IHR5cGU6ICdidXR0b24nLCBvbkNsaWNrOiB0aGlzLnByb3BzLm9uQWRkUm93QmVnaW4sIGNsYXNzTmFtZTogJ2J0biBidG4taW5mbyByZWFjdC1icy10YWJsZS1hZGQtYnRuJyxcblx0ICAgICAgICAgICAgICAgICAgICAnZGF0YS10b2dnbGUnOiAnbW9kYWwnLCAnZGF0YS10YXJnZXQnOiAnLicgKyBtb2RhbENsYXNzTmFtZSB9LFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoJ2knLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tcGx1cycgfSksXG5cdCAgICAgICAgICAgICAgICAnIE5ldydcblx0ICAgICAgICAgICAgKSA6IG51bGw7XG5cdFxuXHQgICAgICAgICAgICB2YXIgZGVsZXRlQnRuID0gdGhpcy5wcm9wcy5lbmFibGVEZWxldGUgPyBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICdidXR0b24nLFxuXHQgICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiAnYnRuIGJ0bi13YXJuaW5nIHJlYWN0LWJzLXRhYmxlLWRlbC1idG4nLCAnZGF0YS10b2dnbGUnOiAndG9vbHRpcCcsXG5cdCAgICAgICAgICAgICAgICAgICAgJ2RhdGEtcGxhY2VtZW50JzogJ3JpZ2h0JywgdGl0bGU6ICdEcm9wIHNlbGVjdGVkIHJvdycsXG5cdCAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVEcm9wUm93QnRuQ2xpY2suYmluZCh0aGlzKSB9LFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoJ2knLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tdHJhc2gnIH0pLFxuXHQgICAgICAgICAgICAgICAgJyBEZWxldGUnXG5cdCAgICAgICAgICAgICkgOiBudWxsO1xuXHRcblx0ICAgICAgICAgICAgdmFyIHNlYXJjaFRleHRJbnB1dCA9IHRoaXMucmVuZGVyU2VhcmNoUGFuZWwoKTtcblx0XG5cdCAgICAgICAgICAgIHZhciBzaG93U2VsZWN0ZWRPbmx5QnRuID0gdGhpcy5wcm9wcy5lbmFibGVTaG93T25seVNlbGVjdGVkID8gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnYnV0dG9uJyxcblx0ICAgICAgICAgICAgICAgIHsgdHlwZTogJ2J1dHRvbicsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlU2hvd09ubHlUb2dnbGUuYmluZCh0aGlzKSwgY2xhc3NOYW1lOiAnYnRuIGJ0bi1wcmltYXJ5Jyxcblx0ICAgICAgICAgICAgICAgICAgICAnZGF0YS10b2dnbGUnOiAnYnV0dG9uJywgJ2FyaWEtcHJlc3NlZCc6ICdmYWxzZScgfSxcblx0ICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuc2hvd1NlbGVjdGVkID8gX0NvbnN0MlsnZGVmYXVsdCddLlNIT1dfQUxMIDogX0NvbnN0MlsnZGVmYXVsdCddLlNIT1dfT05MWV9TRUxFQ1Rcblx0ICAgICAgICAgICAgKSA6IG51bGw7XG5cdFxuXHQgICAgICAgICAgICB2YXIgbW9kYWwgPSB0aGlzLnByb3BzLmVuYWJsZUluc2VydCA/IHRoaXMucmVuZGVySW5zZXJ0Um93TW9kYWwobW9kYWxDbGFzc05hbWUpIDogbnVsbDtcblx0ICAgICAgICAgICAgdmFyIHdhcm5pbmdTdHlsZSA9IHtcblx0ICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwibm9uZVwiLFxuXHQgICAgICAgICAgICAgICAgbWFyZ2luQm90dG9tOiAwXG5cdCAgICAgICAgICAgIH07XG5cdFxuXHQgICAgICAgICAgICB2YXIgZXhwb3J0Q1NWID0gdGhpcy5wcm9wcy5lbmFibGVFeHBvcnRDU1YgPyBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICdidXR0b24nLFxuXHQgICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiAnYnRuIGJ0bi1zdWNjZXNzJywgb25DbGljazogdGhpcy5oYW5kbGVFeHBvcnRDU1YuYmluZCh0aGlzKSB9LFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoJ2knLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tZXhwb3J0JyB9KSxcblx0ICAgICAgICAgICAgICAgICcgRXhwb3J0IHRvIENTVidcblx0ICAgICAgICAgICAgKSA6IG51bGw7XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncm93JyB9LFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2wteHMtMTIgY29sLXNtLTYgY29sLW1kLTYgY29sLWxnLTgnIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2J0bi1ncm91cCBidG4tZ3JvdXAtc20nLCByb2xlOiAnZ3JvdXAnIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydENTVixcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0QnRuLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVCdG4sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHNob3dTZWxlY3RlZE9ubHlCdG5cblx0ICAgICAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2wteHMtMTIgY29sLXNtLTYgY29sLW1kLTYgY29sLWxnLTQnIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgc2VhcmNoVGV4dElucHV0XG5cdCAgICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoX05vdGlmaWNhdGlvbkpzMlsnZGVmYXVsdCddLCB7IHJlZjogJ25vdGlmaWVyJyB9KSxcblx0ICAgICAgICAgICAgICAgIG1vZGFsXG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ3JlbmRlclNlYXJjaFBhbmVsJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyU2VhcmNoUGFuZWwoKSB7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmVuYWJsZVNlYXJjaCkge1xuXHQgICAgICAgICAgICAgICAgdmFyIGNsYXNzTmFtZXMgPSAnZm9ybS1ncm91cCBmb3JtLWdyb3VwLXNtJztcblx0ICAgICAgICAgICAgICAgIHZhciBjbGVhckJ0biA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5jbGVhclNlYXJjaCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGNsZWFyQnRuID0gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdzcGFuJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdpbnB1dC1ncm91cC1idG4nIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnRuIGJ0bi1kZWZhdWx0Jyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYnV0dG9uJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUNsZWFyQnRuQ2xpY2sgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDbGVhcidcblx0ICAgICAgICAgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICAgICAgICAgICk7XG5cdCAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lcyA9ICdmb3JtLWdyb3VwIGZvcm0tZ3JvdXAtc20gaW5wdXQtZ3JvdXAgaW5wdXQtZ3JvdXAtc20nO1xuXHQgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyB9LFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgcmVmOiAnc2VhY2hJbnB1dCcsIGNsYXNzTmFtZTogJ2Zvcm0tY29udHJvbCcsIHR5cGU6ICd0ZXh0Jyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IHRoaXMucHJvcHMuc2VhcmNoUGxhY2Vob2xkZXIgPyB0aGlzLnByb3BzLnNlYXJjaFBsYWNlaG9sZGVyIDogJ1NlYXJjaCcsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIG9uS2V5VXA6IHRoaXMuaGFuZGxlS2V5VXAuYmluZCh0aGlzKSB9KSxcblx0ICAgICAgICAgICAgICAgICAgICBjbGVhckJ0blxuXHQgICAgICAgICAgICAgICAgKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ3JlbmRlckluc2VydFJvd01vZGFsJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVySW5zZXJ0Um93TW9kYWwobW9kYWxDbGFzc05hbWUpIHtcblx0ICAgICAgICAgICAgdmFyIHZhbGlkYXRlU3RhdGUgPSB0aGlzLnN0YXRlLnZhbGlkYXRlU3RhdGUgfHwge307XG5cdCAgICAgICAgICAgIHZhciBpbnB1dEZpZWxkID0gdGhpcy5wcm9wcy5jb2x1bW5zLm1hcChmdW5jdGlvbiAoY29sdW1uLCBpKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgZWRpdGFibGUgPSBjb2x1bW4uZWRpdGFibGUsXG5cdCAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0gY29sdW1uLmZvcm1hdCxcblx0ICAgICAgICAgICAgICAgICAgICBhdHRyID0geyByZWY6IGNvbHVtbi5maWVsZCArIGksIHBsYWNlaG9sZGVyOiBlZGl0YWJsZS5wbGFjZWhvbGRlciA/IGVkaXRhYmxlLnBsYWNlaG9sZGVyIDogY29sdW1uLm5hbWUgfTtcblx0XG5cdCAgICAgICAgICAgICAgICBpZiAoY29sdW1uLmF1dG9WYWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIC8vd2hlbiB5b3Ugd2FudCBzYW1lIGF1dG8gZ2VuZXJhdGUgdmFsdWUgYW5kIG5vdCBhbGxvdyBlZGl0LCBleGFtcGxlIElEIGZpZWxkXG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSB2YWxpZGF0ZVN0YXRlW2NvbHVtbi5maWVsZF0gPyBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdoZWxwLWJsb2NrIGJnLWRhbmdlcicgfSxcblx0ICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZVN0YXRlW2NvbHVtbi5maWVsZF1cblx0ICAgICAgICAgICAgICAgICkgOiBudWxsO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIGxldCBlZGl0b3IgPSBFZGl0b3IoZWRpdGFibGUsYXR0cixmb3JtYXQpO1xuXHQgICAgICAgICAgICAgICAgLy8gaWYoZWRpdG9yLnByb3BzLnR5cGUgJiYgZWRpdG9yLnByb3BzLnR5cGUgPT0gJ2NoZWNrYm94Jyl7XG5cdCAgICAgICAgICAgICAgICB2YXIgc3R5bGUgPSB7IGRpc3BsYXk6IGNvbHVtbi5oaWRkZW5JblBvcHVwID8gJ25vbmUnIDogJ2Jsb2NrJyB9O1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZm9ybS1ncm91cCcsIGtleTogY29sdW1uLmZpZWxkLCBzdHlsZTogc3R5bGUgfSxcblx0ICAgICAgICAgICAgICAgICAgICBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAgICAgJ2xhYmVsJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uLm5hbWVcblx0ICAgICAgICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgICAgICAgICgwLCBfRWRpdG9yMlsnZGVmYXVsdCddKShlZGl0YWJsZSwgYXR0ciwgZm9ybWF0LCAnJyksXG5cdCAgICAgICAgICAgICAgICAgICAgZXJyb3Jcblx0ICAgICAgICAgICAgICAgICk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB2YXIgbW9kYWxDbGFzcyA9ICgwLCBfY2xhc3NuYW1lczJbJ2RlZmF1bHQnXSkoXCJtb2RhbFwiLCBcImZhZGVcIiwgbW9kYWxDbGFzc05hbWUsIHtcblx0ICAgICAgICAgICAgICAgICdpbic6IHRoaXMuc3RhdGUuc2hha2VFZGl0b3IgfHwgdGhpcy5zdGF0ZS52YWxpZGF0ZVN0YXRlIC8vaGFjayBwcmV2ZW50IGJvb3RzdHJhcCBtb2RhbCBoaWRlIGJ5IHJlUmVuZGVyXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB2YXIgZGlhbG9nQ2xhc3MgPSAoMCwgX2NsYXNzbmFtZXMyWydkZWZhdWx0J10pKFwibW9kYWwtZGlhbG9nXCIsIFwibW9kYWwtc21cIiwge1xuXHQgICAgICAgICAgICAgICAgXCJhbmltYXRlZFwiOiB0aGlzLnN0YXRlLnNoYWtlRWRpdG9yLFxuXHQgICAgICAgICAgICAgICAgXCJzaGFrZVwiOiB0aGlzLnN0YXRlLnNoYWtlRWRpdG9yXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgIHsgcmVmOiAnbW9kYWwnLCBjbGFzc05hbWU6IG1vZGFsQ2xhc3MsIHRhYkluZGV4OiAnLTEnLCByb2xlOiAnZGlhbG9nJyB9LFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IGRpYWxvZ0NsYXNzIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ21vZGFsLWNvbnRlbnQnIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ21vZGFsLWhlYWRlcicgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdHlwZTogJ2J1dHRvbicsIGNsYXNzTmFtZTogJ2Nsb3NlJywgJ2RhdGEtZGlzbWlzcyc6ICdtb2RhbCcsICdhcmlhLWxhYmVsJzogJ0Nsb3NlJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnw5cnXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoNCcsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdtb2RhbC10aXRsZScgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTmV3IFJlY29yZCdcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcblx0ICAgICAgICAgICAgICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnbW9kYWwtYm9keScgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmb3JtJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHJlZjogJ2Zvcm0nIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRGaWVsZFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdtb2RhbC1mb290ZXInIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdidXR0b24nLCBjbGFzc05hbWU6ICdidG4gYnRuLWRlZmF1bHQnLCAnZGF0YS1kaXNtaXNzJzogJ21vZGFsJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDbG9zZSdcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdidXR0b24nLCBjbGFzc05hbWU6ICdidG4gYnRuLXN1Y2Nlc3MnLCBvbkNsaWNrOiB0aGlzLmhhbmRsZVNhdmVCdG5DbGljay5iaW5kKHRoaXMpIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NhdmUnXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIClcblx0ICAgICAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBUb29sQmFyO1xuXHR9KShfcmVhY3QyWydkZWZhdWx0J10uQ29tcG9uZW50KTtcblx0XG5cdFRvb2xCYXIucHJvcFR5cGVzID0ge1xuXHQgICAgb25BZGRSb3c6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYyxcblx0ICAgIG9uRHJvcFJvdzogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLFxuXHQgICAgb25TaG93T25seVNlbGVjdGVkOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmZ1bmMsXG5cdCAgICBlbmFibGVJbnNlcnQ6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCxcblx0ICAgIGVuYWJsZURlbGV0ZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLFxuXHQgICAgZW5hYmxlU2VhcmNoOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsXG5cdCAgICBlbmFibGVTaG93T25seVNlbGVjdGVkOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsXG5cdCAgICBjb2x1bW5zOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmFycmF5LFxuXHQgICAgc2VhcmNoUGxhY2Vob2xkZXI6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgICAgY2xlYXJTZWFyY2g6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbFxuXHR9O1xuXHRcblx0VG9vbEJhci5kZWZhdWx0UHJvcHMgPSB7XG5cdCAgICBlbmFibGVJbnNlcnQ6IGZhbHNlLFxuXHQgICAgZW5hYmxlRGVsZXRlOiBmYWxzZSxcblx0ICAgIGVuYWJsZVNlYXJjaDogZmFsc2UsXG5cdCAgICBlbmFibGVTaG93T25seVNlbGVjdGVkOiBmYWxzZSxcblx0ICAgIGNsZWFyU2VhcmNoOiBmYWxzZVxuXHR9O1xuXHRleHBvcnRzWydkZWZhdWx0J10gPSBUb29sQmFyO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSxcbi8qIDM1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5yYy1zd2l0Y2h7cG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTppbmxpbmUtYmxvY2s7Ym94LXNpemluZzpib3JkZXItYm94O3dpZHRoOjQ0cHg7aGVpZ2h0OjIycHg7bGluZS1oZWlnaHQ6MjBweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Ym9yZGVyLXJhZGl1czoyMHB4IDIwcHg7Ym9yZGVyOjFweCBzb2xpZCAjY2NjO2JhY2tncm91bmQtY29sb3I6I2NjYztjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOmFsbCAuM3MgY3ViaWMtYmV6aWVyKC4zNSwwLC4yNSwxKX0ucmMtc3dpdGNoLWlubmVye2NvbG9yOiNmZmY7Zm9udC1zaXplOjEycHg7cG9zaXRpb246YWJzb2x1dGU7bGVmdDoyNHB4fS5yYy1zd2l0Y2g6YWZ0ZXJ7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MThweDtoZWlnaHQ6MThweDtsZWZ0OjJweDt0b3A6MXB4O2JvcmRlci1yYWRpdXM6NTAlIDUwJTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Y29udGVudDpcXFwiIFxcXCI7Y3Vyc29yOnBvaW50ZXI7Ym94LXNoYWRvdzowIDJweCA1cHggcmdiYSgwLDAsMCwuMjYpOy13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEpO3RyYW5zZm9ybTpzY2FsZSgxKTt0cmFuc2l0aW9uOmxlZnQgLjNzIGN1YmljLWJlemllciguMzUsMCwuMjUsMSk7LXdlYmtpdC1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllciguMzUsMCwuMjUsMSk7YW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoLjM1LDAsLjI1LDEpOy13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uOi4zczthbmltYXRpb24tZHVyYXRpb246LjNzOy13ZWJraXQtYW5pbWF0aW9uLW5hbWU6cmNTd2l0Y2hPZmY7YW5pbWF0aW9uLW5hbWU6cmNTd2l0Y2hPZmZ9LnJjLXN3aXRjaDpob3ZlcjphZnRlcnstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxLjEpO3RyYW5zZm9ybTpzY2FsZSgxLjEpOy13ZWJraXQtYW5pbWF0aW9uLW5hbWU6cmNTd2l0Y2hPbjthbmltYXRpb24tbmFtZTpyY1N3aXRjaE9ufS5yYy1zd2l0Y2gtY2hlY2tlZHtib3JkZXI6MXB4IHNvbGlkICM4N2QwNjg7YmFja2dyb3VuZC1jb2xvcjojODdkMDY4fS5yYy1zd2l0Y2gtY2hlY2tlZCAucmMtc3dpdGNoLWlubmVye2xlZnQ6NnB4fS5yYy1zd2l0Y2gtY2hlY2tlZDphZnRlcntsZWZ0OjIycHh9LnJjLXN3aXRjaC1kaXNhYmxlZHtjdXJzb3I6bm8tZHJvcDtiYWNrZ3JvdW5kOiNjY2M7Ym9yZGVyLWNvbG9yOiNjY2N9LnJjLXN3aXRjaC1kaXNhYmxlZDphZnRlcntiYWNrZ3JvdW5kOiM5ZTllOWU7LXdlYmtpdC1hbmltYXRpb24tbmFtZTpub25lO2FuaW1hdGlvbi1uYW1lOm5vbmU7Y3Vyc29yOm5vLWRyb3B9LnJjLXN3aXRjaC1kaXNhYmxlZDpob3ZlcjphZnRlcnstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxKTt0cmFuc2Zvcm06c2NhbGUoMSk7LXdlYmtpdC1hbmltYXRpb24tbmFtZTpub25lO2FuaW1hdGlvbi1uYW1lOm5vbmV9LnJjLXN3aXRjaC1sYWJlbHtkaXNwbGF5OmlubGluZS1ibG9jaztsaW5lLWhlaWdodDoyMHB4O2ZvbnQtc2l6ZToxNHB4O3BhZGRpbmctbGVmdDoxMHB4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTt3aGl0ZS1zcGFjZTpub3JtYWw7cG9pbnRlci1ldmVudHM6bm9uZTstd2Via2l0LXVzZXItc2VsZWN0OnRleHQ7LW1vei11c2VyLXNlbGVjdDp0ZXh0Oy1tcy11c2VyLXNlbGVjdDp0ZXh0O3VzZXItc2VsZWN0OnRleHR9QC13ZWJraXQta2V5ZnJhbWVzIHJjU3dpdGNoT257MCV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMSk7dHJhbnNmb3JtOnNjYWxlKDEpfTUwJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxLjI1KTt0cmFuc2Zvcm06c2NhbGUoMS4yNSl9dG97LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMS4xKTt0cmFuc2Zvcm06c2NhbGUoMS4xKX19QGtleWZyYW1lcyByY1N3aXRjaE9uezAley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEpO3RyYW5zZm9ybTpzY2FsZSgxKX01MCV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMS4yNSk7dHJhbnNmb3JtOnNjYWxlKDEuMjUpfXRvey13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEuMSk7dHJhbnNmb3JtOnNjYWxlKDEuMSl9fUAtd2Via2l0LWtleWZyYW1lcyByY1N3aXRjaE9mZnswJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxLjEpO3RyYW5zZm9ybTpzY2FsZSgxLjEpfXRvey13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEpO3RyYW5zZm9ybTpzY2FsZSgxKX19QGtleWZyYW1lcyByY1N3aXRjaE9mZnswJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxLjEpO3RyYW5zZm9ybTpzY2FsZSgxLjEpfXRvey13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEpO3RyYW5zZm9ybTpzY2FsZSgxKX19XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogMzYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qXHJcblx0XHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxyXG5cdFx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxyXG5cdCovXHJcblx0Ly8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcclxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGxpc3QgPSBbXTtcclxuXHRcclxuXHRcdC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcclxuXHRcdGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcclxuXHRcdFx0dmFyIHJlc3VsdCA9IFtdO1xyXG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHZhciBpdGVtID0gdGhpc1tpXTtcclxuXHRcdFx0XHRpZihpdGVtWzJdKSB7XHJcblx0XHRcdFx0XHRyZXN1bHQucHVzaChcIkBtZWRpYSBcIiArIGl0ZW1bMl0gKyBcIntcIiArIGl0ZW1bMV0gKyBcIn1cIik7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHJlc3VsdC5wdXNoKGl0ZW1bMV0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gcmVzdWx0LmpvaW4oXCJcIik7XHJcblx0XHR9O1xyXG5cdFxyXG5cdFx0Ly8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcclxuXHRcdGxpc3QuaSA9IGZ1bmN0aW9uKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcclxuXHRcdFx0aWYodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpXHJcblx0XHRcdFx0bW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgXCJcIl1dO1xyXG5cdFx0XHR2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xyXG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHZhciBpZCA9IHRoaXNbaV1bMF07XHJcblx0XHRcdFx0aWYodHlwZW9mIGlkID09PSBcIm51bWJlclwiKVxyXG5cdFx0XHRcdFx0YWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZvcihpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHR2YXIgaXRlbSA9IG1vZHVsZXNbaV07XHJcblx0XHRcdFx0Ly8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxyXG5cdFx0XHRcdC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXHJcblx0XHRcdFx0Ly8gIHdoZW4gYSBtb2R1bGUgaXMgaW1wb3J0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgbWVkaWEgcXVlcmllcy5cclxuXHRcdFx0XHQvLyAgSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxyXG5cdFx0XHRcdGlmKHR5cGVvZiBpdGVtWzBdICE9PSBcIm51bWJlclwiIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XHJcblx0XHRcdFx0XHRpZihtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XHJcblx0XHRcdFx0XHRcdGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xyXG5cdFx0XHRcdFx0fSBlbHNlIGlmKG1lZGlhUXVlcnkpIHtcclxuXHRcdFx0XHRcdFx0aXRlbVsyXSA9IFwiKFwiICsgaXRlbVsyXSArIFwiKSBhbmQgKFwiICsgbWVkaWFRdWVyeSArIFwiKVwiO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0bGlzdC5wdXNoKGl0ZW0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcdHJldHVybiBsaXN0O1xyXG5cdH07XHJcblxuXG4vKioqLyB9LFxuLyogMzcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cdFxuXHR2YXIgUmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHR2YXIgY2xhc3NOYW1lcyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHRmdW5jdGlvbiBub29wKCkge31cblx0XG5cdHZhciBTd2l0Y2ggPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cdCAgZGlzcGxheU5hbWU6ICdTd2l0Y2gnLFxuXHRcblx0ICBwcm9wVHlwZXM6IHtcblx0ICAgIGNsYXNzTmFtZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcblx0ICAgIHByZWZpeENsczogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcblx0ICAgIGRpc2FibGVkOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCxcblx0ICAgIHN0eWxlOiBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0LFxuXHQgICAgY2hlY2tlZENoaWxkcmVuOiBSZWFjdC5Qcm9wVHlwZXMuYW55LFxuXHQgICAgdW5DaGVja2VkQ2hpbGRyZW46IFJlYWN0LlByb3BUeXBlcy5hbnksXG5cdCAgICBvbkNoYW5nZTogUmVhY3QuUHJvcFR5cGVzLmZ1bmNcblx0ICB9LFxuXHQgIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24gZ2V0RGVmYXVsdFByb3BzKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgcHJlZml4Q2xzOiAncmMtc3dpdGNoJyxcblx0ICAgICAgc3R5bGU6IHt9LFxuXHQgICAgICBjaGVja2VkQ2hpbGRyZW46IG51bGwsXG5cdCAgICAgIHVuQ2hlY2tlZENoaWxkcmVuOiBudWxsLFxuXHQgICAgICBjbGFzc05hbWU6ICcnLFxuXHQgICAgICBkZWZhdWx0Q2hlY2tlZDogZmFsc2UsXG5cdCAgICAgIG9uQ2hhbmdlOiBub29wXG5cdCAgICB9O1xuXHQgIH0sXG5cdCAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG5cdCAgICB2YXIgcHJvcHMgPSB0aGlzLnByb3BzO1xuXHQgICAgdmFyIGNoZWNrZWQgPSBmYWxzZTtcblx0ICAgIGlmICgnY2hlY2tlZCcgaW4gcHJvcHMpIHtcblx0ICAgICAgY2hlY2tlZCA9ICEhcHJvcHMuY2hlY2tlZDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGNoZWNrZWQgPSAhIXByb3BzLmRlZmF1bHRDaGVja2VkO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgY2hlY2tlZDogY2hlY2tlZFxuXHQgICAgfTtcblx0ICB9LFxuXHQgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHM6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG5cdCAgICBpZiAoJ2NoZWNrZWQnIGluIG5leHRQcm9wcykge1xuXHQgICAgICB0aGlzLnNldFN0YXRlKHtcblx0ICAgICAgICBjaGVja2VkOiAhIW5leHRQcm9wcy5jaGVja2VkXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgdG9nZ2xlOiBmdW5jdGlvbiB0b2dnbGUoKSB7XG5cdCAgICB2YXIgY2hlY2tlZCA9ICF0aGlzLnN0YXRlLmNoZWNrZWQ7XG5cdCAgICBpZiAoISgnY2hlY2tlZCcgaW4gdGhpcy5wcm9wcykpIHtcblx0ICAgICAgdGhpcy5zZXRTdGF0ZSh7XG5cdCAgICAgICAgY2hlY2tlZDogY2hlY2tlZFxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIHRoaXMucHJvcHMub25DaGFuZ2UoY2hlY2tlZCk7XG5cdCAgfSxcblx0ICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgIHZhciBfY2xhc3NOYW1lcztcblx0XG5cdCAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcztcblx0ICAgIHZhciBjbGFzc05hbWUgPSBfcHJvcHMuY2xhc3NOYW1lO1xuXHQgICAgdmFyIHByZWZpeENscyA9IF9wcm9wcy5wcmVmaXhDbHM7XG5cdCAgICB2YXIgZGlzYWJsZWQgPSBfcHJvcHMuZGlzYWJsZWQ7XG5cdCAgICB2YXIgc3R5bGUgPSBfcHJvcHMuc3R5bGU7XG5cdCAgICB2YXIgY2hlY2tlZENoaWxkcmVuID0gX3Byb3BzLmNoZWNrZWRDaGlsZHJlbjtcblx0ICAgIHZhciB1bkNoZWNrZWRDaGlsZHJlbiA9IF9wcm9wcy51bkNoZWNrZWRDaGlsZHJlbjtcblx0XG5cdCAgICB2YXIgY2hlY2tlZCA9IHRoaXMuc3RhdGUuY2hlY2tlZDtcblx0ICAgIHZhciBzd2l0Y2hDbGFzc05hbWUgPSBjbGFzc05hbWVzKChfY2xhc3NOYW1lcyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIGNsYXNzTmFtZSwgISFjbGFzc05hbWUpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIHByZWZpeENscywgdHJ1ZSksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgcHJlZml4Q2xzICsgJy1jaGVja2VkJywgY2hlY2tlZCksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgcHJlZml4Q2xzICsgJy1kaXNhYmxlZCcsIGRpc2FibGVkKSwgX2NsYXNzTmFtZXMpKTtcblx0ICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAnc3BhbicsXG5cdCAgICAgIHsgY2xhc3NOYW1lOiBzd2l0Y2hDbGFzc05hbWUsXG5cdCAgICAgICAgb25DbGljazogZGlzYWJsZWQgPyBub29wIDogdGhpcy50b2dnbGUsXG5cdCAgICAgICAgc3R5bGU6IHN0eWxlIH0sXG5cdCAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgJ3NwYW4nLFxuXHQgICAgICAgIHsgY2xhc3NOYW1lOiBwcmVmaXhDbHMgKyAnLWlubmVyJyB9LFxuXHQgICAgICAgIGNoZWNrZWQgPyBjaGVja2VkQ2hpbGRyZW4gOiB1bkNoZWNrZWRDaGlsZHJlblxuXHQgICAgICApXG5cdCAgICApO1xuXHQgIH1cblx0fSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFN3aXRjaDtcblxuLyoqKi8gfSxcbi8qIDM4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfU2VsZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHR2YXIgX1NlbGVjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TZWxlY3QpO1xuXHRcblx0dmFyIF91dGlsc1N0cmlwRGlhY3JpdGljcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0dmFyIF91dGlsc1N0cmlwRGlhY3JpdGljczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91dGlsc1N0cmlwRGlhY3JpdGljcyk7XG5cdFxuXHR2YXIgcmVxdWVzdElkID0gMDtcblx0XG5cdGZ1bmN0aW9uIGluaXRDYWNoZShjYWNoZSkge1xuXHRcdGlmIChjYWNoZSAmJiB0eXBlb2YgY2FjaGUgIT09ICdvYmplY3QnKSB7XG5cdFx0XHRjYWNoZSA9IHt9O1xuXHRcdH1cblx0XHRyZXR1cm4gY2FjaGUgPyBjYWNoZSA6IG51bGw7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZUNhY2hlKGNhY2hlLCBpbnB1dCwgZGF0YSkge1xuXHRcdGlmICghY2FjaGUpIHJldHVybjtcblx0XHRjYWNoZVtpbnB1dF0gPSBkYXRhO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRGcm9tQ2FjaGUoY2FjaGUsIGlucHV0KSB7XG5cdFx0aWYgKCFjYWNoZSkgcmV0dXJuO1xuXHRcdGZvciAodmFyIGkgPSBpbnB1dC5sZW5ndGg7IGkgPj0gMDsgLS1pKSB7XG5cdFx0XHR2YXIgY2FjaGVLZXkgPSBpbnB1dC5zbGljZSgwLCBpKTtcblx0XHRcdGlmIChjYWNoZVtjYWNoZUtleV0gJiYgKGlucHV0ID09PSBjYWNoZUtleSB8fCBjYWNoZVtjYWNoZUtleV0uY29tcGxldGUpKSB7XG5cdFx0XHRcdHJldHVybiBjYWNoZVtjYWNoZUtleV07XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB0aGVuUHJvbWlzZShwcm9taXNlLCBjYWxsYmFjaykge1xuXHRcdGlmICghcHJvbWlzZSB8fCB0eXBlb2YgcHJvbWlzZS50aGVuICE9PSAnZnVuY3Rpb24nKSByZXR1cm47XG5cdFx0cmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0Y2FsbGJhY2sobnVsbCwgZGF0YSk7XG5cdFx0fSwgZnVuY3Rpb24gKGVycikge1xuXHRcdFx0Y2FsbGJhY2soZXJyKTtcblx0XHR9KTtcblx0fVxuXHRcblx0dmFyIHN0cmluZ09yTm9kZSA9IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMub25lT2ZUeXBlKFtfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZywgX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ub2RlXSk7XG5cdFxuXHR2YXIgQXN5bmMgPSBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlQ2xhc3Moe1xuXHRcdGRpc3BsYXlOYW1lOiAnQXN5bmMnLFxuXHRcblx0XHRwcm9wVHlwZXM6IHtcblx0XHRcdGNhY2hlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmFueSwgLy8gb2JqZWN0IHRvIHVzZSB0byBjYWNoZSByZXN1bHRzLCBjYW4gYmUgbnVsbCB0byBkaXNhYmxlIGNhY2hlXG5cdFx0XHRpZ25vcmVBY2NlbnRzOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsIC8vIHdoZXRoZXIgdG8gc3RyaXAgZGlhY3JpdGljcyB3aGVuIGZpbHRlcmluZyAoc2hhcmVkIHdpdGggU2VsZWN0KVxuXHRcdFx0aWdub3JlQ2FzZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLCAvLyB3aGV0aGVyIHRvIHBlcmZvcm0gY2FzZS1pbnNlbnNpdGl2ZSBmaWx0ZXJpbmcgKHNoYXJlZCB3aXRoIFNlbGVjdClcblx0XHRcdGlzTG9hZGluZzogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLCAvLyBvdmVycmlkZXMgdGhlIGlzTG9hZGluZyBzdGF0ZSB3aGVuIHNldCB0byB0cnVlXG5cdFx0XHRsb2FkT3B0aW9uczogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsIC8vIGZ1bmN0aW9uIHRvIGNhbGwgdG8gbG9hZCBvcHRpb25zIGFzeW5jaHJvbm91c2x5XG5cdFx0XHRsb2FkaW5nUGxhY2Vob2xkZXI6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLCAvLyByZXBsYWNlcyB0aGUgcGxhY2Vob2xkZXIgd2hpbGUgb3B0aW9ucyBhcmUgbG9hZGluZ1xuXHRcdFx0bWluaW11bUlucHV0OiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm51bWJlciwgLy8gdGhlIG1pbmltdW0gbnVtYmVyIG9mIGNoYXJhY3RlcnMgdGhhdCB0cmlnZ2VyIGxvYWRPcHRpb25zXG5cdFx0XHRub1Jlc3VsdHNUZXh0OiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZywgLy8gcGxhY2Vob2xkZXIgZGlzcGxheWVkIHdoZW4gdGhlcmUgYXJlIG5vIG1hdGNoaW5nIHNlYXJjaCByZXN1bHRzIChzaGFyZWQgd2l0aCBTZWxlY3QpXG5cdFx0XHRwbGFjZWhvbGRlcjogc3RyaW5nT3JOb2RlLCAvLyBmaWVsZCBwbGFjZWhvbGRlciwgZGlzcGxheWVkIHdoZW4gdGhlcmUncyBubyB2YWx1ZSAoc2hhcmVkIHdpdGggU2VsZWN0KVxuXHRcdFx0c2VhcmNoUHJvbXB0VGV4dDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsIC8vIGxhYmVsIHRvIHByb21wdCBmb3Igc2VhcmNoIGlucHV0XG5cdFx0XHRzZWFyY2hpbmdUZXh0OiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZyB9LFxuXHRcdC8vIG1lc3NhZ2UgdG8gZGlzcGxheSB3aGlsZSBvcHRpb25zIGFyZSBsb2FkaW5nXG5cdFx0Z2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRjYWNoZTogdHJ1ZSxcblx0XHRcdFx0aWdub3JlQWNjZW50czogdHJ1ZSxcblx0XHRcdFx0aWdub3JlQ2FzZTogdHJ1ZSxcblx0XHRcdFx0bG9hZGluZ1BsYWNlaG9sZGVyOiAnTG9hZGluZy4uLicsXG5cdFx0XHRcdG1pbmltdW1JbnB1dDogMCxcblx0XHRcdFx0c2VhcmNoaW5nVGV4dDogJ1NlYXJjaGluZy4uLicsXG5cdFx0XHRcdHNlYXJjaFByb21wdFRleHQ6ICdUeXBlIHRvIHNlYXJjaCdcblx0XHRcdH07XG5cdFx0fSxcblx0XHRnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGNhY2hlOiBpbml0Q2FjaGUodGhpcy5wcm9wcy5jYWNoZSksXG5cdFx0XHRcdGlzTG9hZGluZzogZmFsc2UsXG5cdFx0XHRcdG9wdGlvbnM6IFtdXG5cdFx0XHR9O1xuXHRcdH0sXG5cdFx0Y29tcG9uZW50V2lsbE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG5cdFx0XHR0aGlzLl9sYXN0SW5wdXQgPSAnJztcblx0XHR9LFxuXHRcdGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcblx0XHRcdHRoaXMubG9hZE9wdGlvbnMoJycpO1xuXHRcdH0sXG5cdFx0Y29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcblx0XHRcdGlmIChuZXh0UHJvcHMuY2FjaGUgIT09IHRoaXMucHJvcHMuY2FjaGUpIHtcblx0XHRcdFx0dGhpcy5zZXRTdGF0ZSh7XG5cdFx0XHRcdFx0Y2FjaGU6IGluaXRDYWNoZShuZXh0UHJvcHMuY2FjaGUpXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0Zm9jdXM6IGZ1bmN0aW9uIGZvY3VzKCkge1xuXHRcdFx0dGhpcy5yZWZzLnNlbGVjdC5mb2N1cygpO1xuXHRcdH0sXG5cdFx0cmVzZXRTdGF0ZTogZnVuY3Rpb24gcmVzZXRTdGF0ZSgpIHtcblx0XHRcdHRoaXMuX2N1cnJlbnRSZXF1ZXN0SWQgPSAtMTtcblx0XHRcdHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0XHRpc0xvYWRpbmc6IGZhbHNlLFxuXHRcdFx0XHRvcHRpb25zOiBbXVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRnZXRSZXNwb25zZUhhbmRsZXI6IGZ1bmN0aW9uIGdldFJlc3BvbnNlSGFuZGxlcihpbnB1dCkge1xuXHRcdFx0dmFyIF90aGlzID0gdGhpcztcblx0XG5cdFx0XHR2YXIgX3JlcXVlc3RJZCA9IHRoaXMuX2N1cnJlbnRSZXF1ZXN0SWQgPSByZXF1ZXN0SWQrKztcblx0XHRcdHJldHVybiBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG5cdFx0XHRcdGlmIChlcnIpIHRocm93IGVycjtcblx0XHRcdFx0aWYgKCFfdGhpcy5pc01vdW50ZWQoKSkgcmV0dXJuO1xuXHRcdFx0XHR1cGRhdGVDYWNoZShfdGhpcy5zdGF0ZS5jYWNoZSwgaW5wdXQsIGRhdGEpO1xuXHRcdFx0XHRpZiAoX3JlcXVlc3RJZCAhPT0gX3RoaXMuX2N1cnJlbnRSZXF1ZXN0SWQpIHJldHVybjtcblx0XHRcdFx0X3RoaXMuc2V0U3RhdGUoe1xuXHRcdFx0XHRcdGlzTG9hZGluZzogZmFsc2UsXG5cdFx0XHRcdFx0b3B0aW9uczogZGF0YSAmJiBkYXRhLm9wdGlvbnMgfHwgW11cblx0XHRcdFx0fSk7XG5cdFx0XHR9O1xuXHRcdH0sXG5cdFx0bG9hZE9wdGlvbnM6IGZ1bmN0aW9uIGxvYWRPcHRpb25zKGlucHV0KSB7XG5cdFx0XHRpZiAodGhpcy5wcm9wcy5pZ25vcmVBY2NlbnRzKSBpbnB1dCA9ICgwLCBfdXRpbHNTdHJpcERpYWNyaXRpY3MyWydkZWZhdWx0J10pKGlucHV0KTtcblx0XHRcdGlmICh0aGlzLnByb3BzLmlnbm9yZUNhc2UpIGlucHV0ID0gaW5wdXQudG9Mb3dlckNhc2UoKTtcblx0XHRcdHRoaXMuX2xhc3RJbnB1dCA9IGlucHV0O1xuXHRcdFx0aWYgKGlucHV0Lmxlbmd0aCA8IHRoaXMucHJvcHMubWluaW11bUlucHV0KSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLnJlc2V0U3RhdGUoKTtcblx0XHRcdH1cblx0XHRcdHZhciBjYWNoZVJlc3VsdCA9IGdldEZyb21DYWNoZSh0aGlzLnN0YXRlLmNhY2hlLCBpbnB1dCk7XG5cdFx0XHRpZiAoY2FjaGVSZXN1bHQpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0XHRcdG9wdGlvbnM6IGNhY2hlUmVzdWx0Lm9wdGlvbnNcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLnNldFN0YXRlKHtcblx0XHRcdFx0aXNMb2FkaW5nOiB0cnVlXG5cdFx0XHR9KTtcblx0XHRcdHZhciByZXNwb25zZUhhbmRsZXIgPSB0aGlzLmdldFJlc3BvbnNlSGFuZGxlcihpbnB1dCk7XG5cdFx0XHRyZXR1cm4gdGhlblByb21pc2UodGhpcy5wcm9wcy5sb2FkT3B0aW9ucyhpbnB1dCwgcmVzcG9uc2VIYW5kbGVyKSwgcmVzcG9uc2VIYW5kbGVyKTtcblx0XHR9LFxuXHRcdHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHRcdFx0dmFyIG5vUmVzdWx0c1RleHQgPSB0aGlzLnByb3BzLm5vUmVzdWx0c1RleHQ7XG5cdFx0XHR2YXIgX3N0YXRlID0gdGhpcy5zdGF0ZTtcblx0XHRcdHZhciBpc0xvYWRpbmcgPSBfc3RhdGUuaXNMb2FkaW5nO1xuXHRcdFx0dmFyIG9wdGlvbnMgPSBfc3RhdGUub3B0aW9ucztcblx0XG5cdFx0XHRpZiAodGhpcy5wcm9wcy5pc0xvYWRpbmcpIGlzTG9hZGluZyA9IHRydWU7XG5cdFx0XHR2YXIgcGxhY2Vob2xkZXIgPSBpc0xvYWRpbmcgPyB0aGlzLnByb3BzLmxvYWRpbmdQbGFjZWhvbGRlciA6IHRoaXMucHJvcHMucGxhY2Vob2xkZXI7XG5cdFx0XHRpZiAoIW9wdGlvbnMubGVuZ3RoKSB7XG5cdFx0XHRcdGlmICh0aGlzLl9sYXN0SW5wdXQubGVuZ3RoIDwgdGhpcy5wcm9wcy5taW5pbXVtSW5wdXQpIG5vUmVzdWx0c1RleHQgPSB0aGlzLnByb3BzLnNlYXJjaFByb21wdFRleHQ7XG5cdFx0XHRcdGlmIChpc0xvYWRpbmcpIG5vUmVzdWx0c1RleHQgPSB0aGlzLnByb3BzLnNlYXJjaGluZ1RleHQ7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoX1NlbGVjdDJbJ2RlZmF1bHQnXSwgX2V4dGVuZHMoe30sIHRoaXMucHJvcHMsIHtcblx0XHRcdFx0cmVmOiAnc2VsZWN0Jyxcblx0XHRcdFx0aXNMb2FkaW5nOiBpc0xvYWRpbmcsXG5cdFx0XHRcdG5vUmVzdWx0c1RleHQ6IG5vUmVzdWx0c1RleHQsXG5cdFx0XHRcdG9uSW5wdXRDaGFuZ2U6IHRoaXMubG9hZE9wdGlvbnMsXG5cdFx0XHRcdG9wdGlvbnM6IG9wdGlvbnMsXG5cdFx0XHRcdHBsYWNlaG9sZGVyOiBwbGFjZWhvbGRlclxuXHRcdFx0fSkpO1xuXHRcdH1cblx0fSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEFzeW5jO1xuXG4vKioqLyB9LFxuLyogMzkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgX2NsYXNzbmFtZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9jbGFzc25hbWVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzbmFtZXMpO1xuXHRcblx0dmFyIE9wdGlvbiA9IF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVDbGFzcyh7XG5cdFx0ZGlzcGxheU5hbWU6ICdPcHRpb24nLFxuXHRcblx0XHRwcm9wVHlwZXM6IHtcblx0XHRcdGNoaWxkcmVuOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm5vZGUsXG5cdFx0XHRjbGFzc05hbWU6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLCAvLyBjbGFzc05hbWUgKGJhc2VkIG9uIG1vdXNlIHBvc2l0aW9uKVxuXHRcdFx0aXNEaXNhYmxlZDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLCAvLyB0aGUgb3B0aW9uIGlzIGRpc2FibGVkXG5cdFx0XHRpc0ZvY3VzZWQ6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCwgLy8gdGhlIG9wdGlvbiBpcyBmb2N1c2VkXG5cdFx0XHRpc1NlbGVjdGVkOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsIC8vIHRoZSBvcHRpb24gaXMgc2VsZWN0ZWRcblx0XHRcdG9uRm9jdXM6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYywgLy8gbWV0aG9kIHRvIGhhbmRsZSBtb3VzZUVudGVyIG9uIG9wdGlvbiBlbGVtZW50XG5cdFx0XHRvblNlbGVjdDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLCAvLyBtZXRob2QgdG8gaGFuZGxlIGNsaWNrIG9uIG9wdGlvbiBlbGVtZW50XG5cdFx0XHRvblVuZm9jdXM6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYywgLy8gbWV0aG9kIHRvIGhhbmRsZSBtb3VzZUxlYXZlIG9uIG9wdGlvbiBlbGVtZW50XG5cdFx0XHRvcHRpb246IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQgfSxcblx0XHQvLyBvYmplY3QgdGhhdCBpcyBiYXNlIGZvciB0aGF0IG9wdGlvblxuXHRcdGJsb2NrRXZlbnQ6IGZ1bmN0aW9uIGJsb2NrRXZlbnQoZXZlbnQpIHtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdGlmIChldmVudC50YXJnZXQudGFnTmFtZSAhPT0gJ0EnIHx8ICEoJ2hyZWYnIGluIGV2ZW50LnRhcmdldCkpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGV2ZW50LnRhcmdldC50YXJnZXQpIHtcblx0XHRcdFx0d2luZG93Lm9wZW4oZXZlbnQudGFyZ2V0LmhyZWYsIGV2ZW50LnRhcmdldC50YXJnZXQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSBldmVudC50YXJnZXQuaHJlZjtcblx0XHRcdH1cblx0XHR9LFxuXHRcblx0XHRoYW5kbGVNb3VzZURvd246IGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93bihldmVudCkge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0dGhpcy5wcm9wcy5vblNlbGVjdCh0aGlzLnByb3BzLm9wdGlvbiwgZXZlbnQpO1xuXHRcdH0sXG5cdFxuXHRcdGhhbmRsZU1vdXNlRW50ZXI6IGZ1bmN0aW9uIGhhbmRsZU1vdXNlRW50ZXIoZXZlbnQpIHtcblx0XHRcdHRoaXMub25Gb2N1cyhldmVudCk7XG5cdFx0fSxcblx0XG5cdFx0aGFuZGxlTW91c2VNb3ZlOiBmdW5jdGlvbiBoYW5kbGVNb3VzZU1vdmUoZXZlbnQpIHtcblx0XHRcdHRoaXMub25Gb2N1cyhldmVudCk7XG5cdFx0fSxcblx0XG5cdFx0aGFuZGxlVG91Y2hFbmQ6IGZ1bmN0aW9uIGhhbmRsZVRvdWNoRW5kKGV2ZW50KSB7XG5cdFx0XHQvLyBDaGVjayBpZiB0aGUgdmlldyBpcyBiZWluZyBkcmFnZ2VkLCBJbiB0aGlzIGNhc2Vcblx0XHRcdC8vIHdlIGRvbid0IHdhbnQgdG8gZmlyZSB0aGUgY2xpY2sgZXZlbnQgKGJlY2F1c2UgdGhlIHVzZXIgb25seSB3YW50cyB0byBzY3JvbGwpXG5cdFx0XHRpZiAodGhpcy5kcmFnZ2luZykgcmV0dXJuO1xuXHRcblx0XHRcdHRoaXMuaGFuZGxlTW91c2VEb3duKGV2ZW50KTtcblx0XHR9LFxuXHRcblx0XHRoYW5kbGVUb3VjaE1vdmU6IGZ1bmN0aW9uIGhhbmRsZVRvdWNoTW92ZShldmVudCkge1xuXHRcdFx0Ly8gU2V0IGEgZmxhZyB0aGF0IHRoZSB2aWV3IGlzIGJlaW5nIGRyYWdnZWRcblx0XHRcdHRoaXMuZHJhZ2dpbmcgPSB0cnVlO1xuXHRcdH0sXG5cdFxuXHRcdGhhbmRsZVRvdWNoU3RhcnQ6IGZ1bmN0aW9uIGhhbmRsZVRvdWNoU3RhcnQoZXZlbnQpIHtcblx0XHRcdC8vIFNldCBhIGZsYWcgdGhhdCB0aGUgdmlldyBpcyBub3QgYmVpbmcgZHJhZ2dlZFxuXHRcdFx0dGhpcy5kcmFnZ2luZyA9IGZhbHNlO1xuXHRcdH0sXG5cdFxuXHRcdG9uRm9jdXM6IGZ1bmN0aW9uIG9uRm9jdXMoZXZlbnQpIHtcblx0XHRcdGlmICghdGhpcy5wcm9wcy5pc0ZvY3VzZWQpIHtcblx0XHRcdFx0dGhpcy5wcm9wcy5vbkZvY3VzKHRoaXMucHJvcHMub3B0aW9uLCBldmVudCk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRyZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0XHRcdHZhciBvcHRpb24gPSB0aGlzLnByb3BzLm9wdGlvbjtcblx0XG5cdFx0XHR2YXIgY2xhc3NOYW1lID0gKDAsIF9jbGFzc25hbWVzMlsnZGVmYXVsdCddKSh0aGlzLnByb3BzLmNsYXNzTmFtZSwgb3B0aW9uLmNsYXNzTmFtZSk7XG5cdFxuXHRcdFx0cmV0dXJuIG9wdGlvbi5kaXNhYmxlZCA/IF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHRcdFx0XHQnZGl2Jyxcblx0XHRcdFx0eyBjbGFzc05hbWU6IGNsYXNzTmFtZSxcblx0XHRcdFx0XHRvbk1vdXNlRG93bjogdGhpcy5ibG9ja0V2ZW50LFxuXHRcdFx0XHRcdG9uQ2xpY2s6IHRoaXMuYmxvY2tFdmVudCB9LFxuXHRcdFx0XHR0aGlzLnByb3BzLmNoaWxkcmVuXG5cdFx0XHQpIDogX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdFx0XHRcdCdkaXYnLFxuXHRcdFx0XHR7IGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuXHRcdFx0XHRcdHN0eWxlOiBvcHRpb24uc3R5bGUsXG5cdFx0XHRcdFx0b25Nb3VzZURvd246IHRoaXMuaGFuZGxlTW91c2VEb3duLFxuXHRcdFx0XHRcdG9uTW91c2VFbnRlcjogdGhpcy5oYW5kbGVNb3VzZUVudGVyLFxuXHRcdFx0XHRcdG9uTW91c2VNb3ZlOiB0aGlzLmhhbmRsZU1vdXNlTW92ZSxcblx0XHRcdFx0XHRvblRvdWNoU3RhcnQ6IHRoaXMuaGFuZGxlVG91Y2hTdGFydCxcblx0XHRcdFx0XHRvblRvdWNoTW92ZTogdGhpcy5oYW5kbGVUb3VjaE1vdmUsXG5cdFx0XHRcdFx0b25Ub3VjaEVuZDogdGhpcy5oYW5kbGVUb3VjaEVuZCxcblx0XHRcdFx0XHR0aXRsZTogb3B0aW9uLnRpdGxlIH0sXG5cdFx0XHRcdHRoaXMucHJvcHMuY2hpbGRyZW5cblx0XHRcdCk7XG5cdFx0fVxuXHR9KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gT3B0aW9uO1xuXG4vKioqLyB9LFxuLyogNDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgX2NsYXNzbmFtZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9jbGFzc25hbWVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzbmFtZXMpO1xuXHRcblx0dmFyIFZhbHVlID0gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUNsYXNzKHtcblx0XG5cdFx0ZGlzcGxheU5hbWU6ICdWYWx1ZScsXG5cdFxuXHRcdHByb3BUeXBlczoge1xuXHRcdFx0Y2hpbGRyZW46IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMubm9kZSxcblx0XHRcdGRpc2FibGVkOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsIC8vIGRpc2FibGVkIHByb3AgcGFzc2VkIHRvIFJlYWN0U2VsZWN0XG5cdFx0XHRvbkNsaWNrOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmZ1bmMsIC8vIG1ldGhvZCB0byBoYW5kbGUgY2xpY2sgb24gdmFsdWUgbGFiZWxcblx0XHRcdG9uUmVtb3ZlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmZ1bmMsIC8vIG1ldGhvZCB0byBoYW5kbGUgcmVtb3ZhbCBvZiB0aGUgdmFsdWVcblx0XHRcdHZhbHVlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkIH0sXG5cdFxuXHRcdC8vIHRoZSBvcHRpb24gb2JqZWN0IGZvciB0aGlzIHZhbHVlXG5cdFx0aGFuZGxlTW91c2VEb3duOiBmdW5jdGlvbiBoYW5kbGVNb3VzZURvd24oZXZlbnQpIHtcblx0XHRcdGlmIChldmVudC50eXBlID09PSAnbW91c2Vkb3duJyAmJiBldmVudC5idXR0b24gIT09IDApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRoaXMucHJvcHMub25DbGljaykge1xuXHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0dGhpcy5wcm9wcy5vbkNsaWNrKHRoaXMucHJvcHMudmFsdWUsIGV2ZW50KTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRoaXMucHJvcHMudmFsdWUuaHJlZikge1xuXHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcblx0XHRvblJlbW92ZTogZnVuY3Rpb24gb25SZW1vdmUoZXZlbnQpIHtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdHRoaXMucHJvcHMub25SZW1vdmUodGhpcy5wcm9wcy52YWx1ZSk7XG5cdFx0fSxcblx0XG5cdFx0aGFuZGxlVG91Y2hFbmRSZW1vdmU6IGZ1bmN0aW9uIGhhbmRsZVRvdWNoRW5kUmVtb3ZlKGV2ZW50KSB7XG5cdFx0XHQvLyBDaGVjayBpZiB0aGUgdmlldyBpcyBiZWluZyBkcmFnZ2VkLCBJbiB0aGlzIGNhc2Vcblx0XHRcdC8vIHdlIGRvbid0IHdhbnQgdG8gZmlyZSB0aGUgY2xpY2sgZXZlbnQgKGJlY2F1c2UgdGhlIHVzZXIgb25seSB3YW50cyB0byBzY3JvbGwpXG5cdFx0XHRpZiAodGhpcy5kcmFnZ2luZykgcmV0dXJuO1xuXHRcblx0XHRcdC8vIEZpcmUgdGhlIG1vdXNlIGV2ZW50c1xuXHRcdFx0dGhpcy5vblJlbW92ZShldmVudCk7XG5cdFx0fSxcblx0XG5cdFx0aGFuZGxlVG91Y2hNb3ZlOiBmdW5jdGlvbiBoYW5kbGVUb3VjaE1vdmUoZXZlbnQpIHtcblx0XHRcdC8vIFNldCBhIGZsYWcgdGhhdCB0aGUgdmlldyBpcyBiZWluZyBkcmFnZ2VkXG5cdFx0XHR0aGlzLmRyYWdnaW5nID0gdHJ1ZTtcblx0XHR9LFxuXHRcblx0XHRoYW5kbGVUb3VjaFN0YXJ0OiBmdW5jdGlvbiBoYW5kbGVUb3VjaFN0YXJ0KGV2ZW50KSB7XG5cdFx0XHQvLyBTZXQgYSBmbGFnIHRoYXQgdGhlIHZpZXcgaXMgbm90IGJlaW5nIGRyYWdnZWRcblx0XHRcdHRoaXMuZHJhZ2dpbmcgPSBmYWxzZTtcblx0XHR9LFxuXHRcblx0XHRyZW5kZXJSZW1vdmVJY29uOiBmdW5jdGlvbiByZW5kZXJSZW1vdmVJY29uKCkge1xuXHRcdFx0aWYgKHRoaXMucHJvcHMuZGlzYWJsZWQgfHwgIXRoaXMucHJvcHMub25SZW1vdmUpIHJldHVybjtcblx0XHRcdHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0XHRcdFx0J3NwYW4nLFxuXHRcdFx0XHR7IGNsYXNzTmFtZTogJ1NlbGVjdC12YWx1ZS1pY29uJyxcblx0XHRcdFx0XHRvbk1vdXNlRG93bjogdGhpcy5vblJlbW92ZSxcblx0XHRcdFx0XHRvblRvdWNoRW5kOiB0aGlzLmhhbmRsZVRvdWNoRW5kUmVtb3ZlLFxuXHRcdFx0XHRcdG9uVG91Y2hTdGFydDogdGhpcy5oYW5kbGVUb3VjaFN0YXJ0LFxuXHRcdFx0XHRcdG9uVG91Y2hNb3ZlOiB0aGlzLmhhbmRsZVRvdWNoTW92ZSB9LFxuXHRcdFx0XHQnw5cnXG5cdFx0XHQpO1xuXHRcdH0sXG5cdFxuXHRcdHJlbmRlckxhYmVsOiBmdW5jdGlvbiByZW5kZXJMYWJlbCgpIHtcblx0XHRcdHZhciBjbGFzc05hbWUgPSAnU2VsZWN0LXZhbHVlLWxhYmVsJztcblx0XHRcdHJldHVybiB0aGlzLnByb3BzLm9uQ2xpY2sgfHwgdGhpcy5wcm9wcy52YWx1ZS5ocmVmID8gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdFx0XHRcdCdhJyxcblx0XHRcdFx0eyBjbGFzc05hbWU6IGNsYXNzTmFtZSwgaHJlZjogdGhpcy5wcm9wcy52YWx1ZS5ocmVmLCB0YXJnZXQ6IHRoaXMucHJvcHMudmFsdWUudGFyZ2V0LCBvbk1vdXNlRG93bjogdGhpcy5oYW5kbGVNb3VzZURvd24sIG9uVG91Y2hFbmQ6IHRoaXMuaGFuZGxlTW91c2VEb3duIH0sXG5cdFx0XHRcdHRoaXMucHJvcHMuY2hpbGRyZW5cblx0XHRcdCkgOiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0XHRcdFx0J3NwYW4nLFxuXHRcdFx0XHR7IGNsYXNzTmFtZTogY2xhc3NOYW1lIH0sXG5cdFx0XHRcdHRoaXMucHJvcHMuY2hpbGRyZW5cblx0XHRcdCk7XG5cdFx0fSxcblx0XG5cdFx0cmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdFx0XHRyZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdFx0XHRcdCdkaXYnLFxuXHRcdFx0XHR7IGNsYXNzTmFtZTogKDAsIF9jbGFzc25hbWVzMlsnZGVmYXVsdCddKSgnU2VsZWN0LXZhbHVlJywgdGhpcy5wcm9wcy52YWx1ZS5jbGFzc05hbWUpLFxuXHRcdFx0XHRcdHN0eWxlOiB0aGlzLnByb3BzLnZhbHVlLnN0eWxlLFxuXHRcdFx0XHRcdHRpdGxlOiB0aGlzLnByb3BzLnZhbHVlLnRpdGxlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHRoaXMucmVuZGVyUmVtb3ZlSWNvbigpLFxuXHRcdFx0XHR0aGlzLnJlbmRlckxhYmVsKClcblx0XHRcdCk7XG5cdFx0fVxuXHRcblx0fSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFZhbHVlO1xuXG4vKioqLyB9LFxuLyogNDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cdFxuXHR2YXIgUmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIHNpemVyU3R5bGUgPSB7IHBvc2l0aW9uOiAnYWJzb2x1dGUnLCB2aXNpYmlsaXR5OiAnaGlkZGVuJywgaGVpZ2h0OiAwLCB3aWR0aDogMCwgb3ZlcmZsb3c6ICdzY3JvbGwnLCB3aGl0ZVNwYWNlOiAnbm93cmFwJyB9O1xuXHRcblx0dmFyIG5leHRGcmFtZSA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gKGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG5cdFx0XHR3aW5kb3cuc2V0VGltZW91dChjYWxsYmFjaywgMTAwMCAvIDYwKTtcblx0XHR9O1xuXHR9KSgpLmJpbmQod2luZG93KSA6IHVuZGVmaW5lZDsgLy8gSWYgd2luZG93IGlzIHVuZGVmaW5lZCwgdGhlbiB3ZSBjYW4ndCBkZWZpbmUgYSBuZXh0RnJhbWUgZnVuY3Rpb25cblx0XG5cdHZhciBBdXRvc2l6ZUlucHV0ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuXHRcdGRpc3BsYXlOYW1lOiAnQXV0b3NpemVJbnB1dCcsXG5cdFxuXHRcdHByb3BUeXBlczoge1xuXHRcdFx0dmFsdWU6IFJlYWN0LlByb3BUeXBlcy5hbnksIC8vIGZpZWxkIHZhbHVlXG5cdFx0XHRkZWZhdWx0VmFsdWU6IFJlYWN0LlByb3BUeXBlcy5hbnksIC8vIGRlZmF1bHQgZmllbGQgdmFsdWVcblx0XHRcdG9uQ2hhbmdlOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYywgLy8gb25DaGFuZ2UgaGFuZGxlcjogZnVuY3Rpb24obmV3VmFsdWUpIHt9XG5cdFx0XHRzdHlsZTogUmVhY3QuUHJvcFR5cGVzLm9iamVjdCwgLy8gY3NzIHN0eWxlcyBmb3IgdGhlIG91dGVyIGVsZW1lbnRcblx0XHRcdGNsYXNzTmFtZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZywgLy8gY2xhc3NOYW1lIGZvciB0aGUgb3V0ZXIgZWxlbWVudFxuXHRcdFx0bWluV2lkdGg6IFJlYWN0LlByb3BUeXBlcy5vbmVPZlR5cGUoWy8vIG1pbmltdW0gd2lkdGggZm9yIGlucHV0IGVsZW1lbnRcblx0XHRcdFJlYWN0LlByb3BUeXBlcy5udW1iZXIsIFJlYWN0LlByb3BUeXBlcy5zdHJpbmddKSxcblx0XHRcdGlucHV0U3R5bGU6IFJlYWN0LlByb3BUeXBlcy5vYmplY3QsIC8vIGNzcyBzdHlsZXMgZm9yIHRoZSBpbnB1dCBlbGVtZW50XG5cdFx0XHRpbnB1dENsYXNzTmFtZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyAvLyBjbGFzc05hbWUgZm9yIHRoZSBpbnB1dCBlbGVtZW50XG5cdFx0fSxcblx0XHRnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdG1pbldpZHRoOiAxXG5cdFx0XHR9O1xuXHRcdH0sXG5cdFx0Z2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRpbnB1dFdpZHRoOiB0aGlzLnByb3BzLm1pbldpZHRoXG5cdFx0XHR9O1xuXHRcdH0sXG5cdFx0Y29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuXHRcdFx0dGhpcy5jb3B5SW5wdXRTdHlsZXMoKTtcblx0XHRcdHRoaXMudXBkYXRlSW5wdXRXaWR0aCgpO1xuXHRcdH0sXG5cdFx0Y29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG5cdFx0XHR0aGlzLnF1ZXVlVXBkYXRlSW5wdXRXaWR0aCgpO1xuXHRcdH0sXG5cdFx0Y29weUlucHV0U3R5bGVzOiBmdW5jdGlvbiBjb3B5SW5wdXRTdHlsZXMoKSB7XG5cdFx0XHRpZiAoIXRoaXMuaXNNb3VudGVkKCkgfHwgIXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHZhciBpbnB1dFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5yZWZzLmlucHV0KTtcblx0XHRcdHZhciB3aWR0aE5vZGUgPSB0aGlzLnJlZnMuc2l6ZXI7XG5cdFx0XHR3aWR0aE5vZGUuc3R5bGUuZm9udFNpemUgPSBpbnB1dFN0eWxlLmZvbnRTaXplO1xuXHRcdFx0d2lkdGhOb2RlLnN0eWxlLmZvbnRGYW1pbHkgPSBpbnB1dFN0eWxlLmZvbnRGYW1pbHk7XG5cdFx0XHR3aWR0aE5vZGUuc3R5bGUuZm9udFdlaWdodCA9IGlucHV0U3R5bGUuZm9udFdlaWdodDtcblx0XHRcdHdpZHRoTm9kZS5zdHlsZS5mb250U3R5bGUgPSBpbnB1dFN0eWxlLmZvbnRTdHlsZTtcblx0XHRcdHdpZHRoTm9kZS5zdHlsZS5sZXR0ZXJTcGFjaW5nID0gaW5wdXRTdHlsZS5sZXR0ZXJTcGFjaW5nO1xuXHRcdFx0aWYgKHRoaXMucHJvcHMucGxhY2Vob2xkZXIpIHtcblx0XHRcdFx0dmFyIHBsYWNlaG9sZGVyTm9kZSA9IHRoaXMucmVmcy5wbGFjZWhvbGRlclNpemVyO1xuXHRcdFx0XHRwbGFjZWhvbGRlck5vZGUuc3R5bGUuZm9udFNpemUgPSBpbnB1dFN0eWxlLmZvbnRTaXplO1xuXHRcdFx0XHRwbGFjZWhvbGRlck5vZGUuc3R5bGUuZm9udEZhbWlseSA9IGlucHV0U3R5bGUuZm9udEZhbWlseTtcblx0XHRcdFx0cGxhY2Vob2xkZXJOb2RlLnN0eWxlLmZvbnRXZWlnaHQgPSBpbnB1dFN0eWxlLmZvbnRXZWlnaHQ7XG5cdFx0XHRcdHBsYWNlaG9sZGVyTm9kZS5zdHlsZS5mb250U3R5bGUgPSBpbnB1dFN0eWxlLmZvbnRTdHlsZTtcblx0XHRcdFx0cGxhY2Vob2xkZXJOb2RlLnN0eWxlLmxldHRlclNwYWNpbmcgPSBpbnB1dFN0eWxlLmxldHRlclNwYWNpbmc7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRxdWV1ZVVwZGF0ZUlucHV0V2lkdGg6IGZ1bmN0aW9uIHF1ZXVlVXBkYXRlSW5wdXRXaWR0aCgpIHtcblx0XHRcdG5leHRGcmFtZSh0aGlzLnVwZGF0ZUlucHV0V2lkdGgpO1xuXHRcdH0sXG5cdFx0dXBkYXRlSW5wdXRXaWR0aDogZnVuY3Rpb24gdXBkYXRlSW5wdXRXaWR0aCgpIHtcblx0XHRcdGlmICghdGhpcy5pc01vdW50ZWQoKSB8fCB0eXBlb2YgdGhpcy5yZWZzLnNpemVyLnNjcm9sbFdpZHRoID09PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR2YXIgbmV3SW5wdXRXaWR0aCA9IHVuZGVmaW5lZDtcblx0XHRcdGlmICh0aGlzLnByb3BzLnBsYWNlaG9sZGVyKSB7XG5cdFx0XHRcdG5ld0lucHV0V2lkdGggPSBNYXRoLm1heCh0aGlzLnJlZnMuc2l6ZXIuc2Nyb2xsV2lkdGgsIHRoaXMucmVmcy5wbGFjZWhvbGRlclNpemVyLnNjcm9sbFdpZHRoKSArIDI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRuZXdJbnB1dFdpZHRoID0gdGhpcy5yZWZzLnNpemVyLnNjcm9sbFdpZHRoICsgMjtcblx0XHRcdH1cblx0XHRcdGlmIChuZXdJbnB1dFdpZHRoIDwgdGhpcy5wcm9wcy5taW5XaWR0aCkge1xuXHRcdFx0XHRuZXdJbnB1dFdpZHRoID0gdGhpcy5wcm9wcy5taW5XaWR0aDtcblx0XHRcdH1cblx0XHRcdGlmIChuZXdJbnB1dFdpZHRoICE9PSB0aGlzLnN0YXRlLmlucHV0V2lkdGgpIHtcblx0XHRcdFx0dGhpcy5zZXRTdGF0ZSh7XG5cdFx0XHRcdFx0aW5wdXRXaWR0aDogbmV3SW5wdXRXaWR0aFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdGdldElucHV0OiBmdW5jdGlvbiBnZXRJbnB1dCgpIHtcblx0XHRcdHJldHVybiB0aGlzLnJlZnMuaW5wdXQ7XG5cdFx0fSxcblx0XHRmb2N1czogZnVuY3Rpb24gZm9jdXMoKSB7XG5cdFx0XHR0aGlzLnJlZnMuaW5wdXQuZm9jdXMoKTtcblx0XHR9LFxuXHRcdGJsdXI6IGZ1bmN0aW9uIGJsdXIoKSB7XG5cdFx0XHR0aGlzLnJlZnMuaW5wdXQuYmx1cigpO1xuXHRcdH0sXG5cdFx0c2VsZWN0OiBmdW5jdGlvbiBzZWxlY3QoKSB7XG5cdFx0XHR0aGlzLnJlZnMuaW5wdXQuc2VsZWN0KCk7XG5cdFx0fSxcblx0XHRyZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0XHRcdHZhciBlc2NhcGVkVmFsdWUgPSAodGhpcy5wcm9wcy5kZWZhdWx0VmFsdWUgfHwgdGhpcy5wcm9wcy52YWx1ZSB8fCAnJykucmVwbGFjZSgvXFwmL2csICcmYW1wOycpLnJlcGxhY2UoLyAvZywgJyZuYnNwOycpLnJlcGxhY2UoL1xcPC9nLCAnJmx0OycpLnJlcGxhY2UoL1xcPi9nLCAnJmd0OycpO1xuXHRcdFx0dmFyIHdyYXBwZXJTdHlsZSA9IHRoaXMucHJvcHMuc3R5bGUgfHwge307XG5cdFx0XHRpZiAoIXdyYXBwZXJTdHlsZS5kaXNwbGF5KSB3cmFwcGVyU3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuXHRcdFx0dmFyIGlucHV0U3R5bGUgPSBfZXh0ZW5kcyh7fSwgdGhpcy5wcm9wcy5pbnB1dFN0eWxlKTtcblx0XHRcdGlucHV0U3R5bGUud2lkdGggPSB0aGlzLnN0YXRlLmlucHV0V2lkdGg7XG5cdFx0XHRpbnB1dFN0eWxlLmJveFNpemluZyA9ICdjb250ZW50LWJveCc7XG5cdFx0XHR2YXIgcGxhY2Vob2xkZXIgPSB0aGlzLnByb3BzLnBsYWNlaG9sZGVyID8gUmVhY3QuY3JlYXRlRWxlbWVudChcblx0XHRcdFx0J2RpdicsXG5cdFx0XHRcdHsgcmVmOiAncGxhY2Vob2xkZXJTaXplcicsIHN0eWxlOiBzaXplclN0eWxlIH0sXG5cdFx0XHRcdHRoaXMucHJvcHMucGxhY2Vob2xkZXJcblx0XHRcdCkgOiBudWxsO1xuXHRcdFx0cmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG5cdFx0XHRcdCdkaXYnLFxuXHRcdFx0XHR7IGNsYXNzTmFtZTogdGhpcy5wcm9wcy5jbGFzc05hbWUsIHN0eWxlOiB3cmFwcGVyU3R5bGUgfSxcblx0XHRcdFx0UmVhY3QuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCBfZXh0ZW5kcyh7fSwgdGhpcy5wcm9wcywgeyByZWY6ICdpbnB1dCcsIGNsYXNzTmFtZTogdGhpcy5wcm9wcy5pbnB1dENsYXNzTmFtZSwgc3R5bGU6IGlucHV0U3R5bGUgfSkpLFxuXHRcdFx0XHRSZWFjdC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IHJlZjogJ3NpemVyJywgc3R5bGU6IHNpemVyU3R5bGUsIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB7IF9faHRtbDogZXNjYXBlZFZhbHVlIH0gfSksXG5cdFx0XHRcdHBsYWNlaG9sZGVyXG5cdFx0XHQpO1xuXHRcdH1cblx0fSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEF1dG9zaXplSW5wdXQ7XG5cbi8qKiovIH0sXG4vKiA0MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHR2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfcmVhY3RBZGRvbnNVcGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdHZhciBfcmVhY3RBZGRvbnNVcGRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3RBZGRvbnNVcGRhdGUpO1xuXHRcblx0dmFyIF9Ub2FzdE1lc3NhZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0XG5cdHZhciBfVG9hc3RNZXNzYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1RvYXN0TWVzc2FnZSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIFRvYXN0Q29udGFpbmVyID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcblx0ICBfaW5oZXJpdHMoVG9hc3RDb250YWluZXIsIF9Db21wb25lbnQpO1xuXHRcblx0ICBmdW5jdGlvbiBUb2FzdENvbnRhaW5lcigpIHtcblx0ICAgIHZhciBfT2JqZWN0JGdldFByb3RvdHlwZU87XG5cdFxuXHQgICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVG9hc3RDb250YWluZXIpO1xuXHRcblx0ICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG5cdCAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoX09iamVjdCRnZXRQcm90b3R5cGVPID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKFRvYXN0Q29udGFpbmVyKSkuY2FsbC5hcHBseShfT2JqZWN0JGdldFByb3RvdHlwZU8sIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5zdGF0ZSA9IHtcblx0ICAgICAgdG9hc3RzOiBbXSxcblx0ICAgICAgdG9hc3RJZDogMCxcblx0ICAgICAgcHJldmlvdXNNZXNzYWdlOiBudWxsXG5cdCAgICB9LCBfdGVtcCksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzLCBfcmV0KTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhUb2FzdENvbnRhaW5lciwgW3tcblx0ICAgIGtleTogXCJlcnJvclwiLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGVycm9yKG1lc3NhZ2UsIHRpdGxlLCBvcHRpb25zT3ZlcnJpZGUpIHtcblx0ICAgICAgdGhpcy5fbm90aWZ5KHRoaXMucHJvcHMudG9hc3RUeXBlLmVycm9yLCBtZXNzYWdlLCB0aXRsZSwgb3B0aW9uc092ZXJyaWRlKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6IFwiaW5mb1wiLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGluZm8obWVzc2FnZSwgdGl0bGUsIG9wdGlvbnNPdmVycmlkZSkge1xuXHQgICAgICB0aGlzLl9ub3RpZnkodGhpcy5wcm9wcy50b2FzdFR5cGUuaW5mbywgbWVzc2FnZSwgdGl0bGUsIG9wdGlvbnNPdmVycmlkZSk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiBcInN1Y2Nlc3NcIixcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBzdWNjZXNzKG1lc3NhZ2UsIHRpdGxlLCBvcHRpb25zT3ZlcnJpZGUpIHtcblx0ICAgICAgdGhpcy5fbm90aWZ5KHRoaXMucHJvcHMudG9hc3RUeXBlLnN1Y2Nlc3MsIG1lc3NhZ2UsIHRpdGxlLCBvcHRpb25zT3ZlcnJpZGUpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogXCJ3YXJuaW5nXCIsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gd2FybmluZyhtZXNzYWdlLCB0aXRsZSwgb3B0aW9uc092ZXJyaWRlKSB7XG5cdCAgICAgIHRoaXMuX25vdGlmeSh0aGlzLnByb3BzLnRvYXN0VHlwZS53YXJuaW5nLCBtZXNzYWdlLCB0aXRsZSwgb3B0aW9uc092ZXJyaWRlKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6IFwiY2xlYXJcIixcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhcigpIHtcblx0ICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgICBPYmplY3Qua2V5cyh0aGlzLnJlZnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgIF90aGlzMi5yZWZzW2tleV0uaGlkZVRvYXN0KGZhbHNlKTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiBcIl9ub3RpZnlcIixcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBfbm90aWZ5KHR5cGUsIG1lc3NhZ2UsIHRpdGxlKSB7XG5cdCAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXHRcblx0ICAgICAgdmFyIG9wdGlvbnNPdmVycmlkZSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMyB8fCBhcmd1bWVudHNbM10gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzNdO1xuXHRcblx0ICAgICAgaWYgKHRoaXMucHJvcHMucHJldmVudER1cGxpY2F0ZXMpIHtcblx0ICAgICAgICBpZiAodGhpcy5zdGF0ZS5wcmV2aW91c01lc3NhZ2UgPT09IG1lc3NhZ2UpIHtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGtleSA9IHRoaXMuc3RhdGUudG9hc3RJZCsrO1xuXHQgICAgICB2YXIgdG9hc3RJZCA9IGtleTtcblx0ICAgICAgdmFyIG5ld1RvYXN0ID0gKDAsIF9yZWFjdEFkZG9uc1VwZGF0ZTIuZGVmYXVsdCkob3B0aW9uc092ZXJyaWRlLCB7XG5cdCAgICAgICAgJG1lcmdlOiB7XG5cdCAgICAgICAgICB0eXBlOiB0eXBlLFxuXHQgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuXHQgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcblx0ICAgICAgICAgIHRvYXN0SWQ6IHRvYXN0SWQsXG5cdCAgICAgICAgICBrZXk6IGtleSxcblx0ICAgICAgICAgIHJlZjogXCJ0b2FzdHNfX1wiICsga2V5LFxuXHQgICAgICAgICAgaGFuZGxlT25DbGljazogZnVuY3Rpb24gaGFuZGxlT25DbGljayhlKSB7XG5cdCAgICAgICAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBvcHRpb25zT3ZlcnJpZGUuaGFuZGxlT25DbGljaykge1xuXHQgICAgICAgICAgICAgIG9wdGlvbnNPdmVycmlkZS5oYW5kbGVPbkNsaWNrKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5faGFuZGxlX3RvYXN0X29uX2NsaWNrKGUpO1xuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIGhhbmRsZVJlbW92ZTogdGhpcy5faGFuZGxlX3RvYXN0X3JlbW92ZS5iaW5kKHRoaXMpXG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgICAgdmFyIHRvYXN0T3BlcmF0aW9uID0gX2RlZmluZVByb3BlcnR5KHt9LCBcIlwiICsgKHRoaXMucHJvcHMubmV3ZXN0T25Ub3AgPyBcIiR1bnNoaWZ0XCIgOiBcIiRwdXNoXCIpLCBbbmV3VG9hc3RdKTtcblx0XG5cdCAgICAgIHZhciBuZXh0U3RhdGUgPSAoMCwgX3JlYWN0QWRkb25zVXBkYXRlMi5kZWZhdWx0KSh0aGlzLnN0YXRlLCB7XG5cdCAgICAgICAgdG9hc3RzOiB0b2FzdE9wZXJhdGlvbixcblx0ICAgICAgICBwcmV2aW91c01lc3NhZ2U6IHsgJHNldDogbWVzc2FnZSB9XG5cdCAgICAgIH0pO1xuXHQgICAgICB0aGlzLnNldFN0YXRlKG5leHRTdGF0ZSk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiBcIl9oYW5kbGVfdG9hc3Rfb25fY2xpY2tcIixcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlX3RvYXN0X29uX2NsaWNrKGV2ZW50KSB7XG5cdCAgICAgIHRoaXMucHJvcHMub25DbGljayhldmVudCk7XG5cdCAgICAgIGlmIChldmVudC5kZWZhdWx0UHJldmVudGVkKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogXCJfaGFuZGxlX3RvYXN0X3JlbW92ZVwiLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVfdG9hc3RfcmVtb3ZlKHRvYXN0SWQpIHtcblx0ICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cdFxuXHQgICAgICB2YXIgb3BlcmF0aW9uTmFtZSA9IFwiXCIgKyAodGhpcy5wcm9wcy5uZXdlc3RPblRvcCA/IFwicmVkdWNlUmlnaHRcIiA6IFwicmVkdWNlXCIpO1xuXHQgICAgICB0aGlzLnN0YXRlLnRvYXN0c1tvcGVyYXRpb25OYW1lXShmdW5jdGlvbiAoZm91bmQsIHRvYXN0LCBpbmRleCkge1xuXHQgICAgICAgIGlmIChmb3VuZCB8fCB0b2FzdC50b2FzdElkICE9PSB0b2FzdElkKSB7XG5cdCAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIF90aGlzNC5zZXRTdGF0ZSgoMCwgX3JlYWN0QWRkb25zVXBkYXRlMi5kZWZhdWx0KShfdGhpczQuc3RhdGUsIHtcblx0ICAgICAgICAgIHRvYXN0czogeyAkc3BsaWNlOiBbW2luZGV4LCAxXV0gfVxuXHQgICAgICAgIH0pKTtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgfSwgZmFsc2UpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogXCJyZW5kZXJcIixcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXHRcblx0ICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgIFwiZGl2XCIsXG5cdCAgICAgICAgX2V4dGVuZHMoe30sIHRoaXMucHJvcHMsIHsgXCJhcmlhLWxpdmVcIjogXCJwb2xpdGVcIiwgcm9sZTogXCJhbGVydFwiIH0pLFxuXHQgICAgICAgIHRoaXMuc3RhdGUudG9hc3RzLm1hcChmdW5jdGlvbiAodG9hc3QpIHtcblx0ICAgICAgICAgIHJldHVybiBfdGhpczUucHJvcHMudG9hc3RNZXNzYWdlRmFjdG9yeSh0b2FzdCk7XG5cdCAgICAgICAgfSlcblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBUb2FzdENvbnRhaW5lcjtcblx0fShfcmVhY3QuQ29tcG9uZW50KTtcblx0XG5cdFRvYXN0Q29udGFpbmVyLnByb3BUeXBlcyA9IHtcblx0ICB0b2FzdFR5cGU6IF9yZWFjdC5Qcm9wVHlwZXMuc2hhcGUoe1xuXHQgICAgZXJyb3I6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgICAgaW5mbzogX3JlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG5cdCAgICBzdWNjZXNzOiBfcmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcblx0ICAgIHdhcm5pbmc6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nXG5cdCAgfSkuaXNSZXF1aXJlZCxcblx0ICBpZDogX3JlYWN0LlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcblx0ICB0b2FzdE1lc3NhZ2VGYWN0b3J5OiBfcmVhY3QuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcblx0ICBwcmV2ZW50RHVwbGljYXRlczogX3JlYWN0LlByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG5cdCAgbmV3ZXN0T25Ub3A6IF9yZWFjdC5Qcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuXHQgIG9uQ2xpY2s6IF9yZWFjdC5Qcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkXG5cdH07XG5cdFRvYXN0Q29udGFpbmVyLmRlZmF1bHRQcm9wcyA9IHtcblx0ICB0b2FzdFR5cGU6IHtcblx0ICAgIGVycm9yOiBcImVycm9yXCIsXG5cdCAgICBpbmZvOiBcImluZm9cIixcblx0ICAgIHN1Y2Nlc3M6IFwic3VjY2Vzc1wiLFxuXHQgICAgd2FybmluZzogXCJ3YXJuaW5nXCJcblx0ICB9LFxuXHQgIGlkOiBcInRvYXN0LWNvbnRhaW5lclwiLFxuXHQgIHRvYXN0TWVzc2FnZUZhY3Rvcnk6IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVGYWN0b3J5KF9Ub2FzdE1lc3NhZ2UyLmRlZmF1bHQpLFxuXHQgIHByZXZlbnREdXBsaWNhdGVzOiBmYWxzZSxcblx0ICBuZXdlc3RPblRvcDogdHJ1ZSxcblx0ICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge31cblx0fTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gVG9hc3RDb250YWluZXI7XG5cbi8qKiovIH0sXG4vKiA0MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfUmVhY3RUcmFuc2l0aW9uRXZlbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7XG5cdFxuXHR2YXIgX1JlYWN0VHJhbnNpdGlvbkV2ZW50czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9SZWFjdFRyYW5zaXRpb25FdmVudHMpO1xuXHRcblx0dmFyIF9yZWFjdERvbSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHR2YXIgX3JlYWN0RG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9tKTtcblx0XG5cdHZhciBfZWxlbWVudENsYXNzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nik7XG5cdFxuXHR2YXIgX2VsZW1lbnRDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lbGVtZW50Q2xhc3MpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdHZhciBUSUNLID0gMTc7XG5cdHZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHRyYW5zaXRpb246IG51bGwsIC8vIHNvbWUgZXhhbXBsZXMgZGVmaW5lZCBpbiBpbmRleC5zY3NzIChzY2FsZSwgZmFkZUluT3V0LCByb3RhdGUpXG5cdCAgICAgIHNob3dBbmltYXRpb246IFwiYW5pbWF0ZWQgYm91bmNlSW5cIiwgLy8gb3Igb3RoZXIgYW5pbWF0aW9ucyBmcm9tIGFuaW1hdGUuY3NzXG5cdCAgICAgIGhpZGVBbmltYXRpb246IFwiYW5pbWF0ZWQgYm91bmNlT3V0XCIsXG5cdCAgICAgIHRpbWVPdXQ6IDUwMDAsXG5cdCAgICAgIGV4dGVuZGVkVGltZU91dDogMTAwMFxuXHQgICAgfTtcblx0ICB9LFxuXHQgIGNvbXBvbmVudFdpbGxNb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuXHQgICAgdGhpcy5jbGFzc05hbWVRdWV1ZSA9IFtdO1xuXHQgICAgdGhpcy5pc0hpZGluZyA9IGZhbHNlO1xuXHQgICAgdGhpcy5pbnRlcnZhbElkID0gbnVsbDtcblx0ICB9LFxuXHQgIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgdGhpcy5faXNfbW91bnRlZCA9IHRydWU7XG5cdCAgICB0aGlzLl9zaG93KCk7XG5cdCAgICB2YXIgbm9kZSA9IF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzKTtcblx0XG5cdCAgICB2YXIgb25IaWRlQ29tcGxldGUgPSBmdW5jdGlvbiBvbkhpZGVDb21wbGV0ZSgpIHtcblx0ICAgICAgaWYgKF90aGlzLmlzSGlkaW5nKSB7XG5cdCAgICAgICAgX3RoaXMuX3NldF9pc19oaWRpbmcoZmFsc2UpO1xuXHQgICAgICAgIF9SZWFjdFRyYW5zaXRpb25FdmVudHMyLmRlZmF1bHQucmVtb3ZlRW5kRXZlbnRMaXN0ZW5lcihub2RlLCBvbkhpZGVDb21wbGV0ZSk7XG5cdCAgICAgICAgX3RoaXMuX2hhbmRsZV9yZW1vdmUoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIF9SZWFjdFRyYW5zaXRpb25FdmVudHMyLmRlZmF1bHQuYWRkRW5kRXZlbnRMaXN0ZW5lcihub2RlLCBvbkhpZGVDb21wbGV0ZSk7XG5cdFxuXHQgICAgaWYgKHRoaXMucHJvcHMudGltZU91dCA+IDApIHtcblx0ICAgICAgdGhpcy5fc2V0X2ludGVydmFsX2lkKHNldFRpbWVvdXQodGhpcy5oaWRlVG9hc3QsIHRoaXMucHJvcHMudGltZU91dCkpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgY29tcG9uZW50V2lsbFVubW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuXHQgICAgdGhpcy5faXNfbW91bnRlZCA9IGZhbHNlO1xuXHQgICAgaWYgKHRoaXMuaW50ZXJ2YWxJZCkge1xuXHQgICAgICBjbGVhclRpbWVvdXQodGhpcy5pbnRlcnZhbElkKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIF9zZXRfdHJhbnNpdGlvbjogZnVuY3Rpb24gX3NldF90cmFuc2l0aW9uKGhpZGUpIHtcblx0ICAgIHZhciBhbmltYXRpb25UeXBlID0gaGlkZSA/IFwibGVhdmVcIiA6IFwiZW50ZXJcIjtcblx0ICAgIHZhciBub2RlID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpO1xuXHQgICAgdmFyIGNsYXNzTmFtZSA9IHRoaXMucHJvcHMudHJhbnNpdGlvbiArIFwiLVwiICsgYW5pbWF0aW9uVHlwZTtcblx0ICAgIHZhciBhY3RpdmVDbGFzc05hbWUgPSBjbGFzc05hbWUgKyBcIi1hY3RpdmVcIjtcblx0XG5cdCAgICB2YXIgZW5kTGlzdGVuZXIgPSBmdW5jdGlvbiBlbmRMaXN0ZW5lcihlKSB7XG5cdCAgICAgIGlmIChlICYmIGUudGFyZ2V0ICE9PSBub2RlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgY2xhc3NMaXN0ID0gKDAsIF9lbGVtZW50Q2xhc3MyLmRlZmF1bHQpKG5vZGUpO1xuXHQgICAgICBjbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG5cdCAgICAgIGNsYXNzTGlzdC5yZW1vdmUoYWN0aXZlQ2xhc3NOYW1lKTtcblx0XG5cdCAgICAgIF9SZWFjdFRyYW5zaXRpb25FdmVudHMyLmRlZmF1bHQucmVtb3ZlRW5kRXZlbnRMaXN0ZW5lcihub2RlLCBlbmRMaXN0ZW5lcik7XG5cdCAgICB9O1xuXHRcblx0ICAgIF9SZWFjdFRyYW5zaXRpb25FdmVudHMyLmRlZmF1bHQuYWRkRW5kRXZlbnRMaXN0ZW5lcihub2RlLCBlbmRMaXN0ZW5lcik7XG5cdFxuXHQgICAgKDAsIF9lbGVtZW50Q2xhc3MyLmRlZmF1bHQpKG5vZGUpLmFkZChjbGFzc05hbWUpO1xuXHRcblx0ICAgIC8vIE5lZWQgdG8gZG8gdGhpcyB0byBhY3R1YWxseSB0cmlnZ2VyIGEgdHJhbnNpdGlvbi5cblx0ICAgIHRoaXMuX3F1ZXVlX2NsYXNzKGFjdGl2ZUNsYXNzTmFtZSk7XG5cdCAgfSxcblx0ICBfY2xlYXJfdHJhbnNpdGlvbjogZnVuY3Rpb24gX2NsZWFyX3RyYW5zaXRpb24oaGlkZSkge1xuXHQgICAgdmFyIG5vZGUgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcyk7XG5cdCAgICB2YXIgYW5pbWF0aW9uVHlwZSA9IGhpZGUgPyBcImxlYXZlXCIgOiBcImVudGVyXCI7XG5cdCAgICB2YXIgY2xhc3NOYW1lID0gdGhpcy5wcm9wcy50cmFuc2l0aW9uICsgXCItXCIgKyBhbmltYXRpb25UeXBlO1xuXHQgICAgdmFyIGFjdGl2ZUNsYXNzTmFtZSA9IGNsYXNzTmFtZSArIFwiLWFjdGl2ZVwiO1xuXHRcblx0ICAgIHZhciBjbGFzc0xpc3QgPSAoMCwgX2VsZW1lbnRDbGFzczIuZGVmYXVsdCkobm9kZSk7XG5cdCAgICBjbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG5cdCAgICBjbGFzc0xpc3QucmVtb3ZlKGFjdGl2ZUNsYXNzTmFtZSk7XG5cdCAgfSxcblx0ICBfc2V0X2FuaW1hdGlvbjogZnVuY3Rpb24gX3NldF9hbmltYXRpb24oaGlkZSkge1xuXHQgICAgdmFyIG5vZGUgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcyk7XG5cdCAgICB2YXIgYW5pbWF0aW9ucyA9IHRoaXMuX2dldF9hbmltYXRpb25fY2xhc3NlcyhoaWRlKTtcblx0ICAgIHZhciBlbmRMaXN0ZW5lciA9IGZ1bmN0aW9uIGVuZExpc3RlbmVyKGUpIHtcblx0ICAgICAgaWYgKGUgJiYgZS50YXJnZXQgIT09IG5vZGUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGFuaW1hdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoYW5pbSkge1xuXHQgICAgICAgIHJldHVybiAoMCwgX2VsZW1lbnRDbGFzczIuZGVmYXVsdCkobm9kZSkucmVtb3ZlKGFuaW0pO1xuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIF9SZWFjdFRyYW5zaXRpb25FdmVudHMyLmRlZmF1bHQucmVtb3ZlRW5kRXZlbnRMaXN0ZW5lcihub2RlLCBlbmRMaXN0ZW5lcik7XG5cdCAgICB9O1xuXHRcblx0ICAgIF9SZWFjdFRyYW5zaXRpb25FdmVudHMyLmRlZmF1bHQuYWRkRW5kRXZlbnRMaXN0ZW5lcihub2RlLCBlbmRMaXN0ZW5lcik7XG5cdFxuXHQgICAgYW5pbWF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChhbmltKSB7XG5cdCAgICAgIHJldHVybiAoMCwgX2VsZW1lbnRDbGFzczIuZGVmYXVsdCkobm9kZSkuYWRkKGFuaW0pO1xuXHQgICAgfSk7XG5cdCAgfSxcblx0ICBfZ2V0X2FuaW1hdGlvbl9jbGFzc2VzOiBmdW5jdGlvbiBfZ2V0X2FuaW1hdGlvbl9jbGFzc2VzKGhpZGUpIHtcblx0ICAgIHZhciBhbmltYXRpb25zID0gaGlkZSA/IHRoaXMucHJvcHMuaGlkZUFuaW1hdGlvbiA6IHRoaXMucHJvcHMuc2hvd0FuaW1hdGlvbjtcblx0ICAgIGlmIChcIltvYmplY3QgQXJyYXldXCIgPT09IHRvU3RyaW5nLmNhbGwoYW5pbWF0aW9ucykpIHtcblx0ICAgICAgcmV0dXJuIGFuaW1hdGlvbnM7XG5cdCAgICB9IGVsc2UgaWYgKFwic3RyaW5nXCIgPT09IHR5cGVvZiBhbmltYXRpb25zKSB7XG5cdCAgICAgIHJldHVybiBhbmltYXRpb25zLnNwbGl0KFwiIFwiKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIF9jbGVhcl9hbmltYXRpb246IGZ1bmN0aW9uIF9jbGVhcl9hbmltYXRpb24oaGlkZSkge1xuXHQgICAgdmFyIG5vZGUgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcyk7XG5cdCAgICB2YXIgYW5pbWF0aW9ucyA9IHRoaXMuX2dldF9hbmltYXRpb25fY2xhc3NlcyhoaWRlKTtcblx0ICAgIGFuaW1hdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoYW5pbWF0aW9uKSB7XG5cdCAgICAgIHJldHVybiAoMCwgX2VsZW1lbnRDbGFzczIuZGVmYXVsdCkobm9kZSkucmVtb3ZlKGFuaW1hdGlvbik7XG5cdCAgICB9KTtcblx0ICB9LFxuXHQgIF9xdWV1ZV9jbGFzczogZnVuY3Rpb24gX3F1ZXVlX2NsYXNzKGNsYXNzTmFtZSkge1xuXHQgICAgdGhpcy5jbGFzc05hbWVRdWV1ZS5wdXNoKGNsYXNzTmFtZSk7XG5cdFxuXHQgICAgaWYgKCF0aGlzLnRpbWVvdXQpIHtcblx0ICAgICAgdGhpcy50aW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLl9mbHVzaF9jbGFzc19uYW1lX3F1ZXVlLCBUSUNLKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIF9mbHVzaF9jbGFzc19uYW1lX3F1ZXVlOiBmdW5jdGlvbiBfZmx1c2hfY2xhc3NfbmFtZV9xdWV1ZSgpIHtcblx0ICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0ICAgIGlmICh0aGlzLl9pc19tb3VudGVkKSB7XG5cdCAgICAgIChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIG5vZGUgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUoX3RoaXMyKTtcblx0ICAgICAgICBfdGhpczIuY2xhc3NOYW1lUXVldWUuZm9yRWFjaChmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XG5cdCAgICAgICAgICByZXR1cm4gKDAsIF9lbGVtZW50Q2xhc3MyLmRlZmF1bHQpKG5vZGUpLmFkZChjbGFzc05hbWUpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9KSgpO1xuXHQgICAgfVxuXHQgICAgdGhpcy5jbGFzc05hbWVRdWV1ZS5sZW5ndGggPSAwO1xuXHQgICAgdGhpcy50aW1lb3V0ID0gbnVsbDtcblx0ICB9LFxuXHQgIF9zaG93OiBmdW5jdGlvbiBfc2hvdygpIHtcblx0ICAgIGlmICh0aGlzLnByb3BzLnRyYW5zaXRpb24pIHtcblx0ICAgICAgdGhpcy5fc2V0X3RyYW5zaXRpb24oKTtcblx0ICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5zaG93QW5pbWF0aW9uKSB7XG5cdCAgICAgIHRoaXMuX3NldF9hbmltYXRpb24oKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIGhhbmRsZU1vdXNlRW50ZXI6IGZ1bmN0aW9uIGhhbmRsZU1vdXNlRW50ZXIoKSB7XG5cdCAgICBjbGVhclRpbWVvdXQodGhpcy5pbnRlcnZhbElkKTtcblx0ICAgIHRoaXMuX3NldF9pbnRlcnZhbF9pZChudWxsKTtcblx0ICAgIGlmICh0aGlzLmlzSGlkaW5nKSB7XG5cdCAgICAgIHRoaXMuX3NldF9pc19oaWRpbmcoZmFsc2UpO1xuXHRcblx0ICAgICAgaWYgKHRoaXMucHJvcHMuaGlkZUFuaW1hdGlvbikge1xuXHQgICAgICAgIHRoaXMuX2NsZWFyX2FuaW1hdGlvbih0cnVlKTtcblx0ICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnRyYW5zaXRpb24pIHtcblx0ICAgICAgICB0aGlzLl9jbGVhcl90cmFuc2l0aW9uKHRydWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0ICBoYW5kbGVNb3VzZUxlYXZlOiBmdW5jdGlvbiBoYW5kbGVNb3VzZUxlYXZlKCkge1xuXHQgICAgaWYgKCF0aGlzLmlzSGlkaW5nICYmICh0aGlzLnByb3BzLnRpbWVPdXQgPiAwIHx8IHRoaXMucHJvcHMuZXh0ZW5kZWRUaW1lT3V0ID4gMCkpIHtcblx0ICAgICAgdGhpcy5fc2V0X2ludGVydmFsX2lkKHNldFRpbWVvdXQodGhpcy5oaWRlVG9hc3QsIHRoaXMucHJvcHMuZXh0ZW5kZWRUaW1lT3V0KSk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBoaWRlVG9hc3Q6IGZ1bmN0aW9uIGhpZGVUb2FzdChvdmVycmlkZSkge1xuXHQgICAgaWYgKHRoaXMuaXNIaWRpbmcgfHwgdGhpcy5pbnRlcnZhbElkID09PSBudWxsICYmICFvdmVycmlkZSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5fc2V0X2lzX2hpZGluZyh0cnVlKTtcblx0ICAgIGlmICh0aGlzLnByb3BzLnRyYW5zaXRpb24pIHtcblx0ICAgICAgdGhpcy5fc2V0X3RyYW5zaXRpb24odHJ1ZSk7XG5cdCAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuaGlkZUFuaW1hdGlvbikge1xuXHQgICAgICB0aGlzLl9zZXRfYW5pbWF0aW9uKHRydWUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5faGFuZGxlX3JlbW92ZSgpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgX3NldF9pbnRlcnZhbF9pZDogZnVuY3Rpb24gX3NldF9pbnRlcnZhbF9pZChpbnRlcnZhbElkKSB7XG5cdCAgICB0aGlzLmludGVydmFsSWQgPSBpbnRlcnZhbElkO1xuXHQgIH0sXG5cdCAgX3NldF9pc19oaWRpbmc6IGZ1bmN0aW9uIF9zZXRfaXNfaGlkaW5nKGlzSGlkaW5nKSB7XG5cdCAgICB0aGlzLmlzSGlkaW5nID0gaXNIaWRpbmc7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9LFxuLyogNDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdHZhciBfcmVhY3REb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb20pO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIGNhbGxfc2hvd19tZXRob2QoJG5vZGUsIHByb3BzKSB7XG5cdCAgJG5vZGVbcHJvcHMuc2hvd01ldGhvZF0oe1xuXHQgICAgZHVyYXRpb246IHByb3BzLnNob3dEdXJhdGlvbixcblx0ICAgIGVhc2luZzogcHJvcHMuc2hvd0Vhc2luZ1xuXHQgIH0pO1xuXHR9XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBzdHlsZToge1xuXHQgICAgICAgIGRpc3BsYXk6IFwibm9uZVwiIH0sXG5cdCAgICAgIC8vIGVmZmVjdGl2ZSAkLmhpZGUoKVxuXHQgICAgICBzaG93TWV0aG9kOiBcImZhZGVJblwiLCAvLyBzbGlkZURvd24sIGFuZCBzaG93IGFyZSBidWlsdCBpbnRvIGpRdWVyeVxuXHQgICAgICBzaG93RHVyYXRpb246IDMwMCxcblx0ICAgICAgc2hvd0Vhc2luZzogXCJzd2luZ1wiLCAvLyBhbmQgbGluZWFyIGFyZSBidWlsdCBpbnRvIGpRdWVyeVxuXHQgICAgICBoaWRlTWV0aG9kOiBcImZhZGVPdXRcIixcblx0ICAgICAgaGlkZUR1cmF0aW9uOiAxMDAwLFxuXHQgICAgICBoaWRlRWFzaW5nOiBcInN3aW5nXCIsXG5cdCAgICAgIC8vXG5cdCAgICAgIHRpbWVPdXQ6IDUwMDAsXG5cdCAgICAgIGV4dGVuZGVkVGltZU91dDogMTAwMFxuXHQgICAgfTtcblx0ICB9LFxuXHQgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgaW50ZXJ2YWxJZDogbnVsbCxcblx0ICAgICAgaXNIaWRpbmc6IGZhbHNlXG5cdCAgICB9O1xuXHQgIH0sXG5cdCAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuXHQgICAgY2FsbF9zaG93X21ldGhvZCh0aGlzLl9nZXRfJF9ub2RlKCksIHRoaXMucHJvcHMpO1xuXHQgICAgaWYgKHRoaXMucHJvcHMudGltZU91dCA+IDApIHtcblx0ICAgICAgdGhpcy5fc2V0X2ludGVydmFsX2lkKHNldFRpbWVvdXQodGhpcy5oaWRlVG9hc3QsIHRoaXMucHJvcHMudGltZU91dCkpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgaGFuZGxlTW91c2VFbnRlcjogZnVuY3Rpb24gaGFuZGxlTW91c2VFbnRlcigpIHtcblx0ICAgIGNsZWFyVGltZW91dCh0aGlzLnN0YXRlLmludGVydmFsSWQpO1xuXHQgICAgdGhpcy5fc2V0X2ludGVydmFsX2lkKG51bGwpO1xuXHQgICAgdGhpcy5fc2V0X2lzX2hpZGluZyhmYWxzZSk7XG5cdFxuXHQgICAgY2FsbF9zaG93X21ldGhvZCh0aGlzLl9nZXRfJF9ub2RlKCkuc3RvcCh0cnVlLCB0cnVlKSwgdGhpcy5wcm9wcyk7XG5cdCAgfSxcblx0ICBoYW5kbGVNb3VzZUxlYXZlOiBmdW5jdGlvbiBoYW5kbGVNb3VzZUxlYXZlKCkge1xuXHQgICAgaWYgKCF0aGlzLnN0YXRlLmlzSGlkaW5nICYmICh0aGlzLnByb3BzLnRpbWVPdXQgPiAwIHx8IHRoaXMucHJvcHMuZXh0ZW5kZWRUaW1lT3V0ID4gMCkpIHtcblx0ICAgICAgdGhpcy5fc2V0X2ludGVydmFsX2lkKHNldFRpbWVvdXQodGhpcy5oaWRlVG9hc3QsIHRoaXMucHJvcHMuZXh0ZW5kZWRUaW1lT3V0KSk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBoaWRlVG9hc3Q6IGZ1bmN0aW9uIGhpZGVUb2FzdChvdmVycmlkZSkge1xuXHQgICAgaWYgKHRoaXMuc3RhdGUuaXNIaWRpbmcgfHwgdGhpcy5zdGF0ZS5pbnRlcnZhbElkID09PSBudWxsICYmICFvdmVycmlkZSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB0aGlzLnNldFN0YXRlKHsgaXNIaWRpbmc6IHRydWUgfSk7XG5cdFxuXHQgICAgdGhpcy5fZ2V0XyRfbm9kZSgpW3RoaXMucHJvcHMuaGlkZU1ldGhvZF0oe1xuXHQgICAgICBkdXJhdGlvbjogdGhpcy5wcm9wcy5oaWRlRHVyYXRpb24sXG5cdCAgICAgIGVhc2luZzogdGhpcy5wcm9wcy5oaWRlRWFzaW5nLFxuXHQgICAgICBjb21wbGV0ZTogdGhpcy5faGFuZGxlX3JlbW92ZVxuXHQgICAgfSk7XG5cdCAgfSxcblx0ICBfZ2V0XyRfbm9kZTogZnVuY3Rpb24gX2dldF8kX25vZGUoKSB7XG5cdCAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xuXHQgICAgcmV0dXJuIGpRdWVyeShfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcykpO1xuXHQgICAgLyogZXNsaW50LWVuYWJsZSBuby11bmRlZiAqL1xuXHQgIH0sXG5cdCAgX3NldF9pbnRlcnZhbF9pZDogZnVuY3Rpb24gX3NldF9pbnRlcnZhbF9pZChpbnRlcnZhbElkKSB7XG5cdCAgICB0aGlzLnNldFN0YXRlKHtcblx0ICAgICAgaW50ZXJ2YWxJZDogaW50ZXJ2YWxJZFxuXHQgICAgfSk7XG5cdCAgfSxcblx0ICBfc2V0X2lzX2hpZGluZzogZnVuY3Rpb24gX3NldF9pc19oaWRpbmcoaXNIaWRpbmcpIHtcblx0ICAgIHRoaXMuc2V0U3RhdGUoe1xuXHQgICAgICBpc0hpZGluZzogaXNIaWRpbmdcblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblxuLyoqKi8gfSxcbi8qIDQ1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLlRvYXN0TWVzc2FnZSA9IGV4cG9ydHMuVG9hc3RDb250YWluZXIgPSB1bmRlZmluZWQ7XG5cdFxuXHR2YXIgX1RvYXN0Q29udGFpbmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdFxuXHR2YXIgX1RvYXN0Q29udGFpbmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1RvYXN0Q29udGFpbmVyKTtcblx0XG5cdHZhciBfVG9hc3RNZXNzYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdFxuXHR2YXIgX1RvYXN0TWVzc2FnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Ub2FzdE1lc3NhZ2UpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGV4cG9ydHMuVG9hc3RDb250YWluZXIgPSBfVG9hc3RDb250YWluZXIyLmRlZmF1bHQ7XG5cdGV4cG9ydHMuVG9hc3RNZXNzYWdlID0gX1RvYXN0TWVzc2FnZTIuZGVmYXVsdDtcblxuLyoqKi8gfSxcbi8qIDQ2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9wdHMpIHtcblx0ICByZXR1cm4gbmV3IEVsZW1lbnRDbGFzcyhvcHRzKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbmRleE9mKGFyciwgcHJvcCkge1xuXHQgIGlmIChhcnIuaW5kZXhPZikgcmV0dXJuIGFyci5pbmRleE9mKHByb3ApXG5cdCAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFyci5sZW5ndGg7IGkgPCBsZW47IGkrKylcblx0ICAgIGlmIChhcnJbaV0gPT09IHByb3ApIHJldHVybiBpXG5cdCAgcmV0dXJuIC0xXG5cdH1cblx0XG5cdGZ1bmN0aW9uIEVsZW1lbnRDbGFzcyhvcHRzKSB7XG5cdCAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEVsZW1lbnRDbGFzcykpIHJldHVybiBuZXcgRWxlbWVudENsYXNzKG9wdHMpXG5cdCAgdmFyIHNlbGYgPSB0aGlzXG5cdCAgaWYgKCFvcHRzKSBvcHRzID0ge31cblx0XG5cdCAgLy8gc2ltaWxhciBkb2luZyBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IGJ1dCB3b3JrcyBpbiBJRThcblx0ICBpZiAob3B0cy5ub2RlVHlwZSkgb3B0cyA9IHtlbDogb3B0c31cblx0XG5cdCAgdGhpcy5vcHRzID0gb3B0c1xuXHQgIHRoaXMuZWwgPSBvcHRzLmVsIHx8IGRvY3VtZW50LmJvZHlcblx0ICBpZiAodHlwZW9mIHRoaXMuZWwgIT09ICdvYmplY3QnKSB0aGlzLmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLmVsKVxuXHR9XG5cdFxuXHRFbGVtZW50Q2xhc3MucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKGNsYXNzTmFtZSkge1xuXHQgIHZhciBlbCA9IHRoaXMuZWxcblx0ICBpZiAoIWVsKSByZXR1cm5cblx0ICBpZiAoZWwuY2xhc3NOYW1lID09PSBcIlwiKSByZXR1cm4gZWwuY2xhc3NOYW1lID0gY2xhc3NOYW1lXG5cdCAgdmFyIGNsYXNzZXMgPSBlbC5jbGFzc05hbWUuc3BsaXQoJyAnKVxuXHQgIGlmIChpbmRleE9mKGNsYXNzZXMsIGNsYXNzTmFtZSkgPiAtMSkgcmV0dXJuIGNsYXNzZXNcblx0ICBjbGFzc2VzLnB1c2goY2xhc3NOYW1lKVxuXHQgIGVsLmNsYXNzTmFtZSA9IGNsYXNzZXMuam9pbignICcpXG5cdCAgcmV0dXJuIGNsYXNzZXNcblx0fVxuXHRcblx0RWxlbWVudENsYXNzLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbihjbGFzc05hbWUpIHtcblx0ICB2YXIgZWwgPSB0aGlzLmVsXG5cdCAgaWYgKCFlbCkgcmV0dXJuXG5cdCAgaWYgKGVsLmNsYXNzTmFtZSA9PT0gXCJcIikgcmV0dXJuXG5cdCAgdmFyIGNsYXNzZXMgPSBlbC5jbGFzc05hbWUuc3BsaXQoJyAnKVxuXHQgIHZhciBpZHggPSBpbmRleE9mKGNsYXNzZXMsIGNsYXNzTmFtZSlcblx0ICBpZiAoaWR4ID4gLTEpIGNsYXNzZXMuc3BsaWNlKGlkeCwgMSlcblx0ICBlbC5jbGFzc05hbWUgPSBjbGFzc2VzLmpvaW4oJyAnKVxuXHQgIHJldHVybiBjbGFzc2VzXG5cdH1cblx0XG5cdEVsZW1lbnRDbGFzcy5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24oY2xhc3NOYW1lKSB7XG5cdCAgdmFyIGVsID0gdGhpcy5lbFxuXHQgIGlmICghZWwpIHJldHVyblxuXHQgIHZhciBjbGFzc2VzID0gZWwuY2xhc3NOYW1lLnNwbGl0KCcgJylcblx0ICByZXR1cm4gaW5kZXhPZihjbGFzc2VzLCBjbGFzc05hbWUpID4gLTFcblx0fVxuXHRcblx0RWxlbWVudENsYXNzLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbihjbGFzc05hbWUpIHtcblx0ICB2YXIgZWwgPSB0aGlzLmVsXG5cdCAgaWYgKCFlbCkgcmV0dXJuXG5cdCAgaWYgKHRoaXMuaGFzKGNsYXNzTmFtZSkpIHRoaXMucmVtb3ZlKGNsYXNzTmFtZSlcblx0ICBlbHNlIHRoaXMuYWRkKGNsYXNzTmFtZSlcblx0fVxuXG5cbi8qKiovIH0sXG4vKiA0NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBPYmplY3QuYXNzaWduXG5cdCAqL1xuXHRcblx0Ly8gaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLW9iamVjdC5hc3NpZ25cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGZ1bmN0aW9uIGFzc2lnbih0YXJnZXQsIHNvdXJjZXMpIHtcblx0ICBpZiAodGFyZ2V0ID09IG51bGwpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ09iamVjdC5hc3NpZ24gdGFyZ2V0IGNhbm5vdCBiZSBudWxsIG9yIHVuZGVmaW5lZCcpO1xuXHQgIH1cblx0XG5cdCAgdmFyIHRvID0gT2JqZWN0KHRhcmdldCk7XG5cdCAgdmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblx0XG5cdCAgZm9yICh2YXIgbmV4dEluZGV4ID0gMTsgbmV4dEluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgbmV4dEluZGV4KyspIHtcblx0ICAgIHZhciBuZXh0U291cmNlID0gYXJndW1lbnRzW25leHRJbmRleF07XG5cdCAgICBpZiAobmV4dFNvdXJjZSA9PSBudWxsKSB7XG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBmcm9tID0gT2JqZWN0KG5leHRTb3VyY2UpO1xuXHRcblx0ICAgIC8vIFdlIGRvbid0IGN1cnJlbnRseSBzdXBwb3J0IGFjY2Vzc29ycyBub3IgcHJveGllcy4gVGhlcmVmb3JlIHRoaXNcblx0ICAgIC8vIGNvcHkgY2Fubm90IHRocm93LiBJZiB3ZSBldmVyIHN1cHBvcnRlZCB0aGlzIHRoZW4gd2UgbXVzdCBoYW5kbGVcblx0ICAgIC8vIGV4Y2VwdGlvbnMgYW5kIHNpZGUtZWZmZWN0cy4gV2UgZG9uJ3Qgc3VwcG9ydCBzeW1ib2xzIHNvIHRoZXkgd29uJ3Rcblx0ICAgIC8vIGJlIHRyYW5zZmVycmVkLlxuXHRcblx0ICAgIGZvciAodmFyIGtleSBpbiBmcm9tKSB7XG5cdCAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGZyb20sIGtleSkpIHtcblx0ICAgICAgICB0b1trZXldID0gZnJvbVtrZXldO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gdG87XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYXNzaWduO1xuXG4vKioqLyB9LFxuLyogNDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RUcmFuc2l0aW9uRXZlbnRzXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdFxuXHQvKipcblx0ICogRVZFTlRfTkFNRV9NQVAgaXMgdXNlZCB0byBkZXRlcm1pbmUgd2hpY2ggZXZlbnQgZmlyZWQgd2hlbiBhXG5cdCAqIHRyYW5zaXRpb24vYW5pbWF0aW9uIGVuZHMsIGJhc2VkIG9uIHRoZSBzdHlsZSBwcm9wZXJ0eSB1c2VkIHRvXG5cdCAqIGRlZmluZSB0aGF0IGV2ZW50LlxuXHQgKi9cblx0dmFyIEVWRU5UX05BTUVfTUFQID0ge1xuXHQgIHRyYW5zaXRpb25lbmQ6IHtcblx0ICAgICd0cmFuc2l0aW9uJzogJ3RyYW5zaXRpb25lbmQnLFxuXHQgICAgJ1dlYmtpdFRyYW5zaXRpb24nOiAnd2Via2l0VHJhbnNpdGlvbkVuZCcsXG5cdCAgICAnTW96VHJhbnNpdGlvbic6ICdtb3pUcmFuc2l0aW9uRW5kJyxcblx0ICAgICdPVHJhbnNpdGlvbic6ICdvVHJhbnNpdGlvbkVuZCcsXG5cdCAgICAnbXNUcmFuc2l0aW9uJzogJ01TVHJhbnNpdGlvbkVuZCdcblx0ICB9LFxuXHRcblx0ICBhbmltYXRpb25lbmQ6IHtcblx0ICAgICdhbmltYXRpb24nOiAnYW5pbWF0aW9uZW5kJyxcblx0ICAgICdXZWJraXRBbmltYXRpb24nOiAnd2Via2l0QW5pbWF0aW9uRW5kJyxcblx0ICAgICdNb3pBbmltYXRpb24nOiAnbW96QW5pbWF0aW9uRW5kJyxcblx0ICAgICdPQW5pbWF0aW9uJzogJ29BbmltYXRpb25FbmQnLFxuXHQgICAgJ21zQW5pbWF0aW9uJzogJ01TQW5pbWF0aW9uRW5kJ1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBlbmRFdmVudHMgPSBbXTtcblx0XG5cdGZ1bmN0aW9uIGRldGVjdEV2ZW50cygpIHtcblx0ICB2YXIgdGVzdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgdmFyIHN0eWxlID0gdGVzdEVsLnN0eWxlO1xuXHRcblx0ICAvLyBPbiBzb21lIHBsYXRmb3JtcywgaW4gcGFydGljdWxhciBzb21lIHJlbGVhc2VzIG9mIEFuZHJvaWQgNC54LFxuXHQgIC8vIHRoZSB1bi1wcmVmaXhlZCBcImFuaW1hdGlvblwiIGFuZCBcInRyYW5zaXRpb25cIiBwcm9wZXJ0aWVzIGFyZSBkZWZpbmVkIG9uIHRoZVxuXHQgIC8vIHN0eWxlIG9iamVjdCBidXQgdGhlIGV2ZW50cyB0aGF0IGZpcmUgd2lsbCBzdGlsbCBiZSBwcmVmaXhlZCwgc28gd2UgbmVlZFxuXHQgIC8vIHRvIGNoZWNrIGlmIHRoZSB1bi1wcmVmaXhlZCBldmVudHMgYXJlIHVzZWFibGUsIGFuZCBpZiBub3QgcmVtb3ZlIHRoZW1cblx0ICAvLyBmcm9tIHRoZSBtYXBcblx0ICBpZiAoISgnQW5pbWF0aW9uRXZlbnQnIGluIHdpbmRvdykpIHtcblx0ICAgIGRlbGV0ZSBFVkVOVF9OQU1FX01BUC5hbmltYXRpb25lbmQuYW5pbWF0aW9uO1xuXHQgIH1cblx0XG5cdCAgaWYgKCEoJ1RyYW5zaXRpb25FdmVudCcgaW4gd2luZG93KSkge1xuXHQgICAgZGVsZXRlIEVWRU5UX05BTUVfTUFQLnRyYW5zaXRpb25lbmQudHJhbnNpdGlvbjtcblx0ICB9XG5cdFxuXHQgIGZvciAodmFyIGJhc2VFdmVudE5hbWUgaW4gRVZFTlRfTkFNRV9NQVApIHtcblx0ICAgIHZhciBiYXNlRXZlbnRzID0gRVZFTlRfTkFNRV9NQVBbYmFzZUV2ZW50TmFtZV07XG5cdCAgICBmb3IgKHZhciBzdHlsZU5hbWUgaW4gYmFzZUV2ZW50cykge1xuXHQgICAgICBpZiAoc3R5bGVOYW1lIGluIHN0eWxlKSB7XG5cdCAgICAgICAgZW5kRXZlbnRzLnB1c2goYmFzZUV2ZW50c1tzdHlsZU5hbWVdKTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0aWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuXHQgIGRldGVjdEV2ZW50cygpO1xuXHR9XG5cdFxuXHQvLyBXZSB1c2UgdGhlIHJhdyB7YWRkfHJlbW92ZX1FdmVudExpc3RlbmVyKCkgY2FsbCBiZWNhdXNlIEV2ZW50TGlzdGVuZXJcblx0Ly8gZG9lcyBub3Qga25vdyBob3cgdG8gcmVtb3ZlIGV2ZW50IGxpc3RlbmVycyBhbmQgd2UgcmVhbGx5IHNob3VsZFxuXHQvLyBjbGVhbiB1cC4gQWxzbywgdGhlc2UgZXZlbnRzIGFyZSBub3QgdHJpZ2dlcmVkIGluIG9sZGVyIGJyb3dzZXJzXG5cdC8vIHNvIHdlIHNob3VsZCBiZSBBLU9LIGhlcmUuXG5cdFxuXHRmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKG5vZGUsIGV2ZW50TmFtZSwgZXZlbnRMaXN0ZW5lcikge1xuXHQgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGV2ZW50TGlzdGVuZXIsIGZhbHNlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcihub2RlLCBldmVudE5hbWUsIGV2ZW50TGlzdGVuZXIpIHtcblx0ICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBldmVudExpc3RlbmVyLCBmYWxzZSk7XG5cdH1cblx0XG5cdHZhciBSZWFjdFRyYW5zaXRpb25FdmVudHMgPSB7XG5cdCAgYWRkRW5kRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24gKG5vZGUsIGV2ZW50TGlzdGVuZXIpIHtcblx0ICAgIGlmIChlbmRFdmVudHMubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgIC8vIElmIENTUyB0cmFuc2l0aW9ucyBhcmUgbm90IHN1cHBvcnRlZCwgdHJpZ2dlciBhbiBcImVuZCBhbmltYXRpb25cIlxuXHQgICAgICAvLyBldmVudCBpbW1lZGlhdGVseS5cblx0ICAgICAgd2luZG93LnNldFRpbWVvdXQoZXZlbnRMaXN0ZW5lciwgMCk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGVuZEV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbmRFdmVudCkge1xuXHQgICAgICBhZGRFdmVudExpc3RlbmVyKG5vZGUsIGVuZEV2ZW50LCBldmVudExpc3RlbmVyKTtcblx0ICAgIH0pO1xuXHQgIH0sXG5cdFxuXHQgIHJlbW92ZUVuZEV2ZW50TGlzdGVuZXI6IGZ1bmN0aW9uIChub2RlLCBldmVudExpc3RlbmVyKSB7XG5cdCAgICBpZiAoZW5kRXZlbnRzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBlbmRFdmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZW5kRXZlbnQpIHtcblx0ICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihub2RlLCBlbmRFdmVudCwgZXZlbnRMaXN0ZW5lcik7XG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0VHJhbnNpdGlvbkV2ZW50cztcblxuLyoqKi8gfSxcbi8qIDQ5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgdXBkYXRlXG5cdCAqL1xuXHRcblx0LyogZ2xvYmFsIGhhc093blByb3BlcnR5OnRydWUgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBhc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblx0dmFyIGtleU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mik7XG5cdHZhciBpbnZhcmlhbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcblx0dmFyIGhhc093blByb3BlcnR5ID0gKHt9KS5oYXNPd25Qcm9wZXJ0eTtcblx0XG5cdGZ1bmN0aW9uIHNoYWxsb3dDb3B5KHgpIHtcblx0ICBpZiAoQXJyYXkuaXNBcnJheSh4KSkge1xuXHQgICAgcmV0dXJuIHguY29uY2F0KCk7XG5cdCAgfSBlbHNlIGlmICh4ICYmIHR5cGVvZiB4ID09PSAnb2JqZWN0Jykge1xuXHQgICAgcmV0dXJuIGFzc2lnbihuZXcgeC5jb25zdHJ1Y3RvcigpLCB4KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIHg7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgQ09NTUFORF9QVVNIID0ga2V5T2YoeyAkcHVzaDogbnVsbCB9KTtcblx0dmFyIENPTU1BTkRfVU5TSElGVCA9IGtleU9mKHsgJHVuc2hpZnQ6IG51bGwgfSk7XG5cdHZhciBDT01NQU5EX1NQTElDRSA9IGtleU9mKHsgJHNwbGljZTogbnVsbCB9KTtcblx0dmFyIENPTU1BTkRfU0VUID0ga2V5T2YoeyAkc2V0OiBudWxsIH0pO1xuXHR2YXIgQ09NTUFORF9NRVJHRSA9IGtleU9mKHsgJG1lcmdlOiBudWxsIH0pO1xuXHR2YXIgQ09NTUFORF9BUFBMWSA9IGtleU9mKHsgJGFwcGx5OiBudWxsIH0pO1xuXHRcblx0dmFyIEFMTF9DT01NQU5EU19MSVNUID0gW0NPTU1BTkRfUFVTSCwgQ09NTUFORF9VTlNISUZULCBDT01NQU5EX1NQTElDRSwgQ09NTUFORF9TRVQsIENPTU1BTkRfTUVSR0UsIENPTU1BTkRfQVBQTFldO1xuXHRcblx0dmFyIEFMTF9DT01NQU5EU19TRVQgPSB7fTtcblx0XG5cdEFMTF9DT01NQU5EU19MSVNULmZvckVhY2goZnVuY3Rpb24gKGNvbW1hbmQpIHtcblx0ICBBTExfQ09NTUFORFNfU0VUW2NvbW1hbmRdID0gdHJ1ZTtcblx0fSk7XG5cdFxuXHRmdW5jdGlvbiBpbnZhcmlhbnRBcnJheUNhc2UodmFsdWUsIHNwZWMsIGNvbW1hbmQpIHtcblx0ICAhQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndXBkYXRlKCk6IGV4cGVjdGVkIHRhcmdldCBvZiAlcyB0byBiZSBhbiBhcnJheTsgZ290ICVzLicsIGNvbW1hbmQsIHZhbHVlKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdCAgdmFyIHNwZWNWYWx1ZSA9IHNwZWNbY29tbWFuZF07XG5cdCAgIUFycmF5LmlzQXJyYXkoc3BlY1ZhbHVlKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd1cGRhdGUoKTogZXhwZWN0ZWQgc3BlYyBvZiAlcyB0byBiZSBhbiBhcnJheTsgZ290ICVzLiAnICsgJ0RpZCB5b3UgZm9yZ2V0IHRvIHdyYXAgeW91ciBwYXJhbWV0ZXIgaW4gYW4gYXJyYXk/JywgY29tbWFuZCwgc3BlY1ZhbHVlKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSwgc3BlYykge1xuXHQgICEodHlwZW9mIHNwZWMgPT09ICdvYmplY3QnKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd1cGRhdGUoKTogWW91IHByb3ZpZGVkIGEga2V5IHBhdGggdG8gdXBkYXRlKCkgdGhhdCBkaWQgbm90IGNvbnRhaW4gb25lICcgKyAnb2YgJXMuIERpZCB5b3UgZm9yZ2V0IHRvIGluY2x1ZGUgeyVzOiAuLi59PycsIEFMTF9DT01NQU5EU19MSVNULmpvaW4oJywgJyksIENPTU1BTkRfU0VUKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cdFxuXHQgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHNwZWMsIENPTU1BTkRfU0VUKSkge1xuXHQgICAgIShPYmplY3Qua2V5cyhzcGVjKS5sZW5ndGggPT09IDEpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0Nhbm5vdCBoYXZlIG1vcmUgdGhhbiBvbmUga2V5IGluIGFuIG9iamVjdCB3aXRoICVzJywgQ09NTUFORF9TRVQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0XG5cdCAgICByZXR1cm4gc3BlY1tDT01NQU5EX1NFVF07XG5cdCAgfVxuXHRcblx0ICB2YXIgbmV4dFZhbHVlID0gc2hhbGxvd0NvcHkodmFsdWUpO1xuXHRcblx0ICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChzcGVjLCBDT01NQU5EX01FUkdFKSkge1xuXHQgICAgdmFyIG1lcmdlT2JqID0gc3BlY1tDT01NQU5EX01FUkdFXTtcblx0ICAgICEobWVyZ2VPYmogJiYgdHlwZW9mIG1lcmdlT2JqID09PSAnb2JqZWN0JykgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndXBkYXRlKCk6ICVzIGV4cGVjdHMgYSBzcGVjIG9mIHR5cGUgXFwnb2JqZWN0XFwnOyBnb3QgJXMnLCBDT01NQU5EX01FUkdFLCBtZXJnZU9iaikgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgICAgIShuZXh0VmFsdWUgJiYgdHlwZW9mIG5leHRWYWx1ZSA9PT0gJ29iamVjdCcpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3VwZGF0ZSgpOiAlcyBleHBlY3RzIGEgdGFyZ2V0IG9mIHR5cGUgXFwnb2JqZWN0XFwnOyBnb3QgJXMnLCBDT01NQU5EX01FUkdFLCBuZXh0VmFsdWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICAgIGFzc2lnbihuZXh0VmFsdWUsIHNwZWNbQ09NTUFORF9NRVJHRV0pO1xuXHQgIH1cblx0XG5cdCAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoc3BlYywgQ09NTUFORF9QVVNIKSkge1xuXHQgICAgaW52YXJpYW50QXJyYXlDYXNlKHZhbHVlLCBzcGVjLCBDT01NQU5EX1BVU0gpO1xuXHQgICAgc3BlY1tDT01NQU5EX1BVU0hdLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgbmV4dFZhbHVlLnB1c2goaXRlbSk7XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHNwZWMsIENPTU1BTkRfVU5TSElGVCkpIHtcblx0ICAgIGludmFyaWFudEFycmF5Q2FzZSh2YWx1ZSwgc3BlYywgQ09NTUFORF9VTlNISUZUKTtcblx0ICAgIHNwZWNbQ09NTUFORF9VTlNISUZUXS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgIG5leHRWYWx1ZS51bnNoaWZ0KGl0ZW0pO1xuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChzcGVjLCBDT01NQU5EX1NQTElDRSkpIHtcblx0ICAgICFBcnJheS5pc0FycmF5KHZhbHVlKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFeHBlY3RlZCAlcyB0YXJnZXQgdG8gYmUgYW4gYXJyYXk7IGdvdCAlcycsIENPTU1BTkRfU1BMSUNFLCB2YWx1ZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgICAgIUFycmF5LmlzQXJyYXkoc3BlY1tDT01NQU5EX1NQTElDRV0pID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3VwZGF0ZSgpOiBleHBlY3RlZCBzcGVjIG9mICVzIHRvIGJlIGFuIGFycmF5IG9mIGFycmF5czsgZ290ICVzLiAnICsgJ0RpZCB5b3UgZm9yZ2V0IHRvIHdyYXAgeW91ciBwYXJhbWV0ZXJzIGluIGFuIGFycmF5PycsIENPTU1BTkRfU1BMSUNFLCBzcGVjW0NPTU1BTkRfU1BMSUNFXSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXHQgICAgc3BlY1tDT01NQU5EX1NQTElDRV0uZm9yRWFjaChmdW5jdGlvbiAoYXJncykge1xuXHQgICAgICAhQXJyYXkuaXNBcnJheShhcmdzKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd1cGRhdGUoKTogZXhwZWN0ZWQgc3BlYyBvZiAlcyB0byBiZSBhbiBhcnJheSBvZiBhcnJheXM7IGdvdCAlcy4gJyArICdEaWQgeW91IGZvcmdldCB0byB3cmFwIHlvdXIgcGFyYW1ldGVycyBpbiBhbiBhcnJheT8nLCBDT01NQU5EX1NQTElDRSwgc3BlY1tDT01NQU5EX1NQTElDRV0pIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgbmV4dFZhbHVlLnNwbGljZS5hcHBseShuZXh0VmFsdWUsIGFyZ3MpO1xuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChzcGVjLCBDT01NQU5EX0FQUExZKSkge1xuXHQgICAgISh0eXBlb2Ygc3BlY1tDT01NQU5EX0FQUExZXSA9PT0gJ2Z1bmN0aW9uJykgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndXBkYXRlKCk6IGV4cGVjdGVkIHNwZWMgb2YgJXMgdG8gYmUgYSBmdW5jdGlvbjsgZ290ICVzLicsIENPTU1BTkRfQVBQTFksIHNwZWNbQ09NTUFORF9BUFBMWV0pIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblx0ICAgIG5leHRWYWx1ZSA9IHNwZWNbQ09NTUFORF9BUFBMWV0obmV4dFZhbHVlKTtcblx0ICB9XG5cdFxuXHQgIGZvciAodmFyIGsgaW4gc3BlYykge1xuXHQgICAgaWYgKCEoQUxMX0NPTU1BTkRTX1NFVC5oYXNPd25Qcm9wZXJ0eShrKSAmJiBBTExfQ09NTUFORFNfU0VUW2tdKSkge1xuXHQgICAgICBuZXh0VmFsdWVba10gPSB1cGRhdGUodmFsdWVba10sIHNwZWNba10pO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIG5leHRWYWx1ZTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB1cGRhdGU7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KSkpXG5cbi8qKiovIH0sXG4vKiA1MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBFeGVjdXRpb25FbnZpcm9ubWVudFxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBjYW5Vc2VET00gPSAhISh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuZG9jdW1lbnQgJiYgd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpO1xuXHRcblx0LyoqXG5cdCAqIFNpbXBsZSwgbGlnaHR3ZWlnaHQgbW9kdWxlIGFzc2lzdGluZyB3aXRoIHRoZSBkZXRlY3Rpb24gYW5kIGNvbnRleHQgb2Zcblx0ICogV29ya2VyLiBIZWxwcyBhdm9pZCBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYW5kIGFsbG93cyBjb2RlIHRvIHJlYXNvbiBhYm91dFxuXHQgKiB3aGV0aGVyIG9yIG5vdCB0aGV5IGFyZSBpbiBhIFdvcmtlciwgZXZlbiBpZiB0aGV5IG5ldmVyIGluY2x1ZGUgdGhlIG1haW5cblx0ICogYFJlYWN0V29ya2VyYCBkZXBlbmRlbmN5LlxuXHQgKi9cblx0dmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0ge1xuXHRcblx0ICBjYW5Vc2VET006IGNhblVzZURPTSxcblx0XG5cdCAgY2FuVXNlV29ya2VyczogdHlwZW9mIFdvcmtlciAhPT0gJ3VuZGVmaW5lZCcsXG5cdFxuXHQgIGNhblVzZUV2ZW50TGlzdGVuZXJzOiBjYW5Vc2VET00gJiYgISEod2luZG93LmFkZEV2ZW50TGlzdGVuZXIgfHwgd2luZG93LmF0dGFjaEV2ZW50KSxcblx0XG5cdCAgY2FuVXNlVmlld3BvcnQ6IGNhblVzZURPTSAmJiAhIXdpbmRvdy5zY3JlZW4sXG5cdFxuXHQgIGlzSW5Xb3JrZXI6ICFjYW5Vc2VET00gLy8gRm9yIG5vdywgdGhpcyBpcyB0cnVlIC0gbWlnaHQgY2hhbmdlIGluIHRoZSBmdXR1cmUuXG5cdFxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBFeGVjdXRpb25FbnZpcm9ubWVudDtcblxuLyoqKi8gfSxcbi8qIDUxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgaW52YXJpYW50XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIFVzZSBpbnZhcmlhbnQoKSB0byBhc3NlcnQgc3RhdGUgd2hpY2ggeW91ciBwcm9ncmFtIGFzc3VtZXMgdG8gYmUgdHJ1ZS5cblx0ICpcblx0ICogUHJvdmlkZSBzcHJpbnRmLXN0eWxlIGZvcm1hdCAob25seSAlcyBpcyBzdXBwb3J0ZWQpIGFuZCBhcmd1bWVudHNcblx0ICogdG8gcHJvdmlkZSBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IGJyb2tlIGFuZCB3aGF0IHlvdSB3ZXJlXG5cdCAqIGV4cGVjdGluZy5cblx0ICpcblx0ICogVGhlIGludmFyaWFudCBtZXNzYWdlIHdpbGwgYmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiwgYnV0IHRoZSBpbnZhcmlhbnRcblx0ICogd2lsbCByZW1haW4gdG8gZW5zdXJlIGxvZ2ljIGRvZXMgbm90IGRpZmZlciBpbiBwcm9kdWN0aW9uLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGludmFyaWFudChjb25kaXRpb24sIGZvcm1hdCwgYSwgYiwgYywgZCwgZSwgZikge1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhcmlhbnQgcmVxdWlyZXMgYW4gZXJyb3IgbWVzc2FnZSBhcmd1bWVudCcpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKCFjb25kaXRpb24pIHtcblx0ICAgIHZhciBlcnJvcjtcblx0ICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICBlcnJvciA9IG5ldyBFcnJvcignTWluaWZpZWQgZXhjZXB0aW9uIG9jY3VycmVkOyB1c2UgdGhlIG5vbi1taW5pZmllZCBkZXYgZW52aXJvbm1lbnQgJyArICdmb3IgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZSBhbmQgYWRkaXRpb25hbCBoZWxwZnVsIHdhcm5pbmdzLicpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIGFyZ3MgPSBbYSwgYiwgYywgZCwgZSwgZl07XG5cdCAgICAgIHZhciBhcmdJbmRleCA9IDA7XG5cdCAgICAgIGVycm9yID0gbmV3IEVycm9yKGZvcm1hdC5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIGFyZ3NbYXJnSW5kZXgrK107XG5cdCAgICAgIH0pKTtcblx0ICAgICAgZXJyb3IubmFtZSA9ICdJbnZhcmlhbnQgVmlvbGF0aW9uJztcblx0ICAgIH1cblx0XG5cdCAgICBlcnJvci5mcmFtZXNUb1BvcCA9IDE7IC8vIHdlIGRvbid0IGNhcmUgYWJvdXQgaW52YXJpYW50J3Mgb3duIGZyYW1lXG5cdCAgICB0aHJvdyBlcnJvcjtcblx0ICB9XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaW52YXJpYW50O1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxNSkpKVxuXG4vKioqLyB9LFxuLyogNTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUga2V5T2Zcblx0ICovXG5cdFxuXHQvKipcblx0ICogQWxsb3dzIGV4dHJhY3Rpb24gb2YgYSBtaW5pZmllZCBrZXkuIExldCdzIHRoZSBidWlsZCBzeXN0ZW0gbWluaWZ5IGtleXNcblx0ICogd2l0aG91dCBsb3NpbmcgdGhlIGFiaWxpdHkgdG8gZHluYW1pY2FsbHkgdXNlIGtleSBzdHJpbmdzIGFzIHZhbHVlc1xuXHQgKiB0aGVtc2VsdmVzLiBQYXNzIGluIGFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIGtleS92YWwgcGFpciBhbmQgaXQgd2lsbCByZXR1cm5cblx0ICogeW91IHRoZSBzdHJpbmcga2V5IG9mIHRoYXQgc2luZ2xlIHJlY29yZC4gU3VwcG9zZSB5b3Ugd2FudCB0byBncmFiIHRoZVxuXHQgKiB2YWx1ZSBmb3IgYSBrZXkgJ2NsYXNzTmFtZScgaW5zaWRlIG9mIGFuIG9iamVjdC4gS2V5L3ZhbCBtaW5pZmljYXRpb24gbWF5XG5cdCAqIGhhdmUgYWxpYXNlZCB0aGF0IGtleSB0byBiZSAneGExMicuIGtleU9mKHtjbGFzc05hbWU6IG51bGx9KSB3aWxsIHJldHVyblxuXHQgKiAneGExMicgaW4gdGhhdCBjYXNlLiBSZXNvbHZlIGtleXMgeW91IHdhbnQgdG8gdXNlIG9uY2UgYXQgc3RhcnR1cCB0aW1lLCB0aGVuXG5cdCAqIHJldXNlIHRob3NlIHJlc29sdXRpb25zLlxuXHQgKi9cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHR2YXIga2V5T2YgPSBmdW5jdGlvbiAob25lS2V5T2JqKSB7XG5cdCAgdmFyIGtleTtcblx0ICBmb3IgKGtleSBpbiBvbmVLZXlPYmopIHtcblx0ICAgIGlmICghb25lS2V5T2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdCAgICByZXR1cm4ga2V5O1xuXHQgIH1cblx0ICByZXR1cm4gbnVsbDtcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0ga2V5T2Y7XG5cbi8qKiovIH0sXG4vKiA1MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LypcclxuXHRcdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXHJcblx0XHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXHJcblx0Ki9cclxuXHR2YXIgc3R5bGVzSW5Eb20gPSB7fSxcclxuXHRcdG1lbW9pemUgPSBmdW5jdGlvbihmbikge1xyXG5cdFx0XHR2YXIgbWVtbztcclxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRpZiAodHlwZW9mIG1lbW8gPT09IFwidW5kZWZpbmVkXCIpIG1lbW8gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG5cdFx0XHRcdHJldHVybiBtZW1vO1xyXG5cdFx0XHR9O1xyXG5cdFx0fSxcclxuXHRcdGlzT2xkSUUgPSBtZW1vaXplKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gL21zaWUgWzYtOV1cXGIvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7XHJcblx0XHR9KSxcclxuXHRcdGdldEhlYWRFbGVtZW50ID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHJldHVybiBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcclxuXHRcdH0pLFxyXG5cdFx0c2luZ2xldG9uRWxlbWVudCA9IG51bGwsXHJcblx0XHRzaW5nbGV0b25Db3VudGVyID0gMCxcclxuXHRcdHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wID0gW107XHJcblx0XHJcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaXN0LCBvcHRpb25zKSB7XHJcblx0XHRpZihmYWxzZSkge1xyXG5cdFx0XHRpZih0eXBlb2YgZG9jdW1lbnQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihcIlRoZSBzdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudFwiKTtcclxuXHRcdH1cclxuXHRcclxuXHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG5cdFx0Ly8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XHJcblx0XHQvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXHJcblx0XHRpZiAodHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uID09PSBcInVuZGVmaW5lZFwiKSBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcclxuXHRcclxuXHRcdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIGJvdHRvbSBvZiA8aGVhZD4uXHJcblx0XHRpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidW5kZWZpbmVkXCIpIG9wdGlvbnMuaW5zZXJ0QXQgPSBcImJvdHRvbVwiO1xyXG5cdFxyXG5cdFx0dmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0KTtcclxuXHRcdGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7XHJcblx0XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcclxuXHRcdFx0dmFyIG1heVJlbW92ZSA9IFtdO1xyXG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XHJcblx0XHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XHJcblx0XHRcdFx0ZG9tU3R5bGUucmVmcy0tO1xyXG5cdFx0XHRcdG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZihuZXdMaXN0KSB7XHJcblx0XHRcdFx0dmFyIG5ld1N0eWxlcyA9IGxpc3RUb1N0eWxlcyhuZXdMaXN0KTtcclxuXHRcdFx0XHRhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBtYXlSZW1vdmUubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHR2YXIgZG9tU3R5bGUgPSBtYXlSZW1vdmVbaV07XHJcblx0XHRcdFx0aWYoZG9tU3R5bGUucmVmcyA9PT0gMCkge1xyXG5cdFx0XHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKVxyXG5cdFx0XHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXSgpO1xyXG5cdFx0XHRcdFx0ZGVsZXRlIHN0eWxlc0luRG9tW2RvbVN0eWxlLmlkXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fVxyXG5cdFxyXG5cdGZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucykge1xyXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcclxuXHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XHJcblx0XHRcdGlmKGRvbVN0eWxlKSB7XHJcblx0XHRcdFx0ZG9tU3R5bGUucmVmcysrO1xyXG5cdFx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oaXRlbS5wYXJ0c1tqXSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGZvcig7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0XHRkb21TdHlsZS5wYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dmFyIHBhcnRzID0gW107XHJcblx0XHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0XHRcdHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHtpZDogaXRlbS5pZCwgcmVmczogMSwgcGFydHM6IHBhcnRzfTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRmdW5jdGlvbiBsaXN0VG9TdHlsZXMobGlzdCkge1xyXG5cdFx0dmFyIHN0eWxlcyA9IFtdO1xyXG5cdFx0dmFyIG5ld1N0eWxlcyA9IHt9O1xyXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGl0ZW0gPSBsaXN0W2ldO1xyXG5cdFx0XHR2YXIgaWQgPSBpdGVtWzBdO1xyXG5cdFx0XHR2YXIgY3NzID0gaXRlbVsxXTtcclxuXHRcdFx0dmFyIG1lZGlhID0gaXRlbVsyXTtcclxuXHRcdFx0dmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XHJcblx0XHRcdHZhciBwYXJ0ID0ge2NzczogY3NzLCBtZWRpYTogbWVkaWEsIHNvdXJjZU1hcDogc291cmNlTWFwfTtcclxuXHRcdFx0aWYoIW5ld1N0eWxlc1tpZF0pXHJcblx0XHRcdFx0c3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTtcclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHRcdG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBzdHlsZXM7XHJcblx0fVxyXG5cdFxyXG5cdGZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBzdHlsZUVsZW1lbnQpIHtcclxuXHRcdHZhciBoZWFkID0gZ2V0SGVhZEVsZW1lbnQoKTtcclxuXHRcdHZhciBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCA9IHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wW3N0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLmxlbmd0aCAtIDFdO1xyXG5cdFx0aWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidG9wXCIpIHtcclxuXHRcdFx0aWYoIWxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wKSB7XHJcblx0XHRcdFx0aGVhZC5pbnNlcnRCZWZvcmUoc3R5bGVFbGVtZW50LCBoZWFkLmZpcnN0Q2hpbGQpO1xyXG5cdFx0XHR9IGVsc2UgaWYobGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpIHtcclxuXHRcdFx0XHRoZWFkLmluc2VydEJlZm9yZShzdHlsZUVsZW1lbnQsIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRoZWFkLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7XHJcblx0XHRcdH1cclxuXHRcdFx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AucHVzaChzdHlsZUVsZW1lbnQpO1xyXG5cdFx0fSBlbHNlIGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcImJvdHRvbVwiKSB7XHJcblx0XHRcdGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciAnaW5zZXJ0QXQnLiBNdXN0IGJlICd0b3AnIG9yICdib3R0b20nLlwiKTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0ZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCkge1xyXG5cdFx0c3R5bGVFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50KTtcclxuXHRcdHZhciBpZHggPSBzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5pbmRleE9mKHN0eWxlRWxlbWVudCk7XHJcblx0XHRpZihpZHggPj0gMCkge1xyXG5cdFx0XHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5zcGxpY2UoaWR4LCAxKTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0ZnVuY3Rpb24gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcclxuXHRcdHZhciBzdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcblx0XHRzdHlsZUVsZW1lbnQudHlwZSA9IFwidGV4dC9jc3NcIjtcclxuXHRcdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBzdHlsZUVsZW1lbnQpO1xyXG5cdFx0cmV0dXJuIHN0eWxlRWxlbWVudDtcclxuXHR9XHJcblx0XHJcblx0ZnVuY3Rpb24gY3JlYXRlTGlua0VsZW1lbnQob3B0aW9ucykge1xyXG5cdFx0dmFyIGxpbmtFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XHJcblx0XHRsaW5rRWxlbWVudC5yZWwgPSBcInN0eWxlc2hlZXRcIjtcclxuXHRcdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBsaW5rRWxlbWVudCk7XHJcblx0XHRyZXR1cm4gbGlua0VsZW1lbnQ7XHJcblx0fVxyXG5cdFxyXG5cdGZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xyXG5cdFx0dmFyIHN0eWxlRWxlbWVudCwgdXBkYXRlLCByZW1vdmU7XHJcblx0XHJcblx0XHRpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcclxuXHRcdFx0dmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XHJcblx0XHRcdHN0eWxlRWxlbWVudCA9IHNpbmdsZXRvbkVsZW1lbnQgfHwgKHNpbmdsZXRvbkVsZW1lbnQgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xyXG5cdFx0XHR1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50LCBzdHlsZUluZGV4LCBmYWxzZSk7XHJcblx0XHRcdHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIHRydWUpO1xyXG5cdFx0fSBlbHNlIGlmKG9iai5zb3VyY2VNYXAgJiZcclxuXHRcdFx0dHlwZW9mIFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXHJcblx0XHRcdHR5cGVvZiBVUkwuY3JlYXRlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcclxuXHRcdFx0dHlwZW9mIFVSTC5yZXZva2VPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxyXG5cdFx0XHR0eXBlb2YgQmxvYiA9PT0gXCJmdW5jdGlvblwiICYmXHJcblx0XHRcdHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCIpIHtcclxuXHRcdFx0c3R5bGVFbGVtZW50ID0gY3JlYXRlTGlua0VsZW1lbnQob3B0aW9ucyk7XHJcblx0XHRcdHVwZGF0ZSA9IHVwZGF0ZUxpbmsuYmluZChudWxsLCBzdHlsZUVsZW1lbnQpO1xyXG5cdFx0XHRyZW1vdmUgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KTtcclxuXHRcdFx0XHRpZihzdHlsZUVsZW1lbnQuaHJlZilcclxuXHRcdFx0XHRcdFVSTC5yZXZva2VPYmplY3RVUkwoc3R5bGVFbGVtZW50LmhyZWYpO1xyXG5cdFx0XHR9O1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0c3R5bGVFbGVtZW50ID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpO1xyXG5cdFx0XHR1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50KTtcclxuXHRcdFx0cmVtb3ZlID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCk7XHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0XHJcblx0XHR1cGRhdGUob2JqKTtcclxuXHRcclxuXHRcdHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZShuZXdPYmopIHtcclxuXHRcdFx0aWYobmV3T2JqKSB7XHJcblx0XHRcdFx0aWYobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKVxyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdHVwZGF0ZShvYmogPSBuZXdPYmopO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJlbW92ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdH1cclxuXHRcclxuXHR2YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xyXG5cdFx0dmFyIHRleHRTdG9yZSA9IFtdO1xyXG5cdFxyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgcmVwbGFjZW1lbnQpIHtcclxuXHRcdFx0dGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xyXG5cdFx0XHRyZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcclxuXHRcdH07XHJcblx0fSkoKTtcclxuXHRcclxuXHRmdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlRWxlbWVudCwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XHJcblx0XHR2YXIgY3NzID0gcmVtb3ZlID8gXCJcIiA6IG9iai5jc3M7XHJcblx0XHJcblx0XHRpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcclxuXHRcdFx0c3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xyXG5cdFx0XHR2YXIgY2hpbGROb2RlcyA9IHN0eWxlRWxlbWVudC5jaGlsZE5vZGVzO1xyXG5cdFx0XHRpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHN0eWxlRWxlbWVudC5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XHJcblx0XHRcdGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xyXG5cdFx0XHRcdHN0eWxlRWxlbWVudC5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChjc3NOb2RlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRmdW5jdGlvbiBhcHBseVRvVGFnKHN0eWxlRWxlbWVudCwgb2JqKSB7XHJcblx0XHR2YXIgY3NzID0gb2JqLmNzcztcclxuXHRcdHZhciBtZWRpYSA9IG9iai5tZWRpYTtcclxuXHRcdHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xyXG5cdFxyXG5cdFx0aWYobWVkaWEpIHtcclxuXHRcdFx0c3R5bGVFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1lZGlhXCIsIG1lZGlhKVxyXG5cdFx0fVxyXG5cdFxyXG5cdFx0aWYoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcclxuXHRcdFx0c3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHdoaWxlKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKSB7XHJcblx0XHRcdFx0c3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdGZ1bmN0aW9uIHVwZGF0ZUxpbmsobGlua0VsZW1lbnQsIG9iaikge1xyXG5cdFx0dmFyIGNzcyA9IG9iai5jc3M7XHJcblx0XHR2YXIgbWVkaWEgPSBvYmoubWVkaWE7XHJcblx0XHR2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcclxuXHRcclxuXHRcdGlmKHNvdXJjZU1hcCkge1xyXG5cdFx0XHQvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjYwMzg3NVxyXG5cdFx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XHJcblx0XHR9XHJcblx0XHJcblx0XHR2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3NdLCB7IHR5cGU6IFwidGV4dC9jc3NcIiB9KTtcclxuXHRcclxuXHRcdHZhciBvbGRTcmMgPSBsaW5rRWxlbWVudC5ocmVmO1xyXG5cdFxyXG5cdFx0bGlua0VsZW1lbnQuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcblx0XHJcblx0XHRpZihvbGRTcmMpXHJcblx0XHRcdFVSTC5yZXZva2VPYmplY3RVUkwob2xkU3JjKTtcclxuXHR9XHJcblxuXG4vKioqLyB9LFxuLyogNTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTMpKGNvbnRlbnQsIHt9KTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vY3NzLWxvYWRlci9pbmRleC5qcyEuL2luZGV4LmNzc1wiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9pbmRleC5jc3NcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiA1NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHsgdGhyb3cgbmV3IEVycm9yKFwiZGVmaW5lIGNhbm5vdCBiZSB1c2VkIGluZGlyZWN0XCIpOyB9O1xyXG5cblxuLyoqKi8gfSxcbi8qIDU2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oX193ZWJwYWNrX2FtZF9vcHRpb25zX18pIHttb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19hbWRfb3B0aW9uc19fO1xyXG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywge30pKVxuXG4vKioqLyB9XG4vKioqKioqLyBdKVxufSk7XG47XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogcmVhY3QtYm9vdHN0cmFwLXRhYmxlLmpzXG4gKiovIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL2Jvb3RzdHJhcCAwZDZhMzczZjI4MWU2NTQxNWM2YlxuICoqLyIsImltcG9ydCBCb290c3RyYXBUYWJsZSBmcm9tICcuL0Jvb3RzdHJhcFRhYmxlJztcclxuaW1wb3J0IFRhYmxlSGVhZGVyQ29sdW1uIGZyb20gJy4vVGFibGVIZWFkZXJDb2x1bW4nO1xyXG5pbXBvcnQge1RhYmxlRGF0YVNldH0gZnJvbSAnLi9zdG9yZS9UYWJsZURhdGFTdG9yZSc7XHJcblxyXG5pZih0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyl7XHJcbiAgd2luZG93LkJvb3RzdHJhcFRhYmxlID0gQm9vdHN0cmFwVGFibGU7XHJcbiAgd2luZG93LlRhYmxlSGVhZGVyQ29sdW1uID0gVGFibGVIZWFkZXJDb2x1bW47XHJcbiAgd2luZG93LlRhYmxlRGF0YVNldCA9IFRhYmxlRGF0YVNldDtcclxufVxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgQm9vdHN0cmFwVGFibGUsXHJcbiAgVGFibGVIZWFkZXJDb2x1bW4sXHJcbiAgVGFibGVEYXRhU2V0XHJcbn07XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2luZGV4LmpzXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzFfXztcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIGV4dGVybmFsIHtcInJvb3RcIjpcIlJlYWN0XCIsXCJjb21tb25qczJcIjpcInJlYWN0XCIsXCJjb21tb25qc1wiOlwicmVhY3RcIixcImFtZFwiOlwicmVhY3RcIn1cbiAqKiBtb2R1bGUgaWQgPSAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnQgZGVmYXVsdCB7XHJcbiAgU09SVF9ERVNDOiBcImRlc2NcIixcclxuICBTT1JUX0FTQzogXCJhc2NcIixcclxuICBTSVpFX1BFUl9QQUdFOiAxMCxcclxuICBORVhUX1BBR0U6IFwiPlwiLFxyXG4gIExBU1RfUEFHRTogXCI+PlwiLFxyXG4gIFBSRV9QQUdFOiBcIjxcIixcclxuICBGSVJTVF9QQUdFOiBcIjw8XCIsXHJcbiAgUk9XX1NFTEVDVF9CR19DT0xPUjogXCJcIixcclxuICBST1dfU0VMRUNUX05PTkU6IFwibm9uZVwiLFxyXG4gIFJPV19TRUxFQ1RfU0lOR0xFOiBcInJhZGlvXCIsXHJcbiAgUk9XX1NFTEVDVF9NVUxUSTogXCJjaGVja2JveFwiLFxyXG4gIENFTExfRURJVF9OT05FOiBcIm5vbmVcIixcclxuICBDRUxMX0VESVRfQ0xJQ0s6IFwiY2xpY2tcIixcclxuICBDRUxMX0VESVRfREJDTElDSzogXCJkYmNsaWNrXCIsXHJcbiAgU0laRV9QRVJfUEFHRV9MSVNUOiBbMTAsIDI1LCAzMCwgNTBdLFxyXG4gIFBBR0lOQVRJT05fU0laRTogNSxcclxuICBOT19EQVRBX1RFWFQ6IFwiVGhlcmUgaXMgbm8gZGF0YSB0byBkaXNwbGF5XCIsXHJcbiAgU0hPV19PTkxZX1NFTEVDVDogXCJTaG93IFNlbGVjdGVkIE9ubHlcIixcclxuICBTSE9XX0FMTDogXCJTaG93IEFsbFwiLFxyXG4gIEZJTFRFUl9ERUxBWTogNTAwLFxyXG4gIEZJTFRFUl9UWVBFOiB7XHJcbiAgICBURVhUOiBcIlRleHRGaWx0ZXJcIixcclxuICAgIFNFTEVDVDogXCJTZWxlY3RGaWx0ZXJcIixcclxuICAgIE5VTUJFUjogXCJOdW1iZXJGaWx0ZXJcIixcclxuICAgIERBVEU6IFwiRGF0ZUZpbHRlclwiLFxyXG4gICAgQ1VTVE9NOiBcIkN1c3RvbUZpbHRlclwiXHJcbiAgfVxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL0NvbnN0LmpzXG4gKiovIiwiLyohXG4gIENvcHlyaWdodCAoYykgMjAxNiBKZWQgV2F0c29uLlxuICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgKE1JVCksIHNlZVxuICBodHRwOi8vamVkd2F0c29uLmdpdGh1Yi5pby9jbGFzc25hbWVzXG4qL1xuLyogZ2xvYmFsIGRlZmluZSAqL1xuXG4oZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIGhhc093biA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5cdGZ1bmN0aW9uIGNsYXNzTmFtZXMgKCkge1xuXHRcdHZhciBjbGFzc2VzID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGFyZyA9IGFyZ3VtZW50c1tpXTtcblx0XHRcdGlmICghYXJnKSBjb250aW51ZTtcblxuXHRcdFx0dmFyIGFyZ1R5cGUgPSB0eXBlb2YgYXJnO1xuXG5cdFx0XHRpZiAoYXJnVHlwZSA9PT0gJ3N0cmluZycgfHwgYXJnVHlwZSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGFyZyk7XG5cdFx0XHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSkge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goY2xhc3NOYW1lcy5hcHBseShudWxsLCBhcmcpKTtcblx0XHRcdH0gZWxzZSBpZiAoYXJnVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGFyZykge1xuXHRcdFx0XHRcdGlmIChoYXNPd24uY2FsbChhcmcsIGtleSkgJiYgYXJnW2tleV0pIHtcblx0XHRcdFx0XHRcdGNsYXNzZXMucHVzaChrZXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gY2xhc3NOYW1lcztcblx0fSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09PSAnb2JqZWN0JyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0Ly8gcmVnaXN0ZXIgYXMgJ2NsYXNzbmFtZXMnLCBjb25zaXN0ZW50IHdpdGggbnBtIHBhY2thZ2UgbmFtZVxuXHRcdGRlZmluZSgnY2xhc3NuYW1lcycsIFtdLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gY2xhc3NOYW1lcztcblx0XHR9KTtcblx0fSBlbHNlIHtcblx0XHR3aW5kb3cuY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXM7XG5cdH1cbn0oKSk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jbGFzc25hbWVzL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzRfXztcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIGV4dGVybmFsIHtcInJvb3RcIjpcIlJlYWN0RE9NXCIsXCJjb21tb25qczJcIjpcInJlYWN0LWRvbVwiLFwiY29tbW9uanNcIjpcInJlYWN0LWRvbVwiLFwiYW1kXCI6XCJyZWFjdC1kb21cIn1cbiAqKiBtb2R1bGUgaWQgPSA0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgQ29uc3QgZnJvbSAnLi9Db25zdCc7XHJcbmltcG9ydCBjbGFzc1NldCBmcm9tICdjbGFzc25hbWVzJztcclxuZXhwb3J0IGRlZmF1bHQge1xyXG5cclxuICByZW5kZXJTb3J0Q2FyZXQob3JkZXIpIHtcclxuICAgIHZhciB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICB3cmFwLmNsYXNzTmFtZSA9IFwib3JkZXJcIjtcclxuICAgIGlmKG9yZGVyID09IENvbnN0LlNPUlRfQVNDKSB3cmFwLmNsYXNzTmFtZSArPSBcIiBkcm9wdXBcIjtcclxuICAgIHZhciBpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgaW5uZXIuY2xhc3NOYW1lID0gXCJjYXJldFwiO1xyXG4gICAgaW5uZXIuc3R5bGUubWFyZ2luID0gXCIxMHB4IDVweFwiO1xyXG4gICAgd3JhcC5hcHBlbmRDaGlsZChpbm5lcik7XHJcbiAgICByZXR1cm4gd3JhcDtcclxuICB9LFxyXG5cclxuICByZW5kZXJSZWFjdFNvcnRDYXJldChvcmRlcil7XHJcbiAgICB2YXIgb3JkZXJDbGFzcyA9IGNsYXNzU2V0KFwib3JkZXJcIiwge1xyXG4gICAgICAnZHJvcHVwJzogb3JkZXIgPT0gQ29uc3QuU09SVF9BU0NcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPHNwYW4gY2xhc3NOYW1lPXtvcmRlckNsYXNzfT5cclxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJjYXJldFwiIHN0eWxlPXt7bWFyZ2luOiAnMTBweCA1cHgnfX0+PC9zcGFuPlxyXG4gICAgICA8L3NwYW4+XHJcbiAgICApO1xyXG4gIH0sXHJcblxyXG4gIGdldFNjcm9sbEJhcldpZHRoKCl7XHJcbiAgICB2YXIgaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICBpbm5lci5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xyXG4gICAgaW5uZXIuc3R5bGUuaGVpZ2h0ID0gXCIyMDBweFwiO1xyXG5cclxuICAgIHZhciBvdXRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgb3V0ZXIuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XHJcbiAgICBvdXRlci5zdHlsZS50b3AgPSBcIjBweFwiO1xyXG4gICAgb3V0ZXIuc3R5bGUubGVmdCA9IFwiMHB4XCI7XHJcbiAgICBvdXRlci5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcclxuICAgIG91dGVyLnN0eWxlLndpZHRoID0gXCIyMDBweFwiO1xyXG4gICAgb3V0ZXIuc3R5bGUuaGVpZ2h0ID0gXCIxNTBweFwiO1xyXG4gICAgb3V0ZXIuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xyXG4gICAgb3V0ZXIuYXBwZW5kQ2hpbGQgKGlubmVyKTtcclxuXHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkIChvdXRlcik7XHJcbiAgICB2YXIgdzEgPSBpbm5lci5vZmZzZXRXaWR0aDtcclxuICAgIG91dGVyLnN0eWxlLm92ZXJmbG93ID0gJ3Njcm9sbCc7XHJcbiAgICB2YXIgdzIgPSBpbm5lci5vZmZzZXRXaWR0aDtcclxuICAgIGlmICh3MSA9PSB3MikgdzIgPSBvdXRlci5jbGllbnRXaWR0aDtcclxuXHJcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkIChvdXRlcik7XHJcblxyXG4gICAgcmV0dXJuICh3MSAtIHcyKTtcclxuICB9XHJcblxyXG59O1xyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy91dGlsLmpzXG4gKiovIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IFN3aXRjaCBmcm9tICdyYy1zd2l0Y2gnO1xyXG5pbXBvcnQgJ3JjLXN3aXRjaC9hc3NldHMvaW5kZXguY3NzJztcclxuaW1wb3J0IFNlbGVjdCBmcm9tICdyZWFjdC1zZWxlY3QnO1xyXG5cclxudmFyIEVkaXRvciA9IGZ1bmN0aW9uIChlZGl0YWJsZSwgYXR0ciwgZm9ybWF0LCBlZGl0b3JDbGFzcywgZGVmYXVsdFZhbHVlKSB7XHJcblxyXG5cclxuICAgIGlmIChlZGl0YWJsZSA9PT0gdHJ1ZSB8fCB0eXBlb2YgZWRpdGFibGUgPT09IFwic3RyaW5nXCIpIHsvL3NpbXBsZSBkZWNsYXJlXHJcbiAgICAgICAgdmFyIHR5cGUgPSBlZGl0YWJsZSA9PT0gdHJ1ZSA/ICd0ZXh0JyA6IGVkaXRhYmxlO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxpbnB1dCB7Li4uYXR0cn0gdHlwZT17dHlwZX0gZGVmYXVsdFZhbHVlPXtkZWZhdWx0VmFsdWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXsoZWRpdG9yQ2xhc3N8fFwiXCIpK1wiIGZvcm0tY29udHJvbCBlZGl0b3IgZWRpdC10ZXh0XCJ9Lz5cclxuICAgICAgICApXHJcbiAgICB9IGVsc2UgaWYgKCFlZGl0YWJsZSkge1xyXG4gICAgICAgIHZhciB0eXBlID0gZWRpdGFibGUgPT09IHRydWUgPyAndGV4dCcgOiBlZGl0YWJsZTtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8aW5wdXQgey4uLmF0dHJ9IHR5cGU9e3R5cGV9IGRlZmF1bHRWYWx1ZT17ZGVmYXVsdFZhbHVlfSBkaXNhYmxlZD0nZGlzYWJsZWQnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXsoZWRpdG9yQ2xhc3N8fFwiXCIpK1wiIGZvcm0tY29udHJvbCBlZGl0b3IgZWRpdC10ZXh0XCJ9Lz5cclxuICAgICAgICApXHJcbiAgICB9IGVsc2UgaWYgKGVkaXRhYmxlLnR5cGUpIHsvL3N0YW5kYXJkIGRlY2xhcmVcclxuICAgICAgICAvL3B1dCBzdHlsZSBpZiBleGlzdFxyXG4gICAgICAgIGVkaXRhYmxlLnN0eWxlICYmIChhdHRyLnN0eWxlID0gZWRpdGFibGUuc3R5bGUpO1xyXG5cclxuICAgICAgICAvL3B1dCBjbGFzcyBpZiBleGlzdFxyXG4gICAgICAgIGF0dHIuY2xhc3NOYW1lID0gKGVkaXRvckNsYXNzIHx8IFwiXCIpICtcclxuICAgICAgICAgICAgXCIgZm9ybS1jb250cm9sIGVkaXRvciBlZGl0LVwiICtcclxuICAgICAgICAgICAgZWRpdGFibGUudHlwZSArXHJcbiAgICAgICAgICAgIChlZGl0YWJsZS5jbGFzc05hbWUgPyAoXCIgXCIgKyBlZGl0YWJsZS5jbGFzc05hbWUpIDogXCJcIik7XHJcblxyXG4gICAgICAgIGlmIChlZGl0YWJsZS50eXBlID09PSAnc2VsZWN0Jykgey8vcHJvY2VzcyBzZWxlY3QgaW5wdXRcclxuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBbXSwgdmFsdWVzID0gZWRpdGFibGUub3B0aW9ucy52YWx1ZXM7XHJcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlcykpIHsvL29ubHkgY2FuIHVzZSBhcnJyYXkgZGF0YSBmb3Igb3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgdmFyIHJvd1ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHZhbHVlcy5tYXAoZnVuY3Rpb24gKGQsIGkpIHtcclxuICAgICAgICAgICAgICAgICAgICByb3dWYWx1ZSA9IGZvcm1hdCA/IGZvcm1hdChkKSA6IGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9eydvcHRpb24nK2l9IHZhbHVlPXtkfT57cm93VmFsdWV9PC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxzZWxlY3Qgey4uLmF0dHJ9IGRlZmF1bHRWYWx1ZT17ZGVmYXVsdFZhbHVlfT57b3B0aW9uc308L3NlbGVjdD5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVkaXRhYmxlLnR5cGUgPT09ICd0ZXh0YXJlYScpIHsvL3Byb2Nlc3MgdGV4dGFyZWEgaW5wdXRcclxuICAgICAgICAgICAgLy9wdXQgIG90aGVyIGlmIGV4aXN0XHJcbiAgICAgICAgICAgIGVkaXRhYmxlLmNvbHMgJiYgKGF0dHIuY29scyA9IGVkaXRhYmxlLmNvbHMpO1xyXG4gICAgICAgICAgICBlZGl0YWJsZS5yb3dzICYmIChhdHRyLnJvd3MgPSBlZGl0YWJsZS5yb3dzKTtcclxuICAgICAgICAgICAgdmFyIGtleVVwSGFuZGxlciA9IGF0dHIub25LZXlEb3duLCBzYXZlQnRuID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKGtleVVwSGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgYXR0ci5vbktleURvd24gPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmtleUNvZGUgIT0gMTMpIHsgLy9ub3QgUHJlc3NlZCBFTlRFUlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlVcEhhbmRsZXIoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHNhdmVCdG4gPSA8YnV0dG8gY2xhc3NOYW1lPVwiYnRuIGJ0bi1pbmZvIGJ0bi14cyB0ZXh0YXJlYS1zYXZlLWJ0blwiIG9uQ2xpY2s9e2tleVVwSGFuZGxlcn0+c2F2ZTwvYnV0dG8+XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSB7Li4uYXR0cn0gZGVmYXVsdFZhbHVlPXtkZWZhdWx0VmFsdWV9PjwvdGV4dGFyZWE+XHJcbiAgICAgICAgICAgICAgICAgICAge3NhdmVCdG59XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlZGl0YWJsZS50eXBlID09PSAnY2hlY2tib3gnKSB7XHJcbiAgICAgICAgICAgIGxldCB2YWx1ZXMgPSAndHJ1ZTpmYWxzZSc7XHJcbiAgICAgICAgICAgIGlmIChlZGl0YWJsZS5vcHRpb25zICYmIGVkaXRhYmxlLm9wdGlvbnMudmFsdWVzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB2YWx1ZXMgPSBlZGl0YWJsZS5vcHRpb25zLnZhbHVlcy5zcGxpdCgnOicpO1xyXG4gICAgICAgICAgICAgICAgdmFsdWVzID0gZWRpdGFibGUub3B0aW9ucy52YWx1ZXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXR0ci5jbGFzc05hbWUgPSBhdHRyLmNsYXNzTmFtZS5yZXBsYWNlKCdmb3JtLWNvbnRyb2wnLCAnJyk7XHJcbiAgICAgICAgICAgIGF0dHIuY2xhc3NOYW1lICs9ICcgY2hlY2tib3ggcHVsbC1yaWdodCc7XHJcblxyXG4gICAgICAgICAgICBsZXQgY2hlY2tlZCA9IGRlZmF1bHRWYWx1ZSAmJiBkZWZhdWx0VmFsdWUudG9TdHJpbmcoKSA9PSB2YWx1ZXMuc3BsaXQoJzonKVswXSA/IHRydWUgOiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8aW5wdXQgey4uLmF0dHJ9IHR5cGU9J2NoZWNrYm94JyB2YWx1ZT17dmFsdWVzfSBkZWZhdWx0Q2hlY2tlZD17Y2hlY2tlZH0vPlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZWRpdGFibGUudHlwZSA9PT0gJ3N3aXRjaCcpIHtcclxuICAgICAgICAgICAgbGV0IHZhbHVlcyA9ICd0cnVlOmZhbHNlJztcclxuICAgICAgICAgICAgYXR0ci5jbGFzc05hbWUgPSBhdHRyLmNsYXNzTmFtZS5yZXBsYWNlKCdmb3JtLWNvbnRyb2wnLCAnJyk7XHJcbiAgICAgICAgICAgIGF0dHIuY2xhc3NOYW1lICs9ICcgY2hlY2tib3ggcHVsbC1yaWdodCc7XHJcbiAgICAgICAgICAgIGxldCBjaGVja2VkID0gZGVmYXVsdFZhbHVlICYmIGRlZmF1bHRWYWx1ZS50b1N0cmluZygpID09IHZhbHVlcy5zcGxpdCgnOicpWzBdID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPFN3aXRjaCBjbGFzc05hbWU9e2F0dHIuY2xhc3NOYW1lfSBkZWZhdWx0Q2hlY2tlZD17Y2hlY2tlZH0vPlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfSBlbHNlIGlmIChlZGl0YWJsZS50eXBlID09PSAncmVhY3Qtc2VsZWN0Jykge1xyXG4gICAgICAgICAgICBsZXQgbXVsdGlPcHQgPSB0eXBlb2YgZWRpdGFibGUub3B0aW9ucy5tdWx0aSAhPT0gJ3VuZGVmaW5lZCcgPyBlZGl0YWJsZS5vcHRpb25zLm11bHRpIDogZmFsc2VcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxTZWxlY3QgY2xhc3NOYW1lPVwicHVsbC1yaWdodFwiIG9wdGlvbnM9e2VkaXRhYmxlLm9wdGlvbnMudmFsdWVzfSBtdWx0aT17bXVsdGlPcHR9IHNpbXBsZVZhbHVlPXt0cnVlfS8+XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9IGVsc2Ugey8vcHJvY2VzcyBvdGhlciBpbnB1dCB0eXBlLiBhcyBwYXNzd29yZCx1cmwsZW1haWwuLi5cclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxpbnB1dCB7Li4uYXR0cn0gdHlwZT17dHlwZX0gZGVmYXVsdFZhbHVlPXtkZWZhdWx0VmFsdWV9Lz5cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vZGVmYXVsdCByZXR1cm4gZm9yIG90aGVyIGNhc2Ugb2YgZWRpdGFibGVcclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPGlucHV0IHsuLi5hdHRyfSB0eXBlPVwidGV4dFwiIGNsYXNzTmFtZT17KGVkaXRvckNsYXNzfHxcIlwiKStcIiBmb3JtLWNvbnRyb2wgZWRpdG9yIGVkaXQtdGV4dFwifS8+XHJcbiAgICApXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBFZGl0b3I7XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL0VkaXRvci5qc1xuICoqLyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBDb25zdCBmcm9tICcuL0NvbnN0JztcclxuXHJcbmltcG9ydCB7XHJcbiAgVG9hc3RDb250YWluZXIsXHJcbiAgVG9hc3RNZXNzYWdlLFxyXG59IGZyb20gXCJyZWFjdC10b2FzdHJcIjtcclxuXHJcblxyXG52YXIgVG9hc3RyTWVzc2FnZUZhY3Rvcnk9UmVhY3QuY3JlYXRlRmFjdG9yeShUb2FzdE1lc3NhZ2UuYW5pbWF0aW9uKTtcclxuXHJcbmNsYXNzIE5vdGlmaWNhdGlvbiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudHtcclxuICAvLyBhbGxvdyB0eXBlIGlzIHN1Y2Nlc3MsaW5mbyx3YXJuaW5nLGVycm9yXHJcbiAgbm90aWNlKHR5cGUsbXNnLHRpdGxlKXtcclxuICAgIHRoaXMucmVmcy50b2FzdHJbdHlwZV0oXHJcbiAgICAgICAgbXNnLHRpdGxlLCB7XHJcbiAgICAgICAgICBtb2RlOidzaW5nbGUnLFxyXG4gICAgICAgICAgdGltZU91dDogNTAwMCxcclxuICAgICAgICAgIGV4dGVuZGVkVGltZU91dDogMTAwMCxcclxuICAgICAgICAgIHNob3dBbmltYXRpb246IFwiYW5pbWF0ZWQgIGJvdW5jZUluXCIsXHJcbiAgICAgICAgICBoaWRlQW5pbWF0aW9uOiBcImFuaW1hdGVkIGJvdW5jZU91dFwiXHJcbiAgICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKXtcclxuICAgIHJldHVybihcclxuICAgICAgICA8VG9hc3RDb250YWluZXIgcmVmPVwidG9hc3RyXCIgdG9hc3RNZXNzYWdlRmFjdG9yeT17VG9hc3RyTWVzc2FnZUZhY3Rvcnl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBpZD1cInRvYXN0LWNvbnRhaW5lclwiICBjbGFzc05hbWU9XCJ0b2FzdC10b3AtcmlnaHRcIj48L1RvYXN0Q29udGFpbmVyPlxyXG4gICAgKVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTm90aWZpY2F0aW9uO1xyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9Ob3RpZmljYXRpb24uanNcbiAqKi8iLCJpbXBvcnQgQ29uc3QgZnJvbSBcIi4uL0NvbnN0XCI7XHJcbnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7XHJcblxyXG5mdW5jdGlvbiBfc29ydChhcnIsIHNvcnRGaWVsZCwgb3JkZXIsIHNvcnRGdW5jKSB7XHJcbiAgb3JkZXIgPSBvcmRlci50b0xvd2VyQ2FzZSgpO1xyXG4gIGFyci5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICBpZiAoc29ydEZ1bmMpIHtcclxuICAgICAgcmV0dXJuIHNvcnRGdW5jKGEsIGIsIG9yZGVyLCBzb3J0RmllbGQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKG9yZGVyID09IENvbnN0LlNPUlRfREVTQykge1xyXG4gICAgICAgIHJldHVybiBhW3NvcnRGaWVsZF0gPiBiW3NvcnRGaWVsZF0gPyAtMSA6ICgoYVtzb3J0RmllbGRdIDwgYltzb3J0RmllbGRdKSA/IDEgOiAwKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gYVtzb3J0RmllbGRdIDwgYltzb3J0RmllbGRdID8gLTEgOiAoKGFbc29ydEZpZWxkXSA+IGJbc29ydEZpZWxkXSkgPyAxIDogMCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIGFycjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRhYmxlRGF0YVNldCBleHRlbmRzIEV2ZW50RW1pdHRlciB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSkge1xyXG4gICAgc3VwZXIoZGF0YSk7XHJcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gIH1cclxuXHJcbiAgc2V0RGF0YShkYXRhKSB7XHJcbiAgICB0aGlzLmVtaXQoJ2NoYW5nZScsIGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgY2xlYXIoKSB7XHJcbiAgICB0aGlzLmRhdGEgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGF0YSgpIHtcclxuICAgIHJldHVybiB0aGlzLmRhdGE7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVGFibGVEYXRhU3RvcmUge1xyXG5cclxuICBjb25zdHJ1Y3RvcihkYXRhKSB7XHJcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgdGhpcy5jb2xJbmZvcyA9IG51bGw7XHJcbiAgICB0aGlzLmZpbHRlcmVkRGF0YSA9IG51bGw7XHJcbiAgICB0aGlzLmlzT25GaWx0ZXIgPSBmYWxzZTtcclxuICAgIHRoaXMuZmlsdGVyT2JqID0gbnVsbDtcclxuICAgIHRoaXMuc2VhcmNoVGV4dCA9IG51bGw7XHJcbiAgICB0aGlzLnNvcnRPYmogPSBudWxsO1xyXG4gICAgdGhpcy5wYWdlT2JqID0ge307XHJcbiAgICB0aGlzLnNlbGVjdGVkID0gW107XHJcbiAgICB0aGlzLm11bHRpQ29sdW1uU2VhcmNoID0gZmFsc2U7XHJcbiAgICB0aGlzLnNob3dPbmx5U2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgIHRoaXMucmVtb3RlID0gZmFsc2U7IC8vIHJlbW90ZSBkYXRhXHJcbiAgfVxyXG5cclxuICBzZXRQcm9wcyhwcm9wcykge1xyXG4gICAgdGhpcy5rZXlGaWVsZCA9IHByb3BzLmtleUZpZWxkO1xyXG4gICAgdGhpcy5lbmFibGVQYWdpbmF0aW9uID0gcHJvcHMuaXNQYWdpbmF0aW9uO1xyXG4gICAgdGhpcy5jb2xJbmZvcyA9IHByb3BzLmNvbEluZm9zO1xyXG4gICAgdGhpcy5yZW1vdGUgPSBwcm9wcy5yZW1vdGU7XHJcbiAgICB0aGlzLm11bHRpQ29sdW1uU2VhcmNoID0gcHJvcHMubXVsdGlDb2x1bW5TZWFyY2g7XHJcbiAgfVxyXG5cclxuICBzZXREYXRhKGRhdGEpIHtcclxuICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICBpZiAodGhpcy5pc09uRmlsdGVyKSB7XHJcbiAgICAgIGlmIChudWxsICE9PSB0aGlzLmZpbHRlck9iaikgdGhpcy5maWx0ZXIodGhpcy5maWx0ZXJPYmopO1xyXG4gICAgICBpZiAobnVsbCAhPT0gdGhpcy5zZWFyY2hUZXh0KSB0aGlzLnNlYXJjaCh0aGlzLnNlYXJjaFRleHQpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuc29ydE9iaikge1xyXG4gICAgICB0aGlzLnNvcnQodGhpcy5zb3J0T2JqLm9yZGVyLCB0aGlzLnNvcnRPYmouc29ydEZpZWxkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFNvcnRJbmZvKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc29ydE9iajtcclxuICB9XHJcblxyXG4gIHNldFNlbGVjdGVkUm93S2V5KHNlbGVjdGVkUm93S2V5cykge1xyXG4gICAgdGhpcy5zZWxlY3RlZCA9IHNlbGVjdGVkUm93S2V5cztcclxuICB9XHJcblxyXG4gIGdldFNlbGVjdGVkUm93S2V5cygpIHtcclxuICAgIHJldHVybiB0aGlzLnNlbGVjdGVkO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q3VycmVudERpc3BsYXlEYXRhKCkge1xyXG4gICAgaWYgKHRoaXMuaXNPbkZpbHRlcikgcmV0dXJuIHRoaXMuZmlsdGVyZWREYXRhO1xyXG4gICAgZWxzZSByZXR1cm4gdGhpcy5kYXRhO1xyXG4gIH1cclxuXHJcbiAgaWdub3JlTm9uU2VsZWN0ZWQoKSB7XHJcbiAgICB0aGlzLnNob3dPbmx5U2VsZWN0ZWQgPSAhdGhpcy5zaG93T25seVNlbGVjdGVkO1xyXG4gICAgaWYodGhpcy5zaG93T25seVNlbGVjdGVkKXtcclxuICAgICAgdGhpcy5pc09uRmlsdGVyID0gdHJ1ZTtcclxuICAgICAgdGhpcy5maWx0ZXJlZERhdGEgPSB0aGlzLmRhdGEuZmlsdGVyKCByb3cgPT4ge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSB0aGlzLnNlbGVjdGVkLmZpbmQoeCA9PiByb3dbdGhpcy5rZXlGaWVsZF0gPT09IHgpXHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiByZXN1bHQgIT09ICd1bmRlZmluZWQnID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuaXNPbkZpbHRlciA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc29ydChvcmRlciwgc29ydEZpZWxkKSB7XHJcbiAgICB0aGlzLnNvcnRPYmogPSB7XHJcbiAgICAgIG9yZGVyOiBvcmRlcixcclxuICAgICAgc29ydEZpZWxkOiBzb3J0RmllbGRcclxuICAgIH07XHJcblxyXG4gICAgbGV0IGN1cnJlbnREaXNwbGF5RGF0YSA9IHRoaXMuZ2V0Q3VycmVudERpc3BsYXlEYXRhKCk7XHJcbiAgICBpZighdGhpcy5jb2xJbmZvc1tzb3J0RmllbGRdKSByZXR1cm4gdGhpcztcclxuXHJcbiAgICBjb25zdCB7IHNvcnRGdW5jIH0gPSB0aGlzLmNvbEluZm9zW3NvcnRGaWVsZF07XHJcbiAgICBjdXJyZW50RGlzcGxheURhdGEgPSBfc29ydChjdXJyZW50RGlzcGxheURhdGEsIHNvcnRGaWVsZCwgb3JkZXIsIHNvcnRGdW5jKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHBhZ2UocGFnZSwgc2l6ZVBlclBhZ2UpIHtcclxuICAgIHRoaXMucGFnZU9iai5lbmQgPSBwYWdlICogc2l6ZVBlclBhZ2UgLSAxO1xyXG4gICAgdGhpcy5wYWdlT2JqLnN0YXJ0ID0gdGhpcy5wYWdlT2JqLmVuZCAtIChzaXplUGVyUGFnZSAtIDEpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBlZGl0KG5ld1ZhbCwgcm93SW5kZXgsIGZpZWxkTmFtZSkge1xyXG4gICAgbGV0IGN1cnJlbnREaXNwbGF5RGF0YSA9IHRoaXMuZ2V0Q3VycmVudERpc3BsYXlEYXRhKCk7XHJcbiAgICBsZXQgcm93S2V5Q2FjaGU7XHJcbiAgICBpZiAoIXRoaXMuZW5hYmxlUGFnaW5hdGlvbikge1xyXG4gICAgICBjdXJyZW50RGlzcGxheURhdGFbcm93SW5kZXhdW2ZpZWxkTmFtZV0gPSBuZXdWYWw7XHJcbiAgICAgIHJvd0tleUNhY2hlID0gY3VycmVudERpc3BsYXlEYXRhW3Jvd0luZGV4XVt0aGlzLmtleUZpZWxkXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGN1cnJlbnREaXNwbGF5RGF0YVt0aGlzLnBhZ2VPYmouc3RhcnQgKyByb3dJbmRleF1bZmllbGROYW1lXSA9IG5ld1ZhbDtcclxuICAgICAgcm93S2V5Q2FjaGUgPSBjdXJyZW50RGlzcGxheURhdGFbdGhpcy5wYWdlT2JqLnN0YXJ0ICsgcm93SW5kZXhdW3RoaXMua2V5RmllbGRdO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuaXNPbkZpbHRlcikge1xyXG4gICAgICB0aGlzLmRhdGEuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7XHJcbiAgICAgICAgaWYgKHJvd1t0aGlzLmtleUZpZWxkXSA9PT0gcm93S2V5Q2FjaGUpIHtcclxuICAgICAgICAgIHJvd1tmaWVsZE5hbWVdID0gbmV3VmFsO1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgdGhpcyk7XHJcbiAgICAgIGlmIChudWxsICE9PSB0aGlzLmZpbHRlck9iaikgdGhpcy5maWx0ZXIodGhpcy5maWx0ZXJPYmopO1xyXG4gICAgICBpZiAobnVsbCAhPT0gdGhpcy5zZWFyY2hUZXh0KSB0aGlzLnNlYXJjaCh0aGlzLnNlYXJjaFRleHQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBhZGRBdEJlZ2luKG5ld09iaikge1xyXG4gICAgaWYgKCFuZXdPYmpbdGhpcy5rZXlGaWVsZF0gfHwgbmV3T2JqW3RoaXMua2V5RmllbGRdLnRvU3RyaW5nKCkgPT09ICcnKSB7XHJcbiAgICAgIHRocm93IHRoaXMua2V5RmllbGQgKyBcIiBjYW4ndCBiZSBlbXB0eSB2YWx1ZS5cIjtcclxuICAgIH1cclxuICAgIGxldCBjdXJyZW50RGlzcGxheURhdGEgPSB0aGlzLmdldEN1cnJlbnREaXNwbGF5RGF0YSgpO1xyXG4gICAgY3VycmVudERpc3BsYXlEYXRhLmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xyXG4gICAgICBpZiAocm93W3RoaXMua2V5RmllbGRdLnRvU3RyaW5nKCkgPT09IG5ld09ialt0aGlzLmtleUZpZWxkXS50b1N0cmluZygpKSB7XHJcbiAgICAgICAgdGhyb3cgdGhpcy5rZXlGaWVsZCArIFwiIFwiICsgbmV3T2JqW3RoaXMua2V5RmllbGRdICsgXCIgYWxyZWFkeSBleGlzdHNcIjtcclxuICAgICAgfVxyXG4gICAgfSwgdGhpcyk7XHJcbiAgICBjb25zb2xlLmxvZygnQEAnKTtcclxuICAgIGN1cnJlbnREaXNwbGF5RGF0YS51bnNoaWZ0KG5ld09iaik7XHJcbiAgICBpZiAodGhpcy5pc09uRmlsdGVyKSB7XHJcbiAgICAgIHRoaXMuZGF0YS51bnNoaWZ0KG5ld09iaik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhZGQobmV3T2JqKSB7XHJcbiAgICBpZiAoIW5ld09ialt0aGlzLmtleUZpZWxkXSB8fCBuZXdPYmpbdGhpcy5rZXlGaWVsZF0udG9TdHJpbmcoKSA9PT0gJycpIHtcclxuICAgICAgdGhyb3cgdGhpcy5rZXlGaWVsZCArIFwiIGNhbid0IGJlIGVtcHR5IHZhbHVlLlwiO1xyXG4gICAgfVxyXG4gICAgbGV0IGN1cnJlbnREaXNwbGF5RGF0YSA9IHRoaXMuZ2V0Q3VycmVudERpc3BsYXlEYXRhKCk7XHJcbiAgICBjdXJyZW50RGlzcGxheURhdGEuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7XHJcbiAgICAgIGlmIChyb3dbdGhpcy5rZXlGaWVsZF0udG9TdHJpbmcoKSA9PT0gbmV3T2JqW3RoaXMua2V5RmllbGRdLnRvU3RyaW5nKCkpIHtcclxuICAgICAgICB0aHJvdyB0aGlzLmtleUZpZWxkICsgXCIgXCIgKyBuZXdPYmpbdGhpcy5rZXlGaWVsZF0gKyBcIiBhbHJlYWR5IGV4aXN0c1wiO1xyXG4gICAgICB9XHJcbiAgICB9LCB0aGlzKTtcclxuXHJcbiAgICBjdXJyZW50RGlzcGxheURhdGEucHVzaChuZXdPYmopO1xyXG4gICAgaWYgKHRoaXMuaXNPbkZpbHRlcikge1xyXG4gICAgICB0aGlzLmRhdGEucHVzaChuZXdPYmopO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVtb3ZlKHJvd0tleSkge1xyXG4gICAgbGV0IGN1cnJlbnREaXNwbGF5RGF0YSA9IHRoaXMuZ2V0Q3VycmVudERpc3BsYXlEYXRhKCk7XHJcbiAgICBsZXQgcmVzdWx0ID0gY3VycmVudERpc3BsYXlEYXRhLmZpbHRlcihmdW5jdGlvbiAocm93KSB7XHJcbiAgICAgIHJldHVybiByb3dLZXkuaW5kZXhPZihyb3dbdGhpcy5rZXlGaWVsZF0pID09IC0xO1xyXG4gICAgfSwgdGhpcyk7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNPbkZpbHRlcikge1xyXG4gICAgICB0aGlzLmRhdGEgPSB0aGlzLmRhdGEuZmlsdGVyKGZ1bmN0aW9uIChyb3cpIHtcclxuICAgICAgICByZXR1cm4gcm93S2V5LmluZGV4T2Yocm93W3RoaXMua2V5RmllbGRdKSA9PSAtMTtcclxuICAgICAgfSwgdGhpcyk7XHJcbiAgICAgIHRoaXMuZmlsdGVyZWREYXRhID0gcmVzdWx0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5kYXRhID0gcmVzdWx0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZmlsdGVyKGZpbHRlck9iaikge1xyXG4gICAgaWYgKE9iamVjdC5rZXlzKGZpbHRlck9iaikubGVuZ3RoID09IDApIHtcclxuICAgICAgdGhpcy5maWx0ZXJlZERhdGEgPSBudWxsO1xyXG4gICAgICB0aGlzLmlzT25GaWx0ZXIgPSBmYWxzZTtcclxuICAgICAgdGhpcy5maWx0ZXJPYmogPSBudWxsO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5maWx0ZXJPYmogPSBmaWx0ZXJPYmo7XHJcbiAgICAgIHRoaXMuZmlsdGVyZWREYXRhID0gdGhpcy5kYXRhLmZpbHRlciggcm93ID0+IHtcclxuICAgICAgICBsZXQgdmFsaWQgPSB0cnVlO1xyXG4gICAgICAgIGxldCBmaWx0ZXJWYWw7XHJcbiAgICAgICAgZm9yICh2YXIga2V5IGluIGZpbHRlck9iaikge1xyXG4gICAgICAgICAgbGV0IHRhcmdldFZhbCA9IHJvd1trZXldO1xyXG5cclxuICAgICAgICAgIHN3aXRjaCAoZmlsdGVyT2JqW2tleV0udHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIENvbnN0LkZJTFRFUl9UWVBFLk5VTUJFUjpcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGZpbHRlclZhbCA9IGZpbHRlck9ialtrZXldLnZhbHVlLm51bWJlcjtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIENvbnN0LkZJTFRFUl9UWVBFLkNVU1RPTTpcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGZpbHRlclZhbCA9ICh0eXBlb2YgZmlsdGVyT2JqW2tleV0udmFsdWUgPT09IFwib2JqZWN0XCIpID9cclxuICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkIDpcclxuICAgICAgICAgICAgICAgICAgKHR5cGVvZiBmaWx0ZXJPYmpba2V5XS52YWx1ZSA9PT0gXCJzdHJpbmdcIikgPyBmaWx0ZXJPYmpba2V5XS52YWx1ZS50b0xvd2VyQ2FzZSgpIDogZmlsdGVyT2JqW2tleV0udmFsdWU7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgIGZpbHRlclZhbCA9ICh0eXBlb2YgZmlsdGVyT2JqW2tleV0udmFsdWUgPT09IFwic3RyaW5nXCIpID8gZmlsdGVyT2JqW2tleV0udmFsdWUudG9Mb3dlckNhc2UoKSA6IGZpbHRlck9ialtrZXldLnZhbHVlO1xyXG4gICAgICAgICAgICAgIGlmIChmaWx0ZXJWYWwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gU3VwcG9ydCBvbGQgZmlsdGVyXHJcbiAgICAgICAgICAgICAgICBmaWx0ZXJWYWwgPSBmaWx0ZXJPYmpba2V5XS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmICh0aGlzLmNvbEluZm9zW2tleV0pIHtcclxuICAgICAgICAgICAgY29uc3QgeyBmb3JtYXQsIGZpbHRlckZvcm1hdHRlZCwgZm9ybWF0RXh0cmFEYXRhIH0gPSB0aGlzLmNvbEluZm9zW2tleV07XHJcbiAgICAgICAgICAgIGlmKGZpbHRlckZvcm1hdHRlZCAmJiBmb3JtYXQpIHtcclxuICAgICAgICAgICAgICB0YXJnZXRWYWwgPSBmb3JtYXQocm93W2tleV0sIHJvdywgZm9ybWF0RXh0cmFEYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHN3aXRjaCAoZmlsdGVyT2JqW2tleV0udHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIENvbnN0LkZJTFRFUl9UWVBFLk5VTUJFUjpcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHZhbGlkID0gdGhpcy5maWx0ZXJOdW1iZXIodGFyZ2V0VmFsLCBmaWx0ZXJWYWwsIGZpbHRlck9ialtrZXldLnZhbHVlLmNvbXBhcmF0b3IpO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgQ29uc3QuRklMVEVSX1RZUEUuREFURTpcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHZhbGlkID0gdGhpcy5maWx0ZXJEYXRlKHRhcmdldFZhbCwgZmlsdGVyVmFsKTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIENvbnN0LkZJTFRFUl9UWVBFLkNVU1RPTTpcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHZhbGlkID0gdGhpcy5maWx0ZXJDdXN0b20odGFyZ2V0VmFsLCBmaWx0ZXJWYWwsIGZpbHRlck9ialtrZXldLnZhbHVlKTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgdmFsaWQgPSB0aGlzLmZpbHRlclRleHQodGFyZ2V0VmFsLCBmaWx0ZXJWYWwpO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoIXZhbGlkKSB7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdmFsaWQ7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLmlzT25GaWx0ZXIgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZmlsdGVyTnVtYmVyKHRhcmdldFZhbCwgZmlsdGVyVmFsLCBjb21wYXJhdG9yKSB7XHJcbiAgICBsZXQgdmFsaWQgPSB0cnVlO1xyXG4gICAgc3dpdGNoIChjb21wYXJhdG9yKSB7XHJcbiAgICAgIGNhc2UgXCI9XCI6XHJcbiAgICAgIHtcclxuICAgICAgICBpZiAodGFyZ2V0VmFsICE9IGZpbHRlclZhbCkge1xyXG4gICAgICAgICAgdmFsaWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIj5cIjpcclxuICAgICAge1xyXG4gICAgICAgIGlmICh0YXJnZXRWYWwgPD0gZmlsdGVyVmFsKSB7XHJcbiAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiPj1cIjpcclxuICAgICAge1xyXG4gICAgICAgIGlmICh0YXJnZXRWYWwgPCBmaWx0ZXJWYWwpIHtcclxuICAgICAgICAgIHZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCI8XCI6XHJcbiAgICAgIHtcclxuICAgICAgICBpZiAodGFyZ2V0VmFsID49IGZpbHRlclZhbCkge1xyXG4gICAgICAgICAgdmFsaWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIjw9XCI6XHJcbiAgICAgIHtcclxuICAgICAgICBpZiAodGFyZ2V0VmFsID4gZmlsdGVyVmFsKSB7XHJcbiAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiIT1cIjpcclxuICAgICAge1xyXG4gICAgICAgIGlmICh0YXJnZXRWYWwgPT0gZmlsdGVyVmFsKSB7XHJcbiAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIk51bWJlciBjb21wYXJhdG9yIHByb3ZpZGVkIGlzIG5vdCBzdXBwb3J0ZWRcIik7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB2YWxpZDtcclxuICB9XHJcblxyXG4gIGZpbHRlckRhdGUodGFyZ2V0VmFsLCBmaWx0ZXJWYWwpIHtcclxuICAgIHJldHVybiAodGFyZ2V0VmFsLmdldERhdGUoKSA9PSBmaWx0ZXJWYWwuZ2V0RGF0ZSgpICYmXHJcbiAgICAgICAgdGFyZ2V0VmFsLmdldE1vbnRoKCkgPT0gZmlsdGVyVmFsLmdldE1vbnRoKCkgJiZcclxuICAgICAgICB0YXJnZXRWYWwuZ2V0RnVsbFllYXIoKSA9PSBmaWx0ZXJWYWwuZ2V0RnVsbFllYXIoKSk7XHJcbiAgfVxyXG5cclxuICBmaWx0ZXJDdXN0b20odGFyZ2V0VmFsLCBmaWx0ZXJWYWwsIGNhbGxiYWNrSW5mbykge1xyXG4gICAgaWYgKGNhbGxiYWNrSW5mbyAhPSBudWxsICYmIHR5cGVvZiBjYWxsYmFja0luZm8gPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgcmV0dXJuIGNhbGxiYWNrSW5mby5jYWxsYmFjayh0YXJnZXRWYWwsIGNhbGxiYWNrSW5mby5jYWxsYmFja1BhcmFtZXRlcnMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmaWx0ZXJUZXh0KHRhcmdldFZhbCwgZmlsdGVyVmFsKTtcclxuICB9XHJcblxyXG4gIGZpbHRlclRleHQodGFyZ2V0VmFsLCBmaWx0ZXJWYWwpIHtcclxuICAgIGlmICh0YXJnZXRWYWwudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZmlsdGVyVmFsKSA9PSAtMSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICAvKiBHZW5lcmFsIHNlYXJjaCBmdW5jdGlvblxyXG4gICAqIEl0IHdpbGwgc2VhcmNoIGZvciB0aGUgdGV4dCBpZiB0aGUgaW5wdXQgaW5jbHVkZXMgdGhhdCB0ZXh0O1xyXG4gICAqIEl0IHdpbGwgc2VhcmNoIGZvciBleGFjdCBudW1iZXIgaWYgdGhlIGlucHV0IGlzIHRoYXQgbnVtYmVyXHJcbiAgICovXHJcbiAgc2VhcmNoKHNlYXJjaFRleHQpIHtcclxuICAgIGlmIChzZWFyY2hUZXh0LnRyaW0oKSA9PT0gXCJcIikge1xyXG4gICAgICB0aGlzLmZpbHRlcmVkRGF0YSA9IG51bGw7XHJcbiAgICAgIHRoaXMuaXNPbkZpbHRlciA9IGZhbHNlO1xyXG4gICAgICB0aGlzLnNlYXJjaFRleHQgPSBudWxsO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zZWFyY2hUZXh0ID0gc2VhcmNoVGV4dDtcclxuICAgICAgbGV0IHNlYXJjaFRleHRBcnJheSA9IFtdO1xyXG5cclxuICAgICAgaWYgKHRoaXMubXVsdGlDb2x1bW5TZWFyY2gpIHtcclxuICAgICAgICBzZWFyY2hUZXh0QXJyYXkgPSBzZWFyY2hUZXh0LnNwbGl0KCcgJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2VhcmNoVGV4dEFycmF5LnB1c2goc2VhcmNoVGV4dCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuZmlsdGVyZWREYXRhID0gdGhpcy5kYXRhLmZpbHRlciggcm93ID0+IHtcclxuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocm93KTtcclxuICAgICAgICBsZXQgdmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAvLyBmb3IgbG9vcHMgYXJlIHVnbHksIGJ1dCBwZXJmb3JtYW5jZSBtYXR0ZXJzIGhlcmUuXHJcbiAgICAgICAgLy8gQW5kIHlvdSBjYW50IGJyZWFrIGZyb20gYSBmb3JFYWNoLlxyXG4gICAgICAgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL2Zvci12cy1mb3JlYWNoLzY2XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGtleXNMZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGtleXNMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgY29uc3Qga2V5ID0ga2V5c1tpXTtcclxuICAgICAgICAgIGlmICh0aGlzLmNvbEluZm9zW2tleV0gJiYgcm93W2tleV0pIHtcclxuICAgICAgICAgICAgY29uc3QgeyBmb3JtYXQsIGZpbHRlckZvcm1hdHRlZCwgZm9ybWF0RXh0cmFEYXRhLCBzZWFyY2hhYmxlLCBoaWRkZW4gfSA9IHRoaXMuY29sSW5mb3Nba2V5XTtcclxuICAgICAgICAgICAgbGV0IHRhcmdldFZhbCA9IHJvd1trZXldO1xyXG4gICAgICAgICAgICBpZiAoIWhpZGRlbiAmJiBzZWFyY2hhYmxlKSB7XHJcbiAgICAgICAgICAgICAgaWYgKGZpbHRlckZvcm1hdHRlZCAmJiBmb3JtYXQpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldFZhbCA9IGZvcm1hdCh0YXJnZXRWYWwsIHJvdywgZm9ybWF0RXh0cmFEYXRhKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDAsIHRleHRMZW5ndGggPSBzZWFyY2hUZXh0QXJyYXkubGVuZ3RoOyBqIDwgdGV4dExlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJWYWwgPSBzZWFyY2hUZXh0QXJyYXlbal0udG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRWYWwudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZmlsdGVyVmFsKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgdmFsaWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHZhbGlkO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5pc09uRmlsdGVyID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldERhdGFJZ25vcmluZ1BhZ2luYXRpb24oKSB7XHJcbiAgICBsZXQgX2RhdGEgPSB0aGlzLmdldEN1cnJlbnREaXNwbGF5RGF0YSgpO1xyXG4gICAgcmV0dXJuIF9kYXRhO1xyXG4gIH1cclxuXHJcbiAgZ2V0KCkge1xyXG4gICAgbGV0IF9kYXRhID0gdGhpcy5nZXRDdXJyZW50RGlzcGxheURhdGEoKTtcclxuXHJcbiAgICBpZiAoX2RhdGEubGVuZ3RoID09IDApIHJldHVybiBfZGF0YTtcclxuXHJcbiAgICBpZiAodGhpcy5yZW1vdGUgfHwgIXRoaXMuZW5hYmxlUGFnaW5hdGlvbikge1xyXG4gICAgICByZXR1cm4gX2RhdGE7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnBhZ2VPYmouc3RhcnQ7IGkgPD0gdGhpcy5wYWdlT2JqLmVuZDsgaSsrKSB7XHJcbiAgICAgICAgcmVzdWx0LnB1c2goX2RhdGFbaV0pO1xyXG4gICAgICAgIGlmIChpICsgMSA9PSBfZGF0YS5sZW5ndGgpYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldEtleUZpZWxkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMua2V5RmllbGQ7XHJcbiAgfVxyXG5cclxuICBnZXREYXRhTnVtKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudERpc3BsYXlEYXRhKCkubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgaXNDaGFuZ2VkUGFnZSgpIHtcclxuICAgIHJldHVybiB0aGlzLnBhZ2VPYmouc3RhcnQgJiYgdGhpcy5wYWdlT2JqLmVuZCA/IHRydWUgOiBmYWxzZTtcclxuICB9XHJcblxyXG4gIGdldEFsbFJvd2tleSgpIHtcclxuICAgIHJldHVybiB0aGlzLmRhdGEubWFwKGZ1bmN0aW9uIChyb3cpIHtcclxuICAgICAgcmV0dXJuIHJvd1t0aGlzLmtleUZpZWxkXTtcclxuICAgIH0sIHRoaXMpO1xyXG4gIH1cclxuXHJcbn1cclxuO1xyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9zdG9yZS9UYWJsZURhdGFTdG9yZS5qc1xuICoqLyIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL1N3aXRjaCcpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JjLXN3aXRjaC9saWIvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcblx0dmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdERvbSA9IHJlcXVpcmUoJ3JlYWN0LWRvbScpO1xuXG52YXIgX3JlYWN0RG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9tKTtcblxudmFyIF9yZWFjdElucHV0QXV0b3NpemUgPSByZXF1aXJlKCdyZWFjdC1pbnB1dC1hdXRvc2l6ZScpO1xuXG52YXIgX3JlYWN0SW5wdXRBdXRvc2l6ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdElucHV0QXV0b3NpemUpO1xuXG52YXIgX2NsYXNzbmFtZXMgPSByZXF1aXJlKCdjbGFzc25hbWVzJyk7XG5cbnZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblxudmFyIF91dGlsc1N0cmlwRGlhY3JpdGljcyA9IHJlcXVpcmUoJy4vdXRpbHMvc3RyaXBEaWFjcml0aWNzJyk7XG5cbnZhciBfdXRpbHNTdHJpcERpYWNyaXRpY3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdXRpbHNTdHJpcERpYWNyaXRpY3MpO1xuXG52YXIgX0FzeW5jID0gcmVxdWlyZSgnLi9Bc3luYycpO1xuXG52YXIgX0FzeW5jMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0FzeW5jKTtcblxudmFyIF9PcHRpb24gPSByZXF1aXJlKCcuL09wdGlvbicpO1xuXG52YXIgX09wdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9PcHRpb24pO1xuXG52YXIgX1ZhbHVlID0gcmVxdWlyZSgnLi9WYWx1ZScpO1xuXG52YXIgX1ZhbHVlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1ZhbHVlKTtcblxuZnVuY3Rpb24gc3RyaW5naWZ5VmFsdWUodmFsdWUpIHtcblx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcblx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuXHR9IGVsc2Uge1xuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxufVxuXG52YXIgc3RyaW5nT3JOb2RlID0gX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5vbmVPZlR5cGUoW19yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLCBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm5vZGVdKTtcblxudmFyIFNlbGVjdCA9IF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVDbGFzcyh7XG5cblx0ZGlzcGxheU5hbWU6ICdTZWxlY3QnLFxuXG5cdHByb3BUeXBlczoge1xuXHRcdGFkZExhYmVsVGV4dDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsIC8vIHBsYWNlaG9sZGVyIGRpc3BsYXllZCB3aGVuIHlvdSB3YW50IHRvIGFkZCBhIGxhYmVsIG9uIGEgbXVsdGktdmFsdWUgaW5wdXRcblx0XHRhbGxvd0NyZWF0ZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLCAvLyB3aGV0aGVyIHRvIGFsbG93IGNyZWF0aW9uIG9mIG5ldyBlbnRyaWVzXG5cdFx0YXV0b0JsdXI6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCxcblx0XHRhdXRvZm9jdXM6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCwgLy8gYXV0b2ZvY3VzIHRoZSBjb21wb25lbnQgb24gbW91bnRcblx0XHRiYWNrc3BhY2VSZW1vdmVzOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsIC8vIHdoZXRoZXIgYmFja3NwYWNlIHJlbW92ZXMgYW4gaXRlbSBpZiB0aGVyZSBpcyBubyB0ZXh0IGlucHV0XG5cdFx0Y2xhc3NOYW1lOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZywgLy8gY2xhc3NOYW1lIGZvciB0aGUgb3V0ZXIgZWxlbWVudFxuXHRcdGNsZWFyQWxsVGV4dDogc3RyaW5nT3JOb2RlLCAvLyB0aXRsZSBmb3IgdGhlIFwiY2xlYXJcIiBjb250cm9sIHdoZW4gbXVsdGk6IHRydWVcblx0XHRjbGVhclZhbHVlVGV4dDogc3RyaW5nT3JOb2RlLCAvLyB0aXRsZSBmb3IgdGhlIFwiY2xlYXJcIiBjb250cm9sXG5cdFx0Y2xlYXJhYmxlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsIC8vIHNob3VsZCBpdCBiZSBwb3NzaWJsZSB0byByZXNldCB2YWx1ZVxuXHRcdGRlbGltaXRlcjogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsIC8vIGRlbGltaXRlciB0byB1c2UgdG8gam9pbiBtdWx0aXBsZSB2YWx1ZXMgZm9yIHRoZSBoaWRkZW4gZmllbGQgdmFsdWVcblx0XHRkaXNhYmxlZDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLCAvLyB3aGV0aGVyIHRoZSBTZWxlY3QgaXMgZGlzYWJsZWQgb3Igbm90XG5cdFx0ZXNjYXBlQ2xlYXJzVmFsdWU6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCwgLy8gd2hldGhlciBlc2NhcGUgY2xlYXJzIHRoZSB2YWx1ZSB3aGVuIHRoZSBtZW51IGlzIGNsb3NlZFxuXHRcdGZpbHRlck9wdGlvbjogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLCAvLyBtZXRob2QgdG8gZmlsdGVyIGEgc2luZ2xlIG9wdGlvbiAob3B0aW9uLCBmaWx0ZXJTdHJpbmcpXG5cdFx0ZmlsdGVyT3B0aW9uczogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5hbnksIC8vIGJvb2xlYW4gdG8gZW5hYmxlIGRlZmF1bHQgZmlsdGVyaW5nIG9yIGZ1bmN0aW9uIHRvIGZpbHRlciB0aGUgb3B0aW9ucyBhcnJheSAoW29wdGlvbnNdLCBmaWx0ZXJTdHJpbmcsIFt2YWx1ZXNdKVxuXHRcdGlnbm9yZUFjY2VudHM6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCwgLy8gd2hldGhlciB0byBzdHJpcCBkaWFjcml0aWNzIHdoZW4gZmlsdGVyaW5nXG5cdFx0aWdub3JlQ2FzZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLCAvLyB3aGV0aGVyIHRvIHBlcmZvcm0gY2FzZS1pbnNlbnNpdGl2ZSBmaWx0ZXJpbmdcblx0XHRpbnB1dFByb3BzOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm9iamVjdCwgLy8gY3VzdG9tIGF0dHJpYnV0ZXMgZm9yIHRoZSBJbnB1dFxuXHRcdGlzTG9hZGluZzogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLCAvLyB3aGV0aGVyIHRoZSBTZWxlY3QgaXMgbG9hZGluZyBleHRlcm5hbGx5IG9yIG5vdCAoc3VjaCBhcyBvcHRpb25zIGJlaW5nIGxvYWRlZClcblx0XHRsYWJlbEtleTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsIC8vIHBhdGggb2YgdGhlIGxhYmVsIHZhbHVlIGluIG9wdGlvbiBvYmplY3RzXG5cdFx0bWF0Y2hQb3M6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLCAvLyAoYW55fHN0YXJ0KSBtYXRjaCB0aGUgc3RhcnQgb3IgZW50aXJlIHN0cmluZyB3aGVuIGZpbHRlcmluZ1xuXHRcdG1hdGNoUHJvcDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsIC8vIChhbnl8bGFiZWx8dmFsdWUpIHdoaWNoIG9wdGlvbiBwcm9wZXJ0eSB0byBmaWx0ZXIgb25cblx0XHRtZW51QnVmZmVyOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm51bWJlciwgLy8gb3B0aW9uYWwgYnVmZmVyIChpbiBweCkgYmV0d2VlbiB0aGUgYm90dG9tIG9mIHRoZSB2aWV3cG9ydCBhbmQgdGhlIGJvdHRvbSBvZiB0aGUgbWVudVxuXHRcdG1lbnVDb250YWluZXJTdHlsZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5vYmplY3QsIC8vIG9wdGlvbmFsIHN0eWxlIHRvIGFwcGx5IHRvIHRoZSBtZW51IGNvbnRhaW5lclxuXHRcdG1lbnVTdHlsZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5vYmplY3QsIC8vIG9wdGlvbmFsIHN0eWxlIHRvIGFwcGx5IHRvIHRoZSBtZW51XG5cdFx0bXVsdGk6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCwgLy8gbXVsdGktdmFsdWUgaW5wdXRcblx0XHRuYW1lOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZywgLy8gZ2VuZXJhdGVzIGEgaGlkZGVuIDxpbnB1dCAvPiB0YWcgd2l0aCB0aGlzIGZpZWxkIG5hbWUgZm9yIGh0bWwgZm9ybXNcblx0XHRuZXdPcHRpb25DcmVhdG9yOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmZ1bmMsIC8vIGZhY3RvcnkgdG8gY3JlYXRlIG5ldyBvcHRpb25zIHdoZW4gYWxsb3dDcmVhdGUgc2V0XG5cdFx0bm9SZXN1bHRzVGV4dDogc3RyaW5nT3JOb2RlLCAvLyBwbGFjZWhvbGRlciBkaXNwbGF5ZWQgd2hlbiB0aGVyZSBhcmUgbm8gbWF0Y2hpbmcgc2VhcmNoIHJlc3VsdHNcblx0XHRvbkJsdXI6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYywgLy8gb25CbHVyIGhhbmRsZXI6IGZ1bmN0aW9uIChldmVudCkge31cblx0XHRvbkJsdXJSZXNldHNJbnB1dDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLCAvLyB3aGV0aGVyIGlucHV0IGlzIGNsZWFyZWQgb24gYmx1clxuXHRcdG9uQ2hhbmdlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmZ1bmMsIC8vIG9uQ2hhbmdlIGhhbmRsZXI6IGZ1bmN0aW9uIChuZXdWYWx1ZSkge31cblx0XHRvbkNsb3NlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmZ1bmMsIC8vIGZpcmVzIHdoZW4gdGhlIG1lbnUgaXMgY2xvc2VkXG5cdFx0b25Gb2N1czogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLCAvLyBvbkZvY3VzIGhhbmRsZXI6IGZ1bmN0aW9uIChldmVudCkge31cblx0XHRvbklucHV0Q2hhbmdlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmZ1bmMsIC8vIG9uSW5wdXRDaGFuZ2UgaGFuZGxlcjogZnVuY3Rpb24gKGlucHV0VmFsdWUpIHt9XG5cdFx0b25NZW51U2Nyb2xsVG9Cb3R0b206IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYywgLy8gZmlyZXMgd2hlbiB0aGUgbWVudSBpcyBzY3JvbGxlZCB0byB0aGUgYm90dG9tOyBjYW4gYmUgdXNlZCB0byBwYWdpbmF0ZSBvcHRpb25zXG5cdFx0b25PcGVuOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmZ1bmMsIC8vIGZpcmVzIHdoZW4gdGhlIG1lbnUgaXMgb3BlbmVkXG5cdFx0b25WYWx1ZUNsaWNrOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmZ1bmMsIC8vIG9uQ2xpY2sgaGFuZGxlciBmb3IgdmFsdWUgbGFiZWxzOiBmdW5jdGlvbiAodmFsdWUsIGV2ZW50KSB7fVxuXHRcdG9wdGlvbkNvbXBvbmVudDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLCAvLyBvcHRpb24gY29tcG9uZW50IHRvIHJlbmRlciBpbiBkcm9wZG93blxuXHRcdG9wdGlvblJlbmRlcmVyOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmZ1bmMsIC8vIG9wdGlvblJlbmRlcmVyOiBmdW5jdGlvbiAob3B0aW9uKSB7fVxuXHRcdG9wdGlvbnM6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYXJyYXksIC8vIGFycmF5IG9mIG9wdGlvbnNcblx0XHRwbGFjZWhvbGRlcjogc3RyaW5nT3JOb2RlLCAvLyBmaWVsZCBwbGFjZWhvbGRlciwgZGlzcGxheWVkIHdoZW4gdGhlcmUncyBubyB2YWx1ZVxuXHRcdHJlcXVpcmVkOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsIC8vIGFwcGxpZXMgSFRNTDUgcmVxdWlyZWQgYXR0cmlidXRlIHdoZW4gbmVlZGVkXG5cdFx0c2Nyb2xsTWVudUludG9WaWV3OiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsIC8vIGJvb2xlYW4gdG8gZW5hYmxlIHRoZSB2aWV3cG9ydCB0byBzaGlmdCBzbyB0aGF0IHRoZSBmdWxsIG1lbnUgZnVsbHkgdmlzaWJsZSB3aGVuIGVuZ2FnZWRcblx0XHRzZWFyY2hhYmxlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsIC8vIHdoZXRoZXIgdG8gZW5hYmxlIHNlYXJjaGluZyBmZWF0dXJlIG9yIG5vdFxuXHRcdHNpbXBsZVZhbHVlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsIC8vIHBhc3MgdGhlIHZhbHVlIHRvIG9uQ2hhbmdlIGFzIGEgc2ltcGxlIHZhbHVlIChsZWdhY3kgcHJlIDEuMCBtb2RlKSwgZGVmYXVsdHMgdG8gZmFsc2Vcblx0XHRzdHlsZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5vYmplY3QsIC8vIG9wdGlvbmFsIHN0eWxlIHRvIGFwcGx5IHRvIHRoZSBjb250cm9sXG5cdFx0dGFiSW5kZXg6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLCAvLyBvcHRpb25hbCB0YWIgaW5kZXggb2YgdGhlIGNvbnRyb2xcblx0XHR2YWx1ZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5hbnksIC8vIGluaXRpYWwgZmllbGQgdmFsdWVcblx0XHR2YWx1ZUNvbXBvbmVudDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLCAvLyB2YWx1ZSBjb21wb25lbnQgdG8gcmVuZGVyXG5cdFx0dmFsdWVLZXk6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuc3RyaW5nLCAvLyBwYXRoIG9mIHRoZSBsYWJlbCB2YWx1ZSBpbiBvcHRpb24gb2JqZWN0c1xuXHRcdHZhbHVlUmVuZGVyZXI6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYywgLy8gdmFsdWVSZW5kZXJlcjogZnVuY3Rpb24gKG9wdGlvbikge31cblx0XHR3cmFwcGVyU3R5bGU6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMub2JqZWN0IH0sXG5cblx0Ly8gb3B0aW9uYWwgc3R5bGUgdG8gYXBwbHkgdG8gdGhlIGNvbXBvbmVudCB3cmFwcGVyXG5cdHN0YXRpY3M6IHsgQXN5bmM6IF9Bc3luYzJbJ2RlZmF1bHQnXSB9LFxuXG5cdGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24gZ2V0RGVmYXVsdFByb3BzKCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRhZGRMYWJlbFRleHQ6ICdBZGQgXCJ7bGFiZWx9XCI/Jyxcblx0XHRcdGFsbG93Q3JlYXRlOiBmYWxzZSxcblx0XHRcdGJhY2tzcGFjZVJlbW92ZXM6IHRydWUsXG5cdFx0XHRjbGVhcmFibGU6IHRydWUsXG5cdFx0XHRjbGVhckFsbFRleHQ6ICdDbGVhciBhbGwnLFxuXHRcdFx0Y2xlYXJWYWx1ZVRleHQ6ICdDbGVhciB2YWx1ZScsXG5cdFx0XHRkZWxpbWl0ZXI6ICcsJyxcblx0XHRcdGRpc2FibGVkOiBmYWxzZSxcblx0XHRcdGVzY2FwZUNsZWFyc1ZhbHVlOiB0cnVlLFxuXHRcdFx0ZmlsdGVyT3B0aW9uczogdHJ1ZSxcblx0XHRcdGlnbm9yZUFjY2VudHM6IHRydWUsXG5cdFx0XHRpZ25vcmVDYXNlOiB0cnVlLFxuXHRcdFx0aW5wdXRQcm9wczoge30sXG5cdFx0XHRpc0xvYWRpbmc6IGZhbHNlLFxuXHRcdFx0bGFiZWxLZXk6ICdsYWJlbCcsXG5cdFx0XHRtYXRjaFBvczogJ2FueScsXG5cdFx0XHRtYXRjaFByb3A6ICdhbnknLFxuXHRcdFx0bWVudUJ1ZmZlcjogMCxcblx0XHRcdG11bHRpOiBmYWxzZSxcblx0XHRcdG5vUmVzdWx0c1RleHQ6ICdObyByZXN1bHRzIGZvdW5kJyxcblx0XHRcdG9uQmx1clJlc2V0c0lucHV0OiB0cnVlLFxuXHRcdFx0b3B0aW9uQ29tcG9uZW50OiBfT3B0aW9uMlsnZGVmYXVsdCddLFxuXHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QuLi4nLFxuXHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0c2Nyb2xsTWVudUludG9WaWV3OiB0cnVlLFxuXHRcdFx0c2VhcmNoYWJsZTogdHJ1ZSxcblx0XHRcdHNpbXBsZVZhbHVlOiBmYWxzZSxcblx0XHRcdHZhbHVlQ29tcG9uZW50OiBfVmFsdWUyWydkZWZhdWx0J10sXG5cdFx0XHR2YWx1ZUtleTogJ3ZhbHVlJ1xuXHRcdH07XG5cdH0sXG5cblx0Z2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGlucHV0VmFsdWU6ICcnLFxuXHRcdFx0aXNGb2N1c2VkOiBmYWxzZSxcblx0XHRcdGlzTG9hZGluZzogZmFsc2UsXG5cdFx0XHRpc09wZW46IGZhbHNlLFxuXHRcdFx0aXNQc2V1ZG9Gb2N1c2VkOiBmYWxzZSxcblx0XHRcdHJlcXVpcmVkOiB0aGlzLnByb3BzLnJlcXVpcmVkICYmIHRoaXMuaGFuZGxlUmVxdWlyZWQodGhpcy5wcm9wcy52YWx1ZSwgdGhpcy5wcm9wcy5tdWx0aSlcblx0XHR9O1xuXHR9LFxuXG5cdGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcblx0XHRpZiAodGhpcy5wcm9wcy5hdXRvZm9jdXMpIHtcblx0XHRcdHRoaXMuZm9jdXMoKTtcblx0XHR9XG5cdH0sXG5cblx0Y29tcG9uZW50V2lsbFVwZGF0ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xuXHRcdGlmIChuZXh0U3RhdGUuaXNPcGVuICE9PSB0aGlzLnN0YXRlLmlzT3Blbikge1xuXHRcdFx0dmFyIGhhbmRsZXIgPSBuZXh0U3RhdGUuaXNPcGVuID8gbmV4dFByb3BzLm9uT3BlbiA6IG5leHRQcm9wcy5vbkNsb3NlO1xuXHRcdFx0aGFuZGxlciAmJiBoYW5kbGVyKCk7XG5cdFx0fVxuXHR9LFxuXG5cdGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG5cdFx0Ly8gZm9jdXMgdG8gdGhlIHNlbGVjdGVkIG9wdGlvblxuXHRcdGlmICh0aGlzLnJlZnMubWVudSAmJiB0aGlzLnJlZnMuZm9jdXNlZCAmJiB0aGlzLnN0YXRlLmlzT3BlbiAmJiAhdGhpcy5oYXNTY3JvbGxlZFRvT3B0aW9uKSB7XG5cdFx0XHR2YXIgZm9jdXNlZE9wdGlvbk5vZGUgPSBfcmVhY3REb20yWydkZWZhdWx0J10uZmluZERPTU5vZGUodGhpcy5yZWZzLmZvY3VzZWQpO1xuXHRcdFx0dmFyIG1lbnVOb2RlID0gX3JlYWN0RG9tMlsnZGVmYXVsdCddLmZpbmRET01Ob2RlKHRoaXMucmVmcy5tZW51KTtcblx0XHRcdG1lbnVOb2RlLnNjcm9sbFRvcCA9IGZvY3VzZWRPcHRpb25Ob2RlLm9mZnNldFRvcDtcblx0XHRcdHRoaXMuaGFzU2Nyb2xsZWRUb09wdGlvbiA9IHRydWU7XG5cdFx0fSBlbHNlIGlmICghdGhpcy5zdGF0ZS5pc09wZW4pIHtcblx0XHRcdHRoaXMuaGFzU2Nyb2xsZWRUb09wdGlvbiA9IGZhbHNlO1xuXHRcdH1cblxuXHRcdGlmIChwcmV2U3RhdGUuaW5wdXRWYWx1ZSAhPT0gdGhpcy5zdGF0ZS5pbnB1dFZhbHVlICYmIHRoaXMucHJvcHMub25JbnB1dENoYW5nZSkge1xuXHRcdFx0dGhpcy5wcm9wcy5vbklucHV0Q2hhbmdlKHRoaXMuc3RhdGUuaW5wdXRWYWx1ZSk7XG5cdFx0fVxuXHRcdGlmICh0aGlzLl9zY3JvbGxUb0ZvY3VzZWRPcHRpb25PblVwZGF0ZSAmJiB0aGlzLnJlZnMuZm9jdXNlZCAmJiB0aGlzLnJlZnMubWVudSkge1xuXHRcdFx0dGhpcy5fc2Nyb2xsVG9Gb2N1c2VkT3B0aW9uT25VcGRhdGUgPSBmYWxzZTtcblx0XHRcdHZhciBmb2N1c2VkRE9NID0gX3JlYWN0RG9tMlsnZGVmYXVsdCddLmZpbmRET01Ob2RlKHRoaXMucmVmcy5mb2N1c2VkKTtcblx0XHRcdHZhciBtZW51RE9NID0gX3JlYWN0RG9tMlsnZGVmYXVsdCddLmZpbmRET01Ob2RlKHRoaXMucmVmcy5tZW51KTtcblx0XHRcdHZhciBmb2N1c2VkUmVjdCA9IGZvY3VzZWRET00uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0XHR2YXIgbWVudVJlY3QgPSBtZW51RE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdFx0aWYgKGZvY3VzZWRSZWN0LmJvdHRvbSA+IG1lbnVSZWN0LmJvdHRvbSB8fCBmb2N1c2VkUmVjdC50b3AgPCBtZW51UmVjdC50b3ApIHtcblx0XHRcdFx0bWVudURPTS5zY3JvbGxUb3AgPSBmb2N1c2VkRE9NLm9mZnNldFRvcCArIGZvY3VzZWRET00uY2xpZW50SGVpZ2h0IC0gbWVudURPTS5vZmZzZXRIZWlnaHQ7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmICh0aGlzLnByb3BzLnNjcm9sbE1lbnVJbnRvVmlldyAmJiB0aGlzLnJlZnMubWVudUNvbnRhaW5lcikge1xuXHRcdFx0dmFyIG1lbnVDb250YWluZXJSZWN0ID0gdGhpcy5yZWZzLm1lbnVDb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0XHRpZiAod2luZG93LmlubmVySGVpZ2h0IDwgbWVudUNvbnRhaW5lclJlY3QuYm90dG9tICsgdGhpcy5wcm9wcy5tZW51QnVmZmVyKSB7XG5cdFx0XHRcdHdpbmRvdy5zY3JvbGxUbygwLCB3aW5kb3cuc2Nyb2xsWSArIG1lbnVDb250YWluZXJSZWN0LmJvdHRvbSArIHRoaXMucHJvcHMubWVudUJ1ZmZlciAtIHdpbmRvdy5pbm5lckhlaWdodCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmIChwcmV2UHJvcHMuZGlzYWJsZWQgIT09IHRoaXMucHJvcHMuZGlzYWJsZWQpIHtcblx0XHRcdHRoaXMuc2V0U3RhdGUoeyBpc0ZvY3VzZWQ6IGZhbHNlIH0pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHJlYWN0L25vLWRpZC11cGRhdGUtc2V0LXN0YXRlXG5cdFx0fVxuXHR9LFxuXG5cdGZvY3VzOiBmdW5jdGlvbiBmb2N1cygpIHtcblx0XHRpZiAoIXRoaXMucmVmcy5pbnB1dCkgcmV0dXJuO1xuXHRcdHRoaXMucmVmcy5pbnB1dC5mb2N1cygpO1xuXHR9LFxuXG5cdGJsdXJJbnB1dDogZnVuY3Rpb24gYmx1cklucHV0KCkge1xuXHRcdGlmICghdGhpcy5yZWZzLmlucHV0KSByZXR1cm47XG5cdFx0dGhpcy5yZWZzLmlucHV0LmJsdXIoKTtcblx0fSxcblxuXHRoYW5kbGVUb3VjaE1vdmU6IGZ1bmN0aW9uIGhhbmRsZVRvdWNoTW92ZShldmVudCkge1xuXHRcdC8vIFNldCBhIGZsYWcgdGhhdCB0aGUgdmlldyBpcyBiZWluZyBkcmFnZ2VkXG5cdFx0dGhpcy5kcmFnZ2luZyA9IHRydWU7XG5cdH0sXG5cblx0aGFuZGxlVG91Y2hTdGFydDogZnVuY3Rpb24gaGFuZGxlVG91Y2hTdGFydChldmVudCkge1xuXHRcdC8vIFNldCBhIGZsYWcgdGhhdCB0aGUgdmlldyBpcyBub3QgYmVpbmcgZHJhZ2dlZFxuXHRcdHRoaXMuZHJhZ2dpbmcgPSBmYWxzZTtcblx0fSxcblxuXHRoYW5kbGVUb3VjaEVuZDogZnVuY3Rpb24gaGFuZGxlVG91Y2hFbmQoZXZlbnQpIHtcblx0XHQvLyBDaGVjayBpZiB0aGUgdmlldyBpcyBiZWluZyBkcmFnZ2VkLCBJbiB0aGlzIGNhc2Vcblx0XHQvLyB3ZSBkb24ndCB3YW50IHRvIGZpcmUgdGhlIGNsaWNrIGV2ZW50IChiZWNhdXNlIHRoZSB1c2VyIG9ubHkgd2FudHMgdG8gc2Nyb2xsKVxuXHRcdGlmICh0aGlzLmRyYWdnaW5nKSByZXR1cm47XG5cblx0XHQvLyBGaXJlIHRoZSBtb3VzZSBldmVudHNcblx0XHR0aGlzLmhhbmRsZU1vdXNlRG93bihldmVudCk7XG5cdH0sXG5cblx0aGFuZGxlVG91Y2hFbmRDbGVhclZhbHVlOiBmdW5jdGlvbiBoYW5kbGVUb3VjaEVuZENsZWFyVmFsdWUoZXZlbnQpIHtcblx0XHQvLyBDaGVjayBpZiB0aGUgdmlldyBpcyBiZWluZyBkcmFnZ2VkLCBJbiB0aGlzIGNhc2Vcblx0XHQvLyB3ZSBkb24ndCB3YW50IHRvIGZpcmUgdGhlIGNsaWNrIGV2ZW50IChiZWNhdXNlIHRoZSB1c2VyIG9ubHkgd2FudHMgdG8gc2Nyb2xsKVxuXHRcdGlmICh0aGlzLmRyYWdnaW5nKSByZXR1cm47XG5cblx0XHQvLyBDbGVhciB0aGUgdmFsdWVcblx0XHR0aGlzLmNsZWFyVmFsdWUoZXZlbnQpO1xuXHR9LFxuXG5cdGhhbmRsZU1vdXNlRG93bjogZnVuY3Rpb24gaGFuZGxlTW91c2VEb3duKGV2ZW50KSB7XG5cdFx0Ly8gaWYgdGhlIGV2ZW50IHdhcyB0cmlnZ2VyZWQgYnkgYSBtb3VzZWRvd24gYW5kIG5vdCB0aGUgcHJpbWFyeVxuXHRcdC8vIGJ1dHRvbiwgb3IgaWYgdGhlIGNvbXBvbmVudCBpcyBkaXNhYmxlZCwgaWdub3JlIGl0LlxuXHRcdGlmICh0aGlzLnByb3BzLmRpc2FibGVkIHx8IGV2ZW50LnR5cGUgPT09ICdtb3VzZWRvd24nICYmIGV2ZW50LmJ1dHRvbiAhPT0gMCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIHByZXZlbnQgZGVmYXVsdCBldmVudCBoYW5kbGVyc1xuXHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHQvLyBmb3IgdGhlIG5vbi1zZWFyY2hhYmxlIHNlbGVjdCwgdG9nZ2xlIHRoZSBtZW51XG5cdFx0aWYgKCF0aGlzLnByb3BzLnNlYXJjaGFibGUpIHtcblx0XHRcdHRoaXMuZm9jdXMoKTtcblx0XHRcdHJldHVybiB0aGlzLnNldFN0YXRlKHtcblx0XHRcdFx0aXNPcGVuOiAhdGhpcy5zdGF0ZS5pc09wZW5cblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLnN0YXRlLmlzRm9jdXNlZCkge1xuXHRcdFx0Ly8gaWYgdGhlIGlucHV0IGlzIGZvY3VzZWQsIGVuc3VyZSB0aGUgbWVudSBpcyBvcGVuXG5cdFx0XHR0aGlzLnNldFN0YXRlKHtcblx0XHRcdFx0aXNPcGVuOiB0cnVlLFxuXHRcdFx0XHRpc1BzZXVkb0ZvY3VzZWQ6IGZhbHNlXG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gb3RoZXJ3aXNlLCBmb2N1cyB0aGUgaW5wdXQgYW5kIG9wZW4gdGhlIG1lbnVcblx0XHRcdHRoaXMuX29wZW5BZnRlckZvY3VzID0gdHJ1ZTtcblx0XHRcdHRoaXMuZm9jdXMoKTtcblx0XHR9XG5cdH0sXG5cblx0aGFuZGxlTW91c2VEb3duT25BcnJvdzogZnVuY3Rpb24gaGFuZGxlTW91c2VEb3duT25BcnJvdyhldmVudCkge1xuXHRcdC8vIGlmIHRoZSBldmVudCB3YXMgdHJpZ2dlcmVkIGJ5IGEgbW91c2Vkb3duIGFuZCBub3QgdGhlIHByaW1hcnlcblx0XHQvLyBidXR0b24sIG9yIGlmIHRoZSBjb21wb25lbnQgaXMgZGlzYWJsZWQsIGlnbm9yZSBpdC5cblx0XHRpZiAodGhpcy5wcm9wcy5kaXNhYmxlZCB8fCBldmVudC50eXBlID09PSAnbW91c2Vkb3duJyAmJiBldmVudC5idXR0b24gIT09IDApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Ly8gSWYgdGhlIG1lbnUgaXNuJ3Qgb3BlbiwgbGV0IHRoZSBldmVudCBidWJibGUgdG8gdGhlIG1haW4gaGFuZGxlTW91c2VEb3duXG5cdFx0aWYgKCF0aGlzLnN0YXRlLmlzT3Blbikge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHQvLyBwcmV2ZW50IGRlZmF1bHQgZXZlbnQgaGFuZGxlcnNcblx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdC8vIGNsb3NlIHRoZSBtZW51XG5cdFx0dGhpcy5jbG9zZU1lbnUoKTtcblx0fSxcblxuXHRoYW5kbGVNb3VzZURvd25Pbk1lbnU6IGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93bk9uTWVudShldmVudCkge1xuXHRcdC8vIGlmIHRoZSBldmVudCB3YXMgdHJpZ2dlcmVkIGJ5IGEgbW91c2Vkb3duIGFuZCBub3QgdGhlIHByaW1hcnlcblx0XHQvLyBidXR0b24sIG9yIGlmIHRoZSBjb21wb25lbnQgaXMgZGlzYWJsZWQsIGlnbm9yZSBpdC5cblx0XHRpZiAodGhpcy5wcm9wcy5kaXNhYmxlZCB8fCBldmVudC50eXBlID09PSAnbW91c2Vkb3duJyAmJiBldmVudC5idXR0b24gIT09IDApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXHRcdHRoaXMuX29wZW5BZnRlckZvY3VzID0gdHJ1ZTtcblx0XHR0aGlzLmZvY3VzKCk7XG5cdH0sXG5cblx0Y2xvc2VNZW51OiBmdW5jdGlvbiBjbG9zZU1lbnUoKSB7XG5cdFx0dGhpcy5zZXRTdGF0ZSh7XG5cdFx0XHRpc09wZW46IGZhbHNlLFxuXHRcdFx0aXNQc2V1ZG9Gb2N1c2VkOiB0aGlzLnN0YXRlLmlzRm9jdXNlZCAmJiAhdGhpcy5wcm9wcy5tdWx0aSxcblx0XHRcdGlucHV0VmFsdWU6ICcnXG5cdFx0fSk7XG5cdFx0dGhpcy5oYXNTY3JvbGxlZFRvT3B0aW9uID0gZmFsc2U7XG5cdH0sXG5cblx0aGFuZGxlSW5wdXRGb2N1czogZnVuY3Rpb24gaGFuZGxlSW5wdXRGb2N1cyhldmVudCkge1xuXHRcdHZhciBpc09wZW4gPSB0aGlzLnN0YXRlLmlzT3BlbiB8fCB0aGlzLl9vcGVuQWZ0ZXJGb2N1cztcblx0XHRpZiAodGhpcy5wcm9wcy5vbkZvY3VzKSB7XG5cdFx0XHR0aGlzLnByb3BzLm9uRm9jdXMoZXZlbnQpO1xuXHRcdH1cblx0XHR0aGlzLnNldFN0YXRlKHtcblx0XHRcdGlzRm9jdXNlZDogdHJ1ZSxcblx0XHRcdGlzT3BlbjogaXNPcGVuXG5cdFx0fSk7XG5cdFx0dGhpcy5fb3BlbkFmdGVyRm9jdXMgPSBmYWxzZTtcblx0fSxcblxuXHRoYW5kbGVJbnB1dEJsdXI6IGZ1bmN0aW9uIGhhbmRsZUlucHV0Qmx1cihldmVudCkge1xuXHRcdGlmICh0aGlzLnJlZnMubWVudSAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmlzRXF1YWxOb2RlKHRoaXMucmVmcy5tZW51KSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLnByb3BzLm9uQmx1cikge1xuXHRcdFx0dGhpcy5wcm9wcy5vbkJsdXIoZXZlbnQpO1xuXHRcdH1cblx0XHR2YXIgb25CbHVycmVkU3RhdGUgPSB7XG5cdFx0XHRpc0ZvY3VzZWQ6IGZhbHNlLFxuXHRcdFx0aXNPcGVuOiBmYWxzZSxcblx0XHRcdGlzUHNldWRvRm9jdXNlZDogZmFsc2Vcblx0XHR9O1xuXHRcdGlmICh0aGlzLnByb3BzLm9uQmx1clJlc2V0c0lucHV0KSB7XG5cdFx0XHRvbkJsdXJyZWRTdGF0ZS5pbnB1dFZhbHVlID0gJyc7XG5cdFx0fVxuXHRcdHRoaXMuc2V0U3RhdGUob25CbHVycmVkU3RhdGUpO1xuXHR9LFxuXG5cdGhhbmRsZUlucHV0Q2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVJbnB1dENoYW5nZShldmVudCkge1xuXHRcdHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0aXNPcGVuOiB0cnVlLFxuXHRcdFx0aXNQc2V1ZG9Gb2N1c2VkOiBmYWxzZSxcblx0XHRcdGlucHV0VmFsdWU6IGV2ZW50LnRhcmdldC52YWx1ZVxuXHRcdH0pO1xuXHR9LFxuXG5cdGhhbmRsZUtleURvd246IGZ1bmN0aW9uIGhhbmRsZUtleURvd24oZXZlbnQpIHtcblx0XHRpZiAodGhpcy5wcm9wcy5kaXNhYmxlZCkgcmV0dXJuO1xuXHRcdHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xuXHRcdFx0Y2FzZSA4OlxuXHRcdFx0XHQvLyBiYWNrc3BhY2Vcblx0XHRcdFx0aWYgKCF0aGlzLnN0YXRlLmlucHV0VmFsdWUgJiYgdGhpcy5wcm9wcy5iYWNrc3BhY2VSZW1vdmVzKSB7XG5cdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHR0aGlzLnBvcFZhbHVlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0Y2FzZSA5OlxuXHRcdFx0XHQvLyB0YWJcblx0XHRcdFx0aWYgKGV2ZW50LnNoaWZ0S2V5IHx8ICF0aGlzLnN0YXRlLmlzT3Blbikge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLnNlbGVjdEZvY3VzZWRPcHRpb24oKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0Y2FzZSAxMzpcblx0XHRcdFx0Ly8gZW50ZXJcblx0XHRcdFx0aWYgKCF0aGlzLnN0YXRlLmlzT3BlbikgcmV0dXJuO1xuXHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0dGhpcy5zZWxlY3RGb2N1c2VkT3B0aW9uKCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAyNzpcblx0XHRcdFx0Ly8gZXNjYXBlXG5cdFx0XHRcdGlmICh0aGlzLnN0YXRlLmlzT3Blbikge1xuXHRcdFx0XHRcdHRoaXMuY2xvc2VNZW51KCk7XG5cdFx0XHRcdH0gZWxzZSBpZiAodGhpcy5wcm9wcy5jbGVhcmFibGUgJiYgdGhpcy5wcm9wcy5lc2NhcGVDbGVhcnNWYWx1ZSkge1xuXHRcdFx0XHRcdHRoaXMuY2xlYXJWYWx1ZShldmVudCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDM4OlxuXHRcdFx0XHQvLyB1cFxuXHRcdFx0XHR0aGlzLmZvY3VzUHJldmlvdXNPcHRpb24oKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDQwOlxuXHRcdFx0XHQvLyBkb3duXG5cdFx0XHRcdHRoaXMuZm9jdXNOZXh0T3B0aW9uKCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Ly8gY2FzZSAxODg6IC8vICxcblx0XHRcdC8vIFx0aWYgKHRoaXMucHJvcHMuYWxsb3dDcmVhdGUgJiYgdGhpcy5wcm9wcy5tdWx0aSkge1xuXHRcdFx0Ly8gXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHQvLyBcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHQvLyBcdFx0dGhpcy5zZWxlY3RGb2N1c2VkT3B0aW9uKCk7XG5cdFx0XHQvLyBcdH0gZWxzZSB7XG5cdFx0XHQvLyBcdFx0cmV0dXJuO1xuXHRcdFx0Ly8gXHR9XG5cdFx0XHQvLyBicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0fSxcblxuXHRoYW5kbGVWYWx1ZUNsaWNrOiBmdW5jdGlvbiBoYW5kbGVWYWx1ZUNsaWNrKG9wdGlvbiwgZXZlbnQpIHtcblx0XHRpZiAoIXRoaXMucHJvcHMub25WYWx1ZUNsaWNrKSByZXR1cm47XG5cdFx0dGhpcy5wcm9wcy5vblZhbHVlQ2xpY2sob3B0aW9uLCBldmVudCk7XG5cdH0sXG5cblx0aGFuZGxlTWVudVNjcm9sbDogZnVuY3Rpb24gaGFuZGxlTWVudVNjcm9sbChldmVudCkge1xuXHRcdGlmICghdGhpcy5wcm9wcy5vbk1lbnVTY3JvbGxUb0JvdHRvbSkgcmV0dXJuO1xuXHRcdHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG5cblx0XHRpZiAodGFyZ2V0LnNjcm9sbEhlaWdodCA+IHRhcmdldC5vZmZzZXRIZWlnaHQgJiYgISh0YXJnZXQuc2Nyb2xsSGVpZ2h0IC0gdGFyZ2V0Lm9mZnNldEhlaWdodCAtIHRhcmdldC5zY3JvbGxUb3ApKSB7XG5cdFx0XHR0aGlzLnByb3BzLm9uTWVudVNjcm9sbFRvQm90dG9tKCk7XG5cdFx0fVxuXHR9LFxuXG5cdGhhbmRsZVJlcXVpcmVkOiBmdW5jdGlvbiBoYW5kbGVSZXF1aXJlZCh2YWx1ZSwgbXVsdGkpIHtcblx0XHRpZiAoIXZhbHVlKSByZXR1cm4gdHJ1ZTtcblx0XHRyZXR1cm4gbXVsdGkgPyB2YWx1ZS5sZW5ndGggPT09IDAgOiBPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoID09PSAwO1xuXHR9LFxuXG5cdGdldE9wdGlvbkxhYmVsOiBmdW5jdGlvbiBnZXRPcHRpb25MYWJlbChvcCkge1xuXHRcdHJldHVybiBvcFt0aGlzLnByb3BzLmxhYmVsS2V5XTtcblx0fSxcblxuXHRnZXRWYWx1ZUFycmF5OiBmdW5jdGlvbiBnZXRWYWx1ZUFycmF5KCkge1xuXHRcdHZhciB2YWx1ZSA9IHRoaXMucHJvcHMudmFsdWU7XG5cdFx0aWYgKHRoaXMucHJvcHMubXVsdGkpIHtcblx0XHRcdGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB2YWx1ZSA9IHZhbHVlLnNwbGl0KHRoaXMucHJvcHMuZGVsaW1pdGVyKTtcblx0XHRcdGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcblx0XHRcdFx0aWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybiBbXTtcblx0XHRcdFx0dmFsdWUgPSBbdmFsdWVdO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHZhbHVlLm1hcCh0aGlzLmV4cGFuZFZhbHVlKS5maWx0ZXIoZnVuY3Rpb24gKGkpIHtcblx0XHRcdFx0cmV0dXJuIGk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0dmFyIGV4cGFuZGVkVmFsdWUgPSB0aGlzLmV4cGFuZFZhbHVlKHZhbHVlKTtcblx0XHRyZXR1cm4gZXhwYW5kZWRWYWx1ZSA/IFtleHBhbmRlZFZhbHVlXSA6IFtdO1xuXHR9LFxuXG5cdGV4cGFuZFZhbHVlOiBmdW5jdGlvbiBleHBhbmRWYWx1ZSh2YWx1ZSkge1xuXHRcdGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnICYmIHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicpIHJldHVybiB2YWx1ZTtcblx0XHR2YXIgX3Byb3BzID0gdGhpcy5wcm9wcztcblx0XHR2YXIgb3B0aW9ucyA9IF9wcm9wcy5vcHRpb25zO1xuXHRcdHZhciB2YWx1ZUtleSA9IF9wcm9wcy52YWx1ZUtleTtcblxuXHRcdGlmICghb3B0aW9ucykgcmV0dXJuO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgb3B0aW9ucy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKG9wdGlvbnNbaV1bdmFsdWVLZXldID09PSB2YWx1ZSkgcmV0dXJuIG9wdGlvbnNbaV07XG5cdFx0fVxuXHR9LFxuXG5cdHNldFZhbHVlOiBmdW5jdGlvbiBzZXRWYWx1ZSh2YWx1ZSkge1xuXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cblx0XHRpZiAodGhpcy5wcm9wcy5hdXRvQmx1cikge1xuXHRcdFx0dGhpcy5ibHVySW5wdXQoKTtcblx0XHR9XG5cdFx0aWYgKCF0aGlzLnByb3BzLm9uQ2hhbmdlKSByZXR1cm47XG5cdFx0aWYgKHRoaXMucHJvcHMucmVxdWlyZWQpIHtcblx0XHRcdHZhciByZXF1aXJlZCA9IHRoaXMuaGFuZGxlUmVxdWlyZWQodmFsdWUsIHRoaXMucHJvcHMubXVsdGkpO1xuXHRcdFx0dGhpcy5zZXRTdGF0ZSh7IHJlcXVpcmVkOiByZXF1aXJlZCB9KTtcblx0XHR9XG5cdFx0aWYgKHRoaXMucHJvcHMuc2ltcGxlVmFsdWUgJiYgdmFsdWUpIHtcblx0XHRcdHZhbHVlID0gdGhpcy5wcm9wcy5tdWx0aSA/IHZhbHVlLm1hcChmdW5jdGlvbiAoaSkge1xuXHRcdFx0XHRyZXR1cm4gaVtfdGhpcy5wcm9wcy52YWx1ZUtleV07XG5cdFx0XHR9KS5qb2luKHRoaXMucHJvcHMuZGVsaW1pdGVyKSA6IHZhbHVlW3RoaXMucHJvcHMudmFsdWVLZXldO1xuXHRcdH1cblx0XHR0aGlzLnByb3BzLm9uQ2hhbmdlKHZhbHVlKTtcblx0fSxcblxuXHRzZWxlY3RWYWx1ZTogZnVuY3Rpb24gc2VsZWN0VmFsdWUodmFsdWUpIHtcblx0XHR0aGlzLmhhc1Njcm9sbGVkVG9PcHRpb24gPSBmYWxzZTtcblx0XHRpZiAodGhpcy5wcm9wcy5tdWx0aSkge1xuXHRcdFx0dGhpcy5hZGRWYWx1ZSh2YWx1ZSk7XG5cdFx0XHR0aGlzLnNldFN0YXRlKHtcblx0XHRcdFx0aW5wdXRWYWx1ZTogJydcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnNldFZhbHVlKHZhbHVlKTtcblx0XHRcdHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0XHRpc09wZW46IGZhbHNlLFxuXHRcdFx0XHRpbnB1dFZhbHVlOiAnJyxcblx0XHRcdFx0aXNQc2V1ZG9Gb2N1c2VkOiB0aGlzLnN0YXRlLmlzRm9jdXNlZFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9LFxuXG5cdGFkZFZhbHVlOiBmdW5jdGlvbiBhZGRWYWx1ZSh2YWx1ZSkge1xuXHRcdHZhciB2YWx1ZUFycmF5ID0gdGhpcy5nZXRWYWx1ZUFycmF5KCk7XG5cdFx0dGhpcy5zZXRWYWx1ZSh2YWx1ZUFycmF5LmNvbmNhdCh2YWx1ZSkpO1xuXHR9LFxuXG5cdHBvcFZhbHVlOiBmdW5jdGlvbiBwb3BWYWx1ZSgpIHtcblx0XHR2YXIgdmFsdWVBcnJheSA9IHRoaXMuZ2V0VmFsdWVBcnJheSgpO1xuXHRcdGlmICghdmFsdWVBcnJheS5sZW5ndGgpIHJldHVybjtcblx0XHRpZiAodmFsdWVBcnJheVt2YWx1ZUFycmF5Lmxlbmd0aCAtIDFdLmNsZWFyYWJsZVZhbHVlID09PSBmYWxzZSkgcmV0dXJuO1xuXHRcdHRoaXMuc2V0VmFsdWUodmFsdWVBcnJheS5zbGljZSgwLCB2YWx1ZUFycmF5Lmxlbmd0aCAtIDEpKTtcblx0fSxcblxuXHRyZW1vdmVWYWx1ZTogZnVuY3Rpb24gcmVtb3ZlVmFsdWUodmFsdWUpIHtcblx0XHR2YXIgdmFsdWVBcnJheSA9IHRoaXMuZ2V0VmFsdWVBcnJheSgpO1xuXHRcdHRoaXMuc2V0VmFsdWUodmFsdWVBcnJheS5maWx0ZXIoZnVuY3Rpb24gKGkpIHtcblx0XHRcdHJldHVybiBpICE9PSB2YWx1ZTtcblx0XHR9KSk7XG5cdFx0dGhpcy5mb2N1cygpO1xuXHR9LFxuXG5cdGNsZWFyVmFsdWU6IGZ1bmN0aW9uIGNsZWFyVmFsdWUoZXZlbnQpIHtcblx0XHQvLyBpZiB0aGUgZXZlbnQgd2FzIHRyaWdnZXJlZCBieSBhIG1vdXNlZG93biBhbmQgbm90IHRoZSBwcmltYXJ5XG5cdFx0Ly8gYnV0dG9uLCBpZ25vcmUgaXQuXG5cdFx0aWYgKGV2ZW50ICYmIGV2ZW50LnR5cGUgPT09ICdtb3VzZWRvd24nICYmIGV2ZW50LmJ1dHRvbiAhPT0gMCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdHRoaXMuc2V0VmFsdWUobnVsbCk7XG5cdFx0dGhpcy5zZXRTdGF0ZSh7XG5cdFx0XHRpc09wZW46IGZhbHNlLFxuXHRcdFx0aW5wdXRWYWx1ZTogJydcblx0XHR9LCB0aGlzLmZvY3VzKTtcblx0fSxcblxuXHRmb2N1c09wdGlvbjogZnVuY3Rpb24gZm9jdXNPcHRpb24ob3B0aW9uKSB7XG5cdFx0dGhpcy5zZXRTdGF0ZSh7XG5cdFx0XHRmb2N1c2VkT3B0aW9uOiBvcHRpb25cblx0XHR9KTtcblx0fSxcblxuXHRmb2N1c05leHRPcHRpb246IGZ1bmN0aW9uIGZvY3VzTmV4dE9wdGlvbigpIHtcblx0XHR0aGlzLmZvY3VzQWRqYWNlbnRPcHRpb24oJ25leHQnKTtcblx0fSxcblxuXHRmb2N1c1ByZXZpb3VzT3B0aW9uOiBmdW5jdGlvbiBmb2N1c1ByZXZpb3VzT3B0aW9uKCkge1xuXHRcdHRoaXMuZm9jdXNBZGphY2VudE9wdGlvbigncHJldmlvdXMnKTtcblx0fSxcblxuXHRmb2N1c0FkamFjZW50T3B0aW9uOiBmdW5jdGlvbiBmb2N1c0FkamFjZW50T3B0aW9uKGRpcikge1xuXHRcdHZhciBvcHRpb25zID0gdGhpcy5fdmlzaWJsZU9wdGlvbnMuZmlsdGVyKGZ1bmN0aW9uIChpKSB7XG5cdFx0XHRyZXR1cm4gIWkuZGlzYWJsZWQ7XG5cdFx0fSk7XG5cdFx0dGhpcy5fc2Nyb2xsVG9Gb2N1c2VkT3B0aW9uT25VcGRhdGUgPSB0cnVlO1xuXHRcdGlmICghdGhpcy5zdGF0ZS5pc09wZW4pIHtcblx0XHRcdHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0XHRpc09wZW46IHRydWUsXG5cdFx0XHRcdGlucHV0VmFsdWU6ICcnLFxuXHRcdFx0XHRmb2N1c2VkT3B0aW9uOiB0aGlzLl9mb2N1c2VkT3B0aW9uIHx8IG9wdGlvbnNbZGlyID09PSAnbmV4dCcgPyAwIDogb3B0aW9ucy5sZW5ndGggLSAxXVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmICghb3B0aW9ucy5sZW5ndGgpIHJldHVybjtcblx0XHR2YXIgZm9jdXNlZEluZGV4ID0gLTE7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBvcHRpb25zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAodGhpcy5fZm9jdXNlZE9wdGlvbiA9PT0gb3B0aW9uc1tpXSkge1xuXHRcdFx0XHRmb2N1c2VkSW5kZXggPSBpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdFx0dmFyIGZvY3VzZWRPcHRpb24gPSBvcHRpb25zWzBdO1xuXHRcdGlmIChkaXIgPT09ICduZXh0JyAmJiBmb2N1c2VkSW5kZXggPiAtMSAmJiBmb2N1c2VkSW5kZXggPCBvcHRpb25zLmxlbmd0aCAtIDEpIHtcblx0XHRcdGZvY3VzZWRPcHRpb24gPSBvcHRpb25zW2ZvY3VzZWRJbmRleCArIDFdO1xuXHRcdH0gZWxzZSBpZiAoZGlyID09PSAncHJldmlvdXMnKSB7XG5cdFx0XHRpZiAoZm9jdXNlZEluZGV4ID4gMCkge1xuXHRcdFx0XHRmb2N1c2VkT3B0aW9uID0gb3B0aW9uc1tmb2N1c2VkSW5kZXggLSAxXTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZvY3VzZWRPcHRpb24gPSBvcHRpb25zW29wdGlvbnMubGVuZ3RoIC0gMV07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0Zm9jdXNlZE9wdGlvbjogZm9jdXNlZE9wdGlvblxuXHRcdH0pO1xuXHR9LFxuXG5cdHNlbGVjdEZvY3VzZWRPcHRpb246IGZ1bmN0aW9uIHNlbGVjdEZvY3VzZWRPcHRpb24oKSB7XG5cdFx0Ly8gaWYgKHRoaXMucHJvcHMuYWxsb3dDcmVhdGUgJiYgIXRoaXMuc3RhdGUuZm9jdXNlZE9wdGlvbikge1xuXHRcdC8vIFx0cmV0dXJuIHRoaXMuc2VsZWN0VmFsdWUodGhpcy5zdGF0ZS5pbnB1dFZhbHVlKTtcblx0XHQvLyB9XG5cdFx0aWYgKHRoaXMuX2ZvY3VzZWRPcHRpb24pIHtcblx0XHRcdHJldHVybiB0aGlzLnNlbGVjdFZhbHVlKHRoaXMuX2ZvY3VzZWRPcHRpb24pO1xuXHRcdH1cblx0fSxcblxuXHRyZW5kZXJMb2FkaW5nOiBmdW5jdGlvbiByZW5kZXJMb2FkaW5nKCkge1xuXHRcdGlmICghdGhpcy5wcm9wcy5pc0xvYWRpbmcpIHJldHVybjtcblx0XHRyZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdFx0XHQnc3BhbicsXG5cdFx0XHR7IGNsYXNzTmFtZTogJ1NlbGVjdC1sb2FkaW5nLXpvbmUnLCAnYXJpYS1oaWRkZW4nOiAndHJ1ZScgfSxcblx0XHRcdF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdTZWxlY3QtbG9hZGluZycgfSlcblx0XHQpO1xuXHR9LFxuXG5cdHJlbmRlclZhbHVlOiBmdW5jdGlvbiByZW5kZXJWYWx1ZSh2YWx1ZUFycmF5LCBpc09wZW4pIHtcblx0XHR2YXIgX3RoaXMyID0gdGhpcztcblxuXHRcdHZhciByZW5kZXJMYWJlbCA9IHRoaXMucHJvcHMudmFsdWVSZW5kZXJlciB8fCB0aGlzLmdldE9wdGlvbkxhYmVsO1xuXHRcdHZhciBWYWx1ZUNvbXBvbmVudCA9IHRoaXMucHJvcHMudmFsdWVDb21wb25lbnQ7XG5cdFx0aWYgKCF2YWx1ZUFycmF5Lmxlbmd0aCkge1xuXHRcdFx0cmV0dXJuICF0aGlzLnN0YXRlLmlucHV0VmFsdWUgPyBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0XHRcdFx0J2RpdicsXG5cdFx0XHRcdHsgY2xhc3NOYW1lOiAnU2VsZWN0LXBsYWNlaG9sZGVyJyB9LFxuXHRcdFx0XHR0aGlzLnByb3BzLnBsYWNlaG9sZGVyXG5cdFx0XHQpIDogbnVsbDtcblx0XHR9XG5cdFx0dmFyIG9uQ2xpY2sgPSB0aGlzLnByb3BzLm9uVmFsdWVDbGljayA/IHRoaXMuaGFuZGxlVmFsdWVDbGljayA6IG51bGw7XG5cdFx0aWYgKHRoaXMucHJvcHMubXVsdGkpIHtcblx0XHRcdHJldHVybiB2YWx1ZUFycmF5Lm1hcChmdW5jdGlvbiAodmFsdWUsIGkpIHtcblx0XHRcdFx0cmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHRcdFx0XHRcdFZhbHVlQ29tcG9uZW50LFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGRpc2FibGVkOiBfdGhpczIucHJvcHMuZGlzYWJsZWQgfHwgdmFsdWUuY2xlYXJhYmxlVmFsdWUgPT09IGZhbHNlLFxuXHRcdFx0XHRcdFx0a2V5OiAndmFsdWUtJyArIGkgKyAnLScgKyB2YWx1ZVtfdGhpczIucHJvcHMudmFsdWVLZXldLFxuXHRcdFx0XHRcdFx0b25DbGljazogb25DbGljayxcblx0XHRcdFx0XHRcdG9uUmVtb3ZlOiBfdGhpczIucmVtb3ZlVmFsdWUsXG5cdFx0XHRcdFx0XHR2YWx1ZTogdmFsdWVcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHJlbmRlckxhYmVsKHZhbHVlKVxuXHRcdFx0XHQpO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIGlmICghdGhpcy5zdGF0ZS5pbnB1dFZhbHVlKSB7XG5cdFx0XHRpZiAoaXNPcGVuKSBvbkNsaWNrID0gbnVsbDtcblx0XHRcdHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0XHRcdFx0VmFsdWVDb21wb25lbnQsXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkaXNhYmxlZDogdGhpcy5wcm9wcy5kaXNhYmxlZCxcblx0XHRcdFx0XHRvbkNsaWNrOiBvbkNsaWNrLFxuXHRcdFx0XHRcdHZhbHVlOiB2YWx1ZUFycmF5WzBdXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJlbmRlckxhYmVsKHZhbHVlQXJyYXlbMF0pXG5cdFx0XHQpO1xuXHRcdH1cblx0fSxcblxuXHRyZW5kZXJJbnB1dDogZnVuY3Rpb24gcmVuZGVySW5wdXQodmFsdWVBcnJheSkge1xuXHRcdHZhciBjbGFzc05hbWUgPSAoMCwgX2NsYXNzbmFtZXMyWydkZWZhdWx0J10pKCdTZWxlY3QtaW5wdXQnLCB0aGlzLnByb3BzLmlucHV0UHJvcHMuY2xhc3NOYW1lKTtcblx0XHRpZiAodGhpcy5wcm9wcy5kaXNhYmxlZCB8fCAhdGhpcy5wcm9wcy5zZWFyY2hhYmxlKSB7XG5cdFx0XHRyZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIF9leHRlbmRzKHt9LCB0aGlzLnByb3BzLmlucHV0UHJvcHMsIHtcblx0XHRcdFx0Y2xhc3NOYW1lOiBjbGFzc05hbWUsXG5cdFx0XHRcdHRhYkluZGV4OiB0aGlzLnByb3BzLnRhYkluZGV4IHx8IDAsXG5cdFx0XHRcdG9uQmx1cjogdGhpcy5oYW5kbGVJbnB1dEJsdXIsXG5cdFx0XHRcdG9uRm9jdXM6IHRoaXMuaGFuZGxlSW5wdXRGb2N1cyxcblx0XHRcdFx0cmVmOiAnaW5wdXQnLFxuXHRcdFx0XHRzdHlsZTogeyBib3JkZXI6IDAsIHdpZHRoOiAxLCBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyB9IH0pKTtcblx0XHR9XG5cdFx0cmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KF9yZWFjdElucHV0QXV0b3NpemUyWydkZWZhdWx0J10sIF9leHRlbmRzKHt9LCB0aGlzLnByb3BzLmlucHV0UHJvcHMsIHtcblx0XHRcdGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuXHRcdFx0dGFiSW5kZXg6IHRoaXMucHJvcHMudGFiSW5kZXgsXG5cdFx0XHRvbkJsdXI6IHRoaXMuaGFuZGxlSW5wdXRCbHVyLFxuXHRcdFx0b25DaGFuZ2U6IHRoaXMuaGFuZGxlSW5wdXRDaGFuZ2UsXG5cdFx0XHRvbkZvY3VzOiB0aGlzLmhhbmRsZUlucHV0Rm9jdXMsXG5cdFx0XHRtaW5XaWR0aDogJzUnLFxuXHRcdFx0cmVmOiAnaW5wdXQnLFxuXHRcdFx0cmVxdWlyZWQ6IHRoaXMuc3RhdGUucmVxdWlyZWQsXG5cdFx0XHR2YWx1ZTogdGhpcy5zdGF0ZS5pbnB1dFZhbHVlXG5cdFx0fSkpO1xuXHR9LFxuXG5cdHJlbmRlckNsZWFyOiBmdW5jdGlvbiByZW5kZXJDbGVhcigpIHtcblx0XHRpZiAoIXRoaXMucHJvcHMuY2xlYXJhYmxlIHx8ICF0aGlzLnByb3BzLnZhbHVlIHx8IHRoaXMucHJvcHMubXVsdGkgJiYgIXRoaXMucHJvcHMudmFsdWUubGVuZ3RoIHx8IHRoaXMucHJvcHMuZGlzYWJsZWQgfHwgdGhpcy5wcm9wcy5pc0xvYWRpbmcpIHJldHVybjtcblx0XHRyZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdFx0XHQnc3BhbicsXG5cdFx0XHR7IGNsYXNzTmFtZTogJ1NlbGVjdC1jbGVhci16b25lJywgdGl0bGU6IHRoaXMucHJvcHMubXVsdGkgPyB0aGlzLnByb3BzLmNsZWFyQWxsVGV4dCA6IHRoaXMucHJvcHMuY2xlYXJWYWx1ZVRleHQsXG5cdFx0XHRcdCdhcmlhLWxhYmVsJzogdGhpcy5wcm9wcy5tdWx0aSA/IHRoaXMucHJvcHMuY2xlYXJBbGxUZXh0IDogdGhpcy5wcm9wcy5jbGVhclZhbHVlVGV4dCxcblx0XHRcdFx0b25Nb3VzZURvd246IHRoaXMuY2xlYXJWYWx1ZSxcblx0XHRcdFx0b25Ub3VjaFN0YXJ0OiB0aGlzLmhhbmRsZVRvdWNoU3RhcnQsXG5cdFx0XHRcdG9uVG91Y2hNb3ZlOiB0aGlzLmhhbmRsZVRvdWNoTW92ZSxcblx0XHRcdFx0b25Ub3VjaEVuZDogdGhpcy5oYW5kbGVUb3VjaEVuZENsZWFyVmFsdWUgfSxcblx0XHRcdF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdTZWxlY3QtY2xlYXInLCBkYW5nZXJvdXNseVNldElubmVySFRNTDogeyBfX2h0bWw6ICcmdGltZXM7JyB9IH0pXG5cdFx0KTtcblx0fSxcblxuXHRyZW5kZXJBcnJvdzogZnVuY3Rpb24gcmVuZGVyQXJyb3coKSB7XG5cdFx0cmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHRcdFx0J3NwYW4nLFxuXHRcdFx0eyBjbGFzc05hbWU6ICdTZWxlY3QtYXJyb3ctem9uZScsIG9uTW91c2VEb3duOiB0aGlzLmhhbmRsZU1vdXNlRG93bk9uQXJyb3cgfSxcblx0XHRcdF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdTZWxlY3QtYXJyb3cnLCBvbk1vdXNlRG93bjogdGhpcy5oYW5kbGVNb3VzZURvd25PbkFycm93IH0pXG5cdFx0KTtcblx0fSxcblxuXHRmaWx0ZXJPcHRpb25zOiBmdW5jdGlvbiBmaWx0ZXJPcHRpb25zKGV4Y2x1ZGVPcHRpb25zKSB7XG5cdFx0dmFyIF90aGlzMyA9IHRoaXM7XG5cblx0XHR2YXIgZmlsdGVyVmFsdWUgPSB0aGlzLnN0YXRlLmlucHV0VmFsdWU7XG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLnByb3BzLm9wdGlvbnMgfHwgW107XG5cdFx0aWYgKHR5cGVvZiB0aGlzLnByb3BzLmZpbHRlck9wdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdHJldHVybiB0aGlzLnByb3BzLmZpbHRlck9wdGlvbnMuY2FsbCh0aGlzLCBvcHRpb25zLCBmaWx0ZXJWYWx1ZSwgZXhjbHVkZU9wdGlvbnMpO1xuXHRcdH0gZWxzZSBpZiAodGhpcy5wcm9wcy5maWx0ZXJPcHRpb25zKSB7XG5cdFx0XHRpZiAodGhpcy5wcm9wcy5pZ25vcmVBY2NlbnRzKSB7XG5cdFx0XHRcdGZpbHRlclZhbHVlID0gKDAsIF91dGlsc1N0cmlwRGlhY3JpdGljczJbJ2RlZmF1bHQnXSkoZmlsdGVyVmFsdWUpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRoaXMucHJvcHMuaWdub3JlQ2FzZSkge1xuXHRcdFx0XHRmaWx0ZXJWYWx1ZSA9IGZpbHRlclZhbHVlLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoZXhjbHVkZU9wdGlvbnMpIGV4Y2x1ZGVPcHRpb25zID0gZXhjbHVkZU9wdGlvbnMubWFwKGZ1bmN0aW9uIChpKSB7XG5cdFx0XHRcdHJldHVybiBpW190aGlzMy5wcm9wcy52YWx1ZUtleV07XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBvcHRpb25zLmZpbHRlcihmdW5jdGlvbiAob3B0aW9uKSB7XG5cdFx0XHRcdGlmIChleGNsdWRlT3B0aW9ucyAmJiBleGNsdWRlT3B0aW9ucy5pbmRleE9mKG9wdGlvbltfdGhpczMucHJvcHMudmFsdWVLZXldKSA+IC0xKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdGlmIChfdGhpczMucHJvcHMuZmlsdGVyT3B0aW9uKSByZXR1cm4gX3RoaXMzLnByb3BzLmZpbHRlck9wdGlvbi5jYWxsKF90aGlzMywgb3B0aW9uLCBmaWx0ZXJWYWx1ZSk7XG5cdFx0XHRcdGlmICghZmlsdGVyVmFsdWUpIHJldHVybiB0cnVlO1xuXHRcdFx0XHR2YXIgdmFsdWVUZXN0ID0gU3RyaW5nKG9wdGlvbltfdGhpczMucHJvcHMudmFsdWVLZXldKTtcblx0XHRcdFx0dmFyIGxhYmVsVGVzdCA9IFN0cmluZyhvcHRpb25bX3RoaXMzLnByb3BzLmxhYmVsS2V5XSk7XG5cdFx0XHRcdGlmIChfdGhpczMucHJvcHMuaWdub3JlQWNjZW50cykge1xuXHRcdFx0XHRcdGlmIChfdGhpczMucHJvcHMubWF0Y2hQcm9wICE9PSAnbGFiZWwnKSB2YWx1ZVRlc3QgPSAoMCwgX3V0aWxzU3RyaXBEaWFjcml0aWNzMlsnZGVmYXVsdCddKSh2YWx1ZVRlc3QpO1xuXHRcdFx0XHRcdGlmIChfdGhpczMucHJvcHMubWF0Y2hQcm9wICE9PSAndmFsdWUnKSBsYWJlbFRlc3QgPSAoMCwgX3V0aWxzU3RyaXBEaWFjcml0aWNzMlsnZGVmYXVsdCddKShsYWJlbFRlc3QpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChfdGhpczMucHJvcHMuaWdub3JlQ2FzZSkge1xuXHRcdFx0XHRcdGlmIChfdGhpczMucHJvcHMubWF0Y2hQcm9wICE9PSAnbGFiZWwnKSB2YWx1ZVRlc3QgPSB2YWx1ZVRlc3QudG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0XHRpZiAoX3RoaXMzLnByb3BzLm1hdGNoUHJvcCAhPT0gJ3ZhbHVlJykgbGFiZWxUZXN0ID0gbGFiZWxUZXN0LnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIF90aGlzMy5wcm9wcy5tYXRjaFBvcyA9PT0gJ3N0YXJ0JyA/IF90aGlzMy5wcm9wcy5tYXRjaFByb3AgIT09ICdsYWJlbCcgJiYgdmFsdWVUZXN0LnN1YnN0cigwLCBmaWx0ZXJWYWx1ZS5sZW5ndGgpID09PSBmaWx0ZXJWYWx1ZSB8fCBfdGhpczMucHJvcHMubWF0Y2hQcm9wICE9PSAndmFsdWUnICYmIGxhYmVsVGVzdC5zdWJzdHIoMCwgZmlsdGVyVmFsdWUubGVuZ3RoKSA9PT0gZmlsdGVyVmFsdWUgOiBfdGhpczMucHJvcHMubWF0Y2hQcm9wICE9PSAnbGFiZWwnICYmIHZhbHVlVGVzdC5pbmRleE9mKGZpbHRlclZhbHVlKSA+PSAwIHx8IF90aGlzMy5wcm9wcy5tYXRjaFByb3AgIT09ICd2YWx1ZScgJiYgbGFiZWxUZXN0LmluZGV4T2YoZmlsdGVyVmFsdWUpID49IDA7XG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIG9wdGlvbnM7XG5cdFx0fVxuXHR9LFxuXG5cdHJlbmRlck1lbnU6IGZ1bmN0aW9uIHJlbmRlck1lbnUob3B0aW9ucywgdmFsdWVBcnJheSwgZm9jdXNlZE9wdGlvbikge1xuXHRcdHZhciBfdGhpczQgPSB0aGlzO1xuXG5cdFx0aWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5sZW5ndGgpIHtcblx0XHRcdHZhciBfcmV0ID0gKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0dmFyIE9wdGlvbiA9IF90aGlzNC5wcm9wcy5vcHRpb25Db21wb25lbnQ7XG5cdFx0XHRcdHZhciByZW5kZXJMYWJlbCA9IF90aGlzNC5wcm9wcy5vcHRpb25SZW5kZXJlciB8fCBfdGhpczQuZ2V0T3B0aW9uTGFiZWw7XG5cblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHR2OiBvcHRpb25zLm1hcChmdW5jdGlvbiAob3B0aW9uLCBpKSB7XG5cdFx0XHRcdFx0XHR2YXIgaXNTZWxlY3RlZCA9IHZhbHVlQXJyYXkgJiYgdmFsdWVBcnJheS5pbmRleE9mKG9wdGlvbikgPiAtMTtcblx0XHRcdFx0XHRcdHZhciBpc0ZvY3VzZWQgPSBvcHRpb24gPT09IGZvY3VzZWRPcHRpb247XG5cdFx0XHRcdFx0XHR2YXIgb3B0aW9uUmVmID0gaXNGb2N1c2VkID8gJ2ZvY3VzZWQnIDogbnVsbDtcblx0XHRcdFx0XHRcdHZhciBvcHRpb25DbGFzcyA9ICgwLCBfY2xhc3NuYW1lczJbJ2RlZmF1bHQnXSkoe1xuXHRcdFx0XHRcdFx0XHQnU2VsZWN0LW9wdGlvbic6IHRydWUsXG5cdFx0XHRcdFx0XHRcdCdpcy1zZWxlY3RlZCc6IGlzU2VsZWN0ZWQsXG5cdFx0XHRcdFx0XHRcdCdpcy1mb2N1c2VkJzogaXNGb2N1c2VkLFxuXHRcdFx0XHRcdFx0XHQnaXMtZGlzYWJsZWQnOiBvcHRpb24uZGlzYWJsZWRcblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHRyZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdFx0XHRcdFx0XHRcdE9wdGlvbixcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdGNsYXNzTmFtZTogb3B0aW9uQ2xhc3MsXG5cdFx0XHRcdFx0XHRcdFx0aXNEaXNhYmxlZDogb3B0aW9uLmRpc2FibGVkLFxuXHRcdFx0XHRcdFx0XHRcdGlzRm9jdXNlZDogaXNGb2N1c2VkLFxuXHRcdFx0XHRcdFx0XHRcdGtleTogJ29wdGlvbi0nICsgaSArICctJyArIG9wdGlvbltfdGhpczQucHJvcHMudmFsdWVLZXldLFxuXHRcdFx0XHRcdFx0XHRcdG9uU2VsZWN0OiBfdGhpczQuc2VsZWN0VmFsdWUsXG5cdFx0XHRcdFx0XHRcdFx0b25Gb2N1czogX3RoaXM0LmZvY3VzT3B0aW9uLFxuXHRcdFx0XHRcdFx0XHRcdG9wdGlvbjogb3B0aW9uLFxuXHRcdFx0XHRcdFx0XHRcdGlzU2VsZWN0ZWQ6IGlzU2VsZWN0ZWQsXG5cdFx0XHRcdFx0XHRcdFx0cmVmOiBvcHRpb25SZWZcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0cmVuZGVyTGFiZWwob3B0aW9uKVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHR9O1xuXHRcdFx0fSkoKTtcblxuXHRcdFx0aWYgKHR5cGVvZiBfcmV0ID09PSAnb2JqZWN0JykgcmV0dXJuIF9yZXQudjtcblx0XHR9IGVsc2UgaWYgKHRoaXMucHJvcHMubm9SZXN1bHRzVGV4dCkge1xuXHRcdFx0cmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHRcdFx0XHQnZGl2Jyxcblx0XHRcdFx0eyBjbGFzc05hbWU6ICdTZWxlY3Qtbm9yZXN1bHRzJyB9LFxuXHRcdFx0XHR0aGlzLnByb3BzLm5vUmVzdWx0c1RleHRcblx0XHRcdCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0fSxcblxuXHRyZW5kZXJIaWRkZW5GaWVsZDogZnVuY3Rpb24gcmVuZGVySGlkZGVuRmllbGQodmFsdWVBcnJheSkge1xuXHRcdHZhciBfdGhpczUgPSB0aGlzO1xuXG5cdFx0aWYgKCF0aGlzLnByb3BzLm5hbWUpIHJldHVybjtcblx0XHR2YXIgdmFsdWUgPSB2YWx1ZUFycmF5Lm1hcChmdW5jdGlvbiAoaSkge1xuXHRcdFx0cmV0dXJuIHN0cmluZ2lmeVZhbHVlKGlbX3RoaXM1LnByb3BzLnZhbHVlS2V5XSk7XG5cdFx0fSkuam9pbih0aGlzLnByb3BzLmRlbGltaXRlcik7XG5cdFx0cmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgdHlwZTogJ2hpZGRlbicsIHJlZjogJ3ZhbHVlJywgbmFtZTogdGhpcy5wcm9wcy5uYW1lLCB2YWx1ZTogdmFsdWUsIGRpc2FibGVkOiB0aGlzLnByb3BzLmRpc2FibGVkIH0pO1xuXHR9LFxuXG5cdGdldEZvY3VzYWJsZU9wdGlvbjogZnVuY3Rpb24gZ2V0Rm9jdXNhYmxlT3B0aW9uKHNlbGVjdGVkT3B0aW9uKSB7XG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLl92aXNpYmxlT3B0aW9ucztcblx0XHRpZiAoIW9wdGlvbnMubGVuZ3RoKSByZXR1cm47XG5cdFx0dmFyIGZvY3VzZWRPcHRpb24gPSB0aGlzLnN0YXRlLmZvY3VzZWRPcHRpb24gfHwgc2VsZWN0ZWRPcHRpb247XG5cdFx0aWYgKGZvY3VzZWRPcHRpb24gJiYgb3B0aW9ucy5pbmRleE9mKGZvY3VzZWRPcHRpb24pID4gLTEpIHJldHVybiBmb2N1c2VkT3B0aW9uO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgb3B0aW9ucy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKCFvcHRpb25zW2ldLmRpc2FibGVkKSByZXR1cm4gb3B0aW9uc1tpXTtcblx0XHR9XG5cdH0sXG5cblx0cmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdFx0dmFyIHZhbHVlQXJyYXkgPSB0aGlzLmdldFZhbHVlQXJyYXkoKTtcblx0XHR2YXIgb3B0aW9ucyA9IHRoaXMuX3Zpc2libGVPcHRpb25zID0gdGhpcy5maWx0ZXJPcHRpb25zKHRoaXMucHJvcHMubXVsdGkgPyB2YWx1ZUFycmF5IDogbnVsbCk7XG5cdFx0dmFyIGlzT3BlbiA9IHRoaXMuc3RhdGUuaXNPcGVuO1xuXHRcdGlmICh0aGlzLnByb3BzLm11bHRpICYmICFvcHRpb25zLmxlbmd0aCAmJiB2YWx1ZUFycmF5Lmxlbmd0aCAmJiAhdGhpcy5zdGF0ZS5pbnB1dFZhbHVlKSBpc09wZW4gPSBmYWxzZTtcblx0XHR2YXIgZm9jdXNlZE9wdGlvbiA9IHRoaXMuX2ZvY3VzZWRPcHRpb24gPSB0aGlzLmdldEZvY3VzYWJsZU9wdGlvbih2YWx1ZUFycmF5WzBdKTtcblx0XHR2YXIgY2xhc3NOYW1lID0gKDAsIF9jbGFzc25hbWVzMlsnZGVmYXVsdCddKSgnU2VsZWN0JywgdGhpcy5wcm9wcy5jbGFzc05hbWUsIHtcblx0XHRcdCdTZWxlY3QtLW11bHRpJzogdGhpcy5wcm9wcy5tdWx0aSxcblx0XHRcdCdpcy1kaXNhYmxlZCc6IHRoaXMucHJvcHMuZGlzYWJsZWQsXG5cdFx0XHQnaXMtZm9jdXNlZCc6IHRoaXMuc3RhdGUuaXNGb2N1c2VkLFxuXHRcdFx0J2lzLWxvYWRpbmcnOiB0aGlzLnByb3BzLmlzTG9hZGluZyxcblx0XHRcdCdpcy1vcGVuJzogaXNPcGVuLFxuXHRcdFx0J2lzLXBzZXVkby1mb2N1c2VkJzogdGhpcy5zdGF0ZS5pc1BzZXVkb0ZvY3VzZWQsXG5cdFx0XHQnaXMtc2VhcmNoYWJsZSc6IHRoaXMucHJvcHMuc2VhcmNoYWJsZSxcblx0XHRcdCdoYXMtdmFsdWUnOiB2YWx1ZUFycmF5Lmxlbmd0aFxuXHRcdH0pO1xuXHRcdHJldHVybiBfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0XHRcdCdkaXYnLFxuXHRcdFx0eyByZWY6ICd3cmFwcGVyJywgY2xhc3NOYW1lOiBjbGFzc05hbWUsIHN0eWxlOiB0aGlzLnByb3BzLndyYXBwZXJTdHlsZSB9LFxuXHRcdFx0dGhpcy5yZW5kZXJIaWRkZW5GaWVsZCh2YWx1ZUFycmF5KSxcblx0XHRcdF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHRcdFx0XHQnZGl2Jyxcblx0XHRcdFx0eyByZWY6ICdjb250cm9sJyxcblx0XHRcdFx0XHRjbGFzc05hbWU6ICdTZWxlY3QtY29udHJvbCcsXG5cdFx0XHRcdFx0c3R5bGU6IHRoaXMucHJvcHMuc3R5bGUsXG5cdFx0XHRcdFx0b25LZXlEb3duOiB0aGlzLmhhbmRsZUtleURvd24sXG5cdFx0XHRcdFx0b25Nb3VzZURvd246IHRoaXMuaGFuZGxlTW91c2VEb3duLFxuXHRcdFx0XHRcdG9uVG91Y2hFbmQ6IHRoaXMuaGFuZGxlVG91Y2hFbmQsXG5cdFx0XHRcdFx0b25Ub3VjaFN0YXJ0OiB0aGlzLmhhbmRsZVRvdWNoU3RhcnQsXG5cdFx0XHRcdFx0b25Ub3VjaE1vdmU6IHRoaXMuaGFuZGxlVG91Y2hNb3ZlIH0sXG5cdFx0XHRcdHRoaXMucmVuZGVyVmFsdWUodmFsdWVBcnJheSwgaXNPcGVuKSxcblx0XHRcdFx0dGhpcy5yZW5kZXJJbnB1dCh2YWx1ZUFycmF5KSxcblx0XHRcdFx0dGhpcy5yZW5kZXJMb2FkaW5nKCksXG5cdFx0XHRcdHRoaXMucmVuZGVyQ2xlYXIoKSxcblx0XHRcdFx0dGhpcy5yZW5kZXJBcnJvdygpXG5cdFx0XHQpLFxuXHRcdFx0aXNPcGVuID8gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdFx0XHRcdCdkaXYnLFxuXHRcdFx0XHR7IHJlZjogJ21lbnVDb250YWluZXInLCBjbGFzc05hbWU6ICdTZWxlY3QtbWVudS1vdXRlcicsIHN0eWxlOiB0aGlzLnByb3BzLm1lbnVDb250YWluZXJTdHlsZSB9LFxuXHRcdFx0XHRfcmVhY3QyWydkZWZhdWx0J10uY3JlYXRlRWxlbWVudChcblx0XHRcdFx0XHQnZGl2Jyxcblx0XHRcdFx0XHR7IHJlZjogJ21lbnUnLCBjbGFzc05hbWU6ICdTZWxlY3QtbWVudScsXG5cdFx0XHRcdFx0XHRzdHlsZTogdGhpcy5wcm9wcy5tZW51U3R5bGUsXG5cdFx0XHRcdFx0XHRvblNjcm9sbDogdGhpcy5oYW5kbGVNZW51U2Nyb2xsLFxuXHRcdFx0XHRcdFx0b25Nb3VzZURvd246IHRoaXMuaGFuZGxlTW91c2VEb3duT25NZW51IH0sXG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJNZW51KG9wdGlvbnMsICF0aGlzLnByb3BzLm11bHRpID8gdmFsdWVBcnJheSA6IG51bGwsIGZvY3VzZWRPcHRpb24pXG5cdFx0XHRcdClcblx0XHRcdCkgOiBudWxsXG5cdFx0KTtcblx0fVxuXG59KTtcblxuZXhwb3J0c1snZGVmYXVsdCddID0gU2VsZWN0O1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3Qtc2VsZWN0L2xpYi9TZWxlY3QuanNcbiAqKiBtb2R1bGUgaWQgPSAxMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgbWFwID0gW3sgJ2Jhc2UnOiAnQScsICdsZXR0ZXJzJzogL1tcXHUwMDQxXFx1MjRCNlxcdUZGMjFcXHUwMEMwXFx1MDBDMVxcdTAwQzJcXHUxRUE2XFx1MUVBNFxcdTFFQUFcXHUxRUE4XFx1MDBDM1xcdTAxMDBcXHUwMTAyXFx1MUVCMFxcdTFFQUVcXHUxRUI0XFx1MUVCMlxcdTAyMjZcXHUwMUUwXFx1MDBDNFxcdTAxREVcXHUxRUEyXFx1MDBDNVxcdTAxRkFcXHUwMUNEXFx1MDIwMFxcdTAyMDJcXHUxRUEwXFx1MUVBQ1xcdTFFQjZcXHUxRTAwXFx1MDEwNFxcdTAyM0FcXHUyQzZGXS9nIH0sIHsgJ2Jhc2UnOiAnQUEnLCAnbGV0dGVycyc6IC9bXFx1QTczMl0vZyB9LCB7ICdiYXNlJzogJ0FFJywgJ2xldHRlcnMnOiAvW1xcdTAwQzZcXHUwMUZDXFx1MDFFMl0vZyB9LCB7ICdiYXNlJzogJ0FPJywgJ2xldHRlcnMnOiAvW1xcdUE3MzRdL2cgfSwgeyAnYmFzZSc6ICdBVScsICdsZXR0ZXJzJzogL1tcXHVBNzM2XS9nIH0sIHsgJ2Jhc2UnOiAnQVYnLCAnbGV0dGVycyc6IC9bXFx1QTczOFxcdUE3M0FdL2cgfSwgeyAnYmFzZSc6ICdBWScsICdsZXR0ZXJzJzogL1tcXHVBNzNDXS9nIH0sIHsgJ2Jhc2UnOiAnQicsICdsZXR0ZXJzJzogL1tcXHUwMDQyXFx1MjRCN1xcdUZGMjJcXHUxRTAyXFx1MUUwNFxcdTFFMDZcXHUwMjQzXFx1MDE4MlxcdTAxODFdL2cgfSwgeyAnYmFzZSc6ICdDJywgJ2xldHRlcnMnOiAvW1xcdTAwNDNcXHUyNEI4XFx1RkYyM1xcdTAxMDZcXHUwMTA4XFx1MDEwQVxcdTAxMENcXHUwMEM3XFx1MUUwOFxcdTAxODdcXHUwMjNCXFx1QTczRV0vZyB9LCB7ICdiYXNlJzogJ0QnLCAnbGV0dGVycyc6IC9bXFx1MDA0NFxcdTI0QjlcXHVGRjI0XFx1MUUwQVxcdTAxMEVcXHUxRTBDXFx1MUUxMFxcdTFFMTJcXHUxRTBFXFx1MDExMFxcdTAxOEJcXHUwMThBXFx1MDE4OVxcdUE3NzldL2cgfSwgeyAnYmFzZSc6ICdEWicsICdsZXR0ZXJzJzogL1tcXHUwMUYxXFx1MDFDNF0vZyB9LCB7ICdiYXNlJzogJ0R6JywgJ2xldHRlcnMnOiAvW1xcdTAxRjJcXHUwMUM1XS9nIH0sIHsgJ2Jhc2UnOiAnRScsICdsZXR0ZXJzJzogL1tcXHUwMDQ1XFx1MjRCQVxcdUZGMjVcXHUwMEM4XFx1MDBDOVxcdTAwQ0FcXHUxRUMwXFx1MUVCRVxcdTFFQzRcXHUxRUMyXFx1MUVCQ1xcdTAxMTJcXHUxRTE0XFx1MUUxNlxcdTAxMTRcXHUwMTE2XFx1MDBDQlxcdTFFQkFcXHUwMTFBXFx1MDIwNFxcdTAyMDZcXHUxRUI4XFx1MUVDNlxcdTAyMjhcXHUxRTFDXFx1MDExOFxcdTFFMThcXHUxRTFBXFx1MDE5MFxcdTAxOEVdL2cgfSwgeyAnYmFzZSc6ICdGJywgJ2xldHRlcnMnOiAvW1xcdTAwNDZcXHUyNEJCXFx1RkYyNlxcdTFFMUVcXHUwMTkxXFx1QTc3Ql0vZyB9LCB7ICdiYXNlJzogJ0cnLCAnbGV0dGVycyc6IC9bXFx1MDA0N1xcdTI0QkNcXHVGRjI3XFx1MDFGNFxcdTAxMUNcXHUxRTIwXFx1MDExRVxcdTAxMjBcXHUwMUU2XFx1MDEyMlxcdTAxRTRcXHUwMTkzXFx1QTdBMFxcdUE3N0RcXHVBNzdFXS9nIH0sIHsgJ2Jhc2UnOiAnSCcsICdsZXR0ZXJzJzogL1tcXHUwMDQ4XFx1MjRCRFxcdUZGMjhcXHUwMTI0XFx1MUUyMlxcdTFFMjZcXHUwMjFFXFx1MUUyNFxcdTFFMjhcXHUxRTJBXFx1MDEyNlxcdTJDNjdcXHUyQzc1XFx1QTc4RF0vZyB9LCB7ICdiYXNlJzogJ0knLCAnbGV0dGVycyc6IC9bXFx1MDA0OVxcdTI0QkVcXHVGRjI5XFx1MDBDQ1xcdTAwQ0RcXHUwMENFXFx1MDEyOFxcdTAxMkFcXHUwMTJDXFx1MDEzMFxcdTAwQ0ZcXHUxRTJFXFx1MUVDOFxcdTAxQ0ZcXHUwMjA4XFx1MDIwQVxcdTFFQ0FcXHUwMTJFXFx1MUUyQ1xcdTAxOTddL2cgfSwgeyAnYmFzZSc6ICdKJywgJ2xldHRlcnMnOiAvW1xcdTAwNEFcXHUyNEJGXFx1RkYyQVxcdTAxMzRcXHUwMjQ4XS9nIH0sIHsgJ2Jhc2UnOiAnSycsICdsZXR0ZXJzJzogL1tcXHUwMDRCXFx1MjRDMFxcdUZGMkJcXHUxRTMwXFx1MDFFOFxcdTFFMzJcXHUwMTM2XFx1MUUzNFxcdTAxOThcXHUyQzY5XFx1QTc0MFxcdUE3NDJcXHVBNzQ0XFx1QTdBMl0vZyB9LCB7ICdiYXNlJzogJ0wnLCAnbGV0dGVycyc6IC9bXFx1MDA0Q1xcdTI0QzFcXHVGRjJDXFx1MDEzRlxcdTAxMzlcXHUwMTNEXFx1MUUzNlxcdTFFMzhcXHUwMTNCXFx1MUUzQ1xcdTFFM0FcXHUwMTQxXFx1MDIzRFxcdTJDNjJcXHUyQzYwXFx1QTc0OFxcdUE3NDZcXHVBNzgwXS9nIH0sIHsgJ2Jhc2UnOiAnTEonLCAnbGV0dGVycyc6IC9bXFx1MDFDN10vZyB9LCB7ICdiYXNlJzogJ0xqJywgJ2xldHRlcnMnOiAvW1xcdTAxQzhdL2cgfSwgeyAnYmFzZSc6ICdNJywgJ2xldHRlcnMnOiAvW1xcdTAwNERcXHUyNEMyXFx1RkYyRFxcdTFFM0VcXHUxRTQwXFx1MUU0MlxcdTJDNkVcXHUwMTlDXS9nIH0sIHsgJ2Jhc2UnOiAnTicsICdsZXR0ZXJzJzogL1tcXHUwMDRFXFx1MjRDM1xcdUZGMkVcXHUwMUY4XFx1MDE0M1xcdTAwRDFcXHUxRTQ0XFx1MDE0N1xcdTFFNDZcXHUwMTQ1XFx1MUU0QVxcdTFFNDhcXHUwMjIwXFx1MDE5RFxcdUE3OTBcXHVBN0E0XS9nIH0sIHsgJ2Jhc2UnOiAnTkonLCAnbGV0dGVycyc6IC9bXFx1MDFDQV0vZyB9LCB7ICdiYXNlJzogJ05qJywgJ2xldHRlcnMnOiAvW1xcdTAxQ0JdL2cgfSwgeyAnYmFzZSc6ICdPJywgJ2xldHRlcnMnOiAvW1xcdTAwNEZcXHUyNEM0XFx1RkYyRlxcdTAwRDJcXHUwMEQzXFx1MDBENFxcdTFFRDJcXHUxRUQwXFx1MUVENlxcdTFFRDRcXHUwMEQ1XFx1MUU0Q1xcdTAyMkNcXHUxRTRFXFx1MDE0Q1xcdTFFNTBcXHUxRTUyXFx1MDE0RVxcdTAyMkVcXHUwMjMwXFx1MDBENlxcdTAyMkFcXHUxRUNFXFx1MDE1MFxcdTAxRDFcXHUwMjBDXFx1MDIwRVxcdTAxQTBcXHUxRURDXFx1MUVEQVxcdTFFRTBcXHUxRURFXFx1MUVFMlxcdTFFQ0NcXHUxRUQ4XFx1MDFFQVxcdTAxRUNcXHUwMEQ4XFx1MDFGRVxcdTAxODZcXHUwMTlGXFx1QTc0QVxcdUE3NENdL2cgfSwgeyAnYmFzZSc6ICdPSScsICdsZXR0ZXJzJzogL1tcXHUwMUEyXS9nIH0sIHsgJ2Jhc2UnOiAnT08nLCAnbGV0dGVycyc6IC9bXFx1QTc0RV0vZyB9LCB7ICdiYXNlJzogJ09VJywgJ2xldHRlcnMnOiAvW1xcdTAyMjJdL2cgfSwgeyAnYmFzZSc6ICdQJywgJ2xldHRlcnMnOiAvW1xcdTAwNTBcXHUyNEM1XFx1RkYzMFxcdTFFNTRcXHUxRTU2XFx1MDFBNFxcdTJDNjNcXHVBNzUwXFx1QTc1MlxcdUE3NTRdL2cgfSwgeyAnYmFzZSc6ICdRJywgJ2xldHRlcnMnOiAvW1xcdTAwNTFcXHUyNEM2XFx1RkYzMVxcdUE3NTZcXHVBNzU4XFx1MDI0QV0vZyB9LCB7ICdiYXNlJzogJ1InLCAnbGV0dGVycyc6IC9bXFx1MDA1MlxcdTI0QzdcXHVGRjMyXFx1MDE1NFxcdTFFNThcXHUwMTU4XFx1MDIxMFxcdTAyMTJcXHUxRTVBXFx1MUU1Q1xcdTAxNTZcXHUxRTVFXFx1MDI0Q1xcdTJDNjRcXHVBNzVBXFx1QTdBNlxcdUE3ODJdL2cgfSwgeyAnYmFzZSc6ICdTJywgJ2xldHRlcnMnOiAvW1xcdTAwNTNcXHUyNEM4XFx1RkYzM1xcdTFFOUVcXHUwMTVBXFx1MUU2NFxcdTAxNUNcXHUxRTYwXFx1MDE2MFxcdTFFNjZcXHUxRTYyXFx1MUU2OFxcdTAyMThcXHUwMTVFXFx1MkM3RVxcdUE3QThcXHVBNzg0XS9nIH0sIHsgJ2Jhc2UnOiAnVCcsICdsZXR0ZXJzJzogL1tcXHUwMDU0XFx1MjRDOVxcdUZGMzRcXHUxRTZBXFx1MDE2NFxcdTFFNkNcXHUwMjFBXFx1MDE2MlxcdTFFNzBcXHUxRTZFXFx1MDE2NlxcdTAxQUNcXHUwMUFFXFx1MDIzRVxcdUE3ODZdL2cgfSwgeyAnYmFzZSc6ICdUWicsICdsZXR0ZXJzJzogL1tcXHVBNzI4XS9nIH0sIHsgJ2Jhc2UnOiAnVScsICdsZXR0ZXJzJzogL1tcXHUwMDU1XFx1MjRDQVxcdUZGMzVcXHUwMEQ5XFx1MDBEQVxcdTAwREJcXHUwMTY4XFx1MUU3OFxcdTAxNkFcXHUxRTdBXFx1MDE2Q1xcdTAwRENcXHUwMURCXFx1MDFEN1xcdTAxRDVcXHUwMUQ5XFx1MUVFNlxcdTAxNkVcXHUwMTcwXFx1MDFEM1xcdTAyMTRcXHUwMjE2XFx1MDFBRlxcdTFFRUFcXHUxRUU4XFx1MUVFRVxcdTFFRUNcXHUxRUYwXFx1MUVFNFxcdTFFNzJcXHUwMTcyXFx1MUU3NlxcdTFFNzRcXHUwMjQ0XS9nIH0sIHsgJ2Jhc2UnOiAnVicsICdsZXR0ZXJzJzogL1tcXHUwMDU2XFx1MjRDQlxcdUZGMzZcXHUxRTdDXFx1MUU3RVxcdTAxQjJcXHVBNzVFXFx1MDI0NV0vZyB9LCB7ICdiYXNlJzogJ1ZZJywgJ2xldHRlcnMnOiAvW1xcdUE3NjBdL2cgfSwgeyAnYmFzZSc6ICdXJywgJ2xldHRlcnMnOiAvW1xcdTAwNTdcXHUyNENDXFx1RkYzN1xcdTFFODBcXHUxRTgyXFx1MDE3NFxcdTFFODZcXHUxRTg0XFx1MUU4OFxcdTJDNzJdL2cgfSwgeyAnYmFzZSc6ICdYJywgJ2xldHRlcnMnOiAvW1xcdTAwNThcXHUyNENEXFx1RkYzOFxcdTFFOEFcXHUxRThDXS9nIH0sIHsgJ2Jhc2UnOiAnWScsICdsZXR0ZXJzJzogL1tcXHUwMDU5XFx1MjRDRVxcdUZGMzlcXHUxRUYyXFx1MDBERFxcdTAxNzZcXHUxRUY4XFx1MDIzMlxcdTFFOEVcXHUwMTc4XFx1MUVGNlxcdTFFRjRcXHUwMUIzXFx1MDI0RVxcdTFFRkVdL2cgfSwgeyAnYmFzZSc6ICdaJywgJ2xldHRlcnMnOiAvW1xcdTAwNUFcXHUyNENGXFx1RkYzQVxcdTAxNzlcXHUxRTkwXFx1MDE3QlxcdTAxN0RcXHUxRTkyXFx1MUU5NFxcdTAxQjVcXHUwMjI0XFx1MkM3RlxcdTJDNkJcXHVBNzYyXS9nIH0sIHsgJ2Jhc2UnOiAnYScsICdsZXR0ZXJzJzogL1tcXHUwMDYxXFx1MjREMFxcdUZGNDFcXHUxRTlBXFx1MDBFMFxcdTAwRTFcXHUwMEUyXFx1MUVBN1xcdTFFQTVcXHUxRUFCXFx1MUVBOVxcdTAwRTNcXHUwMTAxXFx1MDEwM1xcdTFFQjFcXHUxRUFGXFx1MUVCNVxcdTFFQjNcXHUwMjI3XFx1MDFFMVxcdTAwRTRcXHUwMURGXFx1MUVBM1xcdTAwRTVcXHUwMUZCXFx1MDFDRVxcdTAyMDFcXHUwMjAzXFx1MUVBMVxcdTFFQURcXHUxRUI3XFx1MUUwMVxcdTAxMDVcXHUyQzY1XFx1MDI1MF0vZyB9LCB7ICdiYXNlJzogJ2FhJywgJ2xldHRlcnMnOiAvW1xcdUE3MzNdL2cgfSwgeyAnYmFzZSc6ICdhZScsICdsZXR0ZXJzJzogL1tcXHUwMEU2XFx1MDFGRFxcdTAxRTNdL2cgfSwgeyAnYmFzZSc6ICdhbycsICdsZXR0ZXJzJzogL1tcXHVBNzM1XS9nIH0sIHsgJ2Jhc2UnOiAnYXUnLCAnbGV0dGVycyc6IC9bXFx1QTczN10vZyB9LCB7ICdiYXNlJzogJ2F2JywgJ2xldHRlcnMnOiAvW1xcdUE3MzlcXHVBNzNCXS9nIH0sIHsgJ2Jhc2UnOiAnYXknLCAnbGV0dGVycyc6IC9bXFx1QTczRF0vZyB9LCB7ICdiYXNlJzogJ2InLCAnbGV0dGVycyc6IC9bXFx1MDA2MlxcdTI0RDFcXHVGRjQyXFx1MUUwM1xcdTFFMDVcXHUxRTA3XFx1MDE4MFxcdTAxODNcXHUwMjUzXS9nIH0sIHsgJ2Jhc2UnOiAnYycsICdsZXR0ZXJzJzogL1tcXHUwMDYzXFx1MjREMlxcdUZGNDNcXHUwMTA3XFx1MDEwOVxcdTAxMEJcXHUwMTBEXFx1MDBFN1xcdTFFMDlcXHUwMTg4XFx1MDIzQ1xcdUE3M0ZcXHUyMTg0XS9nIH0sIHsgJ2Jhc2UnOiAnZCcsICdsZXR0ZXJzJzogL1tcXHUwMDY0XFx1MjREM1xcdUZGNDRcXHUxRTBCXFx1MDEwRlxcdTFFMERcXHUxRTExXFx1MUUxM1xcdTFFMEZcXHUwMTExXFx1MDE4Q1xcdTAyNTZcXHUwMjU3XFx1QTc3QV0vZyB9LCB7ICdiYXNlJzogJ2R6JywgJ2xldHRlcnMnOiAvW1xcdTAxRjNcXHUwMUM2XS9nIH0sIHsgJ2Jhc2UnOiAnZScsICdsZXR0ZXJzJzogL1tcXHUwMDY1XFx1MjRENFxcdUZGNDVcXHUwMEU4XFx1MDBFOVxcdTAwRUFcXHUxRUMxXFx1MUVCRlxcdTFFQzVcXHUxRUMzXFx1MUVCRFxcdTAxMTNcXHUxRTE1XFx1MUUxN1xcdTAxMTVcXHUwMTE3XFx1MDBFQlxcdTFFQkJcXHUwMTFCXFx1MDIwNVxcdTAyMDdcXHUxRUI5XFx1MUVDN1xcdTAyMjlcXHUxRTFEXFx1MDExOVxcdTFFMTlcXHUxRTFCXFx1MDI0N1xcdTAyNUJcXHUwMUREXS9nIH0sIHsgJ2Jhc2UnOiAnZicsICdsZXR0ZXJzJzogL1tcXHUwMDY2XFx1MjRENVxcdUZGNDZcXHUxRTFGXFx1MDE5MlxcdUE3N0NdL2cgfSwgeyAnYmFzZSc6ICdnJywgJ2xldHRlcnMnOiAvW1xcdTAwNjdcXHUyNEQ2XFx1RkY0N1xcdTAxRjVcXHUwMTFEXFx1MUUyMVxcdTAxMUZcXHUwMTIxXFx1MDFFN1xcdTAxMjNcXHUwMUU1XFx1MDI2MFxcdUE3QTFcXHUxRDc5XFx1QTc3Rl0vZyB9LCB7ICdiYXNlJzogJ2gnLCAnbGV0dGVycyc6IC9bXFx1MDA2OFxcdTI0RDdcXHVGRjQ4XFx1MDEyNVxcdTFFMjNcXHUxRTI3XFx1MDIxRlxcdTFFMjVcXHUxRTI5XFx1MUUyQlxcdTFFOTZcXHUwMTI3XFx1MkM2OFxcdTJDNzZcXHUwMjY1XS9nIH0sIHsgJ2Jhc2UnOiAnaHYnLCAnbGV0dGVycyc6IC9bXFx1MDE5NV0vZyB9LCB7ICdiYXNlJzogJ2knLCAnbGV0dGVycyc6IC9bXFx1MDA2OVxcdTI0RDhcXHVGRjQ5XFx1MDBFQ1xcdTAwRURcXHUwMEVFXFx1MDEyOVxcdTAxMkJcXHUwMTJEXFx1MDBFRlxcdTFFMkZcXHUxRUM5XFx1MDFEMFxcdTAyMDlcXHUwMjBCXFx1MUVDQlxcdTAxMkZcXHUxRTJEXFx1MDI2OFxcdTAxMzFdL2cgfSwgeyAnYmFzZSc6ICdqJywgJ2xldHRlcnMnOiAvW1xcdTAwNkFcXHUyNEQ5XFx1RkY0QVxcdTAxMzVcXHUwMUYwXFx1MDI0OV0vZyB9LCB7ICdiYXNlJzogJ2snLCAnbGV0dGVycyc6IC9bXFx1MDA2QlxcdTI0REFcXHVGRjRCXFx1MUUzMVxcdTAxRTlcXHUxRTMzXFx1MDEzN1xcdTFFMzVcXHUwMTk5XFx1MkM2QVxcdUE3NDFcXHVBNzQzXFx1QTc0NVxcdUE3QTNdL2cgfSwgeyAnYmFzZSc6ICdsJywgJ2xldHRlcnMnOiAvW1xcdTAwNkNcXHUyNERCXFx1RkY0Q1xcdTAxNDBcXHUwMTNBXFx1MDEzRVxcdTFFMzdcXHUxRTM5XFx1MDEzQ1xcdTFFM0RcXHUxRTNCXFx1MDE3RlxcdTAxNDJcXHUwMTlBXFx1MDI2QlxcdTJDNjFcXHVBNzQ5XFx1QTc4MVxcdUE3NDddL2cgfSwgeyAnYmFzZSc6ICdsaicsICdsZXR0ZXJzJzogL1tcXHUwMUM5XS9nIH0sIHsgJ2Jhc2UnOiAnbScsICdsZXR0ZXJzJzogL1tcXHUwMDZEXFx1MjREQ1xcdUZGNERcXHUxRTNGXFx1MUU0MVxcdTFFNDNcXHUwMjcxXFx1MDI2Rl0vZyB9LCB7ICdiYXNlJzogJ24nLCAnbGV0dGVycyc6IC9bXFx1MDA2RVxcdTI0RERcXHVGRjRFXFx1MDFGOVxcdTAxNDRcXHUwMEYxXFx1MUU0NVxcdTAxNDhcXHUxRTQ3XFx1MDE0NlxcdTFFNEJcXHUxRTQ5XFx1MDE5RVxcdTAyNzJcXHUwMTQ5XFx1QTc5MVxcdUE3QTVdL2cgfSwgeyAnYmFzZSc6ICduaicsICdsZXR0ZXJzJzogL1tcXHUwMUNDXS9nIH0sIHsgJ2Jhc2UnOiAnbycsICdsZXR0ZXJzJzogL1tcXHUwMDZGXFx1MjRERVxcdUZGNEZcXHUwMEYyXFx1MDBGM1xcdTAwRjRcXHUxRUQzXFx1MUVEMVxcdTFFRDdcXHUxRUQ1XFx1MDBGNVxcdTFFNERcXHUwMjJEXFx1MUU0RlxcdTAxNERcXHUxRTUxXFx1MUU1M1xcdTAxNEZcXHUwMjJGXFx1MDIzMVxcdTAwRjZcXHUwMjJCXFx1MUVDRlxcdTAxNTFcXHUwMUQyXFx1MDIwRFxcdTAyMEZcXHUwMUExXFx1MUVERFxcdTFFREJcXHUxRUUxXFx1MUVERlxcdTFFRTNcXHUxRUNEXFx1MUVEOVxcdTAxRUJcXHUwMUVEXFx1MDBGOFxcdTAxRkZcXHUwMjU0XFx1QTc0QlxcdUE3NERcXHUwMjc1XS9nIH0sIHsgJ2Jhc2UnOiAnb2knLCAnbGV0dGVycyc6IC9bXFx1MDFBM10vZyB9LCB7ICdiYXNlJzogJ291JywgJ2xldHRlcnMnOiAvW1xcdTAyMjNdL2cgfSwgeyAnYmFzZSc6ICdvbycsICdsZXR0ZXJzJzogL1tcXHVBNzRGXS9nIH0sIHsgJ2Jhc2UnOiAncCcsICdsZXR0ZXJzJzogL1tcXHUwMDcwXFx1MjRERlxcdUZGNTBcXHUxRTU1XFx1MUU1N1xcdTAxQTVcXHUxRDdEXFx1QTc1MVxcdUE3NTNcXHVBNzU1XS9nIH0sIHsgJ2Jhc2UnOiAncScsICdsZXR0ZXJzJzogL1tcXHUwMDcxXFx1MjRFMFxcdUZGNTFcXHUwMjRCXFx1QTc1N1xcdUE3NTldL2cgfSwgeyAnYmFzZSc6ICdyJywgJ2xldHRlcnMnOiAvW1xcdTAwNzJcXHUyNEUxXFx1RkY1MlxcdTAxNTVcXHUxRTU5XFx1MDE1OVxcdTAyMTFcXHUwMjEzXFx1MUU1QlxcdTFFNURcXHUwMTU3XFx1MUU1RlxcdTAyNERcXHUwMjdEXFx1QTc1QlxcdUE3QTdcXHVBNzgzXS9nIH0sIHsgJ2Jhc2UnOiAncycsICdsZXR0ZXJzJzogL1tcXHUwMDczXFx1MjRFMlxcdUZGNTNcXHUwMERGXFx1MDE1QlxcdTFFNjVcXHUwMTVEXFx1MUU2MVxcdTAxNjFcXHUxRTY3XFx1MUU2M1xcdTFFNjlcXHUwMjE5XFx1MDE1RlxcdTAyM0ZcXHVBN0E5XFx1QTc4NVxcdTFFOUJdL2cgfSwgeyAnYmFzZSc6ICd0JywgJ2xldHRlcnMnOiAvW1xcdTAwNzRcXHUyNEUzXFx1RkY1NFxcdTFFNkJcXHUxRTk3XFx1MDE2NVxcdTFFNkRcXHUwMjFCXFx1MDE2M1xcdTFFNzFcXHUxRTZGXFx1MDE2N1xcdTAxQURcXHUwMjg4XFx1MkM2NlxcdUE3ODddL2cgfSwgeyAnYmFzZSc6ICd0eicsICdsZXR0ZXJzJzogL1tcXHVBNzI5XS9nIH0sIHsgJ2Jhc2UnOiAndScsICdsZXR0ZXJzJzogL1tcXHUwMDc1XFx1MjRFNFxcdUZGNTVcXHUwMEY5XFx1MDBGQVxcdTAwRkJcXHUwMTY5XFx1MUU3OVxcdTAxNkJcXHUxRTdCXFx1MDE2RFxcdTAwRkNcXHUwMURDXFx1MDFEOFxcdTAxRDZcXHUwMURBXFx1MUVFN1xcdTAxNkZcXHUwMTcxXFx1MDFENFxcdTAyMTVcXHUwMjE3XFx1MDFCMFxcdTFFRUJcXHUxRUU5XFx1MUVFRlxcdTFFRURcXHUxRUYxXFx1MUVFNVxcdTFFNzNcXHUwMTczXFx1MUU3N1xcdTFFNzVcXHUwMjg5XS9nIH0sIHsgJ2Jhc2UnOiAndicsICdsZXR0ZXJzJzogL1tcXHUwMDc2XFx1MjRFNVxcdUZGNTZcXHUxRTdEXFx1MUU3RlxcdTAyOEJcXHVBNzVGXFx1MDI4Q10vZyB9LCB7ICdiYXNlJzogJ3Z5JywgJ2xldHRlcnMnOiAvW1xcdUE3NjFdL2cgfSwgeyAnYmFzZSc6ICd3JywgJ2xldHRlcnMnOiAvW1xcdTAwNzdcXHUyNEU2XFx1RkY1N1xcdTFFODFcXHUxRTgzXFx1MDE3NVxcdTFFODdcXHUxRTg1XFx1MUU5OFxcdTFFODlcXHUyQzczXS9nIH0sIHsgJ2Jhc2UnOiAneCcsICdsZXR0ZXJzJzogL1tcXHUwMDc4XFx1MjRFN1xcdUZGNThcXHUxRThCXFx1MUU4RF0vZyB9LCB7ICdiYXNlJzogJ3knLCAnbGV0dGVycyc6IC9bXFx1MDA3OVxcdTI0RThcXHVGRjU5XFx1MUVGM1xcdTAwRkRcXHUwMTc3XFx1MUVGOVxcdTAyMzNcXHUxRThGXFx1MDBGRlxcdTFFRjdcXHUxRTk5XFx1MUVGNVxcdTAxQjRcXHUwMjRGXFx1MUVGRl0vZyB9LCB7ICdiYXNlJzogJ3onLCAnbGV0dGVycyc6IC9bXFx1MDA3QVxcdTI0RTlcXHVGRjVBXFx1MDE3QVxcdTFFOTFcXHUwMTdDXFx1MDE3RVxcdTFFOTNcXHUxRTk1XFx1MDFCNlxcdTAyMjVcXHUwMjQwXFx1MkM2Q1xcdUE3NjNdL2cgfV07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc3RyaXBEaWFjcml0aWNzKHN0cikge1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IG1hcC5sZW5ndGg7IGkrKykge1xuXHRcdHN0ciA9IHN0ci5yZXBsYWNlKG1hcFtpXS5sZXR0ZXJzLCBtYXBbaV0uYmFzZSk7XG5cdH1cblx0cmV0dXJuIHN0cjtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3Qtc2VsZWN0L2xpYi91dGlscy9zdHJpcERpYWNyaXRpY3MuanNcbiAqKiBtb2R1bGUgaWQgPSAxMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmpRdWVyeSA9IGV4cG9ydHMuYW5pbWF0aW9uID0gdW5kZWZpbmVkO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZShcInJlYWN0XCIpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdEFkZG9uc1VwZGF0ZSA9IHJlcXVpcmUoXCJyZWFjdC1hZGRvbnMtdXBkYXRlXCIpO1xuXG52YXIgX3JlYWN0QWRkb25zVXBkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0QWRkb25zVXBkYXRlKTtcblxudmFyIF9jbGFzc25hbWVzID0gcmVxdWlyZShcImNsYXNzbmFtZXNcIik7XG5cbnZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblxudmFyIF9hbmltYXRpb25NaXhpbiA9IHJlcXVpcmUoXCIuL2FuaW1hdGlvbk1peGluXCIpO1xuXG52YXIgX2FuaW1hdGlvbk1peGluMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FuaW1hdGlvbk1peGluKTtcblxudmFyIF9qUXVlcnlNaXhpbiA9IHJlcXVpcmUoXCIuL2pRdWVyeU1peGluXCIpO1xuXG52YXIgX2pRdWVyeU1peGluMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2pRdWVyeU1peGluKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnZhciBUb2FzdE1lc3NhZ2VTcGVjID0ge1xuICBkaXNwbGF5TmFtZTogXCJUb2FzdE1lc3NhZ2VcIixcblxuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICB2YXIgaWNvbkNsYXNzTmFtZXMgPSB7XG4gICAgICBlcnJvcjogXCJ0b2FzdC1lcnJvclwiLFxuICAgICAgaW5mbzogXCJ0b2FzdC1pbmZvXCIsXG4gICAgICBzdWNjZXNzOiBcInRvYXN0LXN1Y2Nlc3NcIixcbiAgICAgIHdhcm5pbmc6IFwidG9hc3Qtd2FybmluZ1wiXG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICBjbGFzc05hbWU6IFwidG9hc3RcIixcbiAgICAgIGljb25DbGFzc05hbWVzOiBpY29uQ2xhc3NOYW1lcyxcbiAgICAgIHRpdGxlQ2xhc3NOYW1lOiBcInRvYXN0LXRpdGxlXCIsXG4gICAgICBtZXNzYWdlQ2xhc3NOYW1lOiBcInRvYXN0LW1lc3NhZ2VcIixcbiAgICAgIHRhcFRvRGlzbWlzczogdHJ1ZSxcbiAgICAgIGNsb3NlQnV0dG9uOiBmYWxzZVxuICAgIH07XG4gIH0sXG4gIGhhbmRsZU9uQ2xpY2s6IGZ1bmN0aW9uIGhhbmRsZU9uQ2xpY2soZXZlbnQpIHtcbiAgICB0aGlzLnByb3BzLmhhbmRsZU9uQ2xpY2soZXZlbnQpO1xuICAgIGlmICh0aGlzLnByb3BzLnRhcFRvRGlzbWlzcykge1xuICAgICAgdGhpcy5oaWRlVG9hc3QodHJ1ZSk7XG4gICAgfVxuICB9LFxuICBfaGFuZGxlX2Nsb3NlX2J1dHRvbl9jbGljazogZnVuY3Rpb24gX2hhbmRsZV9jbG9zZV9idXR0b25fY2xpY2soZXZlbnQpIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB0aGlzLmhpZGVUb2FzdCh0cnVlKTtcbiAgfSxcbiAgX2hhbmRsZV9yZW1vdmU6IGZ1bmN0aW9uIF9oYW5kbGVfcmVtb3ZlKCkge1xuICAgIHRoaXMucHJvcHMuaGFuZGxlUmVtb3ZlKHRoaXMucHJvcHMudG9hc3RJZCk7XG4gIH0sXG4gIF9yZW5kZXJfY2xvc2VfYnV0dG9uOiBmdW5jdGlvbiBfcmVuZGVyX2Nsb3NlX2J1dHRvbigpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5jbG9zZUJ1dHRvbiA/IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcbiAgICAgIGNsYXNzTmFtZTogXCJ0b2FzdC1jbG9zZS1idXR0b25cIiwgcm9sZTogXCJidXR0b25cIixcbiAgICAgIG9uQ2xpY2s6IHRoaXMuX2hhbmRsZV9jbG9zZV9idXR0b25fY2xpY2ssXG4gICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTDogeyBfX2h0bWw6IFwiJnRpbWVzO1wiIH1cbiAgICB9KSA6IGZhbHNlO1xuICB9LFxuICBfcmVuZGVyX3RpdGxlX2VsZW1lbnQ6IGZ1bmN0aW9uIF9yZW5kZXJfdGl0bGVfZWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy50aXRsZSA/IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgXCJkaXZcIixcbiAgICAgIHsgY2xhc3NOYW1lOiB0aGlzLnByb3BzLnRpdGxlQ2xhc3NOYW1lIH0sXG4gICAgICB0aGlzLnByb3BzLnRpdGxlXG4gICAgKSA6IGZhbHNlO1xuICB9LFxuICBfcmVuZGVyX21lc3NhZ2VfZWxlbWVudDogZnVuY3Rpb24gX3JlbmRlcl9tZXNzYWdlX2VsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMubWVzc2FnZSA/IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgXCJkaXZcIixcbiAgICAgIHsgY2xhc3NOYW1lOiB0aGlzLnByb3BzLm1lc3NhZ2VDbGFzc05hbWUgfSxcbiAgICAgIHRoaXMucHJvcHMubWVzc2FnZVxuICAgICkgOiBmYWxzZTtcbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIGljb25DbGFzc05hbWUgPSB0aGlzLnByb3BzLmljb25DbGFzc05hbWUgfHwgdGhpcy5wcm9wcy5pY29uQ2xhc3NOYW1lc1t0aGlzLnByb3BzLnR5cGVdO1xuXG4gICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgXCJkaXZcIixcbiAgICAgIHtcbiAgICAgICAgY2xhc3NOYW1lOiAoMCwgX2NsYXNzbmFtZXMyLmRlZmF1bHQpKHRoaXMucHJvcHMuY2xhc3NOYW1lLCBpY29uQ2xhc3NOYW1lKSxcbiAgICAgICAgc3R5bGU6IHRoaXMucHJvcHMuc3R5bGUsXG4gICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlT25DbGljayxcbiAgICAgICAgb25Nb3VzZUVudGVyOiB0aGlzLmhhbmRsZU1vdXNlRW50ZXIsXG4gICAgICAgIG9uTW91c2VMZWF2ZTogdGhpcy5oYW5kbGVNb3VzZUxlYXZlXG4gICAgICB9LFxuICAgICAgdGhpcy5fcmVuZGVyX2Nsb3NlX2J1dHRvbigpLFxuICAgICAgdGhpcy5fcmVuZGVyX3RpdGxlX2VsZW1lbnQoKSxcbiAgICAgIHRoaXMuX3JlbmRlcl9tZXNzYWdlX2VsZW1lbnQoKVxuICAgICk7XG4gIH1cbn07XG5cbnZhciBhbmltYXRpb24gPSBleHBvcnRzLmFuaW1hdGlvbiA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVDbGFzcygoMCwgX3JlYWN0QWRkb25zVXBkYXRlMi5kZWZhdWx0KShUb2FzdE1lc3NhZ2VTcGVjLCB7XG4gIGRpc3BsYXlOYW1lOiB7ICRzZXQ6IFwiVG9hc3RNZXNzYWdlLmFuaW1hdGlvblwiIH0sXG4gIG1peGluczogeyAkc2V0OiBbX2FuaW1hdGlvbk1peGluMi5kZWZhdWx0XSB9XG59KSk7XG5cbnZhciBqUXVlcnkgPSBleHBvcnRzLmpRdWVyeSA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVDbGFzcygoMCwgX3JlYWN0QWRkb25zVXBkYXRlMi5kZWZhdWx0KShUb2FzdE1lc3NhZ2VTcGVjLCB7XG4gIGRpc3BsYXlOYW1lOiB7ICRzZXQ6IFwiVG9hc3RNZXNzYWdlLmpRdWVyeVwiIH0sXG4gIG1peGluczogeyAkc2V0OiBbX2pRdWVyeU1peGluMi5kZWZhdWx0XSB9XG59KSk7XG5cbi8qXG4gKiBhc3NpZ24gZGVmYXVsdCBub29wIGZ1bmN0aW9uc1xuICovXG5Ub2FzdE1lc3NhZ2VTcGVjLmhhbmRsZU1vdXNlRW50ZXIgPSBub29wO1xuVG9hc3RNZXNzYWdlU3BlYy5oYW5kbGVNb3VzZUxlYXZlID0gbm9vcDtcblRvYXN0TWVzc2FnZVNwZWMuaGlkZVRvYXN0ID0gbm9vcDtcblxudmFyIFRvYXN0TWVzc2FnZSA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVDbGFzcyhUb2FzdE1lc3NhZ2VTcGVjKTtcblxuVG9hc3RNZXNzYWdlLmFuaW1hdGlvbiA9IGFuaW1hdGlvbjtcblRvYXN0TWVzc2FnZS5qUXVlcnkgPSBqUXVlcnk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFRvYXN0TWVzc2FnZTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yZWFjdC10b2FzdHIvbGliL1RvYXN0TWVzc2FnZS9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDEyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJ3JlYWN0L2xpYi91cGRhdGUnKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yZWFjdC10b2FzdHIvfi9yZWFjdC1hZGRvbnMtdXBkYXRlL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gMTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIHRoaXMuX2V2ZW50cyA9IHRoaXMuX2V2ZW50cyB8fCB7fTtcbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gdGhpcy5fbWF4TGlzdGVuZXJzIHx8IHVuZGVmaW5lZDtcbn1cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xuXG4vLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLnhcbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDtcblxuLy8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlXG4vLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLlxuRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDtcblxuLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzXG4vLyB0aGF0IHRvIGJlIGluY3JlYXNlZC4gU2V0IHRvIHplcm8gZm9yIHVubGltaXRlZC5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24obikge1xuICBpZiAoIWlzTnVtYmVyKG4pIHx8IG4gPCAwIHx8IGlzTmFOKG4pKVxuICAgIHRocm93IFR5cGVFcnJvcignbiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG4gIHRoaXMuX21heExpc3RlbmVycyA9IG47XG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24odHlwZSkge1xuICB2YXIgZXIsIGhhbmRsZXIsIGxlbiwgYXJncywgaSwgbGlzdGVuZXJzO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXG4gIC8vIElmIHRoZXJlIGlzIG5vICdlcnJvcicgZXZlbnQgbGlzdGVuZXIgdGhlbiB0aHJvdy5cbiAgaWYgKHR5cGUgPT09ICdlcnJvcicpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50cy5lcnJvciB8fFxuICAgICAgICAoaXNPYmplY3QodGhpcy5fZXZlbnRzLmVycm9yKSAmJiAhdGhpcy5fZXZlbnRzLmVycm9yLmxlbmd0aCkpIHtcbiAgICAgIGVyID0gYXJndW1lbnRzWzFdO1xuICAgICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XG4gICAgICB9XG4gICAgICB0aHJvdyBUeXBlRXJyb3IoJ1VuY2F1Z2h0LCB1bnNwZWNpZmllZCBcImVycm9yXCIgZXZlbnQuJyk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlciA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICBpZiAoaXNVbmRlZmluZWQoaGFuZGxlcikpXG4gICAgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XG4gICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAvLyBmYXN0IGNhc2VzXG4gICAgICBjYXNlIDE6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICAvLyBzbG93ZXJcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICBoYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc09iamVjdChoYW5kbGVyKSkge1xuICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgIGxpc3RlbmVycyA9IGhhbmRsZXIuc2xpY2UoKTtcbiAgICBsZW4gPSBsaXN0ZW5lcnMubGVuZ3RoO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKylcbiAgICAgIGxpc3RlbmVyc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBtO1xuXG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcblxuICAvLyBUbyBhdm9pZCByZWN1cnNpb24gaW4gdGhlIGNhc2UgdGhhdCB0eXBlID09PSBcIm5ld0xpc3RlbmVyXCIhIEJlZm9yZVxuICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG4gIGlmICh0aGlzLl9ldmVudHMubmV3TGlzdGVuZXIpXG4gICAgdGhpcy5lbWl0KCduZXdMaXN0ZW5lcicsIHR5cGUsXG4gICAgICAgICAgICAgIGlzRnVuY3Rpb24obGlzdGVuZXIubGlzdGVuZXIpID9cbiAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gbGlzdGVuZXI7XG4gIGVsc2UgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkpXG4gICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5wdXNoKGxpc3RlbmVyKTtcbiAgZWxzZVxuICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IFt0aGlzLl9ldmVudHNbdHlwZV0sIGxpc3RlbmVyXTtcblxuICAvLyBDaGVjayBmb3IgbGlzdGVuZXIgbGVha1xuICBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSAmJiAhdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCkge1xuICAgIGlmICghaXNVbmRlZmluZWQodGhpcy5fbWF4TGlzdGVuZXJzKSkge1xuICAgICAgbSA9IHRoaXMuX21heExpc3RlbmVycztcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzO1xuICAgIH1cblxuICAgIGlmIChtICYmIG0gPiAwICYmIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGggPiBtKSB7XG4gICAgICB0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkID0gdHJ1ZTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJyhub2RlKSB3YXJuaW5nOiBwb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5ICcgK1xuICAgICAgICAgICAgICAgICAgICAnbGVhayBkZXRlY3RlZC4gJWQgbGlzdGVuZXJzIGFkZGVkLiAnICtcbiAgICAgICAgICAgICAgICAgICAgJ1VzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0LicsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGgpO1xuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLnRyYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgaW4gSUUgMTBcbiAgICAgICAgY29uc29sZS50cmFjZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICB2YXIgZmlyZWQgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBnKCkge1xuICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgZyk7XG5cbiAgICBpZiAoIWZpcmVkKSB7XG4gICAgICBmaXJlZCA9IHRydWU7XG4gICAgICBsaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxuXG4gIGcubGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgdGhpcy5vbih0eXBlLCBnKTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIGVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZmYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIGxpc3QsIHBvc2l0aW9uLCBsZW5ndGgsIGk7XG5cbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgbGlzdCA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgbGVuZ3RoID0gbGlzdC5sZW5ndGg7XG4gIHBvc2l0aW9uID0gLTE7XG5cbiAgaWYgKGxpc3QgPT09IGxpc3RlbmVyIHx8XG4gICAgICAoaXNGdW5jdGlvbihsaXN0Lmxpc3RlbmVyKSAmJiBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuXG4gIH0gZWxzZSBpZiAoaXNPYmplY3QobGlzdCkpIHtcbiAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSA+IDA7KSB7XG4gICAgICBpZiAobGlzdFtpXSA9PT0gbGlzdGVuZXIgfHxcbiAgICAgICAgICAobGlzdFtpXS5saXN0ZW5lciAmJiBsaXN0W2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICAgICAgcG9zaXRpb24gPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocG9zaXRpb24gPCAwKVxuICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgIGxpc3QubGVuZ3RoID0gMDtcbiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpc3Quc3BsaWNlKHBvc2l0aW9uLCAxKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciBrZXksIGxpc3RlbmVycztcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICByZXR1cm4gdGhpcztcblxuICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG4gIGlmICghdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApXG4gICAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICBlbHNlIGlmICh0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gZW1pdCByZW1vdmVMaXN0ZW5lciBmb3IgYWxsIGxpc3RlbmVycyBvbiBhbGwgZXZlbnRzXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgZm9yIChrZXkgaW4gdGhpcy5fZXZlbnRzKSB7XG4gICAgICBpZiAoa2V5ID09PSAncmVtb3ZlTGlzdGVuZXInKSBjb250aW51ZTtcbiAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XG4gICAgfVxuICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZW1vdmVMaXN0ZW5lcicpO1xuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIGlmIChpc0Z1bmN0aW9uKGxpc3RlbmVycykpIHtcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG4gIH0gZWxzZSBpZiAobGlzdGVuZXJzKSB7XG4gICAgLy8gTElGTyBvcmRlclxuICAgIHdoaWxlIChsaXN0ZW5lcnMubGVuZ3RoKVxuICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbbGlzdGVuZXJzLmxlbmd0aCAtIDFdKTtcbiAgfVxuICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciByZXQ7XG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0ID0gW107XG4gIGVsc2UgaWYgKGlzRnVuY3Rpb24odGhpcy5fZXZlbnRzW3R5cGVdKSlcbiAgICByZXQgPSBbdGhpcy5fZXZlbnRzW3R5cGVdXTtcbiAgZWxzZVxuICAgIHJldCA9IHRoaXMuX2V2ZW50c1t0eXBlXS5zbGljZSgpO1xuICByZXR1cm4gcmV0O1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24odHlwZSkge1xuICBpZiAodGhpcy5fZXZlbnRzKSB7XG4gICAgdmFyIGV2bGlzdGVuZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgICBpZiAoaXNGdW5jdGlvbihldmxpc3RlbmVyKSlcbiAgICAgIHJldHVybiAxO1xuICAgIGVsc2UgaWYgKGV2bGlzdGVuZXIpXG4gICAgICByZXR1cm4gZXZsaXN0ZW5lci5sZW5ndGg7XG4gIH1cbiAgcmV0dXJuIDA7XG59O1xuXG5FdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcbiAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJDb3VudCh0eXBlKTtcbn07XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xufVxuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuXG5mdW5jdGlvbiBpc09iamVjdChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNVbmRlZmluZWQoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IHZvaWQgMDtcbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9ldmVudHMvZXZlbnRzLmpzXG4gKiogbW9kdWxlIGlkID0gMTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxuXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBzZXRUaW1lb3V0KGRyYWluUXVldWUsIDApO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qc1xuICoqIG1vZHVsZSBpZCA9IDE1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgY2xhc3NTZXQgZnJvbSAnY2xhc3NuYW1lcyc7XHJcbmltcG9ydCBDb25zdCBmcm9tICcuL0NvbnN0JztcclxuaW1wb3J0IFRhYmxlSGVhZGVyIGZyb20gJy4vVGFibGVIZWFkZXInO1xyXG5pbXBvcnQgVGFibGVCb2R5IGZyb20gJy4vVGFibGVCb2R5JztcclxuaW1wb3J0IFBhZ2luYXRpb25MaXN0IGZyb20gJy4vcGFnaW5hdGlvbi9QYWdpbmF0aW9uTGlzdCc7XHJcbmltcG9ydCBUb29sQmFyIGZyb20gJy4vdG9vbGJhci9Ub29sQmFyJztcclxuaW1wb3J0IFRhYmxlRmlsdGVyIGZyb20gJy4vVGFibGVGaWx0ZXInO1xyXG5pbXBvcnQge1RhYmxlRGF0YVN0b3JlfSBmcm9tICcuL3N0b3JlL1RhYmxlRGF0YVN0b3JlJztcclxuaW1wb3J0IGV4cG9ydENTViBmcm9tICcuL2Nzdl9leHBvcnRfdXRpbCc7XHJcbmltcG9ydCB7RmlsdGVyfSBmcm9tICcuL0ZpbHRlcic7XHJcblxyXG5jbGFzcyBCb290c3RyYXBUYWJsZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcblxyXG4gICAgdGhpcy5fYXR0YWNoQ2VsbEVkaXRGdW5jKCk7XHJcblxyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHRoaXMucHJvcHMuZGF0YSkpIHtcclxuICAgICAgdGhpcy5zdG9yZSA9IG5ldyBUYWJsZURhdGFTdG9yZSh0aGlzLnByb3BzLmRhdGEuZ2V0RGF0YSgpKTtcclxuICAgICAgdGhpcy5wcm9wcy5kYXRhLmNsZWFyKCk7XHJcbiAgICAgIHRoaXMucHJvcHMuZGF0YS5vbignY2hhbmdlJywgKGRhdGEpID0+IHtcclxuICAgICAgICB0aGlzLnN0b3JlLnNldERhdGEoZGF0YSk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICBkYXRhOiB0aGlzLmdldFRhYmxlRGF0YSgpXHJcbiAgICAgICAgfSlcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsZXQgY29weSA9IHRoaXMucHJvcHMuZGF0YS5zbGljZSgpO1xyXG4gICAgICB0aGlzLnN0b3JlID0gbmV3IFRhYmxlRGF0YVN0b3JlKGNvcHkpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaW5pdFRhYmxlKHRoaXMucHJvcHMpO1xyXG5cclxuICAgIGlmICh0aGlzLmZpbHRlcikge1xyXG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgdGhpcy5maWx0ZXIub24oJ29uRmlsdGVyQ2hhbmdlJywgKGN1cnJlbnRGaWx0ZXIpID0+IHtcclxuICAgICAgICBzZWxmLmhhbmRsZUZpbHRlckRhdGEoY3VycmVudEZpbHRlcik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnByb3BzLnNlbGVjdFJvdyAmJiB0aGlzLnByb3BzLnNlbGVjdFJvdy5zZWxlY3RlZCkge1xyXG4gICAgICBsZXQgY29weSA9IHRoaXMucHJvcHMuc2VsZWN0Um93LnNlbGVjdGVkLnNsaWNlKCk7XHJcbiAgICAgIHRoaXMuc3RvcmUuc2V0U2VsZWN0ZWRSb3dLZXkoY29weSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgZGF0YTogdGhpcy5nZXRUYWJsZURhdGEoKSxcclxuICAgICAgY3VyclBhZ2U6IHRoaXMucHJvcHMub3B0aW9ucy5wYWdlIHx8IDEsXHJcbiAgICAgIHNpemVQZXJQYWdlOiB0aGlzLnByb3BzLm9wdGlvbnMuc2l6ZVBlclBhZ2UgfHwgQ29uc3QuU0laRV9QRVJfUEFHRV9MSVNUWzBdLFxyXG4gICAgICBzZWxlY3RlZFJvd0tleXM6IHRoaXMuc3RvcmUuZ2V0U2VsZWN0ZWRSb3dLZXlzKClcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBpbml0VGFibGUocHJvcHMpe1xyXG4gICAgbGV0IHtrZXlGaWVsZH0gPSBwcm9wcztcclxuXHJcbiAgICBjb25zdCBpc0tleUZpZWxkRGVmaW5lZCA9IHR5cGVvZiBrZXlGaWVsZCA9PT0gJ3N0cmluZycgJiYga2V5RmllbGQubGVuZ3RoO1xyXG4gICAgUmVhY3QuQ2hpbGRyZW4uZm9yRWFjaChwcm9wcy5jaGlsZHJlbiwgY29sdW1uPT4ge1xyXG4gICAgICBpZiAoY29sdW1uLnByb3BzLmlzS2V5KSB7XHJcbiAgICAgICAgaWYgKGtleUZpZWxkKSB7XHJcbiAgICAgICAgICB0aHJvdyBcIkVycm9yLiBNdWx0aXBsZSBrZXkgY29sdW1uIGJlIGRldGVjdGVkIGluIFRhYmxlSGVhZGVyQ29sdW1uLlwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBrZXlGaWVsZCA9IGNvbHVtbi5wcm9wcy5kYXRhRmllbGQ7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGNvbHVtbi5wcm9wcy5maWx0ZXIpIHtcclxuICAgICAgICAvLyBhIGNvbHVtbiBjb250YWlucyBhIGZpbHRlclxyXG4gICAgICAgIGlmICghdGhpcy5maWx0ZXIpIHtcclxuICAgICAgICAgIC8vIGZpcnN0IHRpbWUgY3JlYXRlIHRoZSBmaWx0ZXIgb24gdGhlIEJvb3RzdHJhcFRhYmxlXHJcbiAgICAgICAgICB0aGlzLmZpbHRlciA9IG5ldyBGaWx0ZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcGFzcyB0aGUgZmlsdGVyIHRvIGNvbHVtbiB3aXRoIGZpbHRlclxyXG4gICAgICAgIGNvbHVtbi5wcm9wcy5maWx0ZXIuZW1pdHRlciA9IHRoaXMuZmlsdGVyO1xyXG4gICAgICB9XHJcbiAgICB9LCB0aGlzKTtcclxuXHJcbiAgICBsZXQgY29sSW5mb3MgPSB0aGlzLmdldENvbHVtbnNEZXNjcmlwdGlvbihwcm9wcykucmVkdWNlKCggcHJldiwgY3VyciApID0+IHtcclxuICAgICAgcHJldltjdXJyLm5hbWVdID0gY3VycjtcclxuICAgICAgcmV0dXJuIHByZXY7XHJcbiAgICB9LCB7fSk7XHJcblxyXG4gICAgaWYgKCFpc0tleUZpZWxkRGVmaW5lZCAmJiAha2V5RmllbGQpXHJcbiAgICAgIHRocm93IGBFcnJvci4gTm8gYW55IGtleSBjb2x1bW4gZGVmaW5lZCBpbiBUYWJsZUhlYWRlckNvbHVtbi5cclxuICAgICAgICAgICAgVXNlICdpc0tleT17dHJ1ZX0nIHRvIHNwZWNpZnkgYSB1bmlxdWUgY29sdW1uIGFmdGVyIHZlcnNpb24gMC41LjQuYDtcclxuXHJcbiAgICB0aGlzLnN0b3JlLnNldFByb3BzKHtcclxuICAgICAgaXNQYWdpbmF0aW9uOiBwcm9wcy5wYWdpbmF0aW9uLFxyXG4gICAgICBrZXlGaWVsZDoga2V5RmllbGQsXHJcbiAgICAgIGNvbEluZm9zOiBjb2xJbmZvcyxcclxuICAgICAgbXVsdGlDb2x1bW5TZWFyY2g6IHByb3BzLm11bHRpQ29sdW1uU2VhcmNoLFxyXG4gICAgICByZW1vdGU6IHRoaXMuaXNSZW1vdGVEYXRhU291cmNlKClcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0VGFibGVEYXRhKCkge1xyXG4gICAgIGxldCByZXN1bHQgPSBbXTtcclxuXHJcbiAgICAgaWYodGhpcy5wcm9wcy5vcHRpb25zLnNvcnROYW1lICYmIHRoaXMucHJvcHMub3B0aW9ucy5zb3J0T3JkZXIpXHJcbiAgICAgICB0aGlzLnN0b3JlLnNvcnQodGhpcy5wcm9wcy5vcHRpb25zLnNvcnRPcmRlciwgdGhpcy5wcm9wcy5vcHRpb25zLnNvcnROYW1lKTtcclxuXHJcbiAgICAgaWYgKHRoaXMucHJvcHMucGFnaW5hdGlvbikge1xyXG4gICAgICAgbGV0IHBhZ2UsIHNpemVQZXJQYWdlO1xyXG4gICAgICAgaWYgKHRoaXMuc3RvcmUuaXNDaGFuZ2VkUGFnZSgpKSB7XHJcbiAgICAgICAgc2l6ZVBlclBhZ2UgPSB0aGlzLnN0YXRlLnNpemVQZXJQYWdlO1xyXG4gICAgICAgIHBhZ2UgPSB0aGlzLnN0YXRlLmN1cnJQYWdlO1xyXG4gICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgc2l6ZVBlclBhZ2UgPSB0aGlzLnByb3BzLm9wdGlvbnMuc2l6ZVBlclBhZ2UgfHwgQ29uc3QuU0laRV9QRVJfUEFHRV9MSVNUWzBdO1xyXG4gICAgICAgICBwYWdlID0gdGhpcy5wcm9wcy5vcHRpb25zLnBhZ2UgfHwgMTtcclxuICAgICAgIH1cclxuICAgICAgIHJlc3VsdCA9IHRoaXMuc3RvcmUucGFnZShwYWdlLCBzaXplUGVyUGFnZSkuZ2V0KCk7XHJcbiAgICAgfSBlbHNlIHtcclxuICAgICAgIHJlc3VsdCA9IHRoaXMuc3RvcmUuZ2V0KCk7XHJcbiAgICAgfVxyXG4gICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBnZXRDb2x1bW5zRGVzY3JpcHRpb24oeyBjaGlsZHJlbiB9KSB7XHJcbiAgICByZXR1cm4gY2hpbGRyZW4ubWFwKChjb2x1bW4sIGkpID0+IHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBuYW1lOiBjb2x1bW4ucHJvcHMuZGF0YUZpZWxkLFxyXG4gICAgICAgIGFsaWduOiBjb2x1bW4ucHJvcHMuZGF0YUFsaWduLFxyXG4gICAgICAgIHNvcnQ6IGNvbHVtbi5wcm9wcy5kYXRhU29ydCxcclxuICAgICAgICBmb3JtYXQ6IGNvbHVtbi5wcm9wcy5kYXRhRm9ybWF0LFxyXG4gICAgICAgIGZvcm1hdEV4dHJhRGF0YTogY29sdW1uLnByb3BzLmZvcm1hdEV4dHJhRGF0YSxcclxuICAgICAgICBmaWx0ZXJGb3JtYXR0ZWQ6IGNvbHVtbi5wcm9wcy5maWx0ZXJGb3JtYXR0ZWQsXHJcbiAgICAgICAgZWRpdGFibGU6IGNvbHVtbi5wcm9wcy5lZGl0YWJsZSxcclxuICAgICAgICBoaWRkZW46IGNvbHVtbi5wcm9wcy5oaWRkZW4sXHJcbiAgICAgICAgc2VhcmNoYWJsZTogY29sdW1uLnByb3BzLnNlYXJjaGFibGUsXHJcbiAgICAgICAgY2xhc3NOYW1lOiBjb2x1bW4ucHJvcHMuY29sdW1uQ2xhc3NOYW1lLFxyXG4gICAgICAgIHdpZHRoOiBjb2x1bW4ucHJvcHMud2lkdGgsXHJcbiAgICAgICAgdGV4dDogY29sdW1uLnByb3BzLmNoaWxkcmVuLFxyXG4gICAgICAgIHNvcnRGdW5jOiBjb2x1bW4ucHJvcHMuc29ydEZ1bmMsXHJcbiAgICAgICAgaW5kZXg6IGlcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcclxuICAgIHRoaXMuaW5pdFRhYmxlKG5leHRQcm9wcyk7XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheShuZXh0UHJvcHMuZGF0YSkpIHtcclxuICAgICAgdGhpcy5zdG9yZS5zZXREYXRhKG5leHRQcm9wcy5kYXRhLnNsaWNlKCkpO1xyXG4gICAgICBsZXQgcGFnaW5hdGlvbkRvbSA9IHRoaXMucmVmcy5wYWdpbmF0aW9uO1xyXG4gICAgICBsZXQgcGFnZSA9IHBhZ2luYXRpb25Eb20gJiYgcGFnaW5hdGlvbkRvbS5nZXRDdXJyZW50UGFnZSgpIHx8IG5leHRQcm9wcy5vcHRpb25zLnBhZ2UgfHwgMTtcclxuICAgICAgbGV0IHNpemVQZXJQYWdlID0gcGFnaW5hdGlvbkRvbSAmJiBwYWdpbmF0aW9uRG9tLmdldFNpemVQZXJQYWdlKCkgfHwgbmV4dFByb3BzLm9wdGlvbnMuc2l6ZVBlclBhZ2UgfHwgQ29uc3QuU0laRV9QRVJfUEFHRV9MSVNUWzBdO1xyXG4gICAgICAvLyAjMTI1XHJcbiAgICAgIGlmKHBhZ2UgPiBNYXRoLmNlaWwobmV4dFByb3BzLmRhdGEubGVuZ3RoIC8gc2l6ZVBlclBhZ2UpKSBwYWdlID0gMTtcclxuICAgICAgbGV0IHNvcnRJbmZvID0gdGhpcy5zdG9yZS5nZXRTb3J0SW5mbygpO1xyXG4gICAgICBsZXQgc29ydEZpZWxkID0gbmV4dFByb3BzLm9wdGlvbnMuc29ydE5hbWUgfHwgKHNvcnRJbmZvID8gc29ydEluZm8uc29ydEZpZWxkIDogdW5kZWZpbmVkKTtcclxuICAgICAgbGV0IHNvcnRPcmRlciA9IG5leHRQcm9wcy5vcHRpb25zLnNvcnRPcmRlciB8fCAoc29ydEluZm8gPyBzb3J0SW5mby5vcmRlciA6IHVuZGVmaW5lZCk7XHJcbiAgICAgIGlmKHNvcnRGaWVsZCAmJiBzb3J0T3JkZXIpIHRoaXMuc3RvcmUuc29ydChzb3J0T3JkZXIsIHNvcnRGaWVsZCk7XHJcbiAgICAgIGxldCBkYXRhID0gdGhpcy5zdG9yZS5wYWdlKHBhZ2UsIHNpemVQZXJQYWdlKS5nZXQoKTtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgICBjdXJyUGFnZTogcGFnZSxcclxuICAgICAgICBzaXplUGVyUGFnZTogc2l6ZVBlclBhZ2VcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobmV4dFByb3BzLnNlbGVjdFJvdyAmJiBuZXh0UHJvcHMuc2VsZWN0Um93LnNlbGVjdGVkKSB7XHJcbiAgICAgIC8vc2V0IGRlZmF1bHQgc2VsZWN0IHJvd3MgdG8gc3RvcmUuXHJcbiAgICAgIGxldCBjb3B5ID0gbmV4dFByb3BzLnNlbGVjdFJvdy5zZWxlY3RlZC5zbGljZSgpO1xyXG4gICAgICB0aGlzLnN0b3JlLnNldFNlbGVjdGVkUm93S2V5KGNvcHkpO1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICBzZWxlY3RlZFJvd0tleXM6IGNvcHlcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgIHRoaXMuX2FkanVzdEhlYWRlcldpZHRoKCk7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5fYWRqdXN0SGVhZGVyV2lkdGgpO1xyXG4gICAgdGhpcy5yZWZzLmJvZHkucmVmcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5fc2Nyb2xsSGVhZGVyKTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX2FkanVzdEhlYWRlcldpZHRoKTtcclxuICAgIHRoaXMucmVmcy5ib2R5LnJlZnMuY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuX3Njcm9sbEhlYWRlcik7XHJcbiAgICBpZiAodGhpcy5maWx0ZXIpIHtcclxuICAgICAgdGhpcy5maWx0ZXIucmVtb3ZlQWxsTGlzdGVuZXJzKFwib25GaWx0ZXJDaGFuZ2VcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRVcGRhdGUoKSB7XHJcbiAgICB0aGlzLl9hZGp1c3RIZWFkZXJXaWR0aCgpO1xyXG4gICAgdGhpcy5fYXR0YWNoQ2VsbEVkaXRGdW5jKCk7XHJcbiAgICBpZiAodGhpcy5wcm9wcy5vcHRpb25zLmFmdGVyVGFibGVDb21wbGV0ZSlcclxuICAgICAgdGhpcy5wcm9wcy5vcHRpb25zLmFmdGVyVGFibGVDb21wbGV0ZSgpO1xyXG4gIH1cclxuXHJcbiAgX2F0dGFjaENlbGxFZGl0RnVuYygpIHtcclxuICAgIGlmICh0aGlzLnByb3BzLmNlbGxFZGl0KSB7XHJcbiAgICAgIHRoaXMucHJvcHMuY2VsbEVkaXQuX19vbkNvbXBsZXRlRWRpdF9fID0gdGhpcy5oYW5kbGVFZGl0Q2VsbC5iaW5kKHRoaXMpO1xyXG4gICAgICBpZiAodGhpcy5wcm9wcy5jZWxsRWRpdC5tb2RlICE9PSBDb25zdC5DRUxMX0VESVRfTk9ORSlcclxuICAgICAgICB0aGlzLnByb3BzLnNlbGVjdFJvdy5jbGlja1RvU2VsZWN0ID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIHRydWUgaWYgaW4gdGhlIGN1cnJlbnQgY29uZmlndXJhdGlvbixcclxuICAgKiB0aGUgZGF0YWdyaWQgc2hvdWxkIGxvYWQgaXRzIGRhdGEgcmVtb3RlbHkuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gIHtPYmplY3R9ICBbcHJvcHNdIE9wdGlvbmFsLiBJZiBub3QgZ2l2ZW4sIHRoaXMucHJvcHMgd2lsbCBiZSB1c2VkXHJcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cclxuICAgKi9cclxuICBpc1JlbW90ZURhdGFTb3VyY2UocHJvcHMpIHtcclxuICAgIHJldHVybiAocHJvcHMgfHwgdGhpcy5wcm9wcykucmVtb3RlO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG5cclxuICAgICAgICB2YXIgdGFibGVDbGFzcyA9IGNsYXNzU2V0KFwicmVhY3QtYnMtdGFibGVcIik7XHJcbiAgICAgICAgdmFyIGNoaWxkcmVucyA9IHRoaXMucHJvcHMuY2hpbGRyZW47XHJcbiAgICAgICAgdmFyIHN0eWxlID0ge1xyXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMucHJvcHMuaGVpZ2h0LFxyXG4gICAgICAgICAgICBtYXhIZWlnaHQ6IHRoaXMucHJvcHMubWF4SGVpZ2h0XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy5wcm9wcy5jaGlsZHJlbikpIHtcclxuICAgICAgICAgICAgY2hpbGRyZW5zID0gW3RoaXMucHJvcHMuY2hpbGRyZW5dO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMuZ2V0Q29sdW1uc0Rlc2NyaXB0aW9uKHRoaXMucHJvcHMpO1xyXG4gICAgICAgIHZhciBzb3J0SW5mbyA9IHRoaXMuc3RvcmUuZ2V0U29ydEluZm8oKTtcclxuICAgICAgICB2YXIgcGFnaW5hdGlvbiA9IHRoaXMucmVuZGVyUGFnaW5hdGlvbigpO1xyXG4gICAgICAgIHZhciB0b29sQmFyID0gdGhpcy5yZW5kZXJUb29sQmFyKCk7XHJcbiAgICAgICAgdmFyIHRhYmxlRmlsdGVyID0gdGhpcy5yZW5kZXJUYWJsZUZpbHRlcihjb2x1bW5zKTtcclxuICAgICAgICB2YXIgaXNTZWxlY3RBbGwgPSB0aGlzLmlzU2VsZWN0QWxsKCk7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWFjdC1icy1jb250YWluZXJcIiByZWY9XCJ0YWJsZVwiPlxyXG4gICAgICAgICAgICAgICAge3Rvb2xCYXJ9XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlYWN0LWJzLXRhYmxlLWNvbnRhaW5lclwiXHJcbiAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VFbnRlcj17dGhpcy5oYW5kbGVNb3VzZUVudGVyLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VMZWF2ZT17dGhpcy5oYW5kbGVNb3VzZUxlYXZlLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXtzdHlsZX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRhYmxlSGVhZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj1cImhlYWRlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd1NlbGVjdFR5cGU9e3RoaXMucHJvcHMuc2VsZWN0Um93Lm1vZGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVTZWxlY3RDb2x1bW49e3RoaXMucHJvcHMuc2VsZWN0Um93LmhpZGVTZWxlY3RDb2x1bW59XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnROYW1lPXtzb3J0SW5mbyA/IHNvcnRJbmZvLnNvcnRGaWVsZCA6IHVuZGVmaW5lZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc29ydE9yZGVyPXtzb3J0SW5mbyA/IHNvcnRJbmZvLm9yZGVyIDogdW5kZWZpbmVkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblNvcnQ9e3RoaXMuaGFuZGxlU29ydC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblNlbGVjdEFsbFJvdz17dGhpcy5oYW5kbGVTZWxlY3RBbGxSb3cuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyZWQ9e3RoaXMucHJvcHMuYm9yZGVyZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRlbnNlZD17dGhpcy5wcm9wcy5jb25kZW5zZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRmlsdGVyZWQ9e3RoaXMuZmlsdGVyID8gdHJ1ZSA6IGZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUlEPXt0aGlzLnByb3BzLnRhYmxlSUR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU2VsZWN0QWxsPXtpc1NlbGVjdEFsbH0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxyXG4gICAgICAgICAgICAgICAgICAgIDwvVGFibGVIZWFkZXI+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRhYmxlQm9keVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9e3RoaXMucHJvcHMuaGVpZ2h0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhIZWlnaHQ9e3RoaXMucHJvcHMubWF4SGVpZ2h0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY9XCJib2R5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YT17dGhpcy5zdGF0ZS5kYXRhfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ckNsYXNzTmFtZT17dGhpcy5wcm9wcy50ckNsYXNzTmFtZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaXBlZD17dGhpcy5wcm9wcy5zdHJpcGVkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJlZD17dGhpcy5wcm9wcy5ib3JkZXJlZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaG92ZXI9e3RoaXMucHJvcHMuaG92ZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleUZpZWxkPXt0aGlzLnN0b3JlLmdldEtleUZpZWxkKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRlbnNlZD17dGhpcy5wcm9wcy5jb25kZW5zZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdFJvdz17dGhpcy5wcm9wcy5zZWxlY3RSb3d9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxFZGl0PXt0aGlzLnByb3BzLmNlbGxFZGl0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFJvd0tleXM9e3RoaXMuc3RhdGUuc2VsZWN0ZWRSb3dLZXlzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblJvd0NsaWNrPXt0aGlzLmhhbmRsZVJvd0NsaWNrLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uUm93TW91c2VPdmVyPXt0aGlzLmhhbmRsZVJvd01vdXNlT3Zlci5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblJvd01vdXNlT3V0PXt0aGlzLmhhbmRsZVJvd01vdXNlT3V0LmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0Um93PXt0aGlzLmhhbmRsZVNlbGVjdFJvdy5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub0RhdGFUZXh0PXt0aGlzLnByb3BzLm9wdGlvbnMubm9EYXRhVGV4dH1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICB7dGFibGVGaWx0ZXJ9XHJcbiAgICAgICAgICAgICAgICB7cGFnaW5hdGlvbn1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICBpc1NlbGVjdEFsbCgpe1xyXG4gICAgdmFyIGRlZmF1bHRTZWxlY3RSb3dLZXlzID0gdGhpcy5zdG9yZS5nZXRTZWxlY3RlZFJvd0tleXMoKTtcclxuICAgIHZhciBhbGxSb3dLZXlzID0gdGhpcy5zdG9yZS5nZXRBbGxSb3drZXkoKTtcclxuICAgIGlmKGRlZmF1bHRTZWxlY3RSb3dLZXlzLmxlbmd0aCAhPT0gYWxsUm93S2V5cy5sZW5ndGgpe1xyXG4gICAgICByZXR1cm4gZGVmYXVsdFNlbGVjdFJvd0tleXMubGVuZ3RoID09PSAwID8gZmFsc2UgOiAnaW5kZXRlcm1pbmF0ZSc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsZWFuU2VsZWN0ZWQoKSB7XHJcbiAgICB0aGlzLnN0b3JlLnNldFNlbGVjdGVkUm93S2V5KFtdKTtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBzZWxlY3RlZFJvd0tleXM6IFtdXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGhhbmRsZVNvcnQob3JkZXIsIHNvcnRGaWVsZCkge1xyXG4gICAgaWYgKHRoaXMucHJvcHMub3B0aW9ucy5vblNvcnRDaGFuZ2UpIHtcclxuICAgICAgdGhpcy5wcm9wcy5vcHRpb25zLm9uU29ydENoYW5nZShzb3J0RmllbGQsIG9yZGVyLCB0aGlzLnByb3BzKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcmVzdWx0ID0gdGhpcy5zdG9yZS5zb3J0KG9yZGVyLCBzb3J0RmllbGQpLmdldCgpO1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGRhdGE6IHJlc3VsdFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVQYWdpbmF0aW9uRGF0YShwYWdlLCBzaXplUGVyUGFnZSkge1xyXG4gICAgY29uc3Qge29uUGFnZUNoYW5nZX0gPSB0aGlzLnByb3BzLm9wdGlvbnM7XHJcbiAgICBpZiAob25QYWdlQ2hhbmdlKSB7XHJcbiAgICAgIG9uUGFnZUNoYW5nZShwYWdlLCBzaXplUGVyUGFnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuaXNSZW1vdGVEYXRhU291cmNlKCkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCByZXN1bHQgPSB0aGlzLnN0b3JlLnBhZ2UocGFnZSwgc2l6ZVBlclBhZ2UpLmdldCgpO1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGRhdGE6IHJlc3VsdCxcclxuICAgICAgY3VyclBhZ2U6IHBhZ2UsXHJcbiAgICAgIHNpemVQZXJQYWdlXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGhhbmRsZU1vdXNlTGVhdmUoKSB7XHJcbiAgICBpZiAodGhpcy5wcm9wcy5vcHRpb25zLm9uTW91c2VMZWF2ZSkge1xyXG4gICAgICB0aGlzLnByb3BzLm9wdGlvbnMub25Nb3VzZUxlYXZlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoYW5kbGVNb3VzZUVudGVyKCkge1xyXG4gICAgaWYgKHRoaXMucHJvcHMub3B0aW9ucy5vbk1vdXNlRW50ZXIpIHtcclxuICAgICAgdGhpcy5wcm9wcy5vcHRpb25zLm9uTW91c2VFbnRlcigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlUm93TW91c2VPdXQocm93KSB7XHJcbiAgICBpZiAodGhpcy5wcm9wcy5vcHRpb25zLm9uUm93TW91c2VPdXQpIHtcclxuICAgICAgdGhpcy5wcm9wcy5vcHRpb25zLm9uUm93TW91c2VPdXQocm93KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhbmRsZVJvd01vdXNlT3Zlcihyb3cpIHtcclxuICAgIGlmICh0aGlzLnByb3BzLm9wdGlvbnMub25Sb3dNb3VzZU92ZXIpIHtcclxuICAgICAgdGhpcy5wcm9wcy5vcHRpb25zLm9uUm93TW91c2VPdmVyKHJvdyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoYW5kbGVSb3dDbGljayhyb3cpIHtcclxuICAgIGlmICh0aGlzLnByb3BzLm9wdGlvbnMub25Sb3dDbGljaykge1xyXG4gICAgICB0aGlzLnByb3BzLm9wdGlvbnMub25Sb3dDbGljayhyb3cpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlU2VsZWN0QWxsUm93KGUpIHtcclxuICAgIHZhciBpc1NlbGVjdGVkID0gZS5jdXJyZW50VGFyZ2V0LmNoZWNrZWQ7XHJcbiAgICBsZXQgc2VsZWN0ZWRSb3dLZXlzID0gW107XHJcbiAgICBsZXQgcmVzdWx0ID0gdHJ1ZTtcclxuICAgIGlmICh0aGlzLnByb3BzLnNlbGVjdFJvdy5vblNlbGVjdEFsbCkge1xyXG4gICAgICByZXN1bHQgPSB0aGlzLnByb3BzLnNlbGVjdFJvdy5vblNlbGVjdEFsbChpc1NlbGVjdGVkLFxyXG4gICAgICAgIGlzU2VsZWN0ZWQgPyB0aGlzLnN0b3JlLmdldCgpIDogW10pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2YgcmVzdWx0ID09PSAndW5kZWZpbmVkJyB8fCByZXN1bHQgIT09IGZhbHNlKSB7XHJcbiAgICAgIGlmIChpc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgc2VsZWN0ZWRSb3dLZXlzID0gdGhpcy5zdG9yZS5nZXRBbGxSb3drZXkoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5zdG9yZS5zZXRTZWxlY3RlZFJvd0tleShzZWxlY3RlZFJvd0tleXMpO1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICBzZWxlY3RlZFJvd0tleXM6IHNlbGVjdGVkUm93S2V5c1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhbmRsZVNob3dPbmx5U2VsZWN0ZWQoKSB7XHJcbiAgICB0aGlzLnN0b3JlLmlnbm9yZU5vblNlbGVjdGVkKCk7XHJcbiAgICBsZXQgcmVzdWx0O1xyXG4gICAgaWYgKHRoaXMucHJvcHMucGFnaW5hdGlvbikge1xyXG4gICAgICByZXN1bHQgPSB0aGlzLnN0b3JlLnBhZ2UoMSwgdGhpcy5zdGF0ZS5zaXplUGVyUGFnZSkuZ2V0KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXN1bHQgPSB0aGlzLnN0b3JlLmdldCgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGRhdGE6IHJlc3VsdCxcclxuICAgICAgY3VyclBhZ2U6IDEsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGhhbmRsZVNlbGVjdFJvdyhyb3csIGlzU2VsZWN0ZWQpIHtcclxuICAgIGxldCBjdXJyU2VsZWN0ZWQgPSB0aGlzLnN0b3JlLmdldFNlbGVjdGVkUm93S2V5cygpO1xyXG4gICAgbGV0IHJvd0tleSA9IHJvd1t0aGlzLnN0b3JlLmdldEtleUZpZWxkKCldO1xyXG4gICAgbGV0IHJlc3VsdCA9IHRydWU7XHJcbiAgICBpZiAodGhpcy5wcm9wcy5zZWxlY3RSb3cub25TZWxlY3QpIHtcclxuICAgICAgcmVzdWx0ID0gdGhpcy5wcm9wcy5zZWxlY3RSb3cub25TZWxlY3Qocm93LCBpc1NlbGVjdGVkKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ3VuZGVmaW5lZCcgfHwgcmVzdWx0ICE9PSBmYWxzZSkge1xyXG4gICAgICBpZiAodGhpcy5wcm9wcy5zZWxlY3RSb3cubW9kZSA9PT0gQ29uc3QuUk9XX1NFTEVDVF9TSU5HTEUpIHtcclxuICAgICAgICBjdXJyU2VsZWN0ZWQgPSBpc1NlbGVjdGVkID8gW3Jvd0tleV0gOiBbXVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChpc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgICBjdXJyU2VsZWN0ZWQucHVzaChyb3dLZXkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjdXJyU2VsZWN0ZWQgPSBjdXJyU2VsZWN0ZWQuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJvd0tleSAhPT0ga2V5O1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnN0b3JlLnNldFNlbGVjdGVkUm93S2V5KGN1cnJTZWxlY3RlZCk7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIHNlbGVjdGVkUm93S2V5czogY3VyclNlbGVjdGVkXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlRWRpdENlbGwobmV3VmFsLCByb3dJbmRleCwgY29sSW5kZXgpIHtcclxuICAgIGxldCBmaWVsZE5hbWU7XHJcbiAgICBSZWFjdC5DaGlsZHJlbi5mb3JFYWNoKHRoaXMucHJvcHMuY2hpbGRyZW4sIGZ1bmN0aW9uIChjb2x1bW4sIGkpIHtcclxuICAgICAgaWYgKGkgPT0gY29sSW5kZXgpIHtcclxuICAgICAgICBmaWVsZE5hbWUgPSBjb2x1bW4ucHJvcHMuZGF0YUZpZWxkO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IHJlc3VsdCA9IHRoaXMuc3RvcmUuZWRpdChuZXdWYWwsIHJvd0luZGV4LCBmaWVsZE5hbWUpLmdldCgpO1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGRhdGE6IHJlc3VsdFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKHRoaXMucHJvcHMuY2VsbEVkaXQuYWZ0ZXJTYXZlQ2VsbCkge1xyXG4gICAgICB0aGlzLnByb3BzLmNlbGxFZGl0LmFmdGVyU2F2ZUNlbGwodGhpcy5zdGF0ZS5kYXRhW3Jvd0luZGV4XSwgZmllbGROYW1lLCBuZXdWYWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlQWRkUm93QmVnaW4oKSB7XHJcbiAgICBpZiAodGhpcy5yZWZzLmJvZHkpIHtcclxuICAgICAgLy8gdGhpcy5yZWZzLmJvZHkuY2FuY2VsRWRpdCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlQWRkUm93QXRCZWdpbihuZXdPYmopIHtcclxuICAgIGxldCByZXN1bHQ7XHJcbiAgICB0cnkge1xyXG4gICAgICB0aGlzLnN0b3JlLmFkZEF0QmVnaW4obmV3T2JqKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgcmV0dXJuIGU7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9oYW5kbGVBZnRlckFkZGluZ1JvdyhuZXdPYmopO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlQWRkUm93KG5ld09iaikge1xyXG5cclxuICAgIGxldCBiZWZvcmVQcm9taXNlID0gdGhpcy5wcm9wcy5vcHRpb25zLmJlZm9yZUluc2VydFJvdyA/IHRoaXMucHJvcHMub3B0aW9ucy5iZWZvcmVJbnNlcnRSb3cobmV3T2JqKSA6IG5ld09ialxyXG5cclxuICAgIC8vZXhlY3V0ZSBiZWZvcmUgYWRkIHJvd1xyXG5cclxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoYmVmb3JlUHJvbWlzZSkudGhlbigobXNnKT0+IHtcclxuICAgICAgICBuZXdPYmogPSBtc2dcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3JlLmFkZChuZXdPYmopO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9oYW5kbGVBZnRlckFkZGluZ1JvdyhuZXdPYmopO1xyXG5cclxuICAgIH0pLmNhdGNoKChlKT0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImdsZWRhaiBvdmRlXCIpXHJcbiAgICAgICAgY29uc29sZS5sb2coZSlcclxuICAgICAgICByZXR1cm4gZS5qc29uKClcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBnZXRTaXplUGVyUGFnZSgpIHtcclxuICAgIHJldHVybiB0aGlzLnN0YXRlLnNpemVQZXJQYWdlO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q3VycmVudFBhZ2UoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5jdXJyUGFnZTtcclxuICB9XHJcblxyXG4gIGhhbmRsZURyb3BSb3cocm93S2V5cykge1xyXG4gICAgbGV0IHRoYXQgPSB0aGlzO1xyXG4gICAgbGV0IGRyb3BSb3dLZXlzID0gcm93S2V5cz9yb3dLZXlzOnRoaXMuc3RvcmUuZ2V0U2VsZWN0ZWRSb3dLZXlzKCk7XHJcbiAgICAvL2FkZCBjb25maXJtIGJlZm9yZSB0aGUgZGVsZXRlIGFjdGlvbiBpZiB0aGF0IG9wdGlvbiBpcyBzZXQuXHJcbiAgICBpZiAoZHJvcFJvd0tleXMgJiYgZHJvcFJvd0tleXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBpZiAodGhpcy5wcm9wcy5vcHRpb25zLmhhbmRsZUNvbmZpcm1EZWxldGVSb3cpe1xyXG4gICAgICAgIHRoaXMucHJvcHMub3B0aW9ucy5oYW5kbGVDb25maXJtRGVsZXRlUm93KFxyXG4gICAgICAgICAgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdGhhdC5kZWxldGVSb3coZHJvcFJvd0tleXMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSBpZiAoY29uZmlybSgnQXJlIHlvdSBzdXJlIHdhbnQgZGVsZXRlPycpKSB7XHJcbiAgICAgICAgdGhpcy5kZWxldGVSb3coZHJvcFJvd0tleXMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkZWxldGVSb3coZHJvcFJvd0tleXMpe1xyXG5cclxuICAgIGxldCByZXN1bHQ7XHJcbiAgICB0aGlzLnN0b3JlLnJlbW92ZShkcm9wUm93S2V5cyk7ICAvL3JlbW92ZSBzZWxlY3RlZCBSb3dcclxuICAgIHRoaXMuc3RvcmUuc2V0U2VsZWN0ZWRSb3dLZXkoW10pOyAgLy9jbGVhciBzZWxlY3RlZCByb3cga2V5XHJcblxyXG4gICAgaWYgKHRoaXMucHJvcHMucGFnaW5hdGlvbikge1xyXG4gICAgICBjb25zdCB7IHNpemVQZXJQYWdlIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICBsZXQgeyBjdXJyUGFnZSB9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgbGV0IGN1cnJMYXN0UGFnZSA9IE1hdGguY2VpbCh0aGlzLnN0b3JlLmdldERhdGFOdW0oKSAvIHNpemVQZXJQYWdlKTtcclxuICAgICAgaWYgKGN1cnJQYWdlID4gY3Vyckxhc3RQYWdlKVxyXG4gICAgICAgIGN1cnJQYWdlID0gY3Vyckxhc3RQYWdlO1xyXG4gICAgICByZXN1bHQgPSB0aGlzLnN0b3JlLnBhZ2UoY3VyclBhZ2UsIHNpemVQZXJQYWdlKS5nZXQoKTtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgZGF0YTogcmVzdWx0LFxyXG4gICAgICAgIHNlbGVjdGVkUm93S2V5czogdGhpcy5zdG9yZS5nZXRTZWxlY3RlZFJvd0tleXMoKSxcclxuICAgICAgICBjdXJyUGFnZVxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlc3VsdCA9IHRoaXMuc3RvcmUuZ2V0KCk7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIGRhdGE6IHJlc3VsdCxcclxuICAgICAgICBzZWxlY3RlZFJvd0tleXM6IHRoaXMuc3RvcmUuZ2V0U2VsZWN0ZWRSb3dLZXlzKClcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5wcm9wcy5vcHRpb25zLmFmdGVyRGVsZXRlUm93KSB7XHJcbiAgICAgIHRoaXMucHJvcHMub3B0aW9ucy5hZnRlckRlbGV0ZVJvdyhkcm9wUm93S2V5cyk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgaGFuZGxlRmlsdGVyRGF0YShmaWx0ZXJPYmopIHtcclxuICAgIHRoaXMuc3RvcmUuZmlsdGVyKGZpbHRlck9iaik7XHJcbiAgICBsZXQgcmVzdWx0O1xyXG4gICAgaWYgKHRoaXMucHJvcHMucGFnaW5hdGlvbikge1xyXG4gICAgICBjb25zdCB7IHNpemVQZXJQYWdlIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICByZXN1bHQgPSB0aGlzLnN0b3JlLnBhZ2UoMSwgc2l6ZVBlclBhZ2UpLmdldCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVzdWx0ID0gdGhpcy5zdG9yZS5nZXQoKTtcclxuICAgIH1cclxuICAgIGlmKHRoaXMucHJvcHMub3B0aW9ucy5hZnRlckNvbHVtbkZpbHRlcilcclxuICAgICAgdGhpcy5wcm9wcy5vcHRpb25zLmFmdGVyQ29sdW1uRmlsdGVyKGZpbHRlck9iaixcclxuICAgICAgICB0aGlzLnN0b3JlLmdldERhdGFJZ25vcmluZ1BhZ2luYXRpb24oKSk7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgZGF0YTogcmVzdWx0LFxyXG4gICAgICBjdXJyUGFnZTogMVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVFeHBvcnRDU1YoKSB7XHJcbiAgICB2YXIgcmVzdWx0ID0gdGhpcy5zdG9yZS5nZXREYXRhSWdub3JpbmdQYWdpbmF0aW9uKCk7XHJcbiAgICB2YXIga2V5cyA9IFtdO1xyXG4gICAgdGhpcy5wcm9wcy5jaGlsZHJlbi5tYXAoZnVuY3Rpb24oY29sdW1uKSB7XHJcbiAgICAgIGlmIChjb2x1bW4ucHJvcHMuaGlkZGVuID09PSBmYWxzZSkge1xyXG4gICAgICAgIGtleXMucHVzaChjb2x1bW4ucHJvcHMuZGF0YUZpZWxkKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBleHBvcnRDU1YocmVzdWx0LCBrZXlzLCB0aGlzLnByb3BzLmNzdkZpbGVOYW1lKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZVNlYXJjaChzZWFyY2hUZXh0KSB7XHJcbiAgICB0aGlzLnN0b3JlLnNlYXJjaChzZWFyY2hUZXh0KTtcclxuICAgIGxldCByZXN1bHQ7XHJcbiAgICBpZiAodGhpcy5wcm9wcy5wYWdpbmF0aW9uKSB7XHJcbiAgICAgIGNvbnN0IHsgc2l6ZVBlclBhZ2UgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgIHJlc3VsdCA9IHRoaXMuc3RvcmUucGFnZSgxLCBzaXplUGVyUGFnZSkuZ2V0KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXN1bHQgPSB0aGlzLnN0b3JlLmdldCgpO1xyXG4gICAgfVxyXG4gICAgaWYodGhpcy5wcm9wcy5vcHRpb25zLmFmdGVyU2VhcmNoKVxyXG4gICAgICB0aGlzLnByb3BzLm9wdGlvbnMuYWZ0ZXJTZWFyY2goc2VhcmNoVGV4dCwgdGhpcy5zdG9yZS5nZXREYXRhSWdub3JpbmdQYWdpbmF0aW9uKCkpO1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGRhdGE6IHJlc3VsdCxcclxuICAgICAgY3VyclBhZ2U6IDFcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyUGFnaW5hdGlvbigpIHtcclxuICAgIGlmICh0aGlzLnByb3BzLnBhZ2luYXRpb24pIHtcclxuICAgICAgbGV0IGRhdGFTaXplO1xyXG4gICAgICBpZiAodGhpcy5pc1JlbW90ZURhdGFTb3VyY2UoKSkge1xyXG4gICAgICAgIGRhdGFTaXplID0gdGhpcy5wcm9wcy5mZXRjaEluZm8uZGF0YVRvdGFsU2l6ZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBkYXRhU2l6ZSA9IHRoaXMuc3RvcmUuZ2V0RGF0YU51bSgpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YWJsZS1mb290ZXItcGFnaW5hdGlvblwiPlxyXG4gICAgICAgICAgPFBhZ2luYXRpb25MaXN0XHJcbiAgICAgICAgICAgIHJlZj1cInBhZ2luYXRpb25cIlxyXG4gICAgICAgICAgICBjdXJyUGFnZT17IHRoaXMuc3RhdGUuY3VyclBhZ2UgfVxyXG4gICAgICAgICAgICBjaGFuZ2VQYWdlPXt0aGlzLmhhbmRsZVBhZ2luYXRpb25EYXRhLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgIHNpemVQZXJQYWdlPXsgdGhpcy5zdGF0ZS5zaXplUGVyUGFnZSB9XHJcbiAgICAgICAgICAgIHNpemVQZXJQYWdlTGlzdD17dGhpcy5wcm9wcy5vcHRpb25zLnNpemVQZXJQYWdlTGlzdCB8fCBDb25zdC5TSVpFX1BFUl9QQUdFX0xJU1R9XHJcbiAgICAgICAgICAgIHBhZ2luYXRpb25TaXplPXt0aGlzLnByb3BzLm9wdGlvbnMucGFnaW5hdGlvblNpemUgfHwgQ29uc3QuUEFHSU5BVElPTl9TSVpFfVxyXG4gICAgICAgICAgICByZW1vdGU9e3RoaXMuaXNSZW1vdGVEYXRhU291cmNlKCl9XHJcbiAgICAgICAgICAgIGRhdGFTaXplPXtkYXRhU2l6ZX1cclxuICAgICAgICAgICAgb25TaXplUGVyUGFnZUxpc3Q9e3RoaXMucHJvcHMub3B0aW9ucy5vblNpemVQZXJQYWdlTGlzdH1cclxuICAgICAgICAgICAgcHJlUGFnZT17dGhpcy5wcm9wcy5vcHRpb25zLnByZVBhZ2UgfHwgQ29uc3QuUFJFX1BBR0V9XHJcbiAgICAgICAgICAgIG5leHRQYWdlPXt0aGlzLnByb3BzLm9wdGlvbnMubmV4dFBhZ2UgfHwgQ29uc3QuTkVYVF9QQUdFfVxyXG4gICAgICAgICAgICBmaXJzdFBhZ2U9e3RoaXMucHJvcHMub3B0aW9ucy5maXJzdFBhZ2UgfHwgQ29uc3QuRklSU1RfUEFHRX1cclxuICAgICAgICAgICAgbGFzdFBhZ2U9e3RoaXMucHJvcHMub3B0aW9ucy5sYXN0UGFnZSB8fCBDb25zdC5MQVNUX1BBR0V9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICByZW5kZXJUb29sQmFyKCkge1xyXG4gICAgbGV0IGVuYWJsZVNob3dPbmx5U2VsZWN0ZWQgPSB0aGlzLnByb3BzLnNlbGVjdFJvdyAmJiB0aGlzLnByb3BzLnNlbGVjdFJvdy5zaG93T25seVNlbGVjdGVkO1xyXG4gICAgaWYgKGVuYWJsZVNob3dPbmx5U2VsZWN0ZWRcclxuICAgICAgICB8fCB0aGlzLnByb3BzLmluc2VydFJvd1xyXG4gICAgICAgIHx8IHRoaXMucHJvcHMuZGVsZXRlUm93XHJcbiAgICAgICAgfHwgdGhpcy5wcm9wcy5zZWFyY2hcclxuICAgICAgICB8fCB0aGlzLnByb3BzLmV4cG9ydENTVikge1xyXG4gICAgICBsZXQgY29sdW1ucztcclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5wcm9wcy5jaGlsZHJlbikpIHtcclxuICAgICAgICBjb2x1bW5zID0gdGhpcy5wcm9wcy5jaGlsZHJlbi5tYXAoZnVuY3Rpb24gKGNvbHVtbikge1xyXG4gICAgICAgICAgdmFyIHByb3BzID0gY29sdW1uLnByb3BzO1xyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmFtZTogcHJvcHMuY2hpbGRyZW4sXHJcbiAgICAgICAgICAgIGZpZWxkOiBwcm9wcy5kYXRhRmllbGQsXHJcbiAgICAgICAgICAgIC8vd2hlbiB5b3Ugd2FudCBzYW1lIGF1dG8gZ2VuZXJhdGUgdmFsdWUgYW5kIG5vdCBhbGxvdyBlZGl0LCBleGFtcGxlIElEIGZpZWxkXHJcbiAgICAgICAgICAgIGF1dG9WYWx1ZTogcHJvcHMuYXV0b1ZhbHVlIHx8IGZhbHNlLFxyXG4gICAgICAgICAgICAvL2ZvciBjcmVhdGUgZWRpdG9yLCBubyBwYXJhbXMgZm9yIGNvbHVtbi5lZGl0YWJsZSgpIGluZGljYXRlIHRoYXQgZWRpdG9yIGZvciBuZXcgcm93XHJcbiAgICAgICAgICAgIGVkaXRhYmxlOiBwcm9wcy5lZGl0YWJsZSAmJiAodHlwZW9mIHByb3BzLmVkaXRhYmxlID09PSBcImZ1bmN0aW9uXCIpID8gcHJvcHMuZWRpdGFibGUoKSA6IHByb3BzLmVkaXRhYmxlLFxyXG4gICAgICAgICAgICAvL2hpZGRlbiBpbiBwb3B1cFxyXG4gICAgICAgICAgICBoaWRkZW5JblBvcHVwOiBwcm9wcy5oaWRkZW5JblBvcHVwLFxyXG4gICAgICAgICAgICBmb3JtYXQ6IHByb3BzLmRhdGFGb3JtYXQgPyBmdW5jdGlvbih2YWx1ZSl7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHByb3BzLmRhdGFGb3JtYXQodmFsdWUsIG51bGwsIHByb3BzLmZvcm1hdEV4dHJhRGF0YSkucmVwbGFjZSgvPC4qPz4vZywnJyk7XHJcbiAgICAgICAgICAgIH0gOiBmYWxzZVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb2x1bW5zID0gW3tcclxuICAgICAgICAgIG5hbWU6IHRoaXMucHJvcHMuY2hpbGRyZW4ucHJvcHMuY2hpbGRyZW4sXHJcbiAgICAgICAgICBmaWVsZDogdGhpcy5wcm9wcy5jaGlsZHJlbi5wcm9wcy5kYXRhRmllbGQsXHJcbiAgICAgICAgICBlZGl0YWJsZTogdGhpcy5wcm9wcy5jaGlsZHJlbi5wcm9wcy5lZGl0YWJsZSxcclxuICAgICAgICAgIGhpZGRlbkluUG9wdXA6IHRoaXMucHJvcHMuY2hpbGRyZW4ucHJvcHMuaGlkZGVuSW5Qb3B1cFxyXG4gICAgICAgIH1dO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0b29sLWJhclwiPlxyXG4gICAgICAgICAgPFRvb2xCYXJcclxuICAgICAgICAgICAgY2xlYXJTZWFyY2g9e3RoaXMucHJvcHMub3B0aW9ucy5jbGVhclNlYXJjaH1cclxuICAgICAgICAgICAgZW5hYmxlSW5zZXJ0PXt0aGlzLnByb3BzLmluc2VydFJvd31cclxuICAgICAgICAgICAgZW5hYmxlRGVsZXRlPXt0aGlzLnByb3BzLmRlbGV0ZVJvd31cclxuICAgICAgICAgICAgZW5hYmxlU2VhcmNoPXt0aGlzLnByb3BzLnNlYXJjaH1cclxuICAgICAgICAgICAgZW5hYmxlRXhwb3J0Q1NWPXt0aGlzLnByb3BzLmV4cG9ydENTVn1cclxuICAgICAgICAgICAgZW5hYmxlU2hvd09ubHlTZWxlY3RlZD17ZW5hYmxlU2hvd09ubHlTZWxlY3RlZH1cclxuICAgICAgICAgICAgY29sdW1ucz17Y29sdW1uc31cclxuICAgICAgICAgICAgc2VhcmNoUGxhY2Vob2xkZXI9e3RoaXMucHJvcHMuc2VhcmNoUGxhY2Vob2xkZXJ9XHJcbiAgICAgICAgICAgIG9uQWRkUm93PXt0aGlzLmhhbmRsZUFkZFJvdy5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICBvbkFkZFJvd0JlZ2luPXt0aGlzLmhhbmRsZUFkZFJvd0JlZ2luLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgIG9uRHJvcFJvdz17dGhpcy5oYW5kbGVEcm9wUm93LmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgIG9uU2VhcmNoPXt0aGlzLmhhbmRsZVNlYXJjaC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICBvbkV4cG9ydENTVj17dGhpcy5oYW5kbGVFeHBvcnRDU1YuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgb25TaG93T25seVNlbGVjdGVkPXt0aGlzLmhhbmRsZVNob3dPbmx5U2VsZWN0ZWQuYmluZCh0aGlzKX1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIClcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyVGFibGVGaWx0ZXIoY29sdW1ucykge1xyXG4gICAgaWYgKHRoaXMucHJvcHMuY29sdW1uRmlsdGVyKSB7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgPFRhYmxlRmlsdGVyIGNvbHVtbnM9e2NvbHVtbnN9XHJcbiAgICAgICAgICAgICAgICAgICAgIHJvd1NlbGVjdFR5cGU9e3RoaXMucHJvcHMuc2VsZWN0Um93Lm1vZGV9XHJcbiAgICAgICAgICAgICAgICAgICAgIG9uRmlsdGVyPXt0aGlzLmhhbmRsZUZpbHRlckRhdGEuYmluZCh0aGlzKX0vPlxyXG4gICAgICApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2Nyb2xsSGVhZGVyID0gKGUpID0+IHtcclxuICAgIHRoaXMucmVmcy5oZWFkZXIucmVmcy5jb250YWluZXIuc2Nyb2xsTGVmdCA9IGUuY3VycmVudFRhcmdldC5zY3JvbGxMZWZ0O1xyXG4gIH1cclxuXHJcbiAgX2FkanVzdEhlYWRlcldpZHRoID0gKCkgPT4ge1xyXG4gICAgdmFyIHRhYmxlSGVhZGVyRG9tID0gdGhpcy5yZWZzLmhlYWRlci5yZWZzLmNvbnRhaW5lci5jaGlsZE5vZGVzWzBdO1xyXG4gICAgdmFyIHRhYmxlQm9keURvbSA9IHRoaXMucmVmcy5ib2R5LnJlZnMuY29udGFpbmVyLmNoaWxkTm9kZXNbMF07XHJcbiAgICBpZih0YWJsZUhlYWRlckRvbS5vZmZzZXRXaWR0aCAhPT0gdGFibGVCb2R5RG9tLm9mZnNldFdpZHRoKXtcclxuICAgICAgdGFibGVIZWFkZXJEb20uc3R5bGUud2lkdGggPSB0YWJsZUJvZHlEb20ub2Zmc2V0V2lkdGggKyBcInB4XCI7XHJcbiAgICB9XHJcbiAgICBjb25zdCBoZWFkZXJQcm9wcyA9IHRoaXMucmVmcy5ib2R5LmdldEJvZHlIZWFkZXJEb21Qcm9wKCk7XHJcbiAgICB0aGlzLnJlZnMuaGVhZGVyLmZpdEhlYWRlcihoZWFkZXJQcm9wcyxcclxuICAgICAgdGhpcy5yZWZzLmJvZHkucmVmcy5jb250YWluZXIuc2Nyb2xsSGVpZ2h0ID4gdGhpcy5yZWZzLmJvZHkucmVmcy5jb250YWluZXIuY2xpZW50SGVpZ2h0KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVBZnRlckFkZGluZ1JvdyhuZXdPYmopIHtcclxuICAgIGxldCByZXN1bHQ7XHJcbiAgICBpZiAodGhpcy5wcm9wcy5wYWdpbmF0aW9uKSB7XHJcbiAgICAgIC8vaWYgcGFnaW5hdGlvbiBpcyBlbmFibGVkIGFuZCBpbnNlcnQgcm93IGJlIHRyaWdnZXIsIGNoYW5nZSB0byBsYXN0IHBhZ2VcclxuICAgICAgY29uc3QgeyBzaXplUGVyUGFnZSB9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgY29uc3QgY3Vyckxhc3RQYWdlID0gTWF0aC5jZWlsKHRoaXMuc3RvcmUuZ2V0RGF0YU51bSgpIC8gc2l6ZVBlclBhZ2UpO1xyXG4gICAgICByZXN1bHQgPSB0aGlzLnN0b3JlLnBhZ2UoY3Vyckxhc3RQYWdlLCBzaXplUGVyUGFnZSkuZ2V0KCk7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIGRhdGE6IHJlc3VsdCxcclxuICAgICAgICBjdXJyUGFnZTogY3Vyckxhc3RQYWdlLFxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlc3VsdCA9IHRoaXMuc3RvcmUuZ2V0KCk7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIGRhdGE6IHJlc3VsdFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5wcm9wcy5vcHRpb25zLmFmdGVySW5zZXJ0Um93KSB7XHJcbiAgICAgIHRoaXMucHJvcHMub3B0aW9ucy5hZnRlckluc2VydFJvdyhuZXdPYmopO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuQm9vdHN0cmFwVGFibGUucHJvcFR5cGVzID0ge1xyXG4gICAga2V5RmllbGQ6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXHJcbiAgICBoZWlnaHQ6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXHJcbiAgICBtYXhIZWlnaHQ6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXHJcbiAgICB0YWJsZUlEOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxyXG4gICAgZGF0YTogUmVhY3QuUHJvcFR5cGVzLm9uZU9mVHlwZShbUmVhY3QuUHJvcFR5cGVzLmFycmF5LCBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0XSksXHJcbiAgICByZW1vdGU6IFJlYWN0LlByb3BUeXBlcy5ib29sLCAvLyByZW1vdGUgZGF0YSwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgc3RyaXBlZDogUmVhY3QuUHJvcFR5cGVzLmJvb2wsXHJcbiAgICBib3JkZXJlZDogUmVhY3QuUHJvcFR5cGVzLmJvb2wsXHJcbiAgICBob3ZlcjogUmVhY3QuUHJvcFR5cGVzLmJvb2wsXHJcbiAgICBjb25kZW5zZWQ6IFJlYWN0LlByb3BUeXBlcy5ib29sLFxyXG4gICAgcGFnaW5hdGlvbjogUmVhY3QuUHJvcFR5cGVzLmJvb2wsXHJcbiAgICBzZWFyY2hQbGFjZWhvbGRlcjogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcclxuICAgIHNlbGVjdFJvdzogUmVhY3QuUHJvcFR5cGVzLnNoYXBlKHtcclxuICAgICAgICBtb2RlOiBSZWFjdC5Qcm9wVHlwZXMub25lT2YoW1xyXG4gICAgICAgICAgICBDb25zdC5ST1dfU0VMRUNUX05PTkUsXHJcbiAgICAgICAgICAgIENvbnN0LlJPV19TRUxFQ1RfU0lOR0xFLFxyXG4gICAgICAgICAgICBDb25zdC5ST1dfU0VMRUNUX01VTFRJXHJcbiAgICAgICAgXSksXHJcbiAgICAgICAgYmdDb2xvcjogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcclxuICAgICAgICBzZWxlY3RlZDogUmVhY3QuUHJvcFR5cGVzLmFycmF5LFxyXG4gICAgICAgIG9uU2VsZWN0OiBSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcclxuICAgICAgICBvblNlbGVjdEFsbDogUmVhY3QuUHJvcFR5cGVzLmZ1bmMsXHJcbiAgICAgICAgY2xpY2tUb1NlbGVjdDogUmVhY3QuUHJvcFR5cGVzLmJvb2wsXHJcbiAgICAgICAgaGlkZVNlbGVjdENvbHVtbjogUmVhY3QuUHJvcFR5cGVzLmJvb2wsXHJcbiAgICAgICAgY2xpY2tUb1NlbGVjdEFuZEVkaXRDZWxsOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCxcclxuICAgICAgICBzaG93T25seVNlbGVjdGVkOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbFxyXG4gICAgfSksXHJcbiAgICBjZWxsRWRpdDogUmVhY3QuUHJvcFR5cGVzLnNoYXBlKHtcclxuICAgICAgICBtb2RlOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxyXG4gICAgICAgIGJsdXJUb1NhdmU6IFJlYWN0LlByb3BUeXBlcy5ib29sLFxyXG4gICAgICAgIGFmdGVyU2F2ZUNlbGw6IFJlYWN0LlByb3BUeXBlcy5mdW5jXHJcbiAgICB9KSxcclxuICAgIGluc2VydFJvdzogUmVhY3QuUHJvcFR5cGVzLmJvb2wsXHJcbiAgICBkZWxldGVSb3c6IFJlYWN0LlByb3BUeXBlcy5ib29sLFxyXG4gICAgc2VhcmNoOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCxcclxuICAgIGNvbHVtbkZpbHRlcjogUmVhY3QuUHJvcFR5cGVzLmJvb2wsXHJcbiAgICB0ckNsYXNzTmFtZTogUmVhY3QuUHJvcFR5cGVzLmFueSxcclxuICAgIG9wdGlvbnM6IFJlYWN0LlByb3BUeXBlcy5zaGFwZSh7XHJcbiAgICAgICAgYmVmb3JlSW5zZXJ0Um93OiBSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcclxuICAgICAgICBjbGVhclNlYXJjaDogUmVhY3QuUHJvcFR5cGVzLmJvb2wsXHJcbiAgICAgICAgc29ydE5hbWU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXHJcbiAgICAgICAgc29ydE9yZGVyOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxyXG4gICAgICAgIGFmdGVyVGFibGVDb21wbGV0ZTogUmVhY3QuUHJvcFR5cGVzLmZ1bmMsXHJcbiAgICAgICAgYWZ0ZXJEZWxldGVSb3c6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxyXG4gICAgICAgIGFmdGVySW5zZXJ0Um93OiBSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcclxuICAgICAgICBhZnRlclNlYXJjaDogUmVhY3QuUHJvcFR5cGVzLmZ1bmMsXHJcbiAgICAgICAgYWZ0ZXJDb2x1bW5GaWx0ZXI6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxyXG4gICAgICAgIG9uUm93Q2xpY2s6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxyXG4gICAgICAgIHBhZ2U6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIsXHJcbiAgICAgICAgc2l6ZVBlclBhZ2VMaXN0OiBSZWFjdC5Qcm9wVHlwZXMuYXJyYXksXHJcbiAgICAgICAgc2l6ZVBlclBhZ2U6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIsXHJcbiAgICAgICAgcGFnaW5hdGlvblNpemU6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIsXHJcbiAgICAgICAgb25Tb3J0Q2hhbmdlOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcclxuICAgICAgICBvblBhZ2VDaGFuZ2U6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxyXG4gICAgICAgIG9uU2l6ZVBlclBhZ2VMaXN0OiBSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcclxuICAgICAgICBub0RhdGFUZXh0OiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxyXG4gICAgICAgIGhhbmRsZUNvbmZpcm1EZWxldGVSb3c6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxyXG4gICAgICAgIHByZVBhZ2U6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXHJcbiAgICAgICAgbmV4dFBhZ2U6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXHJcbiAgICAgICAgZmlyc3RQYWdlOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxyXG4gICAgICAgIGxhc3RQYWdlOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nXHJcbiAgICB9KSxcclxuICAgIGZldGNoSW5mbzogUmVhY3QuUHJvcFR5cGVzLnNoYXBlKHtcclxuICAgICAgICBkYXRhVG90YWxTaXplOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLFxyXG4gICAgfSksXHJcbiAgICBleHBvcnRDU1Y6IFJlYWN0LlByb3BUeXBlcy5ib29sLFxyXG4gICAgY3N2RmlsZU5hbWU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmdcclxufTtcclxuQm9vdHN0cmFwVGFibGUuZGVmYXVsdFByb3BzID0ge1xyXG4gICAgaGVpZ2h0OiBcIjEwMCVcIixcclxuICAgIG1heEhlaWdodDogdW5kZWZpbmVkLFxyXG4gICAgdGFibGVJRDogdW5kZWZpbmVkLFxyXG4gICAgc3RyaXBlZDogZmFsc2UsXHJcbiAgICBib3JkZXJlZDogdHJ1ZSxcclxuICAgIGhvdmVyOiBmYWxzZSxcclxuICAgIGNvbmRlbnNlZDogZmFsc2UsXHJcbiAgICBwYWdpbmF0aW9uOiBmYWxzZSxcclxuICAgIHNlYXJjaFBsYWNlaG9sZGVyOiB1bmRlZmluZWQsXHJcbiAgICBzZWxlY3RSb3c6IHtcclxuICAgICAgICBtb2RlOiBDb25zdC5ST1dfU0VMRUNUX05PTkUsXHJcbiAgICAgICAgYmdDb2xvcjogQ29uc3QuUk9XX1NFTEVDVF9CR19DT0xPUixcclxuICAgICAgICBzZWxlY3RlZDogW10sXHJcbiAgICAgICAgb25TZWxlY3Q6IHVuZGVmaW5lZCxcclxuICAgICAgICBvblNlbGVjdEFsbDogdW5kZWZpbmVkLFxyXG4gICAgICAgIGNsaWNrVG9TZWxlY3Q6IGZhbHNlLFxyXG4gICAgICAgIGhpZGVTZWxlY3RDb2x1bW46IGZhbHNlLFxyXG4gICAgICAgIGNsaWNrVG9TZWxlY3RBbmRFZGl0Q2VsbDogZmFsc2UsXHJcbiAgICAgICAgc2hvd09ubHlTZWxlY3RlZDogZmFsc2VcclxuICAgIH0sXHJcbiAgICBjZWxsRWRpdDoge1xyXG4gICAgICAgIG1vZGU6IENvbnN0LkNFTExfRURJVF9OT05FLFxyXG4gICAgICAgIGJsdXJUb1NhdmU6IGZhbHNlLFxyXG4gICAgICAgIGFmdGVyU2F2ZUNlbGw6IHVuZGVmaW5lZFxyXG4gICAgfSxcclxuICAgIGluc2VydFJvdzogZmFsc2UsXHJcbiAgICBkZWxldGVSb3c6IGZhbHNlLFxyXG4gICAgc2VhcmNoOiBmYWxzZSxcclxuICAgIG11bHRpQ29sdW1uU2VhcmNoOiBmYWxzZSxcclxuICAgIGNvbHVtbkZpbHRlcjogZmFsc2UsXHJcbiAgICB0ckNsYXNzTmFtZTogJycsXHJcbiAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgY2xlYXJTZWFyY2g6IGZhbHNlLFxyXG4gICAgICAgIHNvcnROYW1lOiB1bmRlZmluZWQsXHJcbiAgICAgICAgc29ydE9yZGVyOiB1bmRlZmluZWQsXHJcbiAgICAgICAgYWZ0ZXJUYWJsZUNvbXBsZXRlOiB1bmRlZmluZWQsXHJcbiAgICAgICAgYWZ0ZXJEZWxldGVSb3c6IHVuZGVmaW5lZCxcclxuICAgICAgICBhZnRlckluc2VydFJvdzogdW5kZWZpbmVkLFxyXG4gICAgICAgIGFmdGVyU2VhcmNoOiB1bmRlZmluZWQsXHJcbiAgICAgICAgYWZ0ZXJDb2x1bW5GaWx0ZXI6IHVuZGVmaW5lZCxcclxuICAgICAgICBvblJvd0NsaWNrOiB1bmRlZmluZWQsXHJcbiAgICAgICAgb25Nb3VzZUxlYXZlOiB1bmRlZmluZWQsXHJcbiAgICAgICAgb25Nb3VzZUVudGVyOiB1bmRlZmluZWQsXHJcbiAgICAgICAgb25Sb3dNb3VzZU91dDogdW5kZWZpbmVkLFxyXG4gICAgICAgIG9uUm93TW91c2VPdmVyOiB1bmRlZmluZWQsXHJcbiAgICAgICAgcGFnZTogdW5kZWZpbmVkLFxyXG4gICAgICAgIHNpemVQZXJQYWdlTGlzdDogQ29uc3QuU0laRV9QRVJfUEFHRV9MSVNULFxyXG4gICAgICAgIHNpemVQZXJQYWdlOiB1bmRlZmluZWQsXHJcbiAgICAgICAgcGFnaW5hdGlvblNpemU6IENvbnN0LlBBR0lOQVRJT05fU0laRSxcclxuICAgICAgICBvblNpemVQZXJQYWdlTGlzdDogdW5kZWZpbmVkLFxyXG4gICAgICAgIG5vRGF0YVRleHQ6IHVuZGVmaW5lZCxcclxuICAgICAgICBoYW5kbGVDb25maXJtRGVsZXRlUm93OiB1bmRlZmluZWQsXHJcbiAgICAgICAgcHJlUGFnZTogQ29uc3QuUFJFX1BBR0UsXHJcbiAgICAgICAgbmV4dFBhZ2U6IENvbnN0Lk5FWFRfUEFHRSxcclxuICAgICAgICBmaXJzdFBhZ2U6IENvbnN0LkZJUlNUX1BBR0UsXHJcbiAgICAgICAgbGFzdFBhZ2U6IENvbnN0LkxBU1RfUEFHRVxyXG4gICAgfSxcclxuICAgIGZldGNoSW5mbzoge1xyXG4gICAgICAgIGRhdGFUb3RhbFNpemU6IDAsXHJcbiAgICB9LFxyXG4gICAgZXhwb3J0Q1NWOiBmYWxzZSxcclxuICAgIGNzdkZpbGVOYW1lOiB1bmRlZmluZWRcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJvb3RzdHJhcFRhYmxlO1xyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9Cb290c3RyYXBUYWJsZS5qc1xuICoqLyIsImltcG9ydCBDb25zdCBmcm9tICcuL0NvbnN0JztcclxudmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjtcclxuXHJcbmV4cG9ydCBjbGFzcyBGaWx0ZXIgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSkge1xyXG4gICAgICAgIHN1cGVyKGRhdGEpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudEZpbHRlciA9IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUZpbHRlcihkYXRhRmllbGQsIHZhbHVlLCB0eXBlKSB7XHJcbiAgICAgICAgY29uc3QgZmlsdGVyVHlwZSA9IHR5cGUgfHwgQ29uc3QuRklMVEVSX1RZUEUuQ1VTVE9NO1xyXG5cclxuICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIC8vIHZhbHVlIG9mIHRoZSBmaWx0ZXIgaXMgYW4gb2JqZWN0XHJcbiAgICAgICAgICAgIGxldCBoYXNWYWx1ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHByb3AgaW4gdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdmFsdWVbcHJvcF0gfHwgdmFsdWVbcHJvcF0gPT09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBoYXNWYWx1ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGlmIG9uZSBvZiB0aGUgb2JqZWN0IHByb3BlcnRpZXMgaXMgdW5kZWZpbmVkIG9yIGVtcHR5LCB3ZSByZW1vdmUgdGhlIGZpbHRlclxyXG4gICAgICAgICAgICAoaGFzVmFsdWUpID8gdGhpcy5jdXJyZW50RmlsdGVyW2RhdGFGaWVsZF0gPSB7dmFsdWU6IHZhbHVlLCB0eXBlOiBmaWx0ZXJUeXBlfSA6IGRlbGV0ZSB0aGlzLmN1cnJlbnRGaWx0ZXJbZGF0YUZpZWxkXTtcclxuICAgICAgICB9IGVsc2UgaWYgKCF2YWx1ZSB8fCB2YWx1ZS50cmltKCkgPT09IFwiXCIpIHtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuY3VycmVudEZpbHRlcltkYXRhRmllbGRdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcltkYXRhRmllbGRdID0ge3ZhbHVlOiB2YWx1ZS50cmltKCksIHR5cGU6IGZpbHRlclR5cGV9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmVtaXQoJ29uRmlsdGVyQ2hhbmdlJywgdGhpcy5jdXJyZW50RmlsdGVyKTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9GaWx0ZXIuanNcbiAqKi8iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgY2xhc3NTZXQgZnJvbSAnY2xhc3NuYW1lcyc7XHJcbmltcG9ydCBDb25zdCBmcm9tICcuL0NvbnN0JztcclxuXHJcbmNsYXNzIFNlbGVjdFJvd0hlYWRlckNvbHVtbiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudHtcclxuXHJcbiAgcmVuZGVyKCl7XHJcbiAgICB2YXIgdGhTdHlsZSA9IHtcclxuICAgICAgd2lkdGg6IHBhcnNlSW50KHRoaXMucHJvcHMud2lkdGgpP3RoaXMucHJvcHMud2lkdGg6MzVcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuKFxyXG4gICAgICA8dGggc3R5bGU9e3RoU3R5bGV9PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGgtaW5uZXIgdGFibGUtaGVhZGVyLWNvbHVtblwiPlxyXG4gICAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvdGg+XHJcbiAgICApXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTZWxlY3RSb3dIZWFkZXJDb2x1bW47XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL1NlbGVjdFJvd0hlYWRlckNvbHVtbi5qc1xuICoqLyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBDb25zdCBmcm9tICcuL0NvbnN0JztcclxuaW1wb3J0IFV0aWwgZnJvbSAnLi91dGlsJztcclxuaW1wb3J0IFRhYmxlUm93IGZyb20gJy4vVGFibGVSb3cnO1xyXG5pbXBvcnQgVGFibGVDb2x1bW4gZnJvbSAnLi9UYWJsZUNvbHVtbic7XHJcbmltcG9ydCBUYWJsZUVkaXRDb2x1bW4gZnJvbSAnLi9UYWJsZUVkaXRDb2x1bW4nO1xyXG5pbXBvcnQgY2xhc3NTZXQgZnJvbSAnY2xhc3NuYW1lcyc7XHJcblxyXG52YXIgaXNGdW49ZnVuY3Rpb24ob2JqKXtcclxuICByZXR1cm4gb2JqJiYodHlwZW9mIG9iaj09PVwiZnVuY3Rpb25cIik7XHJcblxyXG59O1xyXG5jbGFzcyBUYWJsZUJvZHkgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnR7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBjdXJyRWRpdENlbGw6IG51bGxcclxuICAgIH07XHJcbiAgICB0aGlzLmVkaXRpbmcgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZE1vdW50KCl7XHJcbiAgICB0aGlzLmFkanVzdEJvZHkoKTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZFVwZGF0ZSgpe1xyXG4gICAgdGhpcy5hZGp1c3RCb2R5KCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKXtcclxuICAgIHZhciBjb250YWluZXJDbGFzc2VzID0gY2xhc3NTZXQoXCJ0YWJsZS1jb250YWluZXJcIik7XHJcblxyXG4gICAgdmFyIHRhYmxlQ2xhc3NlcyA9IGNsYXNzU2V0KFwidGFibGVcIiwge1xyXG4gICAgICAndGFibGUtc3RyaXBlZCc6IHRoaXMucHJvcHMuc3RyaXBlZCxcclxuICAgICAgJ3RhYmxlLWJvcmRlcmVkJzogdGhpcy5wcm9wcy5ib3JkZXJlZCxcclxuICAgICAgJ3RhYmxlLWhvdmVyJzogdGhpcy5wcm9wcy5ob3ZlcixcclxuICAgICAgJ3RhYmxlLWNvbmRlbnNlZCc6IHRoaXMucHJvcHMuY29uZGVuc2VkXHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgaXNTZWxlY3RSb3dEZWZpbmVkID0gdGhpcy5faXNTZWxlY3RSb3dEZWZpbmVkKCk7XHJcbiAgICB2YXIgdGFibGVIZWFkZXIgPSB0aGlzLnJlbmRlclRhYmxlSGVhZGVyKGlzU2VsZWN0Um93RGVmaW5lZCk7XHJcblxyXG4gICAgdmFyIHRhYmxlUm93cyA9IHRoaXMucHJvcHMuZGF0YS5tYXAoZnVuY3Rpb24oZGF0YSwgcil7XHJcbiAgICAgIHZhciB0YWJsZUNvbHVtbnMgPSB0aGlzLnByb3BzLmNvbHVtbnMubWFwKGZ1bmN0aW9uKGNvbHVtbiwgaSl7XHJcbiAgICAgICAgdmFyIGZpZWxkVmFsdWUgPSBkYXRhW2NvbHVtbi5uYW1lXTtcclxuICAgICAgICBpZih0aGlzLmVkaXRpbmcgJiZcclxuICAgICAgICAgIGNvbHVtbi5uYW1lICE9PSB0aGlzLnByb3BzLmtleUZpZWxkICYmIC8vIEtleSBmaWVsZCBjYW4ndCBiZSBlZGl0XHJcbiAgICAgICAgICBjb2x1bW4uZWRpdGFibGUgJiYgLy8gY29sdW1uIGlzIGVkaXRhYmxlPyBkZWZhdWx0IGlzIHRydWUsIHVzZXIgY2FuIHNldCBpdCBmYWxzZVxyXG4gICAgICAgICAgdGhpcy5zdGF0ZS5jdXJyRWRpdENlbGwgIT0gbnVsbCAmJlxyXG4gICAgICAgICAgdGhpcy5zdGF0ZS5jdXJyRWRpdENlbGwucmlkID09IHIgJiZcclxuICAgICAgICAgIHRoaXMuc3RhdGUuY3VyckVkaXRDZWxsLmNpZCA9PSBpKXtcclxuICAgICAgICAgICAgdmFyIGZvcm1hdD1jb2x1bW4uZm9ybWF0P2Z1bmN0aW9uKHZhbHVlKXtcclxuICAgICAgICAgICAgICByZXR1cm4gY29sdW1uLmZvcm1hdCh2YWx1ZSwgZGF0YSwgY29sdW1uLmZvcm1hdEV4dHJhRGF0YSkucmVwbGFjZSgvPC4qPz4vZywnJyk7XHJcbiAgICAgICAgICAgIH06ZmFsc2U7XHJcblxyXG4gICAgICAgICAgcmV0dXJuKFxyXG4gICAgICAgICAgICAgIDxUYWJsZUVkaXRDb2x1bW4gY29tcGxldGVFZGl0PXt0aGlzLmhhbmRsZUNvbXBsZXRlRWRpdENlbGwuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWRkIGJ5IGJsdWVzcHJpbmcgZm9yIGNvbHVtbiBlZGl0b3IgY3VzdG9taXplXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0YWJsZT17aXNGdW4oY29sdW1uLmVkaXRhYmxlKT9jb2x1bW4uZWRpdGFibGUoZmllbGRWYWx1ZSxkYXRhLHIsaSk6Y29sdW1uLmVkaXRhYmxlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0PXtjb2x1bW4uZm9ybWF0P2Zvcm1hdDpmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsdXJUb1NhdmU9e3RoaXMucHJvcHMuY2VsbEVkaXQuYmx1clRvU2F2ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd0luZGV4PXtyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sSW5kZXg9e2l9PlxyXG4gICAgICAgICAgICAgICAge2ZpZWxkVmFsdWV9XHJcbiAgICAgICAgICAgICAgPC9UYWJsZUVkaXRDb2x1bW4+XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9IGVsc2V7XHJcbiAgICAgICAgICAvL2FkZCBieSBibHVlc3ByaW5nIGZvciBjbGFzc05hbWUgY3VzdG9taXplXHJcbiAgICAgICAgICB2YXIgdGRDbGFzc05hbWU9aXNGdW4oY29sdW1uLmNsYXNzTmFtZSk/Y29sdW1uLmNsYXNzTmFtZShmaWVsZFZhbHVlLGRhdGEscixpKTpjb2x1bW4uY2xhc3NOYW1lO1xyXG5cclxuICAgICAgICAgIGlmKHR5cGVvZiBjb2x1bW4uZm9ybWF0ICE9PSBcInVuZGVmaW5lZFwiKXtcclxuICAgICAgICAgICAgdmFyIGZvcm1hdHRlZFZhbHVlID0gY29sdW1uLmZvcm1hdChmaWVsZFZhbHVlLCBkYXRhLCBjb2x1bW4uZm9ybWF0RXh0cmFEYXRhKTtcclxuICAgICAgICAgICAgaWYgKCFSZWFjdC5pc1ZhbGlkRWxlbWVudChmb3JtYXR0ZWRWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZSA9IDxkaXYgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IGZvcm1hdHRlZFZhbHVlfX0+PC9kaXY+O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybihcclxuICAgICAgICAgICAgICA8VGFibGVDb2x1bW4gZGF0YUFsaWduPXtjb2x1bW4uYWxpZ259XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXt0ZENsYXNzTmFtZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbEVkaXQ9e3RoaXMucHJvcHMuY2VsbEVkaXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGRlbj17Y29sdW1uLmhpZGRlbn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FZGl0PXt0aGlzLmhhbmRsZUVkaXRDZWxsLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXtjb2x1bW4ud2lkdGh9PlxyXG4gICAgICAgICAgICAgICAge2Zvcm1hdHRlZFZhbHVlfVxyXG4gICAgICAgICAgICAgIDwvVGFibGVDb2x1bW4+XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgIH0gZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuKFxyXG4gICAgICAgICAgICAgIDxUYWJsZUNvbHVtbiBkYXRhQWxpZ249e2NvbHVtbi5hbGlnbn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3RkQ2xhc3NOYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsRWRpdD17dGhpcy5wcm9wcy5jZWxsRWRpdH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZGVuPXtjb2x1bW4uaGlkZGVufVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVkaXQ9e3RoaXMuaGFuZGxlRWRpdENlbGwuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9e2NvbHVtbi53aWR0aH0+XHJcbiAgICAgICAgICAgICAgICB7ZmllbGRWYWx1ZX1cclxuICAgICAgICAgICAgICA8L1RhYmxlQ29sdW1uPlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCB0aGlzKTtcclxuICAgICAgdmFyIHNlbGVjdGVkID0gdGhpcy5wcm9wcy5zZWxlY3RlZFJvd0tleXMuaW5kZXhPZihkYXRhW3RoaXMucHJvcHMua2V5RmllbGRdKSAhPSAtMTtcclxuICAgICAgdmFyIHNlbGVjdFJvd0NvbHVtbiA9IGlzU2VsZWN0Um93RGVmaW5lZCAmJiAhdGhpcy5wcm9wcy5zZWxlY3RSb3cuaGlkZVNlbGVjdENvbHVtbj9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZWxlY3RSb3dDb2x1bW4oc2VsZWN0ZWQpOm51bGw7XHJcbiAgICAgIC8vYWRkIGJ5IGJsdWVzcHJpbmcgZm9yIGNsYXNzTmFtZSBjdXN0b21pemVcclxuICAgICAgdmFyIHRyQ2xhc3NOYW1lPWlzRnVuKHRoaXMucHJvcHMudHJDbGFzc05hbWUpP3RoaXMucHJvcHMudHJDbGFzc05hbWUoZGF0YSxyKTp0aGlzLnByb3BzLnRyQ2xhc3NOYW1lO1xyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIDxUYWJsZVJvdyBpc1NlbGVjdGVkPXtzZWxlY3RlZH0ga2V5PXtyfSBjbGFzc05hbWU9e3RyQ2xhc3NOYW1lfVxyXG4gICAgICAgICAgc2VsZWN0Um93PXtpc1NlbGVjdFJvd0RlZmluZWQ/dGhpcy5wcm9wcy5zZWxlY3RSb3c6dW5kZWZpbmVkfVxyXG4gICAgICAgICAgZW5hYmxlQ2VsbEVkaXQ9e3RoaXMucHJvcHMuY2VsbEVkaXQubW9kZSAhPT0gQ29uc3QuQ0VMTF9FRElUX05PTkV9XHJcbiAgICAgICAgICBvblJvd0NsaWNrPXt0aGlzLmhhbmRsZVJvd0NsaWNrLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICBvblJvd01vdXNlT3Zlcj17dGhpcy5oYW5kbGVSb3dNb3VzZU92ZXIuYmluZCh0aGlzKX1cclxuICAgICAgICAgIG9uUm93TW91c2VPdXQ9e3RoaXMuaGFuZGxlUm93TW91c2VPdXQuYmluZCh0aGlzKX1cclxuICAgICAgICAgIG9uU2VsZWN0Um93PXt0aGlzLmhhbmRsZVNlbGVjdFJvdy5iaW5kKHRoaXMpfT5cclxuICAgICAgICAgIHtzZWxlY3RSb3dDb2x1bW59XHJcbiAgICAgICAgICB7dGFibGVDb2x1bW5zfVxyXG4gICAgICAgIDwvVGFibGVSb3c+XHJcbiAgICAgIClcclxuICAgIH0sIHRoaXMpO1xyXG5cclxuICAgIGlmKHRhYmxlUm93cy5sZW5ndGggPT09IDApe1xyXG4gICAgICB0YWJsZVJvd3MucHVzaChcclxuICAgICAgPFRhYmxlUm93IGtleT1cIiMjdGFibGUtZW1wdHkjI1wiPlxyXG4gICAgICAgIDx0ZCBjb2xTcGFuPXt0aGlzLnByb3BzLmNvbHVtbnMubGVuZ3RoKyhpc1NlbGVjdFJvd0RlZmluZWQ/MTowKX1cclxuICAgICAgICAgICAgY2xhc3NOYW1lPVwicmVhY3QtYnMtdGFibGUtbm8tZGF0YVwiPlxyXG4gICAgICAgICAgICB7dGhpcy5wcm9wcy5ub0RhdGFUZXh0fHxDb25zdC5OT19EQVRBX1RFWFR9XHJcbiAgICAgICAgPC90ZD5cclxuICAgICAgPC9UYWJsZVJvdz4pO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZWRpdGluZyA9IGZhbHNlO1xyXG5cclxuICAgIHZhciBoZWlnaHQgPSB0aGlzLmNhbGN1bGF0ZUNvbnRhaW5lckhlaWdodCgpLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgcmV0dXJuKFxyXG4gICAgICA8ZGl2IHJlZj1cImNvbnRhaW5lclwiIGNsYXNzTmFtZT17Y29udGFpbmVyQ2xhc3Nlc30gc3R5bGU9e3toZWlnaHQ6IGhlaWdodH19PlxyXG4gICAgICAgIDx0YWJsZSByZWY9XCJib2R5XCIgY2xhc3NOYW1lPXt0YWJsZUNsYXNzZXN9PlxyXG4gICAgICAgICAge3RhYmxlSGVhZGVyfVxyXG4gICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICB7dGFibGVSb3dzfVxyXG4gICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICA8L3RhYmxlPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIClcclxuICB9XHJcblxyXG4gIHJlbmRlclRhYmxlSGVhZGVyKGlzU2VsZWN0Um93RGVmaW5lZCl7XHJcbiAgICB2YXIgc2VsZWN0Um93SGVhZGVyID0gbnVsbDtcclxuXHJcbiAgICBpZihpc1NlbGVjdFJvd0RlZmluZWQpe1xyXG4gICAgICBsZXQgc3R5bGUgPSB7XHJcbiAgICAgICAgd2lkdGg6MzUsXHJcbiAgICAgICAgbWluV2lkdGg6MzVcclxuICAgICAgfVxyXG4gICAgICBzZWxlY3RSb3dIZWFkZXIgPSB0aGlzLnByb3BzLnNlbGVjdFJvdy5oaWRlU2VsZWN0Q29sdW1uP251bGw6KDx0aCBzdHlsZT17c3R5bGV9IGtleT17LTF9PjwvdGg+KTtcclxuICAgIH1cclxuICAgIHZhciB0aGVhZGVyID0gdGhpcy5wcm9wcy5jb2x1bW5zLm1hcChmdW5jdGlvbihjb2x1bW4sIGkpe1xyXG4gICAgICBsZXQgd2lkdGggPSBjb2x1bW4ud2lkdGggPT0gbnVsbD9jb2x1bW4ud2lkdGg6cGFyc2VJbnQoY29sdW1uLndpZHRoKTtcclxuICAgICAgbGV0IHN0eWxlPXtcclxuICAgICAgICBkaXNwbGF5OiBjb2x1bW4uaGlkZGVuP1wibm9uZVwiOm51bGwsXHJcbiAgICAgICAgd2lkdGg6IHdpZHRoLFxyXG4gICAgICAgIG1heFdpZHRoOiB3aWR0aFxyXG4gICAgICAgIC8qKiBhZGQgbWluLXdkdGggdG8gZml4IHVzZXIgYXNzaWduIGNvbHVtbiB3aWR0aCBub3QgZXEgb2Zmc2V0V2lkdGggaW4gbGFyZ2UgY29sdW1uIHRhYmxlICoqL1xyXG4gICAgICB9O1xyXG4gICAgICBsZXQgc29ydENhZXJ0ID0gY29sdW1uLnNvcnQ/KFV0aWwucmVuZGVyUmVhY3RTb3J0Q2FyZXQoQ29uc3QuU09SVF9ERVNDKSk6bnVsbDtcclxuICAgICAgcmV0dXJuICg8dGggc3R5bGU9e3N0eWxlfSBrZXk9e2l9IGNsYXNzTmFtZT17Y29sdW1uLmNsYXNzTmFtZX0+e2NvbHVtbi50ZXh0fXtzb3J0Q2FlcnR9PC90aD4pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuKFxyXG4gICAgICA8dGhlYWQgcmVmPVwiaGVhZGVyXCI+XHJcbiAgICAgICAgPHRyPntzZWxlY3RSb3dIZWFkZXJ9e3RoZWFkZXJ9PC90cj5cclxuICAgICAgPC90aGVhZD5cclxuICAgIClcclxuICB9XHJcblxyXG4gIGhhbmRsZVJvd01vdXNlT3V0KHJvd0luZGV4KXtcclxuICAgIGNvbnN0IHRhcmdldFJvdyA9IHRoaXMucHJvcHMuZGF0YVtyb3dJbmRleC0xXTtcclxuICAgIHRoaXMucHJvcHMub25Sb3dNb3VzZU91dCh0YXJnZXRSb3cpO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlUm93TW91c2VPdmVyKHJvd0luZGV4KXtcclxuICAgIGNvbnN0IHRhcmdldFJvdyA9IHRoaXMucHJvcHMuZGF0YVtyb3dJbmRleC0xXTtcclxuICAgIHRoaXMucHJvcHMub25Sb3dNb3VzZU92ZXIodGFyZ2V0Um93KTtcclxuICB9XHJcblxyXG4gIGhhbmRsZVJvd0NsaWNrKHJvd0luZGV4KXtcclxuICAgIHZhciBrZXksIHNlbGVjdGVkUm93O1xyXG4gICAgdGhpcy5wcm9wcy5kYXRhLmZvckVhY2goZnVuY3Rpb24ocm93LCBpKXtcclxuICAgICAgaWYoaSA9PSByb3dJbmRleC0xKXtcclxuICAgICAgICBrZXkgPSByb3dbdGhpcy5wcm9wcy5rZXlGaWVsZF07XHJcbiAgICAgICAgc2VsZWN0ZWRSb3cgPSByb3c7XHJcbiAgICAgIH1cclxuICAgIH0sIHRoaXMpO1xyXG4gICAgdGhpcy5wcm9wcy5vblJvd0NsaWNrKHNlbGVjdGVkUm93KTtcclxuICB9XHJcblxyXG4gIGhhbmRsZVNlbGVjdFJvdyhyb3dJbmRleCwgaXNTZWxlY3RlZCl7XHJcbiAgICB2YXIga2V5LCBzZWxlY3RlZFJvdztcclxuICAgIHRoaXMucHJvcHMuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKHJvdywgaSl7XHJcbiAgICAgIGlmKGkgPT0gcm93SW5kZXgtMSl7XHJcbiAgICAgICAga2V5ID0gcm93W3RoaXMucHJvcHMua2V5RmllbGRdO1xyXG4gICAgICAgIHNlbGVjdGVkUm93ID0gcm93O1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfSwgdGhpcyk7XHJcbiAgICB0aGlzLnByb3BzLm9uU2VsZWN0Um93KHNlbGVjdGVkUm93LCBpc1NlbGVjdGVkKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZVNlbGVjdFJvd0NvbHVtQ2hhbmdlKGUpe1xyXG4gICAgaWYoIXRoaXMucHJvcHMuc2VsZWN0Um93LmNsaWNrVG9TZWxlY3QgfHwgIXRoaXMucHJvcHMuc2VsZWN0Um93LmNsaWNrVG9TZWxlY3RBbmRFZGl0Q2VsbCl7XHJcbiAgICAgIHRoaXMuaGFuZGxlU2VsZWN0Um93KFxyXG4gICAgICAgIGUuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucm93SW5kZXgsIGUuY3VycmVudFRhcmdldC5jaGVja2VkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhbmRsZUVkaXRDZWxsKHJvd0luZGV4LCBjb2x1bW5JbmRleCl7XHJcbiAgICB0aGlzLmVkaXRpbmcgPSB0cnVlO1xyXG4gICAgaWYodGhpcy5faXNTZWxlY3RSb3dEZWZpbmVkKCkpe1xyXG4gICAgICBjb2x1bW5JbmRleC0tO1xyXG4gICAgICBpZih0aGlzLnByb3BzLnNlbGVjdFJvdy5oaWRlU2VsZWN0Q29sdW1uKVxyXG4gICAgICAgIGNvbHVtbkluZGV4Kys7XHJcbiAgICB9XHJcbiAgICByb3dJbmRleC0tO1xyXG4gICAgdmFyIHN0YXRlT2JqID0ge1xyXG4gICAgICBjdXJyRWRpdENlbGw6IHtcclxuICAgICAgICByaWQ6IHJvd0luZGV4LFxyXG4gICAgICAgIGNpZDogY29sdW1uSW5kZXhcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBpZih0aGlzLnByb3BzLnNlbGVjdFJvdy5jbGlja1RvU2VsZWN0QW5kRWRpdENlbGwpe1xyXG4gICAgICB0aGlzLmhhbmRsZVNlbGVjdFJvdyhyb3dJbmRleCsxLCB0cnVlKTtcclxuICAgIH1cclxuICAgIHRoaXMuc2V0U3RhdGUoc3RhdGVPYmopO1xyXG4gIH1cclxuXHJcbiAgY2FuY2VsRWRpdCgpe1xyXG4gICAgdmFyIGN1cnJFZGl0Q2VsbD10aGlzLnN0YXRlLmN1cnJFZGl0Q2VsbDtcclxuICAgIGlmKGN1cnJFZGl0Q2VsbCl7XHJcbiAgICAgIHRoaXMuaGFuZGxlQ29tcGxldGVFZGl0Q2VsbChudWxsLGN1cnJFZGl0Q2VsbC5yaWQsY3VyckVkaXRDZWxsLmNpZCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoYW5kbGVDb21wbGV0ZUVkaXRDZWxsKG5ld1ZhbCwgcm93SW5kZXgsIGNvbHVtbkluZGV4KXtcclxuICAgIHRoaXMuc2V0U3RhdGUoe2N1cnJFZGl0Q2VsbDogbnVsbH0pO1xyXG4gICAgaWYobnVsbCAhPSBuZXdWYWwpXHJcbiAgICAgIHRoaXMucHJvcHMuY2VsbEVkaXQuX19vbkNvbXBsZXRlRWRpdF9fKG5ld1ZhbCwgcm93SW5kZXgsIGNvbHVtbkluZGV4KTtcclxuICB9XHJcblxyXG4gIHJlbmRlclNlbGVjdFJvd0NvbHVtbihzZWxlY3RlZCl7XHJcbiAgICBpZih0aGlzLnByb3BzLnNlbGVjdFJvdy5tb2RlID09IENvbnN0LlJPV19TRUxFQ1RfU0lOR0xFKSB7XHJcbiAgICAgIHJldHVybiAoPFRhYmxlQ29sdW1uPjxpbnB1dCB0eXBlPVwicmFkaW9cIiBjaGVja2VkPXtzZWxlY3RlZH0gb25DaGFuZ2U9e3RoaXMuaGFuZGxlU2VsZWN0Um93Q29sdW1DaGFuZ2UuYmluZCh0aGlzKX0vPjwvVGFibGVDb2x1bW4+KTtcclxuICAgIH1lbHNlIHtcclxuICAgICAgcmV0dXJuICg8VGFibGVDb2x1bW4gPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjaGVja2VkPXtzZWxlY3RlZH0gb25DaGFuZ2U9e3RoaXMuaGFuZGxlU2VsZWN0Um93Q29sdW1DaGFuZ2UuYmluZCh0aGlzKX0vPjwvVGFibGVDb2x1bW4+KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldEJvZHlIZWFkZXJEb21Qcm9wKCl7XHJcbiAgICB2YXIgaGVhZGVycyA9IHRoaXMucmVmcy5oZWFkZXIuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzO1xyXG4gICAgdmFyIGhlYWRlckRvbVByb3BzID0gW107XHJcbiAgICBmb3IobGV0IGk9MDtpPGhlYWRlcnMubGVuZ3RoO2krKyl7XHJcbiAgICAgIGhlYWRlckRvbVByb3BzLnB1c2goe1xyXG4gICAgICAgIHdpZHRoOmhlYWRlcnNbaV0ub2Zmc2V0V2lkdGhcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaGVhZGVyRG9tUHJvcHM7XHJcbiAgfVxyXG5cclxuICBhZGp1c3RCb2R5KCkge1xyXG4gICAgdGhpcy5oYXJkRml4SGVhZGVyV2lkdGgoKTtcclxuICAgIGlmKHRoaXMucHJvcHMuY29uZGVuc2VkKSB7XHJcbiAgICAgIHRoaXMucmVmcy5ib2R5LnN0eWxlLm1hcmdpblRvcCA9IFwiLTM2cHhcIjtcclxuICAgIH1cclxuXHJcbiAgICBpZih0aGlzLnByb3BzLm1heEhlaWdodCAmJlxyXG4gICAgICBwYXJzZUludCh0aGlzLnByb3BzLm1heEhlaWdodCkgPCB0aGlzLnJlZnMuY29udGFpbmVyLm9mZnNldEhlaWdodCkge1xyXG4gICAgICB0aGlzLnJlZnMuY29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICh0aGlzLnByb3BzLm1heEhlaWdodCAtIDQyKSArIFwicHhcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhcmRGaXhIZWFkZXJXaWR0aCgpe1xyXG4gICAgdmFyIGhlYWRlcnMgPSB0aGlzLnJlZnMuaGVhZGVyLmNoaWxkTm9kZXNbMF0uY2hpbGROb2RlcztcclxuICAgIGZvcihsZXQgaT0wO2k8aGVhZGVycy5sZW5ndGg7aSsrKXtcclxuICAgICAgaGVhZGVyc1tpXS5zdHlsZS53aWR0aCA9IGhlYWRlcnNbaV0ub2Zmc2V0V2lkdGggKyBcInB4XCI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjYWxjdWxhdGVDb250YWluZXJIZWlnaHQoKXtcclxuICAgIGlmKHRoaXMucHJvcHMuaGVpZ2h0ID09IFwiMTAwJVwiKSByZXR1cm4gdGhpcy5wcm9wcy5oZWlnaHQ7XHJcbiAgICBlbHNle1xyXG4gICAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5wcm9wcy5oZWlnaHQpIC0gNDI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaXNTZWxlY3RSb3dEZWZpbmVkKCl7XHJcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5zZWxlY3RSb3cubW9kZSA9PT0gQ29uc3QuUk9XX1NFTEVDVF9TSU5HTEUgfHxcclxuICAgICAgICAgIHRoaXMucHJvcHMuc2VsZWN0Um93Lm1vZGUgPT09IENvbnN0LlJPV19TRUxFQ1RfTVVMVEk7XHJcbiAgfVxyXG59XHJcblRhYmxlQm9keS5wcm9wVHlwZXMgPSB7XHJcbiAgaGVpZ2h0OiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxyXG4gIGRhdGE6IFJlYWN0LlByb3BUeXBlcy5hcnJheSxcclxuICBjb2x1bW5zOiBSZWFjdC5Qcm9wVHlwZXMuYXJyYXksXHJcbiAgc3RyaXBlZDogUmVhY3QuUHJvcFR5cGVzLmJvb2wsXHJcbiAgYm9yZGVyZWQ6IFJlYWN0LlByb3BUeXBlcy5ib29sLFxyXG4gIGhvdmVyOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCxcclxuICBjb25kZW5zZWQ6IFJlYWN0LlByb3BUeXBlcy5ib29sLFxyXG4gIGtleUZpZWxkOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxyXG4gIHNlbGVjdGVkUm93S2V5czogUmVhY3QuUHJvcFR5cGVzLmFycmF5LFxyXG4gIG9uUm93Q2xpY2s6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxyXG4gIG9uU2VsZWN0Um93OiBSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcclxuICBub0RhdGFUZXh0OiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nXHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IFRhYmxlQm9keTtcclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvVGFibGVCb2R5LmpzXG4gKiovIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IENvbnN0IGZyb20gJy4vQ29uc3QnO1xyXG5cclxuY2xhc3MgVGFibGVDb2x1bW4gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xyXG4gICAgICAgIGNvbnN0IHsgY2hpbGRyZW4gfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgbGV0IHNob3VsZFVwZGF0ZWQgPSB0aGlzLnByb3BzLndpZHRoICE9PSBuZXh0UHJvcHMud2lkdGhcclxuICAgICAgICAgICAgfHwgdGhpcy5wcm9wcy5jbGFzc05hbWUgIT09IG5leHRQcm9wcy5jbGFzc05hbWVcclxuICAgICAgICAgICAgfHwgdGhpcy5wcm9wcy5oaWRkZW4gIT09IG5leHRQcm9wcy5oaWRkZW5cclxuICAgICAgICAgICAgfHwgdGhpcy5wcm9wcy5kYXRhQWxpZ24gIT09IG5leHRQcm9wcy5kYXRhQWxpZ25cclxuICAgICAgICAgICAgfHwgdHlwZW9mIGNoaWxkcmVuICE9PSB0eXBlb2YgbmV4dFByb3BzLmNoaWxkcmVuXHJcbiAgICAgICAgICAgIHx8ICgnJyArIHRoaXMucHJvcHMub25FZGl0KS50b1N0cmluZygpICE9PSAoJycgKyBuZXh0UHJvcHMub25FZGl0KS50b1N0cmluZygpXHJcblxyXG4gICAgICAgIGlmIChzaG91bGRVcGRhdGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzaG91bGRVcGRhdGVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBjaGlsZHJlbiA9PT0gJ29iamVjdCcgJiYgY2hpbGRyZW4gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKGNoaWxkcmVuLnByb3BzLnR5cGUgPT09ICdjaGVja2JveCcgfHwgY2hpbGRyZW4ucHJvcHMudHlwZSA9PT0gJ3JhZGlvJykge1xyXG4gICAgICAgICAgICAgICAgc2hvdWxkVXBkYXRlZCA9IHNob3VsZFVwZGF0ZWQgfHxcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbi5wcm9wcy50eXBlICE9PSBuZXh0UHJvcHMuY2hpbGRyZW4ucHJvcHMudHlwZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuLnByb3BzLmNoZWNrZWQgIT09IG5leHRQcm9wcy5jaGlsZHJlbi5wcm9wcy5jaGVja2VkO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2hvdWxkVXBkYXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzaG91bGRVcGRhdGVkID0gc2hvdWxkVXBkYXRlZCB8fCBjaGlsZHJlbiAhPT0gbmV4dFByb3BzLmNoaWxkcmVuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNob3VsZFVwZGF0ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNob3VsZFVwZGF0ZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoISh0aGlzLnByb3BzLmNlbGxFZGl0ICYmIG5leHRQcm9wcy5jZWxsRWRpdCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzaG91bGRVcGRhdGVkXHJcbiAgICAgICAgICAgICAgICB8fCB0aGlzLnByb3BzLmNlbGxFZGl0Lm1vZGUgIT09IG5leHRQcm9wcy5jZWxsRWRpdC5tb2RlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVDZWxsRWRpdChlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuY2VsbEVkaXQubW9kZSA9PSBDb25zdC5DRUxMX0VESVRfREJDTElDSykge1xyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQuc2VsZWN0aW9uICYmIGRvY3VtZW50LnNlbGVjdGlvbi5lbXB0eSkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuc2VsZWN0aW9uLmVtcHR5KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAod2luZG93LmdldFNlbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnByb3BzLm9uRWRpdChcclxuICAgICAgICAgICAgZS5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQucm93SW5kZXgsXHJcbiAgICAgICAgICAgIGUuY3VycmVudFRhcmdldC5jZWxsSW5kZXgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICB2YXIgd2lkdGggPSB0aGlzLnByb3BzLndpZHRoID09IG51bGwgP1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzLndpZHRoIDogdGhpcy5wcm9wcy53aWR0aC5pbmRleE9mKCclJykgIT09IC0xID8gdGhpcy5wcm9wcy53aWR0aCA6IHBhcnNlSW50KHRoaXMucHJvcHMud2lkdGgpO1xyXG4gICAgICAgIHZhciB0ZFN0eWxlID0ge1xyXG4gICAgICAgICAgICB0ZXh0QWxpZ246IHRoaXMucHJvcHMuZGF0YUFsaWduLFxyXG4gICAgICAgICAgICBkaXNwbGF5OiB0aGlzLnByb3BzLmhpZGRlbiA/IFwibm9uZVwiIDogbnVsbCxcclxuICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxyXG4gICAgICAgICAgICBtYXhXaWR0aDogd2lkdGhcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBjbGFzc25hbWUgPSB0aGlzLnByb3BzLmNsYXNzTmFtZTtcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy53aWR0aCkge1xyXG4gICAgICAgICAgICBjbGFzc25hbWUgKz0gXCIgY29sLW1kLVwiICsgd2lkdGg7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdmFyIG9wdHMgPSB7fTtcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5jZWxsRWRpdCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5jZWxsRWRpdC5tb2RlID09IENvbnN0LkNFTExfRURJVF9DTElDSykge1xyXG4gICAgICAgICAgICAgICAgb3B0cy5vbkNsaWNrID0gdGhpcy5oYW5kbGVDZWxsRWRpdC5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuY2VsbEVkaXQubW9kZSA9PSBDb25zdC5DRUxMX0VESVRfREJDTElDSykge1xyXG4gICAgICAgICAgICAgICAgb3B0cy5vbkRvdWJsZUNsaWNrID0gdGhpcy5oYW5kbGVDZWxsRWRpdC5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDx0ZCBzdHlsZT17dGRTdHlsZX0gY2xhc3NOYW1lPXtjbGFzc25hbWV9IHsuLi5vcHRzfT5cclxuICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxyXG4gICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgIClcclxuICAgIH1cclxufVxyXG5UYWJsZUNvbHVtbi5wcm9wVHlwZXMgPSB7XHJcbiAgICBkYXRhQWxpZ246IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXHJcbiAgICBoaWRkZW46IFJlYWN0LlByb3BUeXBlcy5ib29sLFxyXG4gICAgY2xhc3NOYW1lOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nXHJcbn07XHJcblxyXG5UYWJsZUNvbHVtbi5kZWZhdWx0UHJvcHMgPSB7XHJcbiAgICBkYXRhQWxpZ246IFwibGVmdFwiLFxyXG4gICAgaGlkZGVuOiBmYWxzZSxcclxuICAgIGNsYXNzTmFtZTogXCJcIlxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IFRhYmxlQ29sdW1uO1xyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9UYWJsZUNvbHVtbi5qc1xuICoqLyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBDb25zdCBmcm9tICcuL0NvbnN0JztcclxuaW1wb3J0IEVkaXRvciBmcm9tICcuL0VkaXRvcidcclxuaW1wb3J0IE5vdGlmaWVyIGZyb20gJy4vTm90aWZpY2F0aW9uLmpzJztcclxuaW1wb3J0IGNsYXNzU2V0IGZyb20gJ2NsYXNzbmFtZXMnO1xyXG5cclxuY2xhc3MgVGFibGVFZGl0Q29sdW1uIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50e1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpe1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICB0aGlzLnRpbWVvdXRlQ2xlYXI9MDtcclxuICAgICAgICB0aGlzLnN0YXRlPXtcclxuICAgICAgICAgICAgc2hha2VFZGl0b3I6ZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICBoYW5kbGVLZXlQcmVzcyhlKXtcclxuICAgIGlmIChlLmtleUNvZGUgPT0gMTMpIHsgLy9QcmVzc2VkIEVOVEVSXHJcbiAgICAgIGxldCB2YWx1ZSA9IGUuY3VycmVudFRhcmdldC50eXBlID09ICdjaGVja2JveCc/XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZ2V0Q2hlY2tCb3hWYWx1ZShlKTplLmN1cnJlbnRUYXJnZXQudmFsdWU7XHJcblxyXG4gICAgICBpZighdGhpcy52YWxpZGF0b3IodmFsdWUpKXtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnByb3BzLmNvbXBsZXRlRWRpdChcclxuICAgICAgICB2YWx1ZSwgdGhpcy5wcm9wcy5yb3dJbmRleCwgdGhpcy5wcm9wcy5jb2xJbmRleCk7XHJcbiAgICB9ZWxzZSBpZihlLmtleUNvZGUgPT0gMjcpe1xyXG4gICAgICB0aGlzLnByb3BzLmNvbXBsZXRlRWRpdChcclxuICAgICAgICBudWxsLCB0aGlzLnByb3BzLnJvd0luZGV4LCB0aGlzLnByb3BzLmNvbEluZGV4KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhbmRsZUJsdXIoZSl7XHJcbiAgICBpZih0aGlzLnByb3BzLmJsdXJUb1NhdmUpe1xyXG4gICAgICBsZXQgdmFsdWUgPSBlLmN1cnJlbnRUYXJnZXQudHlwZSA9PSAnY2hlY2tib3gnP1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2dldENoZWNrQm94VmFsdWUoZSk6ZS5jdXJyZW50VGFyZ2V0LnZhbHVlO1xyXG4gICAgICBpZighdGhpcy52YWxpZGF0b3IodmFsdWUpKXtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnByb3BzLmNvbXBsZXRlRWRpdChcclxuICAgICAgICAgIHZhbHVlLCB0aGlzLnByb3BzLnJvd0luZGV4LCB0aGlzLnByb3BzLmNvbEluZGV4KTtcclxuICAgIH1cclxuICB9XHJcbiAgdmFsaWRhdG9yKHZhbHVlKXtcclxuICAgICAgdmFyIHRzPXRoaXM7XHJcbiAgICAgIGlmKHRzLnByb3BzLmVkaXRhYmxlLnZhbGlkYXRvcil7XHJcbiAgICAgICAgICB2YXIgdmFsaWQ9dHMucHJvcHMuZWRpdGFibGUudmFsaWRhdG9yKHZhbHVlKTtcclxuICAgICAgICAgIGlmKHZhbGlkIT09dHJ1ZSl7XHJcbiAgICAgICAgICAgICAgdHMucmVmcy5ub3RpZmllci5ub3RpY2UoJ2Vycm9yJyx2YWxpZCxcIlByZXNzZWQgRVNDIGNhbiBjYW5jZWxcIik7XHJcbiAgICAgICAgICAgICAgdmFyIGlucHV0ID0gdHMucmVmcy5pbnB1dFJlZjtcclxuICAgICAgICAgICAgICAvL2FuaW1hdGUgaW5wdXRcclxuICAgICAgICAgICAgICB0cy5jbGVhclRpbWVvdXQoKTtcclxuICAgICAgICAgICAgICB0cy5zZXRTdGF0ZSh7c2hha2VFZGl0b3I6dHJ1ZX0pO1xyXG4gICAgICAgICAgICAgIHRzLnRpbWVvdXRlQ2xlYXI9c2V0VGltZW91dChmdW5jdGlvbigpe3RzLnNldFN0YXRlKHtzaGFrZUVkaXRvcjpmYWxzZX0pO30sMzAwKTtcclxuICAgICAgICAgICAgICBpbnB1dC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgfVxyXG4gIGNsZWFyVGltZW91dCgpe1xyXG4gICAgICBpZih0aGlzLnRpbWVvdXRlQ2xlYXIhPTApe1xyXG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dGVDbGVhcik7XHJcbiAgICAgICAgICB0aGlzLnRpbWVvdXRlQ2xlYXI9MDtcclxuICAgICAgfVxyXG4gIH1cclxuICBjb21wb25lbnREaWRNb3VudCgpe1xyXG4gICAgICB2YXIgaW5wdXQgPSB0aGlzLnJlZnMuaW5wdXRSZWY7XHJcbiAgICAgIC8vIGlucHV0LnZhbHVlID0gdGhpcy5wcm9wcy5jaGlsZHJlbnx8Jyc7XHJcbiAgICAgIGlucHV0LmZvY3VzKCk7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgIHRoaXMuY2xlYXJUaW1lb3V0KCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKXtcclxuICAgIHZhciBlZGl0YWJsZT10aGlzLnByb3BzLmVkaXRhYmxlLFxyXG4gICAgICAgIGZvcm1hdD10aGlzLnByb3BzLmZvcm1hdCxcclxuICAgICAgICBhdHRyPXtcclxuICAgICAgICAgICAgcmVmOlwiaW5wdXRSZWZcIixcclxuICAgICAgICAgICAgb25LZXlEb3duOnRoaXMuaGFuZGxlS2V5UHJlc3MuYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgb25CbHVyOnRoaXMuaGFuZGxlQmx1ci5iaW5kKHRoaXMpXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvL3B1dCBwbGFjZWhvbGRlciBpZiBleGlzdFxyXG4gICAgICAgIGVkaXRhYmxlLnBsYWNlaG9sZGVyJiYoYXR0ci5wbGFjZWhvbGRlcj1lZGl0YWJsZS5wbGFjZWhvbGRlcik7XHJcblxyXG4gICAgdmFyIGVkaXRvckNsYXNzPWNsYXNzU2V0KHsnYW5pbWF0ZWQnOnRoaXMuc3RhdGUuc2hha2VFZGl0b3IsJ3NoYWtlJzp0aGlzLnN0YXRlLnNoYWtlRWRpdG9yfSk7XHJcbiAgICByZXR1cm4oXHJcbiAgICAgICAgPHRkIHJlZj1cInRkXCIgc3R5bGU9e3twb3NpdGlvbjoncmVsYXRpdmUnfX0+XHJcbiAgICAgICAgICAgIHtFZGl0b3IoZWRpdGFibGUsYXR0cixmb3JtYXQsZWRpdG9yQ2xhc3MsdGhpcy5wcm9wcy5jaGlsZHJlbnx8JycpfVxyXG4gICAgICAgICAgICA8Tm90aWZpZXIgcmVmPVwibm90aWZpZXJcIj48L05vdGlmaWVyPlxyXG4gICAgICAgIDwvdGQ+XHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBfZ2V0Q2hlY2tCb3hWYWx1ZShlKXtcclxuICAgIGxldCB2YWx1ZSA9ICcnO1xyXG4gICAgbGV0IHZhbHVlcyA9IGUuY3VycmVudFRhcmdldC52YWx1ZS5zcGxpdCgnOicpO1xyXG4gICAgdmFsdWUgPSBlLmN1cnJlbnRUYXJnZXQuY2hlY2tlZD92YWx1ZXNbMF06dmFsdWVzWzFdO1xyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG4gIH1cclxuXHJcbn1cclxuVGFibGVFZGl0Q29sdW1uLnByb3BUeXBlcyA9IHtcclxuICBjb21wbGV0ZUVkaXQ6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxyXG4gIHJvd0luZGV4OiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLFxyXG4gIGNvbEluZGV4OiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLFxyXG4gIGJsdXJUb1NhdmU6IFJlYWN0LlByb3BUeXBlcy5ib29sXHJcbn07XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVGFibGVFZGl0Q29sdW1uO1xyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9UYWJsZUVkaXRDb2x1bW4uanNcbiAqKi8iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgQ29uc3QgZnJvbSAnLi9Db25zdCc7XHJcbmltcG9ydCBjbGFzc1NldCBmcm9tICdjbGFzc25hbWVzJztcclxuXHJcbmNsYXNzIFRhYmxlRmlsdGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50e1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5maWx0ZXJPYmogPSB7fTtcclxuICB9XHJcblxyXG4gIGhhbmRsZUtleVVwKGUpe1xyXG4gICAgaWYoZS5jdXJyZW50VGFyZ2V0LnZhbHVlLnRyaW0oKSA9PT0gXCJcIilcclxuICAgICAgZGVsZXRlIHRoaXMuZmlsdGVyT2JqW2UuY3VycmVudFRhcmdldC5uYW1lXTtcclxuICAgIGVsc2VcclxuICAgICAgdGhpcy5maWx0ZXJPYmpbZS5jdXJyZW50VGFyZ2V0Lm5hbWVdID0gZS5jdXJyZW50VGFyZ2V0LnZhbHVlO1xyXG5cclxuICAgIHRoaXMucHJvcHMub25GaWx0ZXIodGhpcy5maWx0ZXJPYmopO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCl7XHJcbiAgICB2YXIgdGFibGVDbGFzc2VzID0gY2xhc3NTZXQoXCJ0YWJsZVwiLCB7XHJcbiAgICAgICd0YWJsZS1zdHJpcGVkJzogdGhpcy5wcm9wcy5zdHJpcGVkLFxyXG4gICAgICAndGFibGUtY29uZGVuc2VkJzogdGhpcy5wcm9wcy5jb25kZW5zZWRcclxuICAgIH0pO1xyXG4gICAgdmFyIHNlbGVjdFJvd0hlYWRlciA9IG51bGw7XHJcblxyXG4gICAgaWYodGhpcy5wcm9wcy5yb3dTZWxlY3RUeXBlID09IENvbnN0LlJPV19TRUxFQ1RfU0lOR0xFIHx8XHJcbiAgICAgICAgdGhpcy5wcm9wcy5yb3dTZWxlY3RUeXBlID09IENvbnN0LlJPV19TRUxFQ1RfTVVMVEkpe1xyXG4gICAgICBsZXQgc3R5bGUgPSB7XHJcbiAgICAgICAgd2lkdGg6MzUsXHJcbiAgICAgICAgcGFkZGluZ0xlZnQ6IDAsXHJcbiAgICAgICAgcGFkZGluZ1JpZ2h0OiAwXHJcbiAgICAgIH1cclxuICAgICAgc2VsZWN0Um93SGVhZGVyID0gKDx0aCBzdHlsZT17c3R5bGV9IGtleT17LTF9PkZpbHRlcjwvdGg+KTtcclxuICAgIH1cclxuICAgIHZhciBmaWx0ZXJGaWVsZCA9IHRoaXMucHJvcHMuY29sdW1ucy5tYXAoZnVuY3Rpb24oY29sdW1uKXtcclxuICAgICAgdmFyIHRoU3R5bGUgPSB7XHJcbiAgICAgICAgZGlzcGxheTogY29sdW1uLmhpZGRlbj9cIm5vbmVcIjpudWxsLFxyXG4gICAgICAgIHdpZHRoOiBjb2x1bW4ud2lkdGhcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuKFxyXG4gICAgICAgIDx0aCBrZXk9e2NvbHVtbi5uYW1lfSBzdHlsZT17dGhTdHlsZX0+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRoLWlubmVyIHRhYmxlLWhlYWRlci1jb2x1bW5cIj5cclxuICAgICAgICAgICAgPGlucHV0IHNpemU9XCIxMFwiIHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9e2NvbHVtbi5uYW1lfSBuYW1lPXtjb2x1bW4ubmFtZX0gb25LZXlVcD17dGhpcy5oYW5kbGVLZXlVcC5iaW5kKHRoaXMpfS8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L3RoPlxyXG4gICAgICApXHJcbiAgICB9LCB0aGlzKTtcclxuICAgIHJldHVybihcclxuICAgICAgPHRhYmxlIGNsYXNzTmFtZT17dGFibGVDbGFzc2VzfSBzdHlsZT17e21hcmdpblRvcDo1fX0+XHJcbiAgICAgICAgPHRoZWFkPlxyXG4gICAgICAgICAgPHRyIHN0eWxlPXt7Ym9yZGVyQm90dG9tU3R5bGU6ICdoaWRkZW4nfX0+XHJcbiAgICAgICAgICAgIHtzZWxlY3RSb3dIZWFkZXJ9e2ZpbHRlckZpZWxkfVxyXG4gICAgICAgICAgPC90cj5cclxuICAgICAgICA8L3RoZWFkPlxyXG4gICAgICA8L3RhYmxlPlxyXG4gICAgKVxyXG4gIH1cclxufVxyXG5UYWJsZUZpbHRlci5wcm9wVHlwZXMgPSB7XHJcbiAgY29sdW1uczogUmVhY3QuUHJvcFR5cGVzLmFycmF5LFxyXG4gIHJvd1NlbGVjdFR5cGU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXHJcbiAgb25GaWx0ZXI6IFJlYWN0LlByb3BUeXBlcy5mdW5jXHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IFRhYmxlRmlsdGVyO1xyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9UYWJsZUZpbHRlci5qc1xuICoqLyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xyXG5pbXBvcnQgQ29uc3QgZnJvbSAnLi9Db25zdCc7XHJcbmltcG9ydCBVdGlsIGZyb20gJy4vdXRpbCc7XHJcbmltcG9ydCBjbGFzc1NldCBmcm9tICdjbGFzc25hbWVzJztcclxuaW1wb3J0IFNlbGVjdFJvd0hlYWRlckNvbHVtbiBmcm9tICcuL1NlbGVjdFJvd0hlYWRlckNvbHVtbic7XHJcblxyXG5jbGFzcyBDaGVja2JveCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudHtcclxuICBjb21wb25lbnREaWRNb3VudCgpIHsgdGhpcy51cGRhdGUodGhpcy5wcm9wcy5jaGVja2VkKTsgfVxyXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMocHJvcHMpIHsgdGhpcy51cGRhdGUocHJvcHMuY2hlY2tlZCk7IH1cclxuICB1cGRhdGUoY2hlY2tlZCkge1xyXG4gICAgUmVhY3RET00uZmluZERPTU5vZGUodGhpcykuaW5kZXRlcm1pbmF0ZSA9IGNoZWNrZWQgPT09ICdpbmRldGVybWluYXRlJztcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIHJldHVybiA8aW5wdXQgY2xhc3NOYW1lPSdyZWFjdC1icy1zZWxlY3QtYWxsJyB0eXBlPVwiY2hlY2tib3hcIiBjaGVja2VkPXt0aGlzLnByb3BzLmNoZWNrZWR9IG9uQ2hhbmdlPXt0aGlzLnByb3BzLm9uQ2hhbmdlfSAvPlxyXG4gIH1cclxufVxyXG5cclxuY2xhc3MgVGFibGVIZWFkZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnR7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnNlbGVjdFJvd0NvbHVtbldpZHRoID0gbnVsbDtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpe1xyXG4gICAgdmFyIGNvbnRhaW5lckNsYXNzZXMgPSBjbGFzc1NldChcInRhYmxlLWhlYWRlclwiKTtcclxuICAgIHZhciB0YWJsZUNsYXNzZXMgPSBjbGFzc1NldChcInRhYmxlXCIsIFwidGFibGUtaG92ZXJcIiwge1xyXG4gICAgICAgIFwidGFibGUtYm9yZGVyZWRcIjogdGhpcy5wcm9wcy5ib3JkZXJlZCxcclxuICAgICAgICBcInRhYmxlLWNvbmRlbnNlZFwiOiB0aGlzLnByb3BzLmNvbmRlbnNlZFxyXG4gICAgfSk7XHJcbiAgICB2YXIgc2VsZWN0Um93SGVhZGVyQ29sID0gdGhpcy5wcm9wcy5oaWRlU2VsZWN0Q29sdW1uP251bGw6dGhpcy5yZW5kZXJTZWxlY3RSb3dIZWFkZXIoKTtcclxuICAgIHRoaXMuX2F0dGFjaENsZWFyU29ydENhcmV0RnVuYygpO1xyXG5cclxuICAgIHJldHVybihcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YWJsZS1oZWFkZXItd3JhcHBlclwiPlxyXG4gICAgICAgIDxkaXYgcmVmPVwiY29udGFpbmVyXCIgY2xhc3NOYW1lPXtjb250YWluZXJDbGFzc2VzfT5cclxuICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9e3RhYmxlQ2xhc3Nlc30gaWQ9e3RoaXMucHJvcHMudGFibGVJRH0+XHJcbiAgICAgICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgICA8dHIgcmVmPVwiaGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgICB7c2VsZWN0Um93SGVhZGVyQ29sfVxyXG4gICAgICAgICAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XHJcbiAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgPC90aGVhZD5cclxuICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyU2VsZWN0Um93SGVhZGVyKCl7XHJcbiAgICBpZih0aGlzLnByb3BzLnJvd1NlbGVjdFR5cGUgPT0gQ29uc3QuUk9XX1NFTEVDVF9TSU5HTEUpIHtcclxuICAgICAgcmV0dXJuICg8U2VsZWN0Um93SGVhZGVyQ29sdW1uIHdpZHRoPXt0aGlzLnNlbGVjdFJvd0NvbHVtbldpZHRofT48L1NlbGVjdFJvd0hlYWRlckNvbHVtbj4pO1xyXG4gICAgfWVsc2UgaWYodGhpcy5wcm9wcy5yb3dTZWxlY3RUeXBlID09IENvbnN0LlJPV19TRUxFQ1RfTVVMVEkpe1xyXG4gICAgICByZXR1cm4gKDxTZWxlY3RSb3dIZWFkZXJDb2x1bW4gd2lkdGg9e3RoaXMuc2VsZWN0Um93Q29sdW1uV2lkdGh9PlxyXG4gICAgICAgICAgPENoZWNrYm94IG9uQ2hhbmdlPXt0aGlzLnByb3BzLm9uU2VsZWN0QWxsUm93fSBjaGVja2VkPXt0aGlzLnByb3BzLmlzU2VsZWN0QWxsfS8+XHJcbiAgICAgICAgPC9TZWxlY3RSb3dIZWFkZXJDb2x1bW4+XHJcbiAgICAgICk7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfYXR0YWNoQ2xlYXJTb3J0Q2FyZXRGdW5jKCl7XHJcbiAgICBpZihBcnJheS5pc0FycmF5KHRoaXMucHJvcHMuY2hpbGRyZW4pKXtcclxuICAgICAgZm9yKGxldCBpPTA7aTx0aGlzLnByb3BzLmNoaWxkcmVuLmxlbmd0aDtpKyspe1xyXG4gICAgICAgIGNvbnN0IGZpZWxkID0gdGhpcy5wcm9wcy5jaGlsZHJlbltpXS5wcm9wcy5kYXRhRmllbGQ7XHJcbiAgICAgICAgY29uc3Qgc29ydCA9IGZpZWxkID09PSB0aGlzLnByb3BzLnNvcnROYW1lID8gdGhpcy5wcm9wcy5zb3J0T3JkZXIgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlbltpXSA9XHJcbiAgICAgICAgICBSZWFjdC5jbG9uZUVsZW1lbnQodGhpcy5wcm9wcy5jaGlsZHJlbltpXSxcclxuICAgICAgICAgICAgeyBrZXk6IGksIG9uU29ydDogdGhpcy5wcm9wcy5vblNvcnQsIHNvcnQgfSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGZpZWxkID0gdGhpcy5wcm9wcy5jaGlsZHJlbi5wcm9wcy5kYXRhRmllbGQ7XHJcbiAgICAgIGNvbnN0IHNvcnQgPSBmaWVsZCA9PT0gdGhpcy5wcm9wcy5zb3J0TmFtZSA/IHRoaXMucHJvcHMuc29ydE9yZGVyIDogdW5kZWZpbmVkO1xyXG4gICAgICB0aGlzLnByb3BzLmNoaWxkcmVuID1cclxuICAgICAgICBSZWFjdC5jbG9uZUVsZW1lbnQodGhpcy5wcm9wcy5jaGlsZHJlbiwge2tleTogMCwgb25Tb3J0OiB0aGlzLnByb3BzLm9uU29ydCwgc29ydH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZml0SGVhZGVyKGhlYWRlclByb3BzLCBpc1ZlcnRpY2FsU2Nyb2xsQmFyKXtcclxuICAgIGlmKEFycmF5LmlzQXJyYXkodGhpcy5wcm9wcy5jaGlsZHJlbikpe1xyXG4gICAgICBsZXQgc3RhcnRQb3NpdGlvbiA9ICh0aGlzLnByb3BzLnJvd1NlbGVjdFR5cGUgPT0gQ29uc3QuUk9XX1NFTEVDVF9TSU5HTEUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5yb3dTZWxlY3RUeXBlID09IENvbnN0LlJPV19TRUxFQ1RfTVVMVEkpICYmICF0aGlzLnByb3BzLmhpZGVTZWxlY3RDb2x1bW4gPyAxOjA7XHJcbiAgICAgIGlmKHN0YXJ0UG9zaXRpb24gPT0gMSlcclxuICAgICAgICB0aGlzLnNlbGVjdFJvd0NvbHVtbldpZHRoID0gaGVhZGVyUHJvcHNbMF0ud2lkdGg7XHJcbiAgICAgIGZvcihsZXQgaT0wO2k8dGhpcy5wcm9wcy5jaGlsZHJlbi5sZW5ndGg7aSsrKXtcclxuICAgICAgICB0aGlzLnByb3BzLmNoaWxkcmVuW2ldID1cclxuICAgICAgICAgIFJlYWN0LmNsb25lRWxlbWVudCh0aGlzLnByb3BzLmNoaWxkcmVuW2ldLCB7d2lkdGg6IGhlYWRlclByb3BzW2krc3RhcnRQb3NpdGlvbl0ud2lkdGgrXCJweFwifSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucHJvcHMuY2hpbGRyZW4gPVxyXG4gICAgICAgIFJlYWN0LmNsb25lRWxlbWVudCh0aGlzLnByb3BzLmNoaWxkcmVuLCB7d2lkdGg6IGhlYWRlclByb3BzWzBdLndpZHRoK1wicHhcIn0pO1xyXG4gICAgfVxyXG4gICAgaWYodGhpcy5wcm9wcy5jb25kZW5zZWQgJiYgIXRoaXMucHJvcHMuaXNGaWx0ZXJlZCkge1xyXG4gICAgICB0aGlzLnJlZnMuY29udGFpbmVyLnN0eWxlLmhlaWdodCA9IFwiMzZweFwiO1xyXG4gICAgfVxyXG4gICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgaWYoaXNWZXJ0aWNhbFNjcm9sbEJhcilcclxuICAgICAgdGhpcy5yZWZzLmNvbnRhaW5lci5zdHlsZS5tYXJnaW5SaWdodCA9IFV0aWwuZ2V0U2Nyb2xsQmFyV2lkdGgoKSArIFwicHhcIjtcclxuICB9XHJcbn1cclxuVGFibGVIZWFkZXIucHJvcFR5cGVzID0ge1xyXG4gIHJvd1NlbGVjdFR5cGU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXHJcbiAgb25Tb3J0OiBSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcclxuICBvblNlbGVjdEFsbFJvdzogUmVhY3QuUHJvcFR5cGVzLmZ1bmMsXHJcbiAgc29ydE5hbWU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXHJcbiAgc29ydE9yZGVyOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxyXG4gIGhpZGVTZWxlY3RDb2x1bW46IFJlYWN0LlByb3BUeXBlcy5ib29sLFxyXG4gIGJvcmRlcmVkOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCxcclxuICBjb25kZW5zZWQ6IFJlYWN0LlByb3BUeXBlcy5ib29sLFxyXG4gIGlzRmlsdGVyZWQ6IFJlYWN0LlByb3BUeXBlcy5ib29sLFxyXG4gIGlzU2VsZWN0QWxsOiBSZWFjdC5Qcm9wVHlwZXMub25lT2YoW3RydWUsICdpbmRldGVybWluYXRlJywgZmFsc2VdKVxyXG59O1xyXG5cclxuVGFibGVIZWFkZXIuZGVmYXVsdFByb3BzID0ge1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBUYWJsZUhlYWRlcjtcclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvVGFibGVIZWFkZXIuanNcbiAqKi8iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgY2xhc3NTZXQgZnJvbSAnY2xhc3NuYW1lcyc7XHJcbmltcG9ydCBDb25zdCBmcm9tICcuL0NvbnN0JztcclxuaW1wb3J0IFV0aWwgZnJvbSAnLi91dGlsJztcclxuaW1wb3J0IERhdGVGaWx0ZXIgZnJvbSAnLi9maWx0ZXJzL0RhdGUnO1xyXG5pbXBvcnQgVGV4dEZpbHRlciBmcm9tICcuL2ZpbHRlcnMvVGV4dCc7XHJcbmltcG9ydCBTZWxlY3RGaWx0ZXIgZnJvbSAnLi9maWx0ZXJzL1NlbGVjdCc7XHJcbmltcG9ydCBOdW1iZXJGaWx0ZXIgZnJvbSAnLi9maWx0ZXJzL051bWJlcic7XHJcblxyXG5jbGFzcyBUYWJsZUhlYWRlckNvbHVtbiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLmhhbmRsZUZpbHRlciA9IHRoaXMuaGFuZGxlRmlsdGVyLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVDb2x1bW5DbGljayhlKSB7XHJcbiAgICBpZiAoIXRoaXMucHJvcHMuZGF0YVNvcnQpcmV0dXJuO1xyXG4gICAgbGV0IG9yZGVyID0gdGhpcy5wcm9wcy5zb3J0ID09IENvbnN0LlNPUlRfREVTQyA/IENvbnN0LlNPUlRfQVNDIDogQ29uc3QuU09SVF9ERVNDO1xyXG4gICAgdGhpcy5wcm9wcy5vblNvcnQob3JkZXIsIHRoaXMucHJvcHMuZGF0YUZpZWxkKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZUZpbHRlcih2YWx1ZSwgdHlwZSkge1xyXG4gICAgdGhpcy5wcm9wcy5maWx0ZXIuZW1pdHRlci5oYW5kbGVGaWx0ZXIodGhpcy5wcm9wcy5kYXRhRmllbGQsIHZhbHVlLCB0eXBlKTtcclxuICB9XHJcblxyXG4gIGdldEZpbHRlcnMoKSB7XHJcbiAgICBzd2l0Y2ggKHRoaXMucHJvcHMuZmlsdGVyLnR5cGUpIHtcclxuICAgICAgY2FzZSBDb25zdC5GSUxURVJfVFlQRS5URVhUOlxyXG4gICAgICB7XHJcbiAgICAgICAgcmV0dXJuIDxUZXh0RmlsdGVyIHsuLi50aGlzLnByb3BzLmZpbHRlcn0gY29sdW1uTmFtZT17dGhpcy5wcm9wcy5jaGlsZHJlbn0gZmlsdGVySGFuZGxlcj17dGhpcy5oYW5kbGVGaWx0ZXJ9Lz47XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBDb25zdC5GSUxURVJfVFlQRS5TRUxFQ1Q6XHJcbiAgICAgIHtcclxuICAgICAgICByZXR1cm4gPFNlbGVjdEZpbHRlciB7Li4udGhpcy5wcm9wcy5maWx0ZXJ9IGNvbHVtbk5hbWU9e3RoaXMucHJvcHMuY2hpbGRyZW59XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJIYW5kbGVyPXt0aGlzLmhhbmRsZUZpbHRlcn0vPjtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIENvbnN0LkZJTFRFUl9UWVBFLk5VTUJFUjpcclxuICAgICAge1xyXG4gICAgICAgIHJldHVybiA8TnVtYmVyRmlsdGVyIHsuLi50aGlzLnByb3BzLmZpbHRlcn0gY29sdW1uTmFtZT17dGhpcy5wcm9wcy5jaGlsZHJlbn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlckhhbmRsZXI9e3RoaXMuaGFuZGxlRmlsdGVyfS8+O1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgQ29uc3QuRklMVEVSX1RZUEUuREFURTpcclxuICAgICAge1xyXG4gICAgICAgIHJldHVybiA8RGF0ZUZpbHRlciB7Li4udGhpcy5wcm9wcy5maWx0ZXJ9IGNvbHVtbk5hbWU9e3RoaXMucHJvcHMuY2hpbGRyZW59IGZpbHRlckhhbmRsZXI9e3RoaXMuaGFuZGxlRmlsdGVyfS8+O1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgQ29uc3QuRklMVEVSX1RZUEUuQ1VTVE9NOlxyXG4gICAgICB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuZmlsdGVyLmdldEVsZW1lbnQodGhpcy5oYW5kbGVGaWx0ZXIsIHRoaXMucHJvcHMuZmlsdGVyLmN1c3RvbUZpbHRlclBhcmFtZXRlcnMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgIHRoaXMucmVmcy5pbm5lckRpdi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWZpZWxkXCIsIHRoaXMucHJvcHMuZGF0YUZpZWxkKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIHZhciB3aWR0aCA9IHRoaXMucHJvcHMud2lkdGggIT09IG51bGwgPyBwYXJzZUludCh0aGlzLnByb3BzLndpZHRoKSA6IG51bGw7XHJcbiAgICB2YXIgdGhTdHlsZSA9IHtcclxuICAgICAgdGV4dEFsaWduOiB0aGlzLnByb3BzLmRhdGFBbGlnbixcclxuICAgICAgZGlzcGxheTogdGhpcy5wcm9wcy5oaWRkZW4gPyBcIm5vbmVcIiA6IG51bGwsXHJcbiAgICAgIHdpZHRoOiB3aWR0aCxcclxuICAgICAgbWF4V2lkdGg6IHdpZHRoXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGRlZmF1bHRDYXJldCA9ICghdGhpcy5wcm9wcy5kYXRhU29ydCkgPyBudWxsIDogKFxyXG4gICAgICA8c3BhbiBjbGFzc05hbWU9XCJvcmRlclwiPlxyXG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImRyb3Bkb3duXCI+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJjYXJldFwiIHN0eWxlPXt7bWFyZ2luOiAnMTBweCAwIDEwcHggNXB4JywgY29sb3I6ICcjY2NjJ319Pjwvc3Bhbj5cclxuICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZHJvcHVwXCI+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJjYXJldFwiIHN0eWxlPXt7bWFyZ2luOiAnMTBweCAwJywgY29sb3I6ICcjY2NjJ319Pjwvc3Bhbj5cclxuICAgICAgICA8L3NwYW4+XHJcbiAgICAgIDwvc3Bhbj5cclxuICAgICk7XHJcbiAgICBjb25zdCBzb3J0Q2FyZXQgPSB0aGlzLnByb3BzLnNvcnQgPyBVdGlsLnJlbmRlclJlYWN0U29ydENhcmV0KHRoaXMucHJvcHMuc29ydCkgOiBkZWZhdWx0Q2FyZXQ7XHJcblxyXG4gICAgdmFyIGNsYXNzZXMgPSB0aGlzLnByb3BzLmNsYXNzTmFtZSArIFwiIFwiICsgKHRoaXMucHJvcHMuZGF0YVNvcnQgPyBcInNvcnQtY29sdW1uXCIgOiBcIlwiKTtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDx0aCByZWY9J2hlYWRlci1jb2wnIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3R5bGU9e3RoU3R5bGV9PlxyXG4gICAgICAgIDxkaXYgcmVmPVwiaW5uZXJEaXZcIiBjbGFzc05hbWU9XCJ0aC1pbm5lciB0YWJsZS1oZWFkZXItY29sdW1uXCJcclxuICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ29sdW1uQ2xpY2suYmluZCh0aGlzKX0+XHJcbiAgICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn17c29ydENhcmV0fVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIHt0aGlzLnByb3BzLmZpbHRlciA/IHRoaXMuZ2V0RmlsdGVycygpIDogbnVsbH1cclxuICAgICAgPC90aD5cclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbnZhciBmaWx0ZXJUeXBlQXJyYXkgPSBbXTtcclxuZm9yIChsZXQga2V5IGluIENvbnN0LkZJTFRFUl9UWVBFKSB7XHJcbiAgZmlsdGVyVHlwZUFycmF5LnB1c2goQ29uc3QuRklMVEVSX1RZUEVba2V5XSk7XHJcbn1cclxuXHJcblRhYmxlSGVhZGVyQ29sdW1uLnByb3BUeXBlcyA9IHtcclxuICBkYXRhRmllbGQ6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXHJcbiAgZGF0YUFsaWduOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxyXG4gIGRhdGFTb3J0OiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCxcclxuICBvblNvcnQ6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxyXG4gIGRhdGFGb3JtYXQ6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxyXG4gIGlzS2V5OiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCxcclxuICBlZGl0YWJsZTogUmVhY3QuUHJvcFR5cGVzLmFueSxcclxuICBoaWRkZW46IFJlYWN0LlByb3BUeXBlcy5ib29sLFxyXG4gIGhpZGRlbkluUG9wdXA6IFJlYWN0LlByb3BUeXBlcy5ib29sLFxyXG4gIHNlYXJjaGFibGU6IFJlYWN0LlByb3BUeXBlcy5ib29sLFxyXG4gIGNsYXNzTmFtZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcclxuICB3aWR0aDogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcclxuICBzb3J0RnVuYzogUmVhY3QuUHJvcFR5cGVzLmZ1bmMsXHJcbiAgY29sdW1uQ2xhc3NOYW1lOiBSZWFjdC5Qcm9wVHlwZXMuYW55LFxyXG4gIGZpbHRlckZvcm1hdHRlZDogUmVhY3QuUHJvcFR5cGVzLmJvb2wsXHJcbiAgc29ydDogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcclxuICBmb3JtYXRFeHRyYURhdGE6IFJlYWN0LlByb3BUeXBlcy5hbnksXHJcbiAgZmlsdGVyOiBSZWFjdC5Qcm9wVHlwZXMuc2hhcGUoe1xyXG4gICAgdHlwZTogUmVhY3QuUHJvcFR5cGVzLm9uZU9mKGZpbHRlclR5cGVBcnJheSksXHJcbiAgICBkZWxheTogUmVhY3QuUHJvcFR5cGVzLm51bWJlcixcclxuICAgIG9wdGlvbnM6IFJlYWN0LlByb3BUeXBlcy5vbmVPZlR5cGUoW1xyXG4gICAgICBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0LCAvLyBmb3IgU2VsZWN0RmlsdGVyXHJcbiAgICAgIFJlYWN0LlByb3BUeXBlcy5hcnJheU9mKFJlYWN0LlByb3BUeXBlcy5udW1iZXIpIC8vZm9yIE51bWJlckZpbHRlclxyXG4gICAgXSksXHJcbiAgICBudW1iZXJDb21wYXJhdG9yczogUmVhY3QuUHJvcFR5cGVzLmFycmF5T2YoUmVhY3QuUHJvcFR5cGVzLnN0cmluZyksXHJcbiAgICBlbWl0dGVyOiBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0LFxyXG4gICAgcGxhY2Vob2xkZXI6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXHJcbiAgICBnZXRFbGVtZW50OiBSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcclxuICAgIGN1c3RvbUZpbHRlclBhcmFtZXRlcnM6IFJlYWN0LlByb3BUeXBlcy5vYmplY3RcclxuICB9KVxyXG59O1xyXG5cclxuVGFibGVIZWFkZXJDb2x1bW4uZGVmYXVsdFByb3BzID0ge1xyXG4gIGRhdGFBbGlnbjogXCJsZWZ0XCIsXHJcbiAgZGF0YVNvcnQ6IGZhbHNlLFxyXG4gIGRhdGFGb3JtYXQ6IHVuZGVmaW5lZCxcclxuICBpc0tleTogZmFsc2UsXHJcbiAgZWRpdGFibGU6IHRydWUsXHJcbiAgb25Tb3J0OiB1bmRlZmluZWQsXHJcbiAgaGlkZGVuOiBmYWxzZSxcclxuICBoaWRkZW5JblBvcHVwOiBmYWxzZSxcclxuICBzZWFyY2hhYmxlOiB0cnVlLFxyXG4gIGNsYXNzTmFtZTogXCJcIixcclxuICB3aWR0aDogbnVsbCxcclxuICBzb3J0RnVuYzogdW5kZWZpbmVkLFxyXG4gIGNvbHVtbkNsYXNzTmFtZTogJycsXHJcbiAgZmlsdGVyRm9ybWF0dGVkOiBmYWxzZSxcclxuICBzb3J0OiB1bmRlZmluZWQsXHJcbiAgZm9ybWF0RXh0cmFEYXRhOiB1bmRlZmluZWQsXHJcbiAgZmlsdGVyOiB1bmRlZmluZWRcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFRhYmxlSGVhZGVyQ29sdW1uO1xyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9UYWJsZUhlYWRlckNvbHVtbi5qc1xuICoqLyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBDb25zdCBmcm9tICcuL0NvbnN0JztcclxuXHJcbmNsYXNzIFRhYmxlUm93IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50e1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5jbGlja051bSA9IDA7XHJcbiAgfVxyXG5cclxuICByb3dDbGljayhlKXtcclxuICAgIGlmKGUudGFyZ2V0LnRhZ05hbWUgIT09IFwiSU5QVVRcIiAmJlxyXG4gICAgICAgIGUudGFyZ2V0LnRhZ05hbWUgIT09IFwiU0VMRUNUXCIgJiZcclxuICAgICAgICBlLnRhcmdldC50YWdOYW1lICE9PSBcIlRFWFRBUkVBXCIpIHtcclxuICAgICAgY29uc3Qgcm93SW5kZXggPSBlLmN1cnJlbnRUYXJnZXQucm93SW5kZXg7XHJcbiAgICAgIGlmICh0aGlzLnByb3BzLnNlbGVjdFJvdykge1xyXG4gICAgICAgICAgaWYgKHRoaXMucHJvcHMuc2VsZWN0Um93LmNsaWNrVG9TZWxlY3QpIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5vblNlbGVjdFJvdyhyb3dJbmRleCwgIXRoaXMucHJvcHMuaXNTZWxlY3RlZCk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuc2VsZWN0Um93LmNsaWNrVG9TZWxlY3RBbmRFZGl0Q2VsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmNsaWNrTnVtKys7XHJcbiAgICAgICAgICAgIC8qKiBpZiBjbGlja1RvU2VsZWN0QW5kRWRpdENlbGwgaXMgZW5hYmxlZCxcclxuICAgICAgICAgICAgICogIHRoZXJlIHNob3VsZCBiZSBhIGRlbGF5IHRvIHByZXZlbnQgYSBzZWxlY3Rpb24gY2hhbmdlZCB3aGVuXHJcbiAgICAgICAgICAgICAqICB1c2VyIGRibGljayB0byBlZGl0IGNlbGwgb24gc2FtZSByb3cgYnV0IGRpZmZlcmVudCBjZWxsXHJcbiAgICAgICAgICAgICoqL1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICBpZih0aGlzLmNsaWNrTnVtID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uU2VsZWN0Um93KHJvd0luZGV4LCAhdGhpcy5wcm9wcy5pc1NlbGVjdGVkKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgdGhpcy5jbGlja051bSA9IDA7XHJcbiAgICAgICAgICAgIH0sIDIwMCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMucHJvcHMub25Sb3dDbGljaykgdGhpcy5wcm9wcy5vblJvd0NsaWNrKHJvd0luZGV4KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJvd01vdXNlT3V0KGUpIHtcclxuICAgIGlmICh0aGlzLnByb3BzLm9uUm93TW91c2VPdXQpIHtcclxuICAgICAgdGhpcy5wcm9wcy5vblJvd01vdXNlT3V0KGUuY3VycmVudFRhcmdldC5yb3dJbmRleCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByb3dNb3VzZU92ZXIoZSkge1xyXG4gICAgaWYgKHRoaXMucHJvcHMub25Sb3dNb3VzZU92ZXIpIHtcclxuICAgICAgdGhpcy5wcm9wcy5vblJvd01vdXNlT3ZlcihlLmN1cnJlbnRUYXJnZXQucm93SW5kZXgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCl7XHJcbiAgICB0aGlzLmNsaWNrTnVtID0gMDtcclxuICAgIHZhciB0ckNzcz17XHJcbiAgICAgIHN0eWxlOntcclxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoaXMucHJvcHMuaXNTZWxlY3RlZD90aGlzLnByb3BzLnNlbGVjdFJvdy5iZ0NvbG9yOm51bGxcclxuICAgICAgfSxcclxuICAgICAgY2xhc3NOYW1lOih0aGlzLnByb3BzLmlzU2VsZWN0ZWQgJiYgdGhpcy5wcm9wcy5zZWxlY3RSb3cuY2xhc3NOYW1lID8gdGhpcy5wcm9wcy5zZWxlY3RSb3cuY2xhc3NOYW1lIDogJycpICsgKHRoaXMucHJvcHMuY2xhc3NOYW1lfHwnJylcclxuICAgIH07XHJcblxyXG4gICAgaWYodGhpcy5wcm9wcy5zZWxlY3RSb3cgJiYgKHRoaXMucHJvcHMuc2VsZWN0Um93LmNsaWNrVG9TZWxlY3QgfHxcclxuICAgICAgdGhpcy5wcm9wcy5zZWxlY3RSb3cuY2xpY2tUb1NlbGVjdEFuZEVkaXRDZWxsKSB8fCB0aGlzLnByb3BzLm9uUm93Q2xpY2spe1xyXG4gICAgICByZXR1cm4oXHJcbiAgICAgICAgPHRyIHsuLi50ckNzc31cclxuICAgICAgICAgICAgb25Nb3VzZU92ZXI9e3RoaXMucm93TW91c2VPdmVyLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgIG9uTW91c2VPdXQ9e3RoaXMucm93TW91c2VPdXQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgb25DbGljaz17dGhpcy5yb3dDbGljay5iaW5kKHRoaXMpfT57dGhpcy5wcm9wcy5jaGlsZHJlbn08L3RyPlxyXG4gICAgICApXHJcbiAgICB9ZWxzZXtcclxuICAgICAgcmV0dXJuKFxyXG4gICAgICAgIDx0ciB7Li4udHJDc3N9Pnt0aGlzLnByb3BzLmNoaWxkcmVufTwvdHI+XHJcbiAgICAgIClcclxuICAgIH1cclxuICB9XHJcbn1cclxuVGFibGVSb3cucHJvcFR5cGVzID0ge1xyXG4gIGlzU2VsZWN0ZWQ6IFJlYWN0LlByb3BUeXBlcy5ib29sLFxyXG4gIGVuYWJsZUNlbGxFZGl0OiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCxcclxuICBvblJvd0NsaWNrOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcclxuICBvblNlbGVjdFJvdzogUmVhY3QuUHJvcFR5cGVzLmZ1bmMsXHJcbiAgb25Sb3dNb3VzZU91dDogUmVhY3QuUHJvcFR5cGVzLmZ1bmMsXHJcbiAgb25Sb3dNb3VzZU92ZXI6IFJlYWN0LlByb3BUeXBlcy5mdW5jXHJcbn07XHJcblRhYmxlUm93LmRlZmF1bHRQcm9wcyA9IHtcclxuICBvblJvd0NsaWNrOiB1bmRlZmluZWRcclxufVxyXG5leHBvcnQgZGVmYXVsdCBUYWJsZVJvdztcclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvVGFibGVSb3cuanNcbiAqKi8iLCJpZih0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyl7XHJcbiAgdmFyIGZpbGVzYXZlciA9IHJlcXVpcmUoJy4vZmlsZXNhdmVyJyk7XHJcbiAgdmFyIHNhdmVBcyA9IGZpbGVzYXZlci5zYXZlQXNcclxufVxyXG5cclxuZnVuY3Rpb24gdG9TdHJpbmcoZGF0YSwga2V5cykge1xyXG4gIHZhciBkYXRhU3RyaW5nID0gXCJcIjtcclxuICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHJldHVybiBkYXRhU3RyaW5nO1xyXG5cclxuICBkYXRhU3RyaW5nICs9IGtleXMuam9pbignLCcpICsgJ1xcbidcclxuXHJcbiAgZGF0YS5tYXAoZnVuY3Rpb24ocm93KSB7XHJcbiAgICBrZXlzLm1hcChmdW5jdGlvbihjb2wsIGkpIHtcclxuICAgICAgbGV0IGNlbGwgPSB0eXBlb2Ygcm93W2NvbF0gIT09ICd1bmRlZmluZWQnID8gKCdcIicrcm93W2NvbF0rJ1wiJykgOiBcIlwiO1xyXG4gICAgICBkYXRhU3RyaW5nICs9IGNlbGw7XHJcbiAgICAgIGlmIChpKzEgPCBrZXlzLmxlbmd0aClcclxuICAgICAgICBkYXRhU3RyaW5nICs9ICcsJztcclxuICAgIH0pO1xyXG5cclxuICAgIGRhdGFTdHJpbmcgKz0gJ1xcbic7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBkYXRhU3RyaW5nO1xyXG59O1xyXG5cclxudmFyIGV4cG9ydENTViA9IGZ1bmN0aW9uKGRhdGEsIGtleXMsIGZpbGVuYW1lKSB7XHJcbiAgdmFyIGRhdGFTdHJpbmcgPSB0b1N0cmluZyhkYXRhLCBrZXlzKTtcclxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHNhdmVBcyggbmV3IEJsb2IoW2RhdGFTdHJpbmddLCB7dHlwZTogXCJ0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLThcIn0pLCBmaWxlbmFtZSB8fCAnc3ByZWFkc2hlZXQuY3N2JyApO1xyXG4gIH1cclxuXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBleHBvcnRDU1Y7XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2Nzdl9leHBvcnRfdXRpbC5qc1xuICoqLyIsIi8qIEZpbGVTYXZlci5qc1xyXG4gKiBBIHNhdmVBcygpIEZpbGVTYXZlciBpbXBsZW1lbnRhdGlvbi5cclxuICogMS4xLjIwMTUxMDAzXHJcbiAqXHJcbiAqIEJ5IEVsaSBHcmV5LCBodHRwOi8vZWxpZ3JleS5jb21cclxuICogTGljZW5zZTogTUlUXHJcbiAqICAgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGlncmV5L0ZpbGVTYXZlci5qcy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kXHJcbiAqL1xyXG5cclxuLypnbG9iYWwgc2VsZiAqL1xyXG4vKmpzbGludCBiaXR3aXNlOiB0cnVlLCBpbmRlbnQ6IDQsIGxheGJyZWFrOiB0cnVlLCBsYXhjb21tYTogdHJ1ZSwgc21hcnR0YWJzOiB0cnVlLCBwbHVzcGx1czogdHJ1ZSAqL1xyXG5cclxuLyohIEBzb3VyY2UgaHR0cDovL3B1cmwuZWxpZ3JleS5jb20vZ2l0aHViL0ZpbGVTYXZlci5qcy9ibG9iL21hc3Rlci9GaWxlU2F2ZXIuanMgKi9cclxuXHJcbnZhciBzYXZlQXMgPSBzYXZlQXMgfHwgKGZ1bmN0aW9uKHZpZXcpIHtcclxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHQvLyBJRSA8MTAgaXMgZXhwbGljaXRseSB1bnN1cHBvcnRlZFxyXG5cdGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiICYmIC9NU0lFIFsxLTldXFwuLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdHZhclxyXG5cdFx0ICBkb2MgPSB2aWV3LmRvY3VtZW50XHJcblx0XHQgIC8vIG9ubHkgZ2V0IFVSTCB3aGVuIG5lY2Vzc2FyeSBpbiBjYXNlIEJsb2IuanMgaGFzbid0IG92ZXJyaWRkZW4gaXQgeWV0XHJcblx0XHQsIGdldF9VUkwgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIHZpZXcuVVJMIHx8IHZpZXcud2Via2l0VVJMIHx8IHZpZXc7XHJcblx0XHR9XHJcblx0XHQsIHNhdmVfbGluayA9IGRvYy5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsIFwiYVwiKVxyXG5cdFx0LCBjYW5fdXNlX3NhdmVfbGluayA9IFwiZG93bmxvYWRcIiBpbiBzYXZlX2xpbmtcclxuXHRcdCwgY2xpY2sgPSBmdW5jdGlvbihub2RlKSB7XHJcblx0XHRcdHZhciBldmVudCA9IG5ldyBNb3VzZUV2ZW50KFwiY2xpY2tcIik7XHJcblx0XHRcdG5vZGUuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcblx0XHR9XHJcblx0XHQsIGlzX3NhZmFyaSA9IC9WZXJzaW9uXFwvW1xcZFxcLl0rLipTYWZhcmkvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudClcclxuXHRcdCwgd2Via2l0X3JlcV9mcyA9IHZpZXcud2Via2l0UmVxdWVzdEZpbGVTeXN0ZW1cclxuXHRcdCwgcmVxX2ZzID0gdmlldy5yZXF1ZXN0RmlsZVN5c3RlbSB8fCB3ZWJraXRfcmVxX2ZzIHx8IHZpZXcubW96UmVxdWVzdEZpbGVTeXN0ZW1cclxuXHRcdCwgdGhyb3dfb3V0c2lkZSA9IGZ1bmN0aW9uKGV4KSB7XHJcblx0XHRcdCh2aWV3LnNldEltbWVkaWF0ZSB8fCB2aWV3LnNldFRpbWVvdXQpKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRocm93IGV4O1xyXG5cdFx0XHR9LCAwKTtcclxuXHRcdH1cclxuXHRcdCwgZm9yY2Vfc2F2ZWFibGVfdHlwZSA9IFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCJcclxuXHRcdCwgZnNfbWluX3NpemUgPSAwXHJcblx0XHQvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTM3NTI5NyNjNyBhbmRcclxuXHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGlncmV5L0ZpbGVTYXZlci5qcy9jb21taXQvNDg1OTMwYSNjb21taXRjb21tZW50LTg3NjgwNDdcclxuXHRcdC8vIGZvciB0aGUgcmVhc29uaW5nIGJlaGluZCB0aGUgdGltZW91dCBhbmQgcmV2b2NhdGlvbiBmbG93XHJcblx0XHQsIGFyYml0cmFyeV9yZXZva2VfdGltZW91dCA9IDUwMCAvLyBpbiBtc1xyXG5cdFx0LCByZXZva2UgPSBmdW5jdGlvbihmaWxlKSB7XHJcblx0XHRcdHZhciByZXZva2VyID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYgKHR5cGVvZiBmaWxlID09PSBcInN0cmluZ1wiKSB7IC8vIGZpbGUgaXMgYW4gb2JqZWN0IFVSTFxyXG5cdFx0XHRcdFx0Z2V0X1VSTCgpLnJldm9rZU9iamVjdFVSTChmaWxlKTtcclxuXHRcdFx0XHR9IGVsc2UgeyAvLyBmaWxlIGlzIGEgRmlsZVxyXG5cdFx0XHRcdFx0ZmlsZS5yZW1vdmUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblx0XHRcdGlmICh2aWV3LmNocm9tZSkge1xyXG5cdFx0XHRcdHJldm9rZXIoKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRzZXRUaW1lb3V0KHJldm9rZXIsIGFyYml0cmFyeV9yZXZva2VfdGltZW91dCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdCwgZGlzcGF0Y2ggPSBmdW5jdGlvbihmaWxlc2F2ZXIsIGV2ZW50X3R5cGVzLCBldmVudCkge1xyXG5cdFx0XHRldmVudF90eXBlcyA9IFtdLmNvbmNhdChldmVudF90eXBlcyk7XHJcblx0XHRcdHZhciBpID0gZXZlbnRfdHlwZXMubGVuZ3RoO1xyXG5cdFx0XHR3aGlsZSAoaS0tKSB7XHJcblx0XHRcdFx0dmFyIGxpc3RlbmVyID0gZmlsZXNhdmVyW1wib25cIiArIGV2ZW50X3R5cGVzW2ldXTtcclxuXHRcdFx0XHRpZiAodHlwZW9mIGxpc3RlbmVyID09PSBcImZ1bmN0aW9uXCIpIHtcclxuXHRcdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRcdGxpc3RlbmVyLmNhbGwoZmlsZXNhdmVyLCBldmVudCB8fCBmaWxlc2F2ZXIpO1xyXG5cdFx0XHRcdFx0fSBjYXRjaCAoZXgpIHtcclxuXHRcdFx0XHRcdFx0dGhyb3dfb3V0c2lkZShleCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHQsIGF1dG9fYm9tID0gZnVuY3Rpb24oYmxvYikge1xyXG5cdFx0XHQvLyBwcmVwZW5kIEJPTSBmb3IgVVRGLTggWE1MIGFuZCB0ZXh0LyogdHlwZXMgKGluY2x1ZGluZyBIVE1MKVxyXG5cdFx0XHRpZiAoL15cXHMqKD86dGV4dFxcL1xcUyp8YXBwbGljYXRpb25cXC94bWx8XFxTKlxcL1xcUypcXCt4bWwpXFxzKjsuKmNoYXJzZXRcXHMqPVxccyp1dGYtOC9pLnRlc3QoYmxvYi50eXBlKSkge1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQmxvYihbXCJcXHVmZWZmXCIsIGJsb2JdLCB7dHlwZTogYmxvYi50eXBlfSk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGJsb2I7XHJcblx0XHR9XHJcblx0XHQsIEZpbGVTYXZlciA9IGZ1bmN0aW9uKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKSB7XHJcblx0XHRcdGlmICghbm9fYXV0b19ib20pIHtcclxuXHRcdFx0XHRibG9iID0gYXV0b19ib20oYmxvYik7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gRmlyc3QgdHJ5IGEuZG93bmxvYWQsIHRoZW4gd2ViIGZpbGVzeXN0ZW0sIHRoZW4gb2JqZWN0IFVSTHNcclxuXHRcdFx0dmFyXHJcblx0XHRcdFx0ICBmaWxlc2F2ZXIgPSB0aGlzXHJcblx0XHRcdFx0LCB0eXBlID0gYmxvYi50eXBlXHJcblx0XHRcdFx0LCBibG9iX2NoYW5nZWQgPSBmYWxzZVxyXG5cdFx0XHRcdCwgb2JqZWN0X3VybFxyXG5cdFx0XHRcdCwgdGFyZ2V0X3ZpZXdcclxuXHRcdFx0XHQsIGRpc3BhdGNoX2FsbCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0ZGlzcGF0Y2goZmlsZXNhdmVyLCBcIndyaXRlc3RhcnQgcHJvZ3Jlc3Mgd3JpdGUgd3JpdGVlbmRcIi5zcGxpdChcIiBcIikpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBvbiBhbnkgZmlsZXN5cyBlcnJvcnMgcmV2ZXJ0IHRvIHNhdmluZyB3aXRoIG9iamVjdCBVUkxzXHJcblx0XHRcdFx0LCBmc19lcnJvciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0aWYgKHRhcmdldF92aWV3ICYmIGlzX3NhZmFyaSAmJiB0eXBlb2YgRmlsZVJlYWRlciAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG5cdFx0XHRcdFx0XHQvLyBTYWZhcmkgZG9lc24ndCBhbGxvdyBkb3dubG9hZGluZyBvZiBibG9iIHVybHNcclxuXHRcdFx0XHRcdFx0dmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcblx0XHRcdFx0XHRcdHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHR2YXIgYmFzZTY0RGF0YSA9IHJlYWRlci5yZXN1bHQ7XHJcblx0XHRcdFx0XHRcdFx0dGFyZ2V0X3ZpZXcubG9jYXRpb24uaHJlZiA9IFwiZGF0YTphdHRhY2htZW50L2ZpbGVcIiArIGJhc2U2NERhdGEuc2xpY2UoYmFzZTY0RGF0YS5zZWFyY2goL1ssO10vKSk7XHJcblx0XHRcdFx0XHRcdFx0ZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTtcclxuXHRcdFx0XHRcdFx0XHRkaXNwYXRjaF9hbGwoKTtcclxuXHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFx0cmVhZGVyLnJlYWRBc0RhdGFVUkwoYmxvYik7XHJcblx0XHRcdFx0XHRcdGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLklOSVQ7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIGRvbid0IGNyZWF0ZSBtb3JlIG9iamVjdCBVUkxzIHRoYW4gbmVlZGVkXHJcblx0XHRcdFx0XHRpZiAoYmxvYl9jaGFuZ2VkIHx8ICFvYmplY3RfdXJsKSB7XHJcblx0XHRcdFx0XHRcdG9iamVjdF91cmwgPSBnZXRfVVJMKCkuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKHRhcmdldF92aWV3KSB7XHJcblx0XHRcdFx0XHRcdHRhcmdldF92aWV3LmxvY2F0aW9uLmhyZWYgPSBvYmplY3RfdXJsO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0dmFyIG5ld190YWIgPSB2aWV3Lm9wZW4ob2JqZWN0X3VybCwgXCJfYmxhbmtcIik7XHJcblx0XHRcdFx0XHRcdGlmIChuZXdfdGFiID09IHVuZGVmaW5lZCAmJiBpc19zYWZhcmkpIHtcclxuXHRcdFx0XHRcdFx0XHQvL0FwcGxlIGRvIG5vdCBhbGxvdyB3aW5kb3cub3Blbiwgc2VlIGh0dHA6Ly9iaXQubHkvMWtaZmZSSVxyXG5cdFx0XHRcdFx0XHRcdHZpZXcubG9jYXRpb24uaHJlZiA9IG9iamVjdF91cmxcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTtcclxuXHRcdFx0XHRcdGRpc3BhdGNoX2FsbCgpO1xyXG5cdFx0XHRcdFx0cmV2b2tlKG9iamVjdF91cmwpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQsIGFib3J0YWJsZSA9IGZ1bmN0aW9uKGZ1bmMpIHtcclxuXHRcdFx0XHRcdHJldHVybiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0aWYgKGZpbGVzYXZlci5yZWFkeVN0YXRlICE9PSBmaWxlc2F2ZXIuRE9ORSkge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdCwgY3JlYXRlX2lmX25vdF9mb3VuZCA9IHtjcmVhdGU6IHRydWUsIGV4Y2x1c2l2ZTogZmFsc2V9XHJcblx0XHRcdFx0LCBzbGljZVxyXG5cdFx0XHQ7XHJcblx0XHRcdGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLklOSVQ7XHJcblx0XHRcdGlmICghbmFtZSkge1xyXG5cdFx0XHRcdG5hbWUgPSBcImRvd25sb2FkXCI7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKGNhbl91c2Vfc2F2ZV9saW5rKSB7XHJcblx0XHRcdFx0b2JqZWN0X3VybCA9IGdldF9VUkwoKS5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcblx0XHRcdFx0c2F2ZV9saW5rLmhyZWYgPSBvYmplY3RfdXJsO1xyXG5cdFx0XHRcdHNhdmVfbGluay5kb3dubG9hZCA9IG5hbWU7XHJcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdGNsaWNrKHNhdmVfbGluayk7XHJcblx0XHRcdFx0XHRkaXNwYXRjaF9hbGwoKTtcclxuXHRcdFx0XHRcdHJldm9rZShvYmplY3RfdXJsKTtcclxuXHRcdFx0XHRcdGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLkRPTkU7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIE9iamVjdCBhbmQgd2ViIGZpbGVzeXN0ZW0gVVJMcyBoYXZlIGEgcHJvYmxlbSBzYXZpbmcgaW4gR29vZ2xlIENocm9tZSB3aGVuXHJcblx0XHRcdC8vIHZpZXdlZCBpbiBhIHRhYiwgc28gSSBmb3JjZSBzYXZlIHdpdGggYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXHJcblx0XHRcdC8vIGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTkxMTU4XHJcblx0XHRcdC8vIFVwZGF0ZTogR29vZ2xlIGVycmFudGx5IGNsb3NlZCA5MTE1OCwgSSBzdWJtaXR0ZWQgaXQgYWdhaW46XHJcblx0XHRcdC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0zODk2NDJcclxuXHRcdFx0aWYgKHZpZXcuY2hyb21lICYmIHR5cGUgJiYgdHlwZSAhPT0gZm9yY2Vfc2F2ZWFibGVfdHlwZSkge1xyXG5cdFx0XHRcdHNsaWNlID0gYmxvYi5zbGljZSB8fCBibG9iLndlYmtpdFNsaWNlO1xyXG5cdFx0XHRcdGJsb2IgPSBzbGljZS5jYWxsKGJsb2IsIDAsIGJsb2Iuc2l6ZSwgZm9yY2Vfc2F2ZWFibGVfdHlwZSk7XHJcblx0XHRcdFx0YmxvYl9jaGFuZ2VkID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBTaW5jZSBJIGNhbid0IGJlIHN1cmUgdGhhdCB0aGUgZ3Vlc3NlZCBtZWRpYSB0eXBlIHdpbGwgdHJpZ2dlciBhIGRvd25sb2FkXHJcblx0XHRcdC8vIGluIFdlYktpdCwgSSBhcHBlbmQgLmRvd25sb2FkIHRvIHRoZSBmaWxlbmFtZS5cclxuXHRcdFx0Ly8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTY1NDQwXHJcblx0XHRcdGlmICh3ZWJraXRfcmVxX2ZzICYmIG5hbWUgIT09IFwiZG93bmxvYWRcIikge1xyXG5cdFx0XHRcdG5hbWUgKz0gXCIuZG93bmxvYWRcIjtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAodHlwZSA9PT0gZm9yY2Vfc2F2ZWFibGVfdHlwZSB8fCB3ZWJraXRfcmVxX2ZzKSB7XHJcblx0XHRcdFx0dGFyZ2V0X3ZpZXcgPSB2aWV3O1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICghcmVxX2ZzKSB7XHJcblx0XHRcdFx0ZnNfZXJyb3IoKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0ZnNfbWluX3NpemUgKz0gYmxvYi5zaXplO1xyXG5cdFx0XHRyZXFfZnModmlldy5URU1QT1JBUlksIGZzX21pbl9zaXplLCBhYm9ydGFibGUoZnVuY3Rpb24oZnMpIHtcclxuXHRcdFx0XHRmcy5yb290LmdldERpcmVjdG9yeShcInNhdmVkXCIsIGNyZWF0ZV9pZl9ub3RfZm91bmQsIGFib3J0YWJsZShmdW5jdGlvbihkaXIpIHtcclxuXHRcdFx0XHRcdHZhciBzYXZlID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdGRpci5nZXRGaWxlKG5hbWUsIGNyZWF0ZV9pZl9ub3RfZm91bmQsIGFib3J0YWJsZShmdW5jdGlvbihmaWxlKSB7XHJcblx0XHRcdFx0XHRcdFx0ZmlsZS5jcmVhdGVXcml0ZXIoYWJvcnRhYmxlKGZ1bmN0aW9uKHdyaXRlcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0d3JpdGVyLm9ud3JpdGVlbmQgPSBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0YXJnZXRfdmlldy5sb2NhdGlvbi5ocmVmID0gZmlsZS50b1VSTCgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5ET05FO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRkaXNwYXRjaChmaWxlc2F2ZXIsIFwid3JpdGVlbmRcIiwgZXZlbnQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXZva2UoZmlsZSk7XHJcblx0XHRcdFx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0XHRcdFx0d3JpdGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIGVycm9yID0gd3JpdGVyLmVycm9yO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoZXJyb3IuY29kZSAhPT0gZXJyb3IuQUJPUlRfRVJSKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZnNfZXJyb3IoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFx0XHRcdFwid3JpdGVzdGFydCBwcm9ncmVzcyB3cml0ZSBhYm9ydFwiLnNwbGl0KFwiIFwiKS5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHdyaXRlcltcIm9uXCIgKyBldmVudF0gPSBmaWxlc2F2ZXJbXCJvblwiICsgZXZlbnRdO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHR3cml0ZXIud3JpdGUoYmxvYik7XHJcblx0XHRcdFx0XHRcdFx0XHRmaWxlc2F2ZXIuYWJvcnQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0d3JpdGVyLmFib3J0KCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLkRPTkU7XHJcblx0XHRcdFx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0XHRcdFx0ZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuV1JJVElORztcclxuXHRcdFx0XHRcdFx0XHR9KSwgZnNfZXJyb3IpO1xyXG5cdFx0XHRcdFx0XHR9KSwgZnNfZXJyb3IpO1xyXG5cdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdGRpci5nZXRGaWxlKG5hbWUsIHtjcmVhdGU6IGZhbHNlfSwgYWJvcnRhYmxlKGZ1bmN0aW9uKGZpbGUpIHtcclxuXHRcdFx0XHRcdFx0Ly8gZGVsZXRlIGZpbGUgaWYgaXQgYWxyZWFkeSBleGlzdHNcclxuXHRcdFx0XHRcdFx0ZmlsZS5yZW1vdmUoKTtcclxuXHRcdFx0XHRcdFx0c2F2ZSgpO1xyXG5cdFx0XHRcdFx0fSksIGFib3J0YWJsZShmdW5jdGlvbihleCkge1xyXG5cdFx0XHRcdFx0XHRpZiAoZXguY29kZSA9PT0gZXguTk9UX0ZPVU5EX0VSUikge1xyXG5cdFx0XHRcdFx0XHRcdHNhdmUoKTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRmc19lcnJvcigpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHRcdFx0fSksIGZzX2Vycm9yKTtcclxuXHRcdFx0fSksIGZzX2Vycm9yKTtcclxuXHRcdH1cclxuXHRcdCwgRlNfcHJvdG8gPSBGaWxlU2F2ZXIucHJvdG90eXBlXHJcblx0XHQsIHNhdmVBcyA9IGZ1bmN0aW9uKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKSB7XHJcblx0XHRcdHJldHVybiBuZXcgRmlsZVNhdmVyKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKTtcclxuXHRcdH1cclxuXHQ7XHJcblx0Ly8gSUUgMTArIChuYXRpdmUgc2F2ZUFzKVxyXG5cdGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiICYmIG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKSB7XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24oYmxvYiwgbmFtZSwgbm9fYXV0b19ib20pIHtcclxuXHRcdFx0aWYgKCFub19hdXRvX2JvbSkge1xyXG5cdFx0XHRcdGJsb2IgPSBhdXRvX2JvbShibG9iKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gbmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IoYmxvYiwgbmFtZSB8fCBcImRvd25sb2FkXCIpO1xyXG5cdFx0fTtcclxuXHR9XHJcblxyXG5cdEZTX3Byb3RvLmFib3J0ID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZmlsZXNhdmVyID0gdGhpcztcclxuXHRcdGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLkRPTkU7XHJcblx0XHRkaXNwYXRjaChmaWxlc2F2ZXIsIFwiYWJvcnRcIik7XHJcblx0fTtcclxuXHRGU19wcm90by5yZWFkeVN0YXRlID0gRlNfcHJvdG8uSU5JVCA9IDA7XHJcblx0RlNfcHJvdG8uV1JJVElORyA9IDE7XHJcblx0RlNfcHJvdG8uRE9ORSA9IDI7XHJcblxyXG5cdEZTX3Byb3RvLmVycm9yID1cclxuXHRGU19wcm90by5vbndyaXRlc3RhcnQgPVxyXG5cdEZTX3Byb3RvLm9ucHJvZ3Jlc3MgPVxyXG5cdEZTX3Byb3RvLm9ud3JpdGUgPVxyXG5cdEZTX3Byb3RvLm9uYWJvcnQgPVxyXG5cdEZTX3Byb3RvLm9uZXJyb3IgPVxyXG5cdEZTX3Byb3RvLm9ud3JpdGVlbmQgPVxyXG5cdFx0bnVsbDtcclxuXHJcblx0cmV0dXJuIHNhdmVBcztcclxufShcclxuXHQgICB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmXHJcblx0fHwgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3dcclxuXHR8fCB0aGlzLmNvbnRlbnRcclxuKSk7XHJcbi8vIGBzZWxmYCBpcyB1bmRlZmluZWQgaW4gRmlyZWZveCBmb3IgQW5kcm9pZCBjb250ZW50IHNjcmlwdCBjb250ZXh0XHJcbi8vIHdoaWxlIGB0aGlzYCBpcyBuc0lDb250ZW50RnJhbWVNZXNzYWdlTWFuYWdlclxyXG4vLyB3aXRoIGFuIGF0dHJpYnV0ZSBgY29udGVudGAgdGhhdCBjb3JyZXNwb25kcyB0byB0aGUgd2luZG93XHJcblxyXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUuZXhwb3J0cykge1xyXG4gIG1vZHVsZS5leHBvcnRzLnNhdmVBcyA9IHNhdmVBcztcclxufSBlbHNlIGlmICgodHlwZW9mIGRlZmluZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkZWZpbmUgIT09IG51bGwpICYmIChkZWZpbmUuYW1kICE9IG51bGwpKSB7XHJcbiAgZGVmaW5lKFtdLCBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBzYXZlQXM7XHJcbiAgfSk7XHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvZmlsZXNhdmVyLmpzXG4gKiovIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IENvbnN0IGZyb20gJy4uL0NvbnN0JztcclxuXHJcbmNsYXNzIERhdGVGaWx0ZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5maWx0ZXIgPSB0aGlzLmZpbHRlci5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldERlZmF1bHREYXRlKCkge1xyXG4gICAgICAgIGxldCBkZWZhdWx0RGF0ZSAgPSBcIlwiO1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmRlZmF1bHRWYWx1ZSkge1xyXG4gICAgICAgICAgICAvLyBTZXQgdGhlIGFwcHJvcHJpYXRlIGZvcm1hdCBmb3IgdGhlIGlucHV0IHR5cGU9ZGF0ZSwgaS5lLiBcIllZWVktTU0tRERcIlxyXG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSBuZXcgRGF0ZSh0aGlzLnByb3BzLmRlZmF1bHRWYWx1ZSk7XHJcbiAgICAgICAgICAgIGRlZmF1bHREYXRlID0gYCR7ZGVmYXVsdFZhbHVlLmdldEZ1bGxZZWFyKCl9LSR7KFwiMFwiICsgKGRlZmF1bHRWYWx1ZS5nZXRNb250aCgpICsgMSkpLnNsaWNlKC0yKX0tJHsoXCIwXCIgKyBkZWZhdWx0VmFsdWUuZ2V0RGF0ZSgpKS5zbGljZSgtMil9YDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRlZmF1bHREYXRlO1xyXG4gICAgfVxyXG5cclxuICAgIGZpbHRlcihldmVudCkge1xyXG4gICAgICAgIGNvbnN0IGRhdGVWYWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcclxuICAgICAgICBpZiAoZGF0ZVZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuZmlsdGVySGFuZGxlcihuZXcgRGF0ZShkYXRlVmFsdWUpLCBDb25zdC5GSUxURVJfVFlQRS5EQVRFKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmZpbHRlckhhbmRsZXIobnVsbCwgQ29uc3QuRklMVEVSX1RZUEUuREFURSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgICAgIGNvbnN0IGRhdGVWYWx1ZSA9IHRoaXMucmVmcy5pbnB1dERhdGUuZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgIGlmIChkYXRlVmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5maWx0ZXJIYW5kbGVyKG5ldyBEYXRlKGRhdGVWYWx1ZSksIENvbnN0LkZJTFRFUl9UWVBFLkRBVEUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGlucHV0IHJlZj1cImlucHV0RGF0ZVwiXHJcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmaWx0ZXIgZGF0ZS1maWx0ZXIgZm9ybS1jb250cm9sXCJcclxuICAgICAgICAgICAgICAgICAgIHR5cGU9XCJkYXRlXCJcclxuICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmZpbHRlcn1cclxuICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17dGhpcy5zZXREZWZhdWx0RGF0ZSgpfSAvPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5EYXRlRmlsdGVyLnByb3BUeXBlcyA9IHtcclxuICAgIGZpbHRlckhhbmRsZXI6IFJlYWN0LlByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXHJcbiAgICBkZWZhdWx0VmFsdWU6IFJlYWN0LlByb3BUeXBlcy5vYmplY3QsXHJcbiAgICBjb2x1bW5OYW1lOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBEYXRlRmlsdGVyO1xyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9maWx0ZXJzL0RhdGUuanNcbiAqKi8iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgY2xhc3NTZXQgZnJvbSAnY2xhc3NuYW1lcyc7XHJcbmltcG9ydCBDb25zdCBmcm9tICcuLi9Db25zdCc7XHJcblxyXG5jb25zdCBsZWdhbENvbXBhcmF0b3JzID0gW1wiPVwiLCBcIj5cIiwgXCI+PVwiLCBcIjxcIiwgXCI8PVwiLCBcIiE9XCJdO1xyXG5cclxuY2xhc3MgTnVtYmVyRmlsdGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG4gICAgICAgIHRoaXMubnVtYmVyQ29tcGFyYXRvcnMgPSB0aGlzLnByb3BzLm51bWJlckNvbXBhcmF0b3JzIHx8IGxlZ2FsQ29tcGFyYXRvcnM7XHJcbiAgICAgICAgdGhpcy50aW1lb3V0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBpc1BsYWNlaG9sZGVyU2VsZWN0ZWQ6ICh0aGlzLnByb3BzLmRlZmF1bHRWYWx1ZSA9PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5kZWZhdWx0VmFsdWUubnVtYmVyID09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5wcm9wcy5vcHRpb25zICYmIHRoaXMucHJvcHMub3B0aW9ucy5pbmRleE9mKHRoaXMucHJvcHMuZGVmYXVsdFZhbHVlLm51bWJlcikgPT0gLTEpKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5vbkNoYW5nZU51bWJlciA9IHRoaXMub25DaGFuZ2VOdW1iZXIuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLm9uQ2hhbmdlTnVtYmVyU2V0ID0gdGhpcy5vbkNoYW5nZU51bWJlclNldC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMub25DaGFuZ2VDb21wYXJhdG9yID0gdGhpcy5vbkNoYW5nZUNvbXBhcmF0b3IuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNoYW5nZU51bWJlcihldmVudCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJlZnMubnVtYmVyRmlsdGVyQ29tcGFyYXRvci52YWx1ZSA9PT0gXCJcIikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnRpbWVvdXQpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IGZpbHRlclZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgIHRoaXMudGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHNlbGYucHJvcHMuZmlsdGVySGFuZGxlcih7bnVtYmVyOiBmaWx0ZXJWYWx1ZSwgY29tcGFyYXRvcjogc2VsZi5yZWZzLm51bWJlckZpbHRlckNvbXBhcmF0b3IudmFsdWV9LFxyXG4gICAgICAgICAgICAgICAgQ29uc3QuRklMVEVSX1RZUEUuTlVNQkVSKTtcclxuICAgICAgICB9LCBzZWxmLnByb3BzLmRlbGF5KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNoYW5nZU51bWJlclNldChldmVudCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzUGxhY2Vob2xkZXJTZWxlY3RlZDogKGV2ZW50LnRhcmdldC52YWx1ZSA9PT0gXCJcIil9KTtcclxuICAgICAgICBpZiAodGhpcy5yZWZzLm51bWJlckZpbHRlckNvbXBhcmF0b3IudmFsdWUgPT09IFwiXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnByb3BzLmZpbHRlckhhbmRsZXIoe251bWJlcjogZXZlbnQudGFyZ2V0LnZhbHVlLCBjb21wYXJhdG9yOiB0aGlzLnJlZnMubnVtYmVyRmlsdGVyQ29tcGFyYXRvci52YWx1ZX0sXHJcbiAgICAgICAgICAgIENvbnN0LkZJTFRFUl9UWVBFLk5VTUJFUik7XHJcbiAgICB9XHJcblxyXG4gICAgb25DaGFuZ2VDb21wYXJhdG9yKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVmcy5udW1iZXJGaWx0ZXIudmFsdWUgPT09IFwiXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnByb3BzLmZpbHRlckhhbmRsZXIoe251bWJlcjogdGhpcy5yZWZzLm51bWJlckZpbHRlci52YWx1ZSwgY29tcGFyYXRvcjogZXZlbnQudGFyZ2V0LnZhbHVlfSxcclxuICAgICAgICAgICAgQ29uc3QuRklMVEVSX1RZUEUuTlVNQkVSKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb21wYXJhdG9yT3B0aW9ucygpIHtcclxuICAgICAgICBsZXQgb3B0aW9uVGFncyA9IFtdO1xyXG4gICAgICAgIG9wdGlvblRhZ3MucHVzaCg8b3B0aW9uIGtleT1cIi0xXCI+PC9vcHRpb24+KTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtYmVyQ29tcGFyYXRvcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgb3B0aW9uVGFncy5wdXNoKDxvcHRpb24ga2V5PXtpfSB2YWx1ZT17dGhpcy5udW1iZXJDb21wYXJhdG9yc1tpXX0+e3RoaXMubnVtYmVyQ29tcGFyYXRvcnNbaV19PC9vcHRpb24+KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBvcHRpb25UYWdzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldE51bWJlck9wdGlvbnMoKSB7XHJcbiAgICAgICAgbGV0IG9wdGlvblRhZ3MgPSBbXTtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5wcm9wcy5vcHRpb25zO1xyXG5cclxuICAgICAgICBvcHRpb25UYWdzLnB1c2goPG9wdGlvbiBrZXk9XCItMVwiIHZhbHVlPVwiXCI+e3RoaXMucHJvcHMucGxhY2Vob2xkZXIgfHwgYFNlbGVjdCAke3RoaXMucHJvcHMuY29sdW1uTmFtZX0uLi5gfTwvb3B0aW9uPik7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIG9wdGlvblRhZ3MucHVzaCg8b3B0aW9uIGtleT17aX0gdmFsdWU9e29wdGlvbnNbaV19PntvcHRpb25zW2ldfTwvb3B0aW9uPik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gb3B0aW9uVGFncztcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgICAgICBpZiAodGhpcy5yZWZzLm51bWJlckZpbHRlckNvbXBhcmF0b3IudmFsdWUgJiYgdGhpcy5yZWZzLm51bWJlckZpbHRlci52YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmZpbHRlckhhbmRsZXIoe251bWJlcjogdGhpcy5yZWZzLm51bWJlckZpbHRlci52YWx1ZSxcclxuICAgICAgICAgICAgICAgIGNvbXBhcmF0b3I6IHRoaXMucmVmcy5udW1iZXJGaWx0ZXJDb21wYXJhdG9yLnZhbHVlfSxcclxuICAgICAgICAgICAgICAgIENvbnN0LkZJTFRFUl9UWVBFLk5VTUJFUik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICB2YXIgc2VsZWN0Q2xhc3MgPSBjbGFzc1NldChcInNlbGVjdC1maWx0ZXJcIiwgXCJudW1iZXItZmlsdGVyLWlucHV0XCIsIFwiZm9ybS1jb250cm9sXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IFwicGxhY2Vob2xkZXItc2VsZWN0ZWRcIjogdGhpcy5zdGF0ZS5pc1BsYWNlaG9sZGVyU2VsZWN0ZWQgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmlsdGVyIG51bWJlci1maWx0ZXJcIj5cclxuICAgICAgICAgICAgICAgIDxzZWxlY3QgcmVmPVwibnVtYmVyRmlsdGVyQ29tcGFyYXRvclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm51bWJlci1maWx0ZXItY29tcGFyYXRvciBmb3JtLWNvbnRyb2xcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZUNvbXBhcmF0b3J9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17KHRoaXMucHJvcHMuZGVmYXVsdFZhbHVlKSA/IHRoaXMucHJvcHMuZGVmYXVsdFZhbHVlLmNvbXBhcmF0b3IgOiBcIlwifT5cclxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5nZXRDb21wYXJhdG9yT3B0aW9ucygpfVxyXG4gICAgICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgICAgICAgICB7KHRoaXMucHJvcHMub3B0aW9ucykgPyA8c2VsZWN0IHJlZj1cIm51bWJlckZpbHRlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17c2VsZWN0Q2xhc3N9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uQ2hhbmdlTnVtYmVyU2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9eyh0aGlzLnByb3BzLmRlZmF1bHRWYWx1ZSkgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5kZWZhdWx0VmFsdWUubnVtYmVyIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCJ9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLmdldE51bWJlck9wdGlvbnMoKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PiA6XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHJlZj1cIm51bWJlckZpbHRlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibnVtYmVyLWZpbHRlci1pbnB1dCBmb3JtLWNvbnRyb2xcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0aGlzLnByb3BzLnBsYWNlaG9sZGVyIHx8IGBFbnRlciAke3RoaXMucHJvcHMuY29sdW1uTmFtZX0uLi5gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uQ2hhbmdlTnVtYmVyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17KHRoaXMucHJvcHMuZGVmYXVsdFZhbHVlKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmRlZmF1bHRWYWx1ZS5udW1iZXIgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIn0gLz59XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5OdW1iZXJGaWx0ZXIucHJvcFR5cGVzID0ge1xyXG4gICAgZmlsdGVySGFuZGxlcjogUmVhY3QuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcclxuICAgIG9wdGlvbnM6IFJlYWN0LlByb3BUeXBlcy5hcnJheU9mKFJlYWN0LlByb3BUeXBlcy5udW1iZXIpLFxyXG4gICAgZGVmYXVsdFZhbHVlOiBSZWFjdC5Qcm9wVHlwZXMuc2hhcGUoe1xyXG4gICAgICAgIG51bWJlcjogUmVhY3QuUHJvcFR5cGVzLm51bWJlcixcclxuICAgICAgICBjb21wYXJhdG9yOiBSZWFjdC5Qcm9wVHlwZXMub25lT2YobGVnYWxDb21wYXJhdG9ycylcclxuICAgIH0pLFxyXG4gICAgZGVsYXk6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIsXHJcbiAgICBudW1iZXJDb21wYXJhdG9yczogZnVuY3Rpb24ocHJvcHMsIHByb3BOYW1lKSB7XHJcbiAgICAgICAgaWYgKCFwcm9wc1twcm9wTmFtZV0pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3BzW3Byb3BOYW1lXS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgY29tcGFyYXRvcklzVmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBsZWdhbENvbXBhcmF0b3JzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGVnYWxDb21wYXJhdG9yc1tqXSA9PT0gcHJvcHNbcHJvcE5hbWVdW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcGFyYXRvcklzVmFsaWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghY29tcGFyYXRvcklzVmFsaWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoYE51bWJlciBjb21wYXJhdG9yIHByb3ZpZGVkIGlzIG5vdCBzdXBwb3J0ZWQuIFVzZSBvbmx5ICR7bGVnYWxDb21wYXJhdG9yc31gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBwbGFjZWhvbGRlcjogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcclxuICAgIGNvbHVtbk5hbWU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmdcclxufTtcclxuXHJcbk51bWJlckZpbHRlci5kZWZhdWx0UHJvcHMgPSB7XHJcbiAgICBkZWxheTogQ29uc3QuRklMVEVSX0RFTEFZXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBOdW1iZXJGaWx0ZXI7XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2ZpbHRlcnMvTnVtYmVyLmpzXG4gKiovIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IGNsYXNzU2V0IGZyb20gJ2NsYXNzbmFtZXMnO1xyXG5pbXBvcnQgQ29uc3QgZnJvbSAnLi4vQ29uc3QnO1xyXG5cclxuY2xhc3MgU2VsZWN0RmlsdGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuXHRjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG5cdFx0c3VwZXIocHJvcHMpO1xyXG5cdFx0dGhpcy5maWx0ZXIgPSB0aGlzLmZpbHRlci5iaW5kKHRoaXMpO1xyXG5cdFx0dGhpcy5zdGF0ZSA9IHtcclxuXHRcdFx0aXNQbGFjZWhvbGRlclNlbGVjdGVkOiAodGhpcy5wcm9wcy5kZWZhdWx0VmFsdWUgPT0gdW5kZWZpbmVkIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRcdCF0aGlzLnByb3BzLm9wdGlvbnMuaGFzT3duUHJvcGVydHkodGhpcy5wcm9wcy5kZWZhdWx0VmFsdWUpKVxyXG5cdFx0fTtcclxuXHR9XHJcblxyXG5cdGZpbHRlcihldmVudCkge1xyXG5cdFx0dGhpcy5zZXRTdGF0ZSh7aXNQbGFjZWhvbGRlclNlbGVjdGVkOiAoZXZlbnQudGFyZ2V0LnZhbHVlID09PSBcIlwiKX0pO1xyXG5cdFx0dGhpcy5wcm9wcy5maWx0ZXJIYW5kbGVyKGV2ZW50LnRhcmdldC52YWx1ZSwgQ29uc3QuRklMVEVSX1RZUEUuU0VMRUNUKTtcclxuXHR9XHJcblxyXG5cdGdldE9wdGlvbnMoKSB7XHJcblx0XHRsZXQgb3B0aW9uVGFncyA9IFtdO1xyXG5cdFx0Y29uc3Qgb3B0aW9ucyA9IHRoaXMucHJvcHMub3B0aW9ucztcclxuXHRcdG9wdGlvblRhZ3MucHVzaCg8b3B0aW9uIGtleT1cIi0xXCIgdmFsdWU9XCJcIj57dGhpcy5wcm9wcy5wbGFjZWhvbGRlciB8fCBgU2VsZWN0ICR7dGhpcy5wcm9wcy5jb2x1bW5OYW1lfS4uLmB9PC9vcHRpb24+KTtcclxuXHRcdE9iamVjdC5rZXlzKG9wdGlvbnMpLm1hcCgoa2V5KSA9PiB7XHJcblx0XHRcdG9wdGlvblRhZ3MucHVzaCg8b3B0aW9uIGtleT17a2V5fSB2YWx1ZT17a2V5fT57b3B0aW9uc1trZXldfTwvb3B0aW9uPik7XHJcblx0XHR9KTtcclxuXHRcdHJldHVybiBvcHRpb25UYWdzO1xyXG5cdH1cclxuXHJcblx0Y29tcG9uZW50RGlkTW91bnQoKSB7XHJcblx0XHRpZiAodGhpcy5yZWZzLnNlbGVjdElucHV0LnZhbHVlKSB7XHJcblx0XHRcdHRoaXMucHJvcHMuZmlsdGVySGFuZGxlcih0aGlzLnJlZnMuc2VsZWN0SW5wdXQudmFsdWUsIENvbnN0LkZJTFRFUl9UWVBFLlNFTEVDVCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRyZW5kZXIoKSB7XHJcblx0XHR2YXIgc2VsZWN0Q2xhc3MgPSBjbGFzc1NldChcImZpbHRlclwiLCBcInNlbGVjdC1maWx0ZXJcIiwgXCJmb3JtLWNvbnRyb2xcIixcclxuXHRcdFx0XHRcdFx0XHR7XCJwbGFjZWhvbGRlci1zZWxlY3RlZFwiOiB0aGlzLnN0YXRlLmlzUGxhY2Vob2xkZXJTZWxlY3RlZH0pO1xyXG5cclxuXHRcdHJldHVybiAoXHJcblx0XHRcdDxzZWxlY3QgcmVmPVwic2VsZWN0SW5wdXRcIlxyXG5cdFx0XHRcdFx0Y2xhc3NOYW1lPXtzZWxlY3RDbGFzc31cclxuXHRcdFx0XHRcdG9uQ2hhbmdlPXt0aGlzLmZpbHRlcn1cclxuXHRcdFx0XHRcdGRlZmF1bHRWYWx1ZT17KHRoaXMucHJvcHMuZGVmYXVsdFZhbHVlICE9IHVuZGVmaW5lZCkgPyB0aGlzLnByb3BzLmRlZmF1bHRWYWx1ZSA6IFwiXCJ9PlxyXG5cdFx0XHRcdHt0aGlzLmdldE9wdGlvbnMoKX1cclxuXHRcdFx0PC9zZWxlY3Q+XHJcblx0XHQpO1xyXG5cdH1cclxufTtcclxuXHJcblNlbGVjdEZpbHRlci5wcm9wVHlwZXMgPSB7XHJcblx0ZmlsdGVySGFuZGxlcjogUmVhY3QuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcclxuXHRvcHRpb25zOiBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXHJcblx0cGxhY2Vob2xkZXI6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXHJcblx0Y29sdW1uTmFtZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZ1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2VsZWN0RmlsdGVyO1xyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9maWx0ZXJzL1NlbGVjdC5qc1xuICoqLyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBDb25zdCBmcm9tICcuLi9Db25zdCc7XHJcblxyXG5jbGFzcyBUZXh0RmlsdGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuXHRjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG5cdFx0c3VwZXIocHJvcHMpO1xyXG5cdFx0dGhpcy5maWx0ZXIgPSB0aGlzLmZpbHRlci5iaW5kKHRoaXMpO1xyXG5cdFx0dGhpcy50aW1lb3V0ID0gbnVsbDtcclxuXHR9XHJcblxyXG5cdGZpbHRlcihldmVudCkge1xyXG5cdFx0aWYgKHRoaXMudGltZW91dCkge1xyXG5cdFx0XHRjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTtcclxuXHRcdH1cclxuXHRcdGNvbnN0IHNlbGYgPSB0aGlzO1xyXG5cdFx0Y29uc3QgZmlsdGVyVmFsdWUgPSBldmVudC50YXJnZXQudmFsdWU7XHJcblx0XHR0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRzZWxmLnByb3BzLmZpbHRlckhhbmRsZXIoZmlsdGVyVmFsdWUsIENvbnN0LkZJTFRFUl9UWVBFLlRFWFQpO1xyXG5cdFx0fSwgc2VsZi5wcm9wcy5kZWxheSk7XHJcblx0fVxyXG5cclxuXHRjb21wb25lbnREaWRNb3VudCgpIHtcclxuXHRcdGlmICh0aGlzLnJlZnMuaW5wdXRUZXh0LmRlZmF1bHRWYWx1ZSkge1xyXG5cdFx0XHR0aGlzLnByb3BzLmZpbHRlckhhbmRsZXIodGhpcy5yZWZzLmlucHV0VGV4dC5kZWZhdWx0VmFsdWUsIENvbnN0LkZJTFRFUl9UWVBFLlRFWFQpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Y29tcG9uZW50V2lsbFVubW91bnQoKSB7XHJcblx0XHRjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTtcclxuXHR9XHJcblxyXG5cdHJlbmRlcigpIHtcclxuXHRcdHJldHVybiAoXHJcblx0XHRcdDxpbnB1dCByZWY9XCJpbnB1dFRleHRcIlxyXG5cdFx0XHRcdCAgIGNsYXNzTmFtZT1cImZpbHRlciB0ZXh0LWZpbHRlciBmb3JtLWNvbnRyb2xcIlxyXG5cdFx0XHRcdCAgIHR5cGU9XCJ0ZXh0XCJcclxuXHRcdFx0XHQgICBvbkNoYW5nZT17dGhpcy5maWx0ZXJ9XHJcblx0XHRcdFx0ICAgcGxhY2Vob2xkZXI9e3RoaXMucHJvcHMucGxhY2Vob2xkZXIgfHwgYEVudGVyICR7dGhpcy5wcm9wcy5jb2x1bW5OYW1lfS4uLmB9XHJcblx0XHRcdFx0ICAgZGVmYXVsdFZhbHVlPXsodGhpcy5wcm9wcy5kZWZhdWx0VmFsdWUpID8gdGhpcy5wcm9wcy5kZWZhdWx0VmFsdWUgOiBcIlwifSAvPlxyXG5cdFx0KTtcclxuXHR9XHJcbn07XHJcblxyXG5UZXh0RmlsdGVyLnByb3BUeXBlcyA9IHtcclxuXHRmaWx0ZXJIYW5kbGVyOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxyXG5cdGRlZmF1bHRWYWx1ZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcclxuXHRkZWxheTogUmVhY3QuUHJvcFR5cGVzLm51bWJlcixcclxuXHRwbGFjZWhvbGRlcjogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcclxuXHRjb2x1bW5OYW1lOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nXHJcbn07XHJcblxyXG5UZXh0RmlsdGVyLmRlZmF1bHRQcm9wcyA9IHtcclxuXHRkZWxheTogQ29uc3QuRklMVEVSX0RFTEFZXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFRleHRGaWx0ZXI7XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2ZpbHRlcnMvVGV4dC5qc1xuICoqLyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBjbGFzc1NldCBmcm9tICdjbGFzc25hbWVzJztcclxuXHJcbmNsYXNzIFBhZ2VCdXR0b24gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnR7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcblx0XHRzdXBlcihwcm9wcyk7XHJcblx0fVxyXG5cclxuICBwYWdlQnRuQ2xpY2soZSl7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB0aGlzLnByb3BzLmNoYW5nZVBhZ2UoZS5jdXJyZW50VGFyZ2V0LnRleHQpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCl7XHJcbiAgICB2YXIgY2xhc3NlcyA9IGNsYXNzU2V0KHtcclxuICAgICAgICAnYWN0aXZlJzogdGhpcy5wcm9wcy5hY3RpdmUsXHJcbiAgICAgICAgJ2Rpc2FibGVkJzogdGhpcy5wcm9wcy5kaXNhYmxlLFxyXG4gICAgICAgICdoaWRkZW4nOiB0aGlzLnByb3BzLmhpZGRlblxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxsaSBjbGFzc05hbWU9e2NsYXNzZXN9PjxhIGhyZWY9XCIjXCIgb25DbGljaz17dGhpcy5wYWdlQnRuQ2xpY2suYmluZCh0aGlzKX0+e3RoaXMucHJvcHMuY2hpbGRyZW59PC9hPjwvbGk+XHJcbiAgICApXHJcbiAgfVxyXG59XHJcblBhZ2VCdXR0b24ucHJvcFR5cGVzID0ge1xyXG4gIGNoYW5nZVBhZ2U6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxyXG4gIGFjdGl2ZTogUmVhY3QuUHJvcFR5cGVzLmJvb2wsXHJcbiAgZGlzYWJsZTogUmVhY3QuUHJvcFR5cGVzLmJvb2xcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBhZ2VCdXR0b247XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL3BhZ2luYXRpb24vUGFnZUJ1dHRvbi5qc1xuICoqLyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBQYWdlQnV0dG9uIGZyb20gJy4vUGFnZUJ1dHRvbi5qcyc7XHJcbmltcG9ydCBDb25zdCBmcm9tICcuLi9Db25zdCc7XHJcblxyXG5jbGFzcyBQYWdpbmF0aW9uTGlzdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcblxyXG4gIGNoYW5nZVBhZ2UocGFnZSkge1xyXG4gICAgaWYgKHBhZ2UgPT0gdGhpcy5wcm9wcy5wcmVQYWdlKSB7XHJcbiAgICAgIHBhZ2UgPSB0aGlzLnByb3BzLmN1cnJQYWdlIC0gMSA8IDEgPyAxIDogdGhpcy5wcm9wcy5jdXJyUGFnZSAtIDE7XHJcbiAgICB9IGVsc2UgaWYgKHBhZ2UgPT0gdGhpcy5wcm9wcy5uZXh0UGFnZSkge1xyXG4gICAgICBwYWdlID0gdGhpcy5wcm9wcy5jdXJyUGFnZSArIDEgPiB0aGlzLnRvdGFsUGFnZXMgPyB0aGlzLnRvdGFsUGFnZXMgOiB0aGlzLnByb3BzLmN1cnJQYWdlICsgMTtcclxuICAgIH0gZWxzZSBpZiAocGFnZSA9PSB0aGlzLnByb3BzLmxhc3RQYWdlKSB7XHJcbiAgICAgIHBhZ2UgPSB0aGlzLnRvdGFsUGFnZXM7XHJcbiAgICB9IGVsc2UgaWYgKHBhZ2UgPT0gdGhpcy5wcm9wcy5maXJzdFBhZ2UpIHtcclxuICAgICAgcGFnZSA9IDE7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBwYWdlID0gcGFyc2VJbnQocGFnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHBhZ2UgIT0gdGhpcy5wcm9wcy5jdXJyUGFnZSkge1xyXG4gICAgICB0aGlzLnByb3BzLmNoYW5nZVBhZ2UocGFnZSwgdGhpcy5wcm9wcy5zaXplUGVyUGFnZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VTaXplUGVyUGFnZShlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgY29uc3Qgc2VsZWN0U2l6ZSA9IHBhcnNlSW50KGUuY3VycmVudFRhcmdldC50ZXh0KTtcclxuICAgIGxldCB7IGN1cnJQYWdlIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgaWYgKHNlbGVjdFNpemUgIT0gdGhpcy5wcm9wcy5zaXplUGVyUGFnZSkge1xyXG4gICAgICB0aGlzLnRvdGFsUGFnZXMgPSBNYXRoLmNlaWwodGhpcy5wcm9wcy5kYXRhU2l6ZSAvIHNlbGVjdFNpemUpO1xyXG4gICAgICBpZiAoY3VyclBhZ2UgPiB0aGlzLnRvdGFsUGFnZXMpXHJcbiAgICAgICAgY3VyclBhZ2UgPSB0aGlzLnRvdGFsUGFnZXM7XHJcblxyXG4gICAgICB0aGlzLnByb3BzLmNoYW5nZVBhZ2UoY3VyclBhZ2UsIHNlbGVjdFNpemUpO1xyXG4gICAgICBpZih0aGlzLnByb3BzLm9uU2l6ZVBlclBhZ2VMaXN0KXtcclxuICAgICAgICB0aGlzLnByb3BzLm9uU2l6ZVBlclBhZ2VMaXN0KHNlbGVjdFNpemUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICB0aGlzLnRvdGFsUGFnZXMgPSBNYXRoLmNlaWwodGhpcy5wcm9wcy5kYXRhU2l6ZSAvIHRoaXMucHJvcHMuc2l6ZVBlclBhZ2UpO1xyXG4gICAgdmFyIHBhZ2VCdG5zID0gdGhpcy5tYWtlUGFnZSgpO1xyXG4gICAgdmFyIHBhZ2VMaXN0U3R5bGUgPSB7XHJcbiAgICAgIGZsb2F0OiBcInJpZ2h0XCIsXHJcbiAgICAgIG1hcmdpblRvcDogXCIwcHhcIiAgLy9vdmVycmlkZSB0aGUgbWFyZ2luLXRvcCBkZWZpbmVkIGluIC5wYWdpbmF0aW9uIGNsYXNzIGluIGJvb3RzdHJhcC5cclxuICAgIH1cclxuXHJcbiAgICB2YXIgc2l6ZVBlclBhZ2VMaXN0ID0gdGhpcy5wcm9wcy5zaXplUGVyUGFnZUxpc3QubWFwKChzaXplUGVyUGFnZSkgPT4ge1xyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIDxsaSBrZXk9e3NpemVQZXJQYWdlfSByb2xlPVwicHJlc2VudGF0aW9uXCI+XHJcbiAgICAgICAgICA8YSByb2xlPVwibWVudWl0ZW1cIiB0YWJJbmRleD1cIi0xXCIgaHJlZj1cIiNcIiBvbkNsaWNrPXt0aGlzLmNoYW5nZVNpemVQZXJQYWdlLmJpbmQodGhpcyl9PntzaXplUGVyUGFnZX08L2E+XHJcbiAgICAgICAgPC9saT5cclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCIgc3R5bGU9e3sgbWFyZ2luVG9wOiAxNSB9fT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICB0aGlzLnByb3BzLnNpemVQZXJQYWdlTGlzdC5sZW5ndGggPiAxXHJcbiAgICAgICAgICA/IDxkaXY+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtbWQtNlwiPlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRyb3Bkb3duXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG4gYnRuLWRlZmF1bHQgZHJvcGRvd24tdG9nZ2xlXCIgdHlwZT1cImJ1dHRvblwiIGlkPVwicGFnZURyb3BEb3duXCIgZGF0YS10b2dnbGU9XCJkcm9wZG93blwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWV4cGFuZGVkPVwidHJ1ZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMuc2l6ZVBlclBhZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJjYXJldFwiLz5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPVwiZHJvcGRvd24tbWVudVwiIHJvbGU9XCJtZW51XCIgYXJpYS1sYWJlbGxlZGJ5PVwicGFnZURyb3BEb3duXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICB7c2l6ZVBlclBhZ2VMaXN0fVxyXG4gICAgICAgICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC02XCI+XHJcbiAgICAgICAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9XCJwYWdpbmF0aW9uXCIgc3R5bGU9e3BhZ2VMaXN0U3R5bGV9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtwYWdlQnRuc31cclxuICAgICAgICAgICAgICAgICAgPC91bD5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgOiA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC0xMlwiPlxyXG4gICAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9XCJwYWdpbmF0aW9uXCIgc3R5bGU9e3BhZ2VMaXN0U3R5bGV9PlxyXG4gICAgICAgICAgICAgICAge3BhZ2VCdG5zfVxyXG4gICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIH1cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBtYWtlUGFnZSgpIHtcclxuICAgIHZhciBwYWdlcyA9IHRoaXMuZ2V0UGFnZXMoKTtcclxuICAgIHJldHVybiBwYWdlcy5tYXAoZnVuY3Rpb24gKHBhZ2UpIHtcclxuICAgICAgdmFyIGlzQWN0aXZlID0gcGFnZSA9PT0gdGhpcy5wcm9wcy5jdXJyUGFnZTtcclxuICAgICAgdmFyIGRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIHZhciBoaWRkZW4gPSBmYWxzZTtcclxuICAgICAgaWYodGhpcy5wcm9wcy5jdXJyUGFnZSA9PSAxICYmXHJcbiAgICAgICAgKHBhZ2UgPT09IHRoaXMucHJvcHMuZmlyc3RQYWdlIHx8IHBhZ2UgPT09IHRoaXMucHJvcHMucHJlUGFnZSkpe1xyXG4gICAgICAgICAgZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgaGlkZGVuID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBpZih0aGlzLnByb3BzLmN1cnJQYWdlID09IHRoaXMudG90YWxQYWdlcyAmJlxyXG4gICAgICAgIChwYWdlID09PSB0aGlzLnByb3BzLm5leHRQYWdlIHx8IHBhZ2UgPT09IHRoaXMucHJvcHMubGFzdFBhZ2UpKXtcclxuICAgICAgICAgIGRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgIGhpZGRlbiA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIChcclxuICAgICAgICA8UGFnZUJ1dHRvbiBjaGFuZ2VQYWdlPXt0aGlzLmNoYW5nZVBhZ2UuYmluZCh0aGlzKX0gYWN0aXZlPXtpc0FjdGl2ZX0gZGlzYWJsZT17ZGlzYWJsZWR9IGhpZGRlbj17aGlkZGVufSBrZXk9e3BhZ2V9PntwYWdlfTwvUGFnZUJ1dHRvbj5cclxuICAgICAgKVxyXG4gICAgfSwgdGhpcyk7XHJcbiAgfVxyXG5cclxuICBnZXRQYWdlcygpIHtcclxuICAgIHZhciBzdGFydFBhZ2UgPSAxLCBlbmRQYWdlID0gdGhpcy50b3RhbFBhZ2VzO1xyXG5cclxuICAgIHN0YXJ0UGFnZSA9IE1hdGgubWF4KHRoaXMucHJvcHMuY3VyclBhZ2UgLSBNYXRoLmZsb29yKHRoaXMucHJvcHMucGFnaW5hdGlvblNpemUgLyAyKSwgMSk7XHJcbiAgICBlbmRQYWdlID0gc3RhcnRQYWdlICsgdGhpcy5wcm9wcy5wYWdpbmF0aW9uU2l6ZSAtIDE7XHJcblxyXG4gICAgaWYgKGVuZFBhZ2UgPiB0aGlzLnRvdGFsUGFnZXMpIHtcclxuICAgICAgZW5kUGFnZSA9IHRoaXMudG90YWxQYWdlcztcclxuICAgICAgc3RhcnRQYWdlID0gZW5kUGFnZSAtIHRoaXMucHJvcHMucGFnaW5hdGlvblNpemUgKyAxO1xyXG4gICAgfVxyXG4gICAgdmFyIHBhZ2VzO1xyXG4gICAgaWYoc3RhcnRQYWdlICE9IDEgJiYgdGhpcy50b3RhbFBhZ2VzID4gdGhpcy5wcm9wcy5wYWdpbmF0aW9uU2l6ZSkge1xyXG4gICAgICBwYWdlcyA9IFt0aGlzLnByb3BzLmZpcnN0UGFnZSwgdGhpcy5wcm9wcy5wcmVQYWdlXTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy50b3RhbFBhZ2VzID4gMSkge1xyXG4gICAgICBwYWdlcyA9IFt0aGlzLnByb3BzLnByZVBhZ2VdO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHBhZ2VzID0gW11cclxuICAgIH1cclxuICAgIGZvciAodmFyIGkgPSBzdGFydFBhZ2U7IGkgPD0gZW5kUGFnZTsgaSsrKSB7XHJcbiAgICAgIGlmIChpID4gMClwYWdlcy5wdXNoKGkpO1xyXG4gICAgfVxyXG4gICAgaWYgKGVuZFBhZ2UgIT0gdGhpcy50b3RhbFBhZ2VzKSB7XHJcbiAgICAgIHBhZ2VzLnB1c2godGhpcy5wcm9wcy5uZXh0UGFnZSk7XHJcbiAgICAgIHBhZ2VzLnB1c2godGhpcy5wcm9wcy5sYXN0UGFnZSk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMudG90YWxQYWdlcyA+IDEpe1xyXG4gICAgICBwYWdlcy5wdXNoKHRoaXMucHJvcHMubmV4dFBhZ2UpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhZ2VzO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q3VycmVudFBhZ2UoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5jdXJyUGFnZTtcclxuICB9XHJcblxyXG4gIGdldFNpemVQZXJQYWdlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucHJvcHMuc2l6ZVBlclBhZ2U7XHJcbiAgfVxyXG59XHJcblBhZ2luYXRpb25MaXN0LnByb3BUeXBlcyA9IHtcclxuICBjdXJyUGFnZTogUmVhY3QuUHJvcFR5cGVzLm51bWJlcixcclxuICBzaXplUGVyUGFnZTogUmVhY3QuUHJvcFR5cGVzLm51bWJlcixcclxuICBkYXRhU2l6ZTogUmVhY3QuUHJvcFR5cGVzLm51bWJlcixcclxuICBjaGFuZ2VQYWdlOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcclxuICBzaXplUGVyUGFnZUxpc3Q6IFJlYWN0LlByb3BUeXBlcy5hcnJheSxcclxuICBwYWdpbmF0aW9uU2l6ZTogUmVhY3QuUHJvcFR5cGVzLm51bWJlcixcclxuICByZW1vdGU6IFJlYWN0LlByb3BUeXBlcy5ib29sLFxyXG4gIG9uU2l6ZVBlclBhZ2VMaXN0OiBSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcclxuICBwcmVQYWdlOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nXHJcbn07XHJcblxyXG5QYWdpbmF0aW9uTGlzdC5kZWZhdWx0UHJvcHMgPSB7XHJcbiAgc2l6ZVBlclBhZ2U6IENvbnN0LlNJWkVfUEVSX1BBR0VcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBhZ2luYXRpb25MaXN0O1xyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9wYWdpbmF0aW9uL1BhZ2luYXRpb25MaXN0LmpzXG4gKiovIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IGNsYXNzU2V0IGZyb20gJ2NsYXNzbmFtZXMnO1xyXG5pbXBvcnQgQ29uc3QgZnJvbSAnLi4vQ29uc3QnO1xyXG5pbXBvcnQgRWRpdG9yIGZyb20gJy4uL0VkaXRvcic7XHJcbmltcG9ydCBOb3RpZmllciBmcm9tICcuLi9Ob3RpZmljYXRpb24uanMnO1xyXG5pbXBvcnQgU3dpdGNoIGZyb20gJ3JjLXN3aXRjaCc7XHJcblxyXG5jbGFzcyBUb29sQmFyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICB0aGlzLnRpbWVvdXRlQ2xlYXIgPSAwO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIGlzSW5zZXJ0Um93VHJpZ2dlcjogdHJ1ZSxcclxuICAgICAgICAgICAgdmFsaWRhdGVTdGF0ZTogbnVsbCxcclxuICAgICAgICAgICAgc2hha2VFZGl0b3I6IGZhbHNlLFxyXG4gICAgICAgICAgICBzaG93U2VsZWN0ZWQ6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgICAgICB0aGlzLmNsZWFyVGltZW91dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyVGltZW91dCgpIHtcclxuICAgICAgICBpZiAodGhpcy50aW1lb3V0ZUNsZWFyKSB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRlQ2xlYXIpO1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVvdXRlQ2xlYXIgPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjaGVja0FuZFBhcnNlRm9ybSgpIHtcclxuICAgICAgICB2YXIgdHMgPSB0aGlzLCBuZXdPYmogPSB7fSwgaXNWYWxpZCA9IHRydWUsIHRlbXBWYWx1ZSwgdGVtcE1zZywgdmFsaWRhdGVTdGF0ZSA9IHt9O1xyXG4gICAgICAgIHRoaXMucHJvcHMuY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb2x1bW4sIGkpIHtcclxuICAgICAgICAgICAgaWYgKGNvbHVtbi5hdXRvVmFsdWUpIHsvL3doZW4geW91IHdhbnQgc2FtZSBhdXRvIGdlbmVyYXRlIHZhbHVlIGFuZCBub3QgYWxsb3cgZWRpdCwgZXhhbXBsZSBJRCBmaWVsZFxyXG4gICAgICAgICAgICAgICAgdGVtcFZhbHVlID0gdHlwZW9mIGNvbHVtbi5hdXRvVmFsdWUgPT0gJ2Z1bmN0aW9uJyA/IGNvbHVtbi5hdXRvVmFsdWUoKSA6ICgnYXV0b3ZhbHVlLScgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZG9tID0gdGhpcy5yZWZzW2NvbHVtbi5maWVsZCArIGldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAgZG9tICE9PSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wVmFsdWUgPSBkb20udmFsdWU7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcFZhbHVlID0gdHJ1ZVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4uZWRpdGFibGUgJiYgY29sdW1uLmVkaXRhYmxlLnR5cGUgPT0gJ2NoZWNrYm94Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZXMgPSBkb20udmFsdWUuc3BsaXQoJzonKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wVmFsdWUgPSBkb20uY2hlY2tlZCA/IHZhbHVlc1swXSA6IHZhbHVlc1sxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLmVkaXRhYmxlICYmIGNvbHVtbi5lZGl0YWJsZS52YWxpZGF0b3IpIHsvL3Byb2Nlc3MgdmFsaWRhdGVcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wTXNnID0gY29sdW1uLmVkaXRhYmxlLnZhbGlkYXRvcih0ZW1wVmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXBNc2cgIT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNWYWxpZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZVN0YXRlW2NvbHVtbi5maWVsZF0gPSB0ZW1wTXNnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbmV3T2JqW2NvbHVtbi5maWVsZF0gPSB0ZW1wVmFsdWU7XHJcbiAgICAgICAgfSwgdGhpcyk7XHJcblxyXG4gICAgICAgIGlmIChpc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXdPYmo7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdHMuY2xlYXJUaW1lb3V0KCk7XHJcbiAgICAgICAgICAgIC8vc2hvdyBlcnJvciBpbiBmb3JtIGFuZCBzaGFrZSBpdFxyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHt2YWxpZGF0ZVN0YXRlOiB2YWxpZGF0ZVN0YXRlLCBzaGFrZUVkaXRvcjogdHJ1ZX0pO1xyXG4gICAgICAgICAgICAvL25vdGlmaWVyIGVycm9yXHJcbiAgICAgICAgICAgIHRzLnJlZnMubm90aWZpZXIubm90aWNlKCdlcnJvcicsIFwiRm9ybSB2YWxpZGF0ZSBlcnJvcnMsIHBsZWFzZSBjaGVja2luZyFcIiwgXCJQcmVzc2VkIEVTQyBjYW4gY2FuY2VsXCIpO1xyXG4gICAgICAgICAgICAvL2NsZWFyIGFuaW1hdGUgY2xhc3NcclxuICAgICAgICAgICAgdHMudGltZW91dGVDbGVhciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdHMuc2V0U3RhdGUoe3NoYWtlRWRpdG9yOiBmYWxzZX0pO1xyXG4gICAgICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlU2F2ZUJ0bkNsaWNrKGUpIHtcclxuICAgICAgICB2YXIgbmV3T2JqID0gdGhpcy5jaGVja0FuZFBhcnNlRm9ybSgpO1xyXG4gICAgICAgIGlmICghbmV3T2JqKSB7Ly92YWxpZGF0ZSBlcnJvcnNcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnByb3BzLm9uQWRkUm93KG5ld09iaikudGhlbigobXNnKT0+IHtcclxuXHJcbiAgICAgICAgICAgIGlmIChtc2cpIHtcclxuICAgICAgICAgICAgICAgIGxldCBtZXNzYWdlID0gJydcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbXNnLmVycm9ycy5tYXAoKGVycm9yKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSArPSAoZXJyb3IubWVzc2FnZSArICcuICcpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXgpXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSArPSBtc2cudG9TdHJpbmcoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciB0cyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB0cy5yZWZzLm5vdGlmaWVyLm5vdGljZSgnZXJyb3InLCBtZXNzYWdlLCBcIlByZXNzZWQgRVNDIGNhbiBjYW5jZWxcIik7XHJcbiAgICAgICAgICAgICAgICB0cy5jbGVhclRpbWVvdXQoKTtcclxuICAgICAgICAgICAgICAgIC8vc2hha2UgZm9ybSBhbmQgaGFjayBwcmV2ZW50IG1vZGFsIGhpZGVcclxuICAgICAgICAgICAgICAgIHRzLnNldFN0YXRlKHtzaGFrZUVkaXRvcjogdHJ1ZSwgdmFsaWRhdGVTdGF0ZTogXCJ0aGlzIGlzIGhhY2sgZm9yIHByZXZlbnQgYm9vdHN0cmFwIG1vZGFsIGhpZGVcIn0pO1xyXG4gICAgICAgICAgICAgICAgLy9jbGVhciBhbmltYXRlIGNsYXNzXHJcbiAgICAgICAgICAgICAgICB0cy50aW1lb3V0ZUNsZWFyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHMuc2V0U3RhdGUoe3NoYWtlRWRpdG9yOiBmYWxzZX0pO1xyXG4gICAgICAgICAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vcmVzZXQgc3RhdGUgYW5kIGhpZGUgbW9kYWwgaGlkZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVTdGF0ZTogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBzaGFrZUVkaXRvcjogZmFsc2VcclxuICAgICAgICAgICAgICAgIH0sICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIgKyBcIm1vZGFsXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbS5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1baV0uY2xpY2soKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy9yZXNldCBmb3JtXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnMuZm9ybS5yZXNldCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVNob3dPbmx5VG9nZ2xlID0gZSA9PiB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHNob3dTZWxlY3RlZDogIXRoaXMuc3RhdGUuc2hvd1NlbGVjdGVkXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5vblNob3dPbmx5U2VsZWN0ZWQoKTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVEcm9wUm93QnRuQ2xpY2soZSkge1xyXG4gICAgICAgIHRoaXMucHJvcHMub25Ecm9wUm93KCk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlQ2xvc2VCdG4oZSkge1xyXG4gICAgICAgIHRoaXMucmVmcy53YXJuaW5nLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVLZXlVcChlKSB7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5vblNlYXJjaChlLmN1cnJlbnRUYXJnZXQudmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUV4cG9ydENTVigpIHtcclxuICAgICAgICB0aGlzLnByb3BzLm9uRXhwb3J0Q1NWKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlQ2xlYXJCdG5DbGljayA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLnJlZnMuc2VhY2hJbnB1dC52YWx1ZSA9ICcnO1xyXG4gICAgICAgIHRoaXMucHJvcHMub25TZWFyY2goJycpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICB2YXIgbW9kYWxDbGFzc05hbWUgPSBcImJzLXRhYmxlLW1vZGFsLXNtXCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICB2YXIgaW5zZXJ0QnRuID0gdGhpcy5wcm9wcy5lbmFibGVJbnNlcnQgP1xyXG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBvbkNsaWNrPXt0aGlzLnByb3BzLm9uQWRkUm93QmVnaW59IGNsYXNzTmFtZT1cImJ0biBidG4taW5mbyByZWFjdC1icy10YWJsZS1hZGQtYnRuXCJcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLXRvZ2dsZT1cIm1vZGFsXCIgZGF0YS10YXJnZXQ9eycuJyttb2RhbENsYXNzTmFtZX0+XHJcbiAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLXBsdXNcIj48L2k+IE5ldzwvYnV0dG9uPiA6IG51bGw7XHJcblxyXG4gICAgICAgIHZhciBkZWxldGVCdG4gPSB0aGlzLnByb3BzLmVuYWJsZURlbGV0ZSA/XHJcbiAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT1cImJ0biBidG4td2FybmluZyByZWFjdC1icy10YWJsZS1kZWwtYnRuXCIgZGF0YS10b2dnbGU9XCJ0b29sdGlwXCJcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLXBsYWNlbWVudD1cInJpZ2h0XCIgdGl0bGU9XCJEcm9wIHNlbGVjdGVkIHJvd1wiXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVEcm9wUm93QnRuQ2xpY2suYmluZCh0aGlzKX0+XHJcbiAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLXRyYXNoXCI+PC9pPiBEZWxldGVcclxuICAgICAgICAgICAgPC9idXR0b24+IDogbnVsbDtcclxuXHJcbiAgICAgICAgdmFyIHNlYXJjaFRleHRJbnB1dCA9IHRoaXMucmVuZGVyU2VhcmNoUGFuZWwoKTtcclxuXHJcbiAgICAgICAgdmFyIHNob3dTZWxlY3RlZE9ubHlCdG4gPSB0aGlzLnByb3BzLmVuYWJsZVNob3dPbmx5U2VsZWN0ZWQgP1xyXG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBvbkNsaWNrPXt0aGlzLmhhbmRsZVNob3dPbmx5VG9nZ2xlLmJpbmQodGhpcyl9IGNsYXNzTmFtZT1cImJ0biBidG4tcHJpbWFyeVwiXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS10b2dnbGU9XCJidXR0b25cIiBhcmlhLXByZXNzZWQ9XCJmYWxzZVwiPlxyXG4gICAgICAgICAgICAgICAgeyB0aGlzLnN0YXRlLnNob3dTZWxlY3RlZCA/IENvbnN0LlNIT1dfQUxMIDogQ29uc3QuU0hPV19PTkxZX1NFTEVDVCB9XHJcbiAgICAgICAgICAgIDwvYnV0dG9uPiA6IG51bGw7XHJcblxyXG4gICAgICAgIHZhciBtb2RhbCA9IHRoaXMucHJvcHMuZW5hYmxlSW5zZXJ0ID8gdGhpcy5yZW5kZXJJbnNlcnRSb3dNb2RhbChtb2RhbENsYXNzTmFtZSkgOiBudWxsO1xyXG4gICAgICAgIHZhciB3YXJuaW5nU3R5bGUgPSB7XHJcbiAgICAgICAgICAgIGRpc3BsYXk6IFwibm9uZVwiLFxyXG4gICAgICAgICAgICBtYXJnaW5Cb3R0b206IDBcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZXhwb3J0Q1NWID0gdGhpcy5wcm9wcy5lbmFibGVFeHBvcnRDU1YgP1xyXG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJidG4gYnRuLXN1Y2Nlc3NcIiBvbkNsaWNrPXt0aGlzLmhhbmRsZUV4cG9ydENTVi5iaW5kKHRoaXMpfT5cclxuICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tZXhwb3J0XCI+PC9pPiBFeHBvcnQgdG8gQ1NWPC9idXR0b24+IDogbnVsbDtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXhzLTEyIGNvbC1zbS02IGNvbC1tZC02IGNvbC1sZy04XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidG4tZ3JvdXAgYnRuLWdyb3VwLXNtXCIgcm9sZT1cImdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtleHBvcnRDU1Z9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtpbnNlcnRCdG59XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtkZWxldGVCdG59XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtzaG93U2VsZWN0ZWRPbmx5QnRufVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC14cy0xMiBjb2wtc20tNiBjb2wtbWQtNiBjb2wtbGctNFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIHtzZWFyY2hUZXh0SW5wdXR9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxOb3RpZmllciByZWY9XCJub3RpZmllclwiPjwvTm90aWZpZXI+XHJcbiAgICAgICAgICAgICAgICB7bW9kYWx9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJTZWFyY2hQYW5lbCgpIHtcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5lbmFibGVTZWFyY2gpIHtcclxuICAgICAgICAgICAgbGV0IGNsYXNzTmFtZXMgPSAnZm9ybS1ncm91cCBmb3JtLWdyb3VwLXNtJztcclxuICAgICAgICAgICAgbGV0IGNsZWFyQnRuID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuY2xlYXJTZWFyY2gpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFyQnRuID0gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImlucHV0LWdyb3VwLWJ0blwiPlxyXG4gICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidG4gYnRuLWRlZmF1bHRcIlxyXG4gICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsgdGhpcy5oYW5kbGVDbGVhckJ0bkNsaWNrIH0+Q2xlYXJcclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lcyA9ICdmb3JtLWdyb3VwIGZvcm0tZ3JvdXAtc20gaW5wdXQtZ3JvdXAgaW5wdXQtZ3JvdXAtc20nO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXN9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCByZWY9J3NlYWNoSW5wdXQnIGNsYXNzTmFtZT1cImZvcm0tY29udHJvbFwiIHR5cGU9J3RleHQnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0aGlzLnByb3BzLnNlYXJjaFBsYWNlaG9sZGVyP3RoaXMucHJvcHMuc2VhcmNoUGxhY2Vob2xkZXI6J1NlYXJjaCd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uS2V5VXA9e3RoaXMuaGFuZGxlS2V5VXAuYmluZCh0aGlzKX0vPlxyXG4gICAgICAgICAgICAgICAgICAgIHsgY2xlYXJCdG4gfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckluc2VydFJvd01vZGFsKG1vZGFsQ2xhc3NOYW1lKSB7XHJcbiAgICAgICAgdmFyIHZhbGlkYXRlU3RhdGUgPSB0aGlzLnN0YXRlLnZhbGlkYXRlU3RhdGUgfHwge307XHJcbiAgICAgICAgdmFyIGlucHV0RmllbGQgPSB0aGlzLnByb3BzLmNvbHVtbnMubWFwKGZ1bmN0aW9uIChjb2x1bW4sIGkpIHtcclxuICAgICAgICAgICAgdmFyIGVkaXRhYmxlID0gY29sdW1uLmVkaXRhYmxlLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0ID0gY29sdW1uLmZvcm1hdCxcclxuICAgICAgICAgICAgICAgIGF0dHIgPSB7cmVmOiBjb2x1bW4uZmllbGQgKyBpLCBwbGFjZWhvbGRlcjogZWRpdGFibGUucGxhY2Vob2xkZXIgPyBlZGl0YWJsZS5wbGFjZWhvbGRlciA6IGNvbHVtbi5uYW1lfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjb2x1bW4uYXV0b1ZhbHVlKSB7Ly93aGVuIHlvdSB3YW50IHNhbWUgYXV0byBnZW5lcmF0ZSB2YWx1ZSBhbmQgbm90IGFsbG93IGVkaXQsIGV4YW1wbGUgSUQgZmllbGRcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBlcnJvciA9IHZhbGlkYXRlU3RhdGVbY29sdW1uLmZpZWxkXSA/IChcclxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImhlbHAtYmxvY2sgYmctZGFuZ2VyXCI+e3ZhbGlkYXRlU3RhdGVbY29sdW1uLmZpZWxkXX08L3NwYW4+KSA6IG51bGw7XHJcblxyXG4gICAgICAgICAgICAvLyBsZXQgZWRpdG9yID0gRWRpdG9yKGVkaXRhYmxlLGF0dHIsZm9ybWF0KTtcclxuICAgICAgICAgICAgLy8gaWYoZWRpdG9yLnByb3BzLnR5cGUgJiYgZWRpdG9yLnByb3BzLnR5cGUgPT0gJ2NoZWNrYm94Jyl7XHJcbiAgICAgICAgICAgIGxldCBzdHlsZSA9IHtkaXNwbGF5OiBjb2x1bW4uaGlkZGVuSW5Qb3B1cCA/ICdub25lJyA6ICdibG9jayd9XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvcm0tZ3JvdXBcIiBrZXk9e2NvbHVtbi5maWVsZH0gc3R5bGU9e3N0eWxlfT5cclxuICAgICAgICAgICAgICAgICAgICA8bGFiZWw+e2NvbHVtbi5uYW1lfTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAge0VkaXRvcihlZGl0YWJsZSwgYXR0ciwgZm9ybWF0LCAnJyl9XHJcbiAgICAgICAgICAgICAgICAgICAge2Vycm9yfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIG1vZGFsQ2xhc3MgPSBjbGFzc1NldChcIm1vZGFsXCIsIFwiZmFkZVwiLCBtb2RhbENsYXNzTmFtZSwge1xyXG4gICAgICAgICAgICAnaW4nOiB0aGlzLnN0YXRlLnNoYWtlRWRpdG9yIHx8IHRoaXMuc3RhdGUudmFsaWRhdGVTdGF0ZS8vaGFjayBwcmV2ZW50IGJvb3RzdHJhcCBtb2RhbCBoaWRlIGJ5IHJlUmVuZGVyXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIGRpYWxvZ0NsYXNzID0gY2xhc3NTZXQoXCJtb2RhbC1kaWFsb2dcIiwgXCJtb2RhbC1zbVwiLCB7XHJcbiAgICAgICAgICAgIFwiYW5pbWF0ZWRcIjogdGhpcy5zdGF0ZS5zaGFrZUVkaXRvcixcclxuICAgICAgICAgICAgXCJzaGFrZVwiOiB0aGlzLnN0YXRlLnNoYWtlRWRpdG9yXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiByZWY9XCJtb2RhbFwiIGNsYXNzTmFtZT17bW9kYWxDbGFzc30gdGFiSW5kZXg9XCItMVwiIHJvbGU9XCJkaWFsb2dcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtkaWFsb2dDbGFzc30+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb2RhbC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtaGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+PHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIj4mdGltZXM7PC9zcGFuPjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cIm1vZGFsLXRpdGxlXCI+TmV3IFJlY29yZDwvaDQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vZGFsLWJvZHlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxmb3JtIHJlZj1cImZvcm1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aW5wdXRGaWVsZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtZm9vdGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJidG4gYnRuLWRlZmF1bHRcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPkNsb3NlPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJidG4gYnRuLXN1Y2Nlc3NcIiBvbkNsaWNrPXt0aGlzLmhhbmRsZVNhdmVCdG5DbGljay5iaW5kKHRoaXMpfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTYXZlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG59XHJcblRvb2xCYXIucHJvcFR5cGVzID0ge1xyXG4gICAgb25BZGRSb3c6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxyXG4gICAgb25Ecm9wUm93OiBSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcclxuICAgIG9uU2hvd09ubHlTZWxlY3RlZDogUmVhY3QuUHJvcFR5cGVzLmZ1bmMsXHJcbiAgICBlbmFibGVJbnNlcnQ6IFJlYWN0LlByb3BUeXBlcy5ib29sLFxyXG4gICAgZW5hYmxlRGVsZXRlOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCxcclxuICAgIGVuYWJsZVNlYXJjaDogUmVhY3QuUHJvcFR5cGVzLmJvb2wsXHJcbiAgICBlbmFibGVTaG93T25seVNlbGVjdGVkOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCxcclxuICAgIGNvbHVtbnM6IFJlYWN0LlByb3BUeXBlcy5hcnJheSxcclxuICAgIHNlYXJjaFBsYWNlaG9sZGVyOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxyXG4gICAgY2xlYXJTZWFyY2g6IFJlYWN0LlByb3BUeXBlcy5ib29sXHJcbn07XHJcblxyXG5Ub29sQmFyLmRlZmF1bHRQcm9wcyA9IHtcclxuICAgIGVuYWJsZUluc2VydDogZmFsc2UsXHJcbiAgICBlbmFibGVEZWxldGU6IGZhbHNlLFxyXG4gICAgZW5hYmxlU2VhcmNoOiBmYWxzZSxcclxuICAgIGVuYWJsZVNob3dPbmx5U2VsZWN0ZWQ6IGZhbHNlLFxyXG4gICAgY2xlYXJTZWFyY2g6IGZhbHNlXHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgVG9vbEJhcjtcclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvdG9vbGJhci9Ub29sQmFyLmpzXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5yYy1zd2l0Y2h7cG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTppbmxpbmUtYmxvY2s7Ym94LXNpemluZzpib3JkZXItYm94O3dpZHRoOjQ0cHg7aGVpZ2h0OjIycHg7bGluZS1oZWlnaHQ6MjBweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Ym9yZGVyLXJhZGl1czoyMHB4IDIwcHg7Ym9yZGVyOjFweCBzb2xpZCAjY2NjO2JhY2tncm91bmQtY29sb3I6I2NjYztjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOmFsbCAuM3MgY3ViaWMtYmV6aWVyKC4zNSwwLC4yNSwxKX0ucmMtc3dpdGNoLWlubmVye2NvbG9yOiNmZmY7Zm9udC1zaXplOjEycHg7cG9zaXRpb246YWJzb2x1dGU7bGVmdDoyNHB4fS5yYy1zd2l0Y2g6YWZ0ZXJ7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MThweDtoZWlnaHQ6MThweDtsZWZ0OjJweDt0b3A6MXB4O2JvcmRlci1yYWRpdXM6NTAlIDUwJTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Y29udGVudDpcXFwiIFxcXCI7Y3Vyc29yOnBvaW50ZXI7Ym94LXNoYWRvdzowIDJweCA1cHggcmdiYSgwLDAsMCwuMjYpOy13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEpO3RyYW5zZm9ybTpzY2FsZSgxKTt0cmFuc2l0aW9uOmxlZnQgLjNzIGN1YmljLWJlemllciguMzUsMCwuMjUsMSk7LXdlYmtpdC1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllciguMzUsMCwuMjUsMSk7YW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoLjM1LDAsLjI1LDEpOy13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uOi4zczthbmltYXRpb24tZHVyYXRpb246LjNzOy13ZWJraXQtYW5pbWF0aW9uLW5hbWU6cmNTd2l0Y2hPZmY7YW5pbWF0aW9uLW5hbWU6cmNTd2l0Y2hPZmZ9LnJjLXN3aXRjaDpob3ZlcjphZnRlcnstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxLjEpO3RyYW5zZm9ybTpzY2FsZSgxLjEpOy13ZWJraXQtYW5pbWF0aW9uLW5hbWU6cmNTd2l0Y2hPbjthbmltYXRpb24tbmFtZTpyY1N3aXRjaE9ufS5yYy1zd2l0Y2gtY2hlY2tlZHtib3JkZXI6MXB4IHNvbGlkICM4N2QwNjg7YmFja2dyb3VuZC1jb2xvcjojODdkMDY4fS5yYy1zd2l0Y2gtY2hlY2tlZCAucmMtc3dpdGNoLWlubmVye2xlZnQ6NnB4fS5yYy1zd2l0Y2gtY2hlY2tlZDphZnRlcntsZWZ0OjIycHh9LnJjLXN3aXRjaC1kaXNhYmxlZHtjdXJzb3I6bm8tZHJvcDtiYWNrZ3JvdW5kOiNjY2M7Ym9yZGVyLWNvbG9yOiNjY2N9LnJjLXN3aXRjaC1kaXNhYmxlZDphZnRlcntiYWNrZ3JvdW5kOiM5ZTllOWU7LXdlYmtpdC1hbmltYXRpb24tbmFtZTpub25lO2FuaW1hdGlvbi1uYW1lOm5vbmU7Y3Vyc29yOm5vLWRyb3B9LnJjLXN3aXRjaC1kaXNhYmxlZDpob3ZlcjphZnRlcnstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxKTt0cmFuc2Zvcm06c2NhbGUoMSk7LXdlYmtpdC1hbmltYXRpb24tbmFtZTpub25lO2FuaW1hdGlvbi1uYW1lOm5vbmV9LnJjLXN3aXRjaC1sYWJlbHtkaXNwbGF5OmlubGluZS1ibG9jaztsaW5lLWhlaWdodDoyMHB4O2ZvbnQtc2l6ZToxNHB4O3BhZGRpbmctbGVmdDoxMHB4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTt3aGl0ZS1zcGFjZTpub3JtYWw7cG9pbnRlci1ldmVudHM6bm9uZTstd2Via2l0LXVzZXItc2VsZWN0OnRleHQ7LW1vei11c2VyLXNlbGVjdDp0ZXh0Oy1tcy11c2VyLXNlbGVjdDp0ZXh0O3VzZXItc2VsZWN0OnRleHR9QC13ZWJraXQta2V5ZnJhbWVzIHJjU3dpdGNoT257MCV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMSk7dHJhbnNmb3JtOnNjYWxlKDEpfTUwJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxLjI1KTt0cmFuc2Zvcm06c2NhbGUoMS4yNSl9dG97LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMS4xKTt0cmFuc2Zvcm06c2NhbGUoMS4xKX19QGtleWZyYW1lcyByY1N3aXRjaE9uezAley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEpO3RyYW5zZm9ybTpzY2FsZSgxKX01MCV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMS4yNSk7dHJhbnNmb3JtOnNjYWxlKDEuMjUpfXRvey13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEuMSk7dHJhbnNmb3JtOnNjYWxlKDEuMSl9fUAtd2Via2l0LWtleWZyYW1lcyByY1N3aXRjaE9mZnswJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxLjEpO3RyYW5zZm9ybTpzY2FsZSgxLjEpfXRvey13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEpO3RyYW5zZm9ybTpzY2FsZSgxKX19QGtleWZyYW1lcyByY1N3aXRjaE9mZnswJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxLjEpO3RyYW5zZm9ybTpzY2FsZSgxLjEpfXRvey13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEpO3RyYW5zZm9ybTpzY2FsZSgxKX19XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vcmMtc3dpdGNoL2Fzc2V0cy9pbmRleC5jc3NcbiAqKiBtb2R1bGUgaWQgPSAzNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLypcclxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxyXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcclxuKi9cclxuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcclxuXHR2YXIgbGlzdCA9IFtdO1xyXG5cclxuXHQvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXHJcblx0bGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xyXG5cdFx0dmFyIHJlc3VsdCA9IFtdO1xyXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGl0ZW0gPSB0aGlzW2ldO1xyXG5cdFx0XHRpZihpdGVtWzJdKSB7XHJcblx0XHRcdFx0cmVzdWx0LnB1c2goXCJAbWVkaWEgXCIgKyBpdGVtWzJdICsgXCJ7XCIgKyBpdGVtWzFdICsgXCJ9XCIpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJlc3VsdC5wdXNoKGl0ZW1bMV0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVzdWx0LmpvaW4oXCJcIik7XHJcblx0fTtcclxuXHJcblx0Ly8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcclxuXHRsaXN0LmkgPSBmdW5jdGlvbihtb2R1bGVzLCBtZWRpYVF1ZXJ5KSB7XHJcblx0XHRpZih0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIilcclxuXHRcdFx0bW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgXCJcIl1dO1xyXG5cdFx0dmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcclxuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciBpZCA9IHRoaXNbaV1bMF07XHJcblx0XHRcdGlmKHR5cGVvZiBpZCA9PT0gXCJudW1iZXJcIilcclxuXHRcdFx0XHRhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XHJcblx0XHR9XHJcblx0XHRmb3IoaSA9IDA7IGkgPCBtb2R1bGVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciBpdGVtID0gbW9kdWxlc1tpXTtcclxuXHRcdFx0Ly8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxyXG5cdFx0XHQvLyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIG5vdCAxMDAlIHBlcmZlY3QgZm9yIHdlaXJkIG1lZGlhIHF1ZXJ5IGNvbWJpbmF0aW9uc1xyXG5cdFx0XHQvLyAgd2hlbiBhIG1vZHVsZSBpcyBpbXBvcnRlZCBtdWx0aXBsZSB0aW1lcyB3aXRoIGRpZmZlcmVudCBtZWRpYSBxdWVyaWVzLlxyXG5cdFx0XHQvLyAgSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxyXG5cdFx0XHRpZih0eXBlb2YgaXRlbVswXSAhPT0gXCJudW1iZXJcIiB8fCAhYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xyXG5cdFx0XHRcdGlmKG1lZGlhUXVlcnkgJiYgIWl0ZW1bMl0pIHtcclxuXHRcdFx0XHRcdGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xyXG5cdFx0XHRcdH0gZWxzZSBpZihtZWRpYVF1ZXJ5KSB7XHJcblx0XHRcdFx0XHRpdGVtWzJdID0gXCIoXCIgKyBpdGVtWzJdICsgXCIpIGFuZCAoXCIgKyBtZWRpYVF1ZXJ5ICsgXCIpXCI7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGxpc3QucHVzaChpdGVtKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcblx0cmV0dXJuIGxpc3Q7XHJcbn07XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXG4gKiogbW9kdWxlIGlkID0gMzZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBjbGFzc05hbWVzID0gcmVxdWlyZSgnY2xhc3NuYW1lcycpO1xuXG5mdW5jdGlvbiBub29wKCkge31cblxudmFyIFN3aXRjaCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgZGlzcGxheU5hbWU6ICdTd2l0Y2gnLFxuXG4gIHByb3BUeXBlczoge1xuICAgIGNsYXNzTmFtZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcbiAgICBwcmVmaXhDbHM6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG4gICAgZGlzYWJsZWQ6IFJlYWN0LlByb3BUeXBlcy5ib29sLFxuICAgIHN0eWxlOiBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0LFxuICAgIGNoZWNrZWRDaGlsZHJlbjogUmVhY3QuUHJvcFR5cGVzLmFueSxcbiAgICB1bkNoZWNrZWRDaGlsZHJlbjogUmVhY3QuUHJvcFR5cGVzLmFueSxcbiAgICBvbkNoYW5nZTogUmVhY3QuUHJvcFR5cGVzLmZ1bmNcbiAgfSxcbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByZWZpeENsczogJ3JjLXN3aXRjaCcsXG4gICAgICBzdHlsZToge30sXG4gICAgICBjaGVja2VkQ2hpbGRyZW46IG51bGwsXG4gICAgICB1bkNoZWNrZWRDaGlsZHJlbjogbnVsbCxcbiAgICAgIGNsYXNzTmFtZTogJycsXG4gICAgICBkZWZhdWx0Q2hlY2tlZDogZmFsc2UsXG4gICAgICBvbkNoYW5nZTogbm9vcFxuICAgIH07XG4gIH0sXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCkge1xuICAgIHZhciBwcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgdmFyIGNoZWNrZWQgPSBmYWxzZTtcbiAgICBpZiAoJ2NoZWNrZWQnIGluIHByb3BzKSB7XG4gICAgICBjaGVja2VkID0gISFwcm9wcy5jaGVja2VkO1xuICAgIH0gZWxzZSB7XG4gICAgICBjaGVja2VkID0gISFwcm9wcy5kZWZhdWx0Q2hlY2tlZDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGNoZWNrZWQ6IGNoZWNrZWRcbiAgICB9O1xuICB9LFxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgIGlmICgnY2hlY2tlZCcgaW4gbmV4dFByb3BzKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgY2hlY2tlZDogISFuZXh0UHJvcHMuY2hlY2tlZFxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuICB0b2dnbGU6IGZ1bmN0aW9uIHRvZ2dsZSgpIHtcbiAgICB2YXIgY2hlY2tlZCA9ICF0aGlzLnN0YXRlLmNoZWNrZWQ7XG4gICAgaWYgKCEoJ2NoZWNrZWQnIGluIHRoaXMucHJvcHMpKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgY2hlY2tlZDogY2hlY2tlZFxuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMucHJvcHMub25DaGFuZ2UoY2hlY2tlZCk7XG4gIH0sXG4gIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciBfY2xhc3NOYW1lcztcblxuICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgIHZhciBjbGFzc05hbWUgPSBfcHJvcHMuY2xhc3NOYW1lO1xuICAgIHZhciBwcmVmaXhDbHMgPSBfcHJvcHMucHJlZml4Q2xzO1xuICAgIHZhciBkaXNhYmxlZCA9IF9wcm9wcy5kaXNhYmxlZDtcbiAgICB2YXIgc3R5bGUgPSBfcHJvcHMuc3R5bGU7XG4gICAgdmFyIGNoZWNrZWRDaGlsZHJlbiA9IF9wcm9wcy5jaGVja2VkQ2hpbGRyZW47XG4gICAgdmFyIHVuQ2hlY2tlZENoaWxkcmVuID0gX3Byb3BzLnVuQ2hlY2tlZENoaWxkcmVuO1xuXG4gICAgdmFyIGNoZWNrZWQgPSB0aGlzLnN0YXRlLmNoZWNrZWQ7XG4gICAgdmFyIHN3aXRjaENsYXNzTmFtZSA9IGNsYXNzTmFtZXMoKF9jbGFzc05hbWVzID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgY2xhc3NOYW1lLCAhIWNsYXNzTmFtZSksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgcHJlZml4Q2xzLCB0cnVlKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzLCBwcmVmaXhDbHMgKyAnLWNoZWNrZWQnLCBjaGVja2VkKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzLCBwcmVmaXhDbHMgKyAnLWRpc2FibGVkJywgZGlzYWJsZWQpLCBfY2xhc3NOYW1lcykpO1xuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgJ3NwYW4nLFxuICAgICAgeyBjbGFzc05hbWU6IHN3aXRjaENsYXNzTmFtZSxcbiAgICAgICAgb25DbGljazogZGlzYWJsZWQgPyBub29wIDogdGhpcy50b2dnbGUsXG4gICAgICAgIHN0eWxlOiBzdHlsZSB9LFxuICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ3NwYW4nLFxuICAgICAgICB7IGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy1pbm5lcicgfSxcbiAgICAgICAgY2hlY2tlZCA/IGNoZWNrZWRDaGlsZHJlbiA6IHVuQ2hlY2tlZENoaWxkcmVuXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3dpdGNoO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JjLXN3aXRjaC9saWIvU3dpdGNoLmpzXG4gKiogbW9kdWxlIGlkID0gMzdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfU2VsZWN0ID0gcmVxdWlyZSgnLi9TZWxlY3QnKTtcblxudmFyIF9TZWxlY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU2VsZWN0KTtcblxudmFyIF91dGlsc1N0cmlwRGlhY3JpdGljcyA9IHJlcXVpcmUoJy4vdXRpbHMvc3RyaXBEaWFjcml0aWNzJyk7XG5cbnZhciBfdXRpbHNTdHJpcERpYWNyaXRpY3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdXRpbHNTdHJpcERpYWNyaXRpY3MpO1xuXG52YXIgcmVxdWVzdElkID0gMDtcblxuZnVuY3Rpb24gaW5pdENhY2hlKGNhY2hlKSB7XG5cdGlmIChjYWNoZSAmJiB0eXBlb2YgY2FjaGUgIT09ICdvYmplY3QnKSB7XG5cdFx0Y2FjaGUgPSB7fTtcblx0fVxuXHRyZXR1cm4gY2FjaGUgPyBjYWNoZSA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUNhY2hlKGNhY2hlLCBpbnB1dCwgZGF0YSkge1xuXHRpZiAoIWNhY2hlKSByZXR1cm47XG5cdGNhY2hlW2lucHV0XSA9IGRhdGE7XG59XG5cbmZ1bmN0aW9uIGdldEZyb21DYWNoZShjYWNoZSwgaW5wdXQpIHtcblx0aWYgKCFjYWNoZSkgcmV0dXJuO1xuXHRmb3IgKHZhciBpID0gaW5wdXQubGVuZ3RoOyBpID49IDA7IC0taSkge1xuXHRcdHZhciBjYWNoZUtleSA9IGlucHV0LnNsaWNlKDAsIGkpO1xuXHRcdGlmIChjYWNoZVtjYWNoZUtleV0gJiYgKGlucHV0ID09PSBjYWNoZUtleSB8fCBjYWNoZVtjYWNoZUtleV0uY29tcGxldGUpKSB7XG5cdFx0XHRyZXR1cm4gY2FjaGVbY2FjaGVLZXldO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiB0aGVuUHJvbWlzZShwcm9taXNlLCBjYWxsYmFjaykge1xuXHRpZiAoIXByb21pc2UgfHwgdHlwZW9mIHByb21pc2UudGhlbiAhPT0gJ2Z1bmN0aW9uJykgcmV0dXJuO1xuXHRyZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0Y2FsbGJhY2sobnVsbCwgZGF0YSk7XG5cdH0sIGZ1bmN0aW9uIChlcnIpIHtcblx0XHRjYWxsYmFjayhlcnIpO1xuXHR9KTtcbn1cblxudmFyIHN0cmluZ09yTm9kZSA9IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMub25lT2ZUeXBlKFtfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLnN0cmluZywgX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ub2RlXSk7XG5cbnZhciBBc3luYyA9IF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVDbGFzcyh7XG5cdGRpc3BsYXlOYW1lOiAnQXN5bmMnLFxuXG5cdHByb3BUeXBlczoge1xuXHRcdGNhY2hlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmFueSwgLy8gb2JqZWN0IHRvIHVzZSB0byBjYWNoZSByZXN1bHRzLCBjYW4gYmUgbnVsbCB0byBkaXNhYmxlIGNhY2hlXG5cdFx0aWdub3JlQWNjZW50czogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLCAvLyB3aGV0aGVyIHRvIHN0cmlwIGRpYWNyaXRpY3Mgd2hlbiBmaWx0ZXJpbmcgKHNoYXJlZCB3aXRoIFNlbGVjdClcblx0XHRpZ25vcmVDYXNlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsIC8vIHdoZXRoZXIgdG8gcGVyZm9ybSBjYXNlLWluc2Vuc2l0aXZlIGZpbHRlcmluZyAoc2hhcmVkIHdpdGggU2VsZWN0KVxuXHRcdGlzTG9hZGluZzogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLCAvLyBvdmVycmlkZXMgdGhlIGlzTG9hZGluZyBzdGF0ZSB3aGVuIHNldCB0byB0cnVlXG5cdFx0bG9hZE9wdGlvbnM6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLCAvLyBmdW5jdGlvbiB0byBjYWxsIHRvIGxvYWQgb3B0aW9ucyBhc3luY2hyb25vdXNseVxuXHRcdGxvYWRpbmdQbGFjZWhvbGRlcjogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsIC8vIHJlcGxhY2VzIHRoZSBwbGFjZWhvbGRlciB3aGlsZSBvcHRpb25zIGFyZSBsb2FkaW5nXG5cdFx0bWluaW11bUlucHV0OiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm51bWJlciwgLy8gdGhlIG1pbmltdW0gbnVtYmVyIG9mIGNoYXJhY3RlcnMgdGhhdCB0cmlnZ2VyIGxvYWRPcHRpb25zXG5cdFx0bm9SZXN1bHRzVGV4dDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsIC8vIHBsYWNlaG9sZGVyIGRpc3BsYXllZCB3aGVuIHRoZXJlIGFyZSBubyBtYXRjaGluZyBzZWFyY2ggcmVzdWx0cyAoc2hhcmVkIHdpdGggU2VsZWN0KVxuXHRcdHBsYWNlaG9sZGVyOiBzdHJpbmdPck5vZGUsIC8vIGZpZWxkIHBsYWNlaG9sZGVyLCBkaXNwbGF5ZWQgd2hlbiB0aGVyZSdzIG5vIHZhbHVlIChzaGFyZWQgd2l0aCBTZWxlY3QpXG5cdFx0c2VhcmNoUHJvbXB0VGV4dDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsIC8vIGxhYmVsIHRvIHByb21wdCBmb3Igc2VhcmNoIGlucHV0XG5cdFx0c2VhcmNoaW5nVGV4dDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcgfSxcblx0Ly8gbWVzc2FnZSB0byBkaXNwbGF5IHdoaWxlIG9wdGlvbnMgYXJlIGxvYWRpbmdcblx0Z2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGNhY2hlOiB0cnVlLFxuXHRcdFx0aWdub3JlQWNjZW50czogdHJ1ZSxcblx0XHRcdGlnbm9yZUNhc2U6IHRydWUsXG5cdFx0XHRsb2FkaW5nUGxhY2Vob2xkZXI6ICdMb2FkaW5nLi4uJyxcblx0XHRcdG1pbmltdW1JbnB1dDogMCxcblx0XHRcdHNlYXJjaGluZ1RleHQ6ICdTZWFyY2hpbmcuLi4nLFxuXHRcdFx0c2VhcmNoUHJvbXB0VGV4dDogJ1R5cGUgdG8gc2VhcmNoJ1xuXHRcdH07XG5cdH0sXG5cdGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRjYWNoZTogaW5pdENhY2hlKHRoaXMucHJvcHMuY2FjaGUpLFxuXHRcdFx0aXNMb2FkaW5nOiBmYWxzZSxcblx0XHRcdG9wdGlvbnM6IFtdXG5cdFx0fTtcblx0fSxcblx0Y29tcG9uZW50V2lsbE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG5cdFx0dGhpcy5fbGFzdElucHV0ID0gJyc7XG5cdH0sXG5cdGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcblx0XHR0aGlzLmxvYWRPcHRpb25zKCcnKTtcblx0fSxcblx0Y29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcblx0XHRpZiAobmV4dFByb3BzLmNhY2hlICE9PSB0aGlzLnByb3BzLmNhY2hlKSB7XG5cdFx0XHR0aGlzLnNldFN0YXRlKHtcblx0XHRcdFx0Y2FjaGU6IGluaXRDYWNoZShuZXh0UHJvcHMuY2FjaGUpXG5cdFx0XHR9KTtcblx0XHR9XG5cdH0sXG5cdGZvY3VzOiBmdW5jdGlvbiBmb2N1cygpIHtcblx0XHR0aGlzLnJlZnMuc2VsZWN0LmZvY3VzKCk7XG5cdH0sXG5cdHJlc2V0U3RhdGU6IGZ1bmN0aW9uIHJlc2V0U3RhdGUoKSB7XG5cdFx0dGhpcy5fY3VycmVudFJlcXVlc3RJZCA9IC0xO1xuXHRcdHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0aXNMb2FkaW5nOiBmYWxzZSxcblx0XHRcdG9wdGlvbnM6IFtdXG5cdFx0fSk7XG5cdH0sXG5cdGdldFJlc3BvbnNlSGFuZGxlcjogZnVuY3Rpb24gZ2V0UmVzcG9uc2VIYW5kbGVyKGlucHV0KSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdHZhciBfcmVxdWVzdElkID0gdGhpcy5fY3VycmVudFJlcXVlc3RJZCA9IHJlcXVlc3RJZCsrO1xuXHRcdHJldHVybiBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG5cdFx0XHRpZiAoZXJyKSB0aHJvdyBlcnI7XG5cdFx0XHRpZiAoIV90aGlzLmlzTW91bnRlZCgpKSByZXR1cm47XG5cdFx0XHR1cGRhdGVDYWNoZShfdGhpcy5zdGF0ZS5jYWNoZSwgaW5wdXQsIGRhdGEpO1xuXHRcdFx0aWYgKF9yZXF1ZXN0SWQgIT09IF90aGlzLl9jdXJyZW50UmVxdWVzdElkKSByZXR1cm47XG5cdFx0XHRfdGhpcy5zZXRTdGF0ZSh7XG5cdFx0XHRcdGlzTG9hZGluZzogZmFsc2UsXG5cdFx0XHRcdG9wdGlvbnM6IGRhdGEgJiYgZGF0YS5vcHRpb25zIHx8IFtdXG5cdFx0XHR9KTtcblx0XHR9O1xuXHR9LFxuXHRsb2FkT3B0aW9uczogZnVuY3Rpb24gbG9hZE9wdGlvbnMoaW5wdXQpIHtcblx0XHRpZiAodGhpcy5wcm9wcy5pZ25vcmVBY2NlbnRzKSBpbnB1dCA9ICgwLCBfdXRpbHNTdHJpcERpYWNyaXRpY3MyWydkZWZhdWx0J10pKGlucHV0KTtcblx0XHRpZiAodGhpcy5wcm9wcy5pZ25vcmVDYXNlKSBpbnB1dCA9IGlucHV0LnRvTG93ZXJDYXNlKCk7XG5cdFx0dGhpcy5fbGFzdElucHV0ID0gaW5wdXQ7XG5cdFx0aWYgKGlucHV0Lmxlbmd0aCA8IHRoaXMucHJvcHMubWluaW11bUlucHV0KSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5yZXNldFN0YXRlKCk7XG5cdFx0fVxuXHRcdHZhciBjYWNoZVJlc3VsdCA9IGdldEZyb21DYWNoZSh0aGlzLnN0YXRlLmNhY2hlLCBpbnB1dCk7XG5cdFx0aWYgKGNhY2hlUmVzdWx0KSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5zZXRTdGF0ZSh7XG5cdFx0XHRcdG9wdGlvbnM6IGNhY2hlUmVzdWx0Lm9wdGlvbnNcblx0XHRcdH0pO1xuXHRcdH1cblx0XHR0aGlzLnNldFN0YXRlKHtcblx0XHRcdGlzTG9hZGluZzogdHJ1ZVxuXHRcdH0pO1xuXHRcdHZhciByZXNwb25zZUhhbmRsZXIgPSB0aGlzLmdldFJlc3BvbnNlSGFuZGxlcihpbnB1dCk7XG5cdFx0cmV0dXJuIHRoZW5Qcm9taXNlKHRoaXMucHJvcHMubG9hZE9wdGlvbnMoaW5wdXQsIHJlc3BvbnNlSGFuZGxlciksIHJlc3BvbnNlSGFuZGxlcik7XG5cdH0sXG5cdHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHRcdHZhciBub1Jlc3VsdHNUZXh0ID0gdGhpcy5wcm9wcy5ub1Jlc3VsdHNUZXh0O1xuXHRcdHZhciBfc3RhdGUgPSB0aGlzLnN0YXRlO1xuXHRcdHZhciBpc0xvYWRpbmcgPSBfc3RhdGUuaXNMb2FkaW5nO1xuXHRcdHZhciBvcHRpb25zID0gX3N0YXRlLm9wdGlvbnM7XG5cblx0XHRpZiAodGhpcy5wcm9wcy5pc0xvYWRpbmcpIGlzTG9hZGluZyA9IHRydWU7XG5cdFx0dmFyIHBsYWNlaG9sZGVyID0gaXNMb2FkaW5nID8gdGhpcy5wcm9wcy5sb2FkaW5nUGxhY2Vob2xkZXIgOiB0aGlzLnByb3BzLnBsYWNlaG9sZGVyO1xuXHRcdGlmICghb3B0aW9ucy5sZW5ndGgpIHtcblx0XHRcdGlmICh0aGlzLl9sYXN0SW5wdXQubGVuZ3RoIDwgdGhpcy5wcm9wcy5taW5pbXVtSW5wdXQpIG5vUmVzdWx0c1RleHQgPSB0aGlzLnByb3BzLnNlYXJjaFByb21wdFRleHQ7XG5cdFx0XHRpZiAoaXNMb2FkaW5nKSBub1Jlc3VsdHNUZXh0ID0gdGhpcy5wcm9wcy5zZWFyY2hpbmdUZXh0O1xuXHRcdH1cblx0XHRyZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoX1NlbGVjdDJbJ2RlZmF1bHQnXSwgX2V4dGVuZHMoe30sIHRoaXMucHJvcHMsIHtcblx0XHRcdHJlZjogJ3NlbGVjdCcsXG5cdFx0XHRpc0xvYWRpbmc6IGlzTG9hZGluZyxcblx0XHRcdG5vUmVzdWx0c1RleHQ6IG5vUmVzdWx0c1RleHQsXG5cdFx0XHRvbklucHV0Q2hhbmdlOiB0aGlzLmxvYWRPcHRpb25zLFxuXHRcdFx0b3B0aW9uczogb3B0aW9ucyxcblx0XHRcdHBsYWNlaG9sZGVyOiBwbGFjZWhvbGRlclxuXHRcdH0pKTtcblx0fVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gQXN5bmM7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3Qtc2VsZWN0L2xpYi9Bc3luYy5qc1xuICoqIG1vZHVsZSBpZCA9IDM4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX2NsYXNzbmFtZXMgPSByZXF1aXJlKCdjbGFzc25hbWVzJyk7XG5cbnZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblxudmFyIE9wdGlvbiA9IF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVDbGFzcyh7XG5cdGRpc3BsYXlOYW1lOiAnT3B0aW9uJyxcblxuXHRwcm9wVHlwZXM6IHtcblx0XHRjaGlsZHJlbjogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ub2RlLFxuXHRcdGNsYXNzTmFtZTogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5zdHJpbmcsIC8vIGNsYXNzTmFtZSAoYmFzZWQgb24gbW91c2UgcG9zaXRpb24pXG5cdFx0aXNEaXNhYmxlZDogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ib29sLCAvLyB0aGUgb3B0aW9uIGlzIGRpc2FibGVkXG5cdFx0aXNGb2N1c2VkOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsIC8vIHRoZSBvcHRpb24gaXMgZm9jdXNlZFxuXHRcdGlzU2VsZWN0ZWQ6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuYm9vbCwgLy8gdGhlIG9wdGlvbiBpcyBzZWxlY3RlZFxuXHRcdG9uRm9jdXM6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYywgLy8gbWV0aG9kIHRvIGhhbmRsZSBtb3VzZUVudGVyIG9uIG9wdGlvbiBlbGVtZW50XG5cdFx0b25TZWxlY3Q6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYywgLy8gbWV0aG9kIHRvIGhhbmRsZSBjbGljayBvbiBvcHRpb24gZWxlbWVudFxuXHRcdG9uVW5mb2N1czogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLCAvLyBtZXRob2QgdG8gaGFuZGxlIG1vdXNlTGVhdmUgb24gb3B0aW9uIGVsZW1lbnRcblx0XHRvcHRpb246IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQgfSxcblx0Ly8gb2JqZWN0IHRoYXQgaXMgYmFzZSBmb3IgdGhhdCBvcHRpb25cblx0YmxvY2tFdmVudDogZnVuY3Rpb24gYmxvY2tFdmVudChldmVudCkge1xuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0aWYgKGV2ZW50LnRhcmdldC50YWdOYW1lICE9PSAnQScgfHwgISgnaHJlZicgaW4gZXZlbnQudGFyZ2V0KSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZiAoZXZlbnQudGFyZ2V0LnRhcmdldCkge1xuXHRcdFx0d2luZG93Lm9wZW4oZXZlbnQudGFyZ2V0LmhyZWYsIGV2ZW50LnRhcmdldC50YXJnZXQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR3aW5kb3cubG9jYXRpb24uaHJlZiA9IGV2ZW50LnRhcmdldC5ocmVmO1xuXHRcdH1cblx0fSxcblxuXHRoYW5kbGVNb3VzZURvd246IGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93bihldmVudCkge1xuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0dGhpcy5wcm9wcy5vblNlbGVjdCh0aGlzLnByb3BzLm9wdGlvbiwgZXZlbnQpO1xuXHR9LFxuXG5cdGhhbmRsZU1vdXNlRW50ZXI6IGZ1bmN0aW9uIGhhbmRsZU1vdXNlRW50ZXIoZXZlbnQpIHtcblx0XHR0aGlzLm9uRm9jdXMoZXZlbnQpO1xuXHR9LFxuXG5cdGhhbmRsZU1vdXNlTW92ZTogZnVuY3Rpb24gaGFuZGxlTW91c2VNb3ZlKGV2ZW50KSB7XG5cdFx0dGhpcy5vbkZvY3VzKGV2ZW50KTtcblx0fSxcblxuXHRoYW5kbGVUb3VjaEVuZDogZnVuY3Rpb24gaGFuZGxlVG91Y2hFbmQoZXZlbnQpIHtcblx0XHQvLyBDaGVjayBpZiB0aGUgdmlldyBpcyBiZWluZyBkcmFnZ2VkLCBJbiB0aGlzIGNhc2Vcblx0XHQvLyB3ZSBkb24ndCB3YW50IHRvIGZpcmUgdGhlIGNsaWNrIGV2ZW50IChiZWNhdXNlIHRoZSB1c2VyIG9ubHkgd2FudHMgdG8gc2Nyb2xsKVxuXHRcdGlmICh0aGlzLmRyYWdnaW5nKSByZXR1cm47XG5cblx0XHR0aGlzLmhhbmRsZU1vdXNlRG93bihldmVudCk7XG5cdH0sXG5cblx0aGFuZGxlVG91Y2hNb3ZlOiBmdW5jdGlvbiBoYW5kbGVUb3VjaE1vdmUoZXZlbnQpIHtcblx0XHQvLyBTZXQgYSBmbGFnIHRoYXQgdGhlIHZpZXcgaXMgYmVpbmcgZHJhZ2dlZFxuXHRcdHRoaXMuZHJhZ2dpbmcgPSB0cnVlO1xuXHR9LFxuXG5cdGhhbmRsZVRvdWNoU3RhcnQ6IGZ1bmN0aW9uIGhhbmRsZVRvdWNoU3RhcnQoZXZlbnQpIHtcblx0XHQvLyBTZXQgYSBmbGFnIHRoYXQgdGhlIHZpZXcgaXMgbm90IGJlaW5nIGRyYWdnZWRcblx0XHR0aGlzLmRyYWdnaW5nID0gZmFsc2U7XG5cdH0sXG5cblx0b25Gb2N1czogZnVuY3Rpb24gb25Gb2N1cyhldmVudCkge1xuXHRcdGlmICghdGhpcy5wcm9wcy5pc0ZvY3VzZWQpIHtcblx0XHRcdHRoaXMucHJvcHMub25Gb2N1cyh0aGlzLnByb3BzLm9wdGlvbiwgZXZlbnQpO1xuXHRcdH1cblx0fSxcblx0cmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdFx0dmFyIG9wdGlvbiA9IHRoaXMucHJvcHMub3B0aW9uO1xuXG5cdFx0dmFyIGNsYXNzTmFtZSA9ICgwLCBfY2xhc3NuYW1lczJbJ2RlZmF1bHQnXSkodGhpcy5wcm9wcy5jbGFzc05hbWUsIG9wdGlvbi5jbGFzc05hbWUpO1xuXG5cdFx0cmV0dXJuIG9wdGlvbi5kaXNhYmxlZCA/IF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHRcdFx0J2RpdicsXG5cdFx0XHR7IGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuXHRcdFx0XHRvbk1vdXNlRG93bjogdGhpcy5ibG9ja0V2ZW50LFxuXHRcdFx0XHRvbkNsaWNrOiB0aGlzLmJsb2NrRXZlbnQgfSxcblx0XHRcdHRoaXMucHJvcHMuY2hpbGRyZW5cblx0XHQpIDogX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdFx0XHQnZGl2Jyxcblx0XHRcdHsgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG5cdFx0XHRcdHN0eWxlOiBvcHRpb24uc3R5bGUsXG5cdFx0XHRcdG9uTW91c2VEb3duOiB0aGlzLmhhbmRsZU1vdXNlRG93bixcblx0XHRcdFx0b25Nb3VzZUVudGVyOiB0aGlzLmhhbmRsZU1vdXNlRW50ZXIsXG5cdFx0XHRcdG9uTW91c2VNb3ZlOiB0aGlzLmhhbmRsZU1vdXNlTW92ZSxcblx0XHRcdFx0b25Ub3VjaFN0YXJ0OiB0aGlzLmhhbmRsZVRvdWNoU3RhcnQsXG5cdFx0XHRcdG9uVG91Y2hNb3ZlOiB0aGlzLmhhbmRsZVRvdWNoTW92ZSxcblx0XHRcdFx0b25Ub3VjaEVuZDogdGhpcy5oYW5kbGVUb3VjaEVuZCxcblx0XHRcdFx0dGl0bGU6IG9wdGlvbi50aXRsZSB9LFxuXHRcdFx0dGhpcy5wcm9wcy5jaGlsZHJlblxuXHRcdCk7XG5cdH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE9wdGlvbjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yZWFjdC1zZWxlY3QvbGliL09wdGlvbi5qc1xuICoqIG1vZHVsZSBpZCA9IDM5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX2NsYXNzbmFtZXMgPSByZXF1aXJlKCdjbGFzc25hbWVzJyk7XG5cbnZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblxudmFyIFZhbHVlID0gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUNsYXNzKHtcblxuXHRkaXNwbGF5TmFtZTogJ1ZhbHVlJyxcblxuXHRwcm9wVHlwZXM6IHtcblx0XHRjaGlsZHJlbjogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5ub2RlLFxuXHRcdGRpc2FibGVkOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLmJvb2wsIC8vIGRpc2FibGVkIHByb3AgcGFzc2VkIHRvIFJlYWN0U2VsZWN0XG5cdFx0b25DbGljazogX3JlYWN0MlsnZGVmYXVsdCddLlByb3BUeXBlcy5mdW5jLCAvLyBtZXRob2QgdG8gaGFuZGxlIGNsaWNrIG9uIHZhbHVlIGxhYmVsXG5cdFx0b25SZW1vdmU6IF9yZWFjdDJbJ2RlZmF1bHQnXS5Qcm9wVHlwZXMuZnVuYywgLy8gbWV0aG9kIHRvIGhhbmRsZSByZW1vdmFsIG9mIHRoZSB2YWx1ZVxuXHRcdHZhbHVlOiBfcmVhY3QyWydkZWZhdWx0J10uUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkIH0sXG5cblx0Ly8gdGhlIG9wdGlvbiBvYmplY3QgZm9yIHRoaXMgdmFsdWVcblx0aGFuZGxlTW91c2VEb3duOiBmdW5jdGlvbiBoYW5kbGVNb3VzZURvd24oZXZlbnQpIHtcblx0XHRpZiAoZXZlbnQudHlwZSA9PT0gJ21vdXNlZG93bicgJiYgZXZlbnQuYnV0dG9uICE9PSAwKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmICh0aGlzLnByb3BzLm9uQ2xpY2spIHtcblx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0dGhpcy5wcm9wcy5vbkNsaWNrKHRoaXMucHJvcHMudmFsdWUsIGV2ZW50KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aWYgKHRoaXMucHJvcHMudmFsdWUuaHJlZikge1xuXHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0fVxuXHR9LFxuXG5cdG9uUmVtb3ZlOiBmdW5jdGlvbiBvblJlbW92ZShldmVudCkge1xuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0dGhpcy5wcm9wcy5vblJlbW92ZSh0aGlzLnByb3BzLnZhbHVlKTtcblx0fSxcblxuXHRoYW5kbGVUb3VjaEVuZFJlbW92ZTogZnVuY3Rpb24gaGFuZGxlVG91Y2hFbmRSZW1vdmUoZXZlbnQpIHtcblx0XHQvLyBDaGVjayBpZiB0aGUgdmlldyBpcyBiZWluZyBkcmFnZ2VkLCBJbiB0aGlzIGNhc2Vcblx0XHQvLyB3ZSBkb24ndCB3YW50IHRvIGZpcmUgdGhlIGNsaWNrIGV2ZW50IChiZWNhdXNlIHRoZSB1c2VyIG9ubHkgd2FudHMgdG8gc2Nyb2xsKVxuXHRcdGlmICh0aGlzLmRyYWdnaW5nKSByZXR1cm47XG5cblx0XHQvLyBGaXJlIHRoZSBtb3VzZSBldmVudHNcblx0XHR0aGlzLm9uUmVtb3ZlKGV2ZW50KTtcblx0fSxcblxuXHRoYW5kbGVUb3VjaE1vdmU6IGZ1bmN0aW9uIGhhbmRsZVRvdWNoTW92ZShldmVudCkge1xuXHRcdC8vIFNldCBhIGZsYWcgdGhhdCB0aGUgdmlldyBpcyBiZWluZyBkcmFnZ2VkXG5cdFx0dGhpcy5kcmFnZ2luZyA9IHRydWU7XG5cdH0sXG5cblx0aGFuZGxlVG91Y2hTdGFydDogZnVuY3Rpb24gaGFuZGxlVG91Y2hTdGFydChldmVudCkge1xuXHRcdC8vIFNldCBhIGZsYWcgdGhhdCB0aGUgdmlldyBpcyBub3QgYmVpbmcgZHJhZ2dlZFxuXHRcdHRoaXMuZHJhZ2dpbmcgPSBmYWxzZTtcblx0fSxcblxuXHRyZW5kZXJSZW1vdmVJY29uOiBmdW5jdGlvbiByZW5kZXJSZW1vdmVJY29uKCkge1xuXHRcdGlmICh0aGlzLnByb3BzLmRpc2FibGVkIHx8ICF0aGlzLnByb3BzLm9uUmVtb3ZlKSByZXR1cm47XG5cdFx0cmV0dXJuIF9yZWFjdDJbJ2RlZmF1bHQnXS5jcmVhdGVFbGVtZW50KFxuXHRcdFx0J3NwYW4nLFxuXHRcdFx0eyBjbGFzc05hbWU6ICdTZWxlY3QtdmFsdWUtaWNvbicsXG5cdFx0XHRcdG9uTW91c2VEb3duOiB0aGlzLm9uUmVtb3ZlLFxuXHRcdFx0XHRvblRvdWNoRW5kOiB0aGlzLmhhbmRsZVRvdWNoRW5kUmVtb3ZlLFxuXHRcdFx0XHRvblRvdWNoU3RhcnQ6IHRoaXMuaGFuZGxlVG91Y2hTdGFydCxcblx0XHRcdFx0b25Ub3VjaE1vdmU6IHRoaXMuaGFuZGxlVG91Y2hNb3ZlIH0sXG5cdFx0XHQnw5cnXG5cdFx0KTtcblx0fSxcblxuXHRyZW5kZXJMYWJlbDogZnVuY3Rpb24gcmVuZGVyTGFiZWwoKSB7XG5cdFx0dmFyIGNsYXNzTmFtZSA9ICdTZWxlY3QtdmFsdWUtbGFiZWwnO1xuXHRcdHJldHVybiB0aGlzLnByb3BzLm9uQ2xpY2sgfHwgdGhpcy5wcm9wcy52YWx1ZS5ocmVmID8gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdFx0XHQnYScsXG5cdFx0XHR7IGNsYXNzTmFtZTogY2xhc3NOYW1lLCBocmVmOiB0aGlzLnByb3BzLnZhbHVlLmhyZWYsIHRhcmdldDogdGhpcy5wcm9wcy52YWx1ZS50YXJnZXQsIG9uTW91c2VEb3duOiB0aGlzLmhhbmRsZU1vdXNlRG93biwgb25Ub3VjaEVuZDogdGhpcy5oYW5kbGVNb3VzZURvd24gfSxcblx0XHRcdHRoaXMucHJvcHMuY2hpbGRyZW5cblx0XHQpIDogX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdFx0XHQnc3BhbicsXG5cdFx0XHR7IGNsYXNzTmFtZTogY2xhc3NOYW1lIH0sXG5cdFx0XHR0aGlzLnByb3BzLmNoaWxkcmVuXG5cdFx0KTtcblx0fSxcblxuXHRyZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0XHRyZXR1cm4gX3JlYWN0MlsnZGVmYXVsdCddLmNyZWF0ZUVsZW1lbnQoXG5cdFx0XHQnZGl2Jyxcblx0XHRcdHsgY2xhc3NOYW1lOiAoMCwgX2NsYXNzbmFtZXMyWydkZWZhdWx0J10pKCdTZWxlY3QtdmFsdWUnLCB0aGlzLnByb3BzLnZhbHVlLmNsYXNzTmFtZSksXG5cdFx0XHRcdHN0eWxlOiB0aGlzLnByb3BzLnZhbHVlLnN0eWxlLFxuXHRcdFx0XHR0aXRsZTogdGhpcy5wcm9wcy52YWx1ZS50aXRsZVxuXHRcdFx0fSxcblx0XHRcdHRoaXMucmVuZGVyUmVtb3ZlSWNvbigpLFxuXHRcdFx0dGhpcy5yZW5kZXJMYWJlbCgpXG5cdFx0KTtcblx0fVxuXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBWYWx1ZTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yZWFjdC1zZWxlY3QvbGliL1ZhbHVlLmpzXG4gKiogbW9kdWxlIGlkID0gNDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIHNpemVyU3R5bGUgPSB7IHBvc2l0aW9uOiAnYWJzb2x1dGUnLCB2aXNpYmlsaXR5OiAnaGlkZGVuJywgaGVpZ2h0OiAwLCB3aWR0aDogMCwgb3ZlcmZsb3c6ICdzY3JvbGwnLCB3aGl0ZVNwYWNlOiAnbm93cmFwJyB9O1xuXG52YXIgbmV4dEZyYW1lID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyAoZnVuY3Rpb24gKCkge1xuXHRyZXR1cm4gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG5cdFx0d2luZG93LnNldFRpbWVvdXQoY2FsbGJhY2ssIDEwMDAgLyA2MCk7XG5cdH07XG59KSgpLmJpbmQod2luZG93KSA6IHVuZGVmaW5lZDsgLy8gSWYgd2luZG93IGlzIHVuZGVmaW5lZCwgdGhlbiB3ZSBjYW4ndCBkZWZpbmUgYSBuZXh0RnJhbWUgZnVuY3Rpb25cblxudmFyIEF1dG9zaXplSW5wdXQgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cdGRpc3BsYXlOYW1lOiAnQXV0b3NpemVJbnB1dCcsXG5cblx0cHJvcFR5cGVzOiB7XG5cdFx0dmFsdWU6IFJlYWN0LlByb3BUeXBlcy5hbnksIC8vIGZpZWxkIHZhbHVlXG5cdFx0ZGVmYXVsdFZhbHVlOiBSZWFjdC5Qcm9wVHlwZXMuYW55LCAvLyBkZWZhdWx0IGZpZWxkIHZhbHVlXG5cdFx0b25DaGFuZ2U6IFJlYWN0LlByb3BUeXBlcy5mdW5jLCAvLyBvbkNoYW5nZSBoYW5kbGVyOiBmdW5jdGlvbihuZXdWYWx1ZSkge31cblx0XHRzdHlsZTogUmVhY3QuUHJvcFR5cGVzLm9iamVjdCwgLy8gY3NzIHN0eWxlcyBmb3IgdGhlIG91dGVyIGVsZW1lbnRcblx0XHRjbGFzc05hbWU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsIC8vIGNsYXNzTmFtZSBmb3IgdGhlIG91dGVyIGVsZW1lbnRcblx0XHRtaW5XaWR0aDogUmVhY3QuUHJvcFR5cGVzLm9uZU9mVHlwZShbLy8gbWluaW11bSB3aWR0aCBmb3IgaW5wdXQgZWxlbWVudFxuXHRcdFJlYWN0LlByb3BUeXBlcy5udW1iZXIsIFJlYWN0LlByb3BUeXBlcy5zdHJpbmddKSxcblx0XHRpbnB1dFN0eWxlOiBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0LCAvLyBjc3Mgc3R5bGVzIGZvciB0aGUgaW5wdXQgZWxlbWVudFxuXHRcdGlucHV0Q2xhc3NOYW1lOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nIC8vIGNsYXNzTmFtZSBmb3IgdGhlIGlucHV0IGVsZW1lbnRcblx0fSxcblx0Z2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdG1pbldpZHRoOiAxXG5cdFx0fTtcblx0fSxcblx0Z2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGlucHV0V2lkdGg6IHRoaXMucHJvcHMubWluV2lkdGhcblx0XHR9O1xuXHR9LFxuXHRjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG5cdFx0dGhpcy5jb3B5SW5wdXRTdHlsZXMoKTtcblx0XHR0aGlzLnVwZGF0ZUlucHV0V2lkdGgoKTtcblx0fSxcblx0Y29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG5cdFx0dGhpcy5xdWV1ZVVwZGF0ZUlucHV0V2lkdGgoKTtcblx0fSxcblx0Y29weUlucHV0U3R5bGVzOiBmdW5jdGlvbiBjb3B5SW5wdXRTdHlsZXMoKSB7XG5cdFx0aWYgKCF0aGlzLmlzTW91bnRlZCgpIHx8ICF3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR2YXIgaW5wdXRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMucmVmcy5pbnB1dCk7XG5cdFx0dmFyIHdpZHRoTm9kZSA9IHRoaXMucmVmcy5zaXplcjtcblx0XHR3aWR0aE5vZGUuc3R5bGUuZm9udFNpemUgPSBpbnB1dFN0eWxlLmZvbnRTaXplO1xuXHRcdHdpZHRoTm9kZS5zdHlsZS5mb250RmFtaWx5ID0gaW5wdXRTdHlsZS5mb250RmFtaWx5O1xuXHRcdHdpZHRoTm9kZS5zdHlsZS5mb250V2VpZ2h0ID0gaW5wdXRTdHlsZS5mb250V2VpZ2h0O1xuXHRcdHdpZHRoTm9kZS5zdHlsZS5mb250U3R5bGUgPSBpbnB1dFN0eWxlLmZvbnRTdHlsZTtcblx0XHR3aWR0aE5vZGUuc3R5bGUubGV0dGVyU3BhY2luZyA9IGlucHV0U3R5bGUubGV0dGVyU3BhY2luZztcblx0XHRpZiAodGhpcy5wcm9wcy5wbGFjZWhvbGRlcikge1xuXHRcdFx0dmFyIHBsYWNlaG9sZGVyTm9kZSA9IHRoaXMucmVmcy5wbGFjZWhvbGRlclNpemVyO1xuXHRcdFx0cGxhY2Vob2xkZXJOb2RlLnN0eWxlLmZvbnRTaXplID0gaW5wdXRTdHlsZS5mb250U2l6ZTtcblx0XHRcdHBsYWNlaG9sZGVyTm9kZS5zdHlsZS5mb250RmFtaWx5ID0gaW5wdXRTdHlsZS5mb250RmFtaWx5O1xuXHRcdFx0cGxhY2Vob2xkZXJOb2RlLnN0eWxlLmZvbnRXZWlnaHQgPSBpbnB1dFN0eWxlLmZvbnRXZWlnaHQ7XG5cdFx0XHRwbGFjZWhvbGRlck5vZGUuc3R5bGUuZm9udFN0eWxlID0gaW5wdXRTdHlsZS5mb250U3R5bGU7XG5cdFx0XHRwbGFjZWhvbGRlck5vZGUuc3R5bGUubGV0dGVyU3BhY2luZyA9IGlucHV0U3R5bGUubGV0dGVyU3BhY2luZztcblx0XHR9XG5cdH0sXG5cdHF1ZXVlVXBkYXRlSW5wdXRXaWR0aDogZnVuY3Rpb24gcXVldWVVcGRhdGVJbnB1dFdpZHRoKCkge1xuXHRcdG5leHRGcmFtZSh0aGlzLnVwZGF0ZUlucHV0V2lkdGgpO1xuXHR9LFxuXHR1cGRhdGVJbnB1dFdpZHRoOiBmdW5jdGlvbiB1cGRhdGVJbnB1dFdpZHRoKCkge1xuXHRcdGlmICghdGhpcy5pc01vdW50ZWQoKSB8fCB0eXBlb2YgdGhpcy5yZWZzLnNpemVyLnNjcm9sbFdpZHRoID09PSAndW5kZWZpbmVkJykge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR2YXIgbmV3SW5wdXRXaWR0aCA9IHVuZGVmaW5lZDtcblx0XHRpZiAodGhpcy5wcm9wcy5wbGFjZWhvbGRlcikge1xuXHRcdFx0bmV3SW5wdXRXaWR0aCA9IE1hdGgubWF4KHRoaXMucmVmcy5zaXplci5zY3JvbGxXaWR0aCwgdGhpcy5yZWZzLnBsYWNlaG9sZGVyU2l6ZXIuc2Nyb2xsV2lkdGgpICsgMjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bmV3SW5wdXRXaWR0aCA9IHRoaXMucmVmcy5zaXplci5zY3JvbGxXaWR0aCArIDI7XG5cdFx0fVxuXHRcdGlmIChuZXdJbnB1dFdpZHRoIDwgdGhpcy5wcm9wcy5taW5XaWR0aCkge1xuXHRcdFx0bmV3SW5wdXRXaWR0aCA9IHRoaXMucHJvcHMubWluV2lkdGg7XG5cdFx0fVxuXHRcdGlmIChuZXdJbnB1dFdpZHRoICE9PSB0aGlzLnN0YXRlLmlucHV0V2lkdGgpIHtcblx0XHRcdHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0XHRpbnB1dFdpZHRoOiBuZXdJbnB1dFdpZHRoXG5cdFx0XHR9KTtcblx0XHR9XG5cdH0sXG5cdGdldElucHV0OiBmdW5jdGlvbiBnZXRJbnB1dCgpIHtcblx0XHRyZXR1cm4gdGhpcy5yZWZzLmlucHV0O1xuXHR9LFxuXHRmb2N1czogZnVuY3Rpb24gZm9jdXMoKSB7XG5cdFx0dGhpcy5yZWZzLmlucHV0LmZvY3VzKCk7XG5cdH0sXG5cdGJsdXI6IGZ1bmN0aW9uIGJsdXIoKSB7XG5cdFx0dGhpcy5yZWZzLmlucHV0LmJsdXIoKTtcblx0fSxcblx0c2VsZWN0OiBmdW5jdGlvbiBzZWxlY3QoKSB7XG5cdFx0dGhpcy5yZWZzLmlucHV0LnNlbGVjdCgpO1xuXHR9LFxuXHRyZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0XHR2YXIgZXNjYXBlZFZhbHVlID0gKHRoaXMucHJvcHMuZGVmYXVsdFZhbHVlIHx8IHRoaXMucHJvcHMudmFsdWUgfHwgJycpLnJlcGxhY2UoL1xcJi9nLCAnJmFtcDsnKS5yZXBsYWNlKC8gL2csICcmbmJzcDsnKS5yZXBsYWNlKC9cXDwvZywgJyZsdDsnKS5yZXBsYWNlKC9cXD4vZywgJyZndDsnKTtcblx0XHR2YXIgd3JhcHBlclN0eWxlID0gdGhpcy5wcm9wcy5zdHlsZSB8fCB7fTtcblx0XHRpZiAoIXdyYXBwZXJTdHlsZS5kaXNwbGF5KSB3cmFwcGVyU3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuXHRcdHZhciBpbnB1dFN0eWxlID0gX2V4dGVuZHMoe30sIHRoaXMucHJvcHMuaW5wdXRTdHlsZSk7XG5cdFx0aW5wdXRTdHlsZS53aWR0aCA9IHRoaXMuc3RhdGUuaW5wdXRXaWR0aDtcblx0XHRpbnB1dFN0eWxlLmJveFNpemluZyA9ICdjb250ZW50LWJveCc7XG5cdFx0dmFyIHBsYWNlaG9sZGVyID0gdGhpcy5wcm9wcy5wbGFjZWhvbGRlciA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG5cdFx0XHQnZGl2Jyxcblx0XHRcdHsgcmVmOiAncGxhY2Vob2xkZXJTaXplcicsIHN0eWxlOiBzaXplclN0eWxlIH0sXG5cdFx0XHR0aGlzLnByb3BzLnBsYWNlaG9sZGVyXG5cdFx0KSA6IG51bGw7XG5cdFx0cmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG5cdFx0XHQnZGl2Jyxcblx0XHRcdHsgY2xhc3NOYW1lOiB0aGlzLnByb3BzLmNsYXNzTmFtZSwgc3R5bGU6IHdyYXBwZXJTdHlsZSB9LFxuXHRcdFx0UmVhY3QuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCBfZXh0ZW5kcyh7fSwgdGhpcy5wcm9wcywgeyByZWY6ICdpbnB1dCcsIGNsYXNzTmFtZTogdGhpcy5wcm9wcy5pbnB1dENsYXNzTmFtZSwgc3R5bGU6IGlucHV0U3R5bGUgfSkpLFxuXHRcdFx0UmVhY3QuY3JlYXRlRWxlbWVudCgnZGl2JywgeyByZWY6ICdzaXplcicsIHN0eWxlOiBzaXplclN0eWxlLCBkYW5nZXJvdXNseVNldElubmVySFRNTDogeyBfX2h0bWw6IGVzY2FwZWRWYWx1ZSB9IH0pLFxuXHRcdFx0cGxhY2Vob2xkZXJcblx0XHQpO1xuXHR9XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBBdXRvc2l6ZUlucHV0O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlYWN0LXNlbGVjdC9+L3JlYWN0LWlucHV0LWF1dG9zaXplL2xpYi9BdXRvc2l6ZUlucHV0LmpzXG4gKiogbW9kdWxlIGlkID0gNDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZShcInJlYWN0XCIpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdEFkZG9uc1VwZGF0ZSA9IHJlcXVpcmUoXCJyZWFjdC1hZGRvbnMtdXBkYXRlXCIpO1xuXG52YXIgX3JlYWN0QWRkb25zVXBkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0QWRkb25zVXBkYXRlKTtcblxudmFyIF9Ub2FzdE1lc3NhZ2UgPSByZXF1aXJlKFwiLi9Ub2FzdE1lc3NhZ2VcIik7XG5cbnZhciBfVG9hc3RNZXNzYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1RvYXN0TWVzc2FnZSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFRvYXN0Q29udGFpbmVyID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFRvYXN0Q29udGFpbmVyLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBUb2FzdENvbnRhaW5lcigpIHtcbiAgICB2YXIgX09iamVjdCRnZXRQcm90b3R5cGVPO1xuXG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUb2FzdENvbnRhaW5lcik7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChfT2JqZWN0JGdldFByb3RvdHlwZU8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVG9hc3RDb250YWluZXIpKS5jYWxsLmFwcGx5KF9PYmplY3QkZ2V0UHJvdG90eXBlTywgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLnN0YXRlID0ge1xuICAgICAgdG9hc3RzOiBbXSxcbiAgICAgIHRvYXN0SWQ6IDAsXG4gICAgICBwcmV2aW91c01lc3NhZ2U6IG51bGxcbiAgICB9LCBfdGVtcCksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhUb2FzdENvbnRhaW5lciwgW3tcbiAgICBrZXk6IFwiZXJyb3JcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZXJyb3IobWVzc2FnZSwgdGl0bGUsIG9wdGlvbnNPdmVycmlkZSkge1xuICAgICAgdGhpcy5fbm90aWZ5KHRoaXMucHJvcHMudG9hc3RUeXBlLmVycm9yLCBtZXNzYWdlLCB0aXRsZSwgb3B0aW9uc092ZXJyaWRlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW5mb1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbmZvKG1lc3NhZ2UsIHRpdGxlLCBvcHRpb25zT3ZlcnJpZGUpIHtcbiAgICAgIHRoaXMuX25vdGlmeSh0aGlzLnByb3BzLnRvYXN0VHlwZS5pbmZvLCBtZXNzYWdlLCB0aXRsZSwgb3B0aW9uc092ZXJyaWRlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic3VjY2Vzc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzdWNjZXNzKG1lc3NhZ2UsIHRpdGxlLCBvcHRpb25zT3ZlcnJpZGUpIHtcbiAgICAgIHRoaXMuX25vdGlmeSh0aGlzLnByb3BzLnRvYXN0VHlwZS5zdWNjZXNzLCBtZXNzYWdlLCB0aXRsZSwgb3B0aW9uc092ZXJyaWRlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwid2FybmluZ1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB3YXJuaW5nKG1lc3NhZ2UsIHRpdGxlLCBvcHRpb25zT3ZlcnJpZGUpIHtcbiAgICAgIHRoaXMuX25vdGlmeSh0aGlzLnByb3BzLnRvYXN0VHlwZS53YXJuaW5nLCBtZXNzYWdlLCB0aXRsZSwgb3B0aW9uc092ZXJyaWRlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY2xlYXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgT2JqZWN0LmtleXModGhpcy5yZWZzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgX3RoaXMyLnJlZnNba2V5XS5oaWRlVG9hc3QoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIl9ub3RpZnlcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gX25vdGlmeSh0eXBlLCBtZXNzYWdlLCB0aXRsZSkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHZhciBvcHRpb25zT3ZlcnJpZGUgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1szXTtcblxuICAgICAgaWYgKHRoaXMucHJvcHMucHJldmVudER1cGxpY2F0ZXMpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUucHJldmlvdXNNZXNzYWdlID09PSBtZXNzYWdlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIga2V5ID0gdGhpcy5zdGF0ZS50b2FzdElkKys7XG4gICAgICB2YXIgdG9hc3RJZCA9IGtleTtcbiAgICAgIHZhciBuZXdUb2FzdCA9ICgwLCBfcmVhY3RBZGRvbnNVcGRhdGUyLmRlZmF1bHQpKG9wdGlvbnNPdmVycmlkZSwge1xuICAgICAgICAkbWVyZ2U6IHtcbiAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgIHRvYXN0SWQ6IHRvYXN0SWQsXG4gICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgcmVmOiBcInRvYXN0c19fXCIgKyBrZXksXG4gICAgICAgICAgaGFuZGxlT25DbGljazogZnVuY3Rpb24gaGFuZGxlT25DbGljayhlKSB7XG4gICAgICAgICAgICBpZiAoXCJmdW5jdGlvblwiID09PSB0eXBlb2Ygb3B0aW9uc092ZXJyaWRlLmhhbmRsZU9uQ2xpY2spIHtcbiAgICAgICAgICAgICAgb3B0aW9uc092ZXJyaWRlLmhhbmRsZU9uQ2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfdGhpczMuX2hhbmRsZV90b2FzdF9vbl9jbGljayhlKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGhhbmRsZVJlbW92ZTogdGhpcy5faGFuZGxlX3RvYXN0X3JlbW92ZS5iaW5kKHRoaXMpXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdmFyIHRvYXN0T3BlcmF0aW9uID0gX2RlZmluZVByb3BlcnR5KHt9LCBcIlwiICsgKHRoaXMucHJvcHMubmV3ZXN0T25Ub3AgPyBcIiR1bnNoaWZ0XCIgOiBcIiRwdXNoXCIpLCBbbmV3VG9hc3RdKTtcblxuICAgICAgdmFyIG5leHRTdGF0ZSA9ICgwLCBfcmVhY3RBZGRvbnNVcGRhdGUyLmRlZmF1bHQpKHRoaXMuc3RhdGUsIHtcbiAgICAgICAgdG9hc3RzOiB0b2FzdE9wZXJhdGlvbixcbiAgICAgICAgcHJldmlvdXNNZXNzYWdlOiB7ICRzZXQ6IG1lc3NhZ2UgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLnNldFN0YXRlKG5leHRTdGF0ZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIl9oYW5kbGVfdG9hc3Rfb25fY2xpY2tcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZV90b2FzdF9vbl9jbGljayhldmVudCkge1xuICAgICAgdGhpcy5wcm9wcy5vbkNsaWNrKGV2ZW50KTtcbiAgICAgIGlmIChldmVudC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiX2hhbmRsZV90b2FzdF9yZW1vdmVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZV90b2FzdF9yZW1vdmUodG9hc3RJZCkge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIHZhciBvcGVyYXRpb25OYW1lID0gXCJcIiArICh0aGlzLnByb3BzLm5ld2VzdE9uVG9wID8gXCJyZWR1Y2VSaWdodFwiIDogXCJyZWR1Y2VcIik7XG4gICAgICB0aGlzLnN0YXRlLnRvYXN0c1tvcGVyYXRpb25OYW1lXShmdW5jdGlvbiAoZm91bmQsIHRvYXN0LCBpbmRleCkge1xuICAgICAgICBpZiAoZm91bmQgfHwgdG9hc3QudG9hc3RJZCAhPT0gdG9hc3RJZCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpczQuc2V0U3RhdGUoKDAsIF9yZWFjdEFkZG9uc1VwZGF0ZTIuZGVmYXVsdCkoX3RoaXM0LnN0YXRlLCB7XG4gICAgICAgICAgdG9hc3RzOiB7ICRzcGxpY2U6IFtbaW5kZXgsIDFdXSB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9LCBmYWxzZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICBcImRpdlwiLFxuICAgICAgICBfZXh0ZW5kcyh7fSwgdGhpcy5wcm9wcywgeyBcImFyaWEtbGl2ZVwiOiBcInBvbGl0ZVwiLCByb2xlOiBcImFsZXJ0XCIgfSksXG4gICAgICAgIHRoaXMuc3RhdGUudG9hc3RzLm1hcChmdW5jdGlvbiAodG9hc3QpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXM1LnByb3BzLnRvYXN0TWVzc2FnZUZhY3RvcnkodG9hc3QpO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gVG9hc3RDb250YWluZXI7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5Ub2FzdENvbnRhaW5lci5wcm9wVHlwZXMgPSB7XG4gIHRvYXN0VHlwZTogX3JlYWN0LlByb3BUeXBlcy5zaGFwZSh7XG4gICAgZXJyb3I6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgIGluZm86IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgIHN1Y2Nlc3M6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgIHdhcm5pbmc6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nXG4gIH0pLmlzUmVxdWlyZWQsXG4gIGlkOiBfcmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICB0b2FzdE1lc3NhZ2VGYWN0b3J5OiBfcmVhY3QuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgcHJldmVudER1cGxpY2F0ZXM6IF9yZWFjdC5Qcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICBuZXdlc3RPblRvcDogX3JlYWN0LlByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gIG9uQ2xpY2s6IF9yZWFjdC5Qcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkXG59O1xuVG9hc3RDb250YWluZXIuZGVmYXVsdFByb3BzID0ge1xuICB0b2FzdFR5cGU6IHtcbiAgICBlcnJvcjogXCJlcnJvclwiLFxuICAgIGluZm86IFwiaW5mb1wiLFxuICAgIHN1Y2Nlc3M6IFwic3VjY2Vzc1wiLFxuICAgIHdhcm5pbmc6IFwid2FybmluZ1wiXG4gIH0sXG4gIGlkOiBcInRvYXN0LWNvbnRhaW5lclwiLFxuICB0b2FzdE1lc3NhZ2VGYWN0b3J5OiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRmFjdG9yeShfVG9hc3RNZXNzYWdlMi5kZWZhdWx0KSxcbiAgcHJldmVudER1cGxpY2F0ZXM6IGZhbHNlLFxuICBuZXdlc3RPblRvcDogdHJ1ZSxcbiAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHt9XG59O1xuZXhwb3J0cy5kZWZhdWx0ID0gVG9hc3RDb250YWluZXI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3QtdG9hc3RyL2xpYi9Ub2FzdENvbnRhaW5lci5qc1xuICoqIG1vZHVsZSBpZCA9IDQyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9SZWFjdFRyYW5zaXRpb25FdmVudHMgPSByZXF1aXJlKFwicmVhY3QvbGliL1JlYWN0VHJhbnNpdGlvbkV2ZW50c1wiKTtcblxudmFyIF9SZWFjdFRyYW5zaXRpb25FdmVudHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUmVhY3RUcmFuc2l0aW9uRXZlbnRzKTtcblxudmFyIF9yZWFjdERvbSA9IHJlcXVpcmUoXCJyZWFjdC1kb21cIik7XG5cbnZhciBfcmVhY3REb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb20pO1xuXG52YXIgX2VsZW1lbnRDbGFzcyA9IHJlcXVpcmUoXCJlbGVtZW50LWNsYXNzXCIpO1xuXG52YXIgX2VsZW1lbnRDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lbGVtZW50Q2xhc3MpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgVElDSyA9IDE3O1xudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbmV4cG9ydHMuZGVmYXVsdCA9IHtcbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRyYW5zaXRpb246IG51bGwsIC8vIHNvbWUgZXhhbXBsZXMgZGVmaW5lZCBpbiBpbmRleC5zY3NzIChzY2FsZSwgZmFkZUluT3V0LCByb3RhdGUpXG4gICAgICBzaG93QW5pbWF0aW9uOiBcImFuaW1hdGVkIGJvdW5jZUluXCIsIC8vIG9yIG90aGVyIGFuaW1hdGlvbnMgZnJvbSBhbmltYXRlLmNzc1xuICAgICAgaGlkZUFuaW1hdGlvbjogXCJhbmltYXRlZCBib3VuY2VPdXRcIixcbiAgICAgIHRpbWVPdXQ6IDUwMDAsXG4gICAgICBleHRlbmRlZFRpbWVPdXQ6IDEwMDBcbiAgICB9O1xuICB9LFxuICBjb21wb25lbnRXaWxsTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICB0aGlzLmNsYXNzTmFtZVF1ZXVlID0gW107XG4gICAgdGhpcy5pc0hpZGluZyA9IGZhbHNlO1xuICAgIHRoaXMuaW50ZXJ2YWxJZCA9IG51bGw7XG4gIH0sXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdGhpcy5faXNfbW91bnRlZCA9IHRydWU7XG4gICAgdGhpcy5fc2hvdygpO1xuICAgIHZhciBub2RlID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpO1xuXG4gICAgdmFyIG9uSGlkZUNvbXBsZXRlID0gZnVuY3Rpb24gb25IaWRlQ29tcGxldGUoKSB7XG4gICAgICBpZiAoX3RoaXMuaXNIaWRpbmcpIHtcbiAgICAgICAgX3RoaXMuX3NldF9pc19oaWRpbmcoZmFsc2UpO1xuICAgICAgICBfUmVhY3RUcmFuc2l0aW9uRXZlbnRzMi5kZWZhdWx0LnJlbW92ZUVuZEV2ZW50TGlzdGVuZXIobm9kZSwgb25IaWRlQ29tcGxldGUpO1xuICAgICAgICBfdGhpcy5faGFuZGxlX3JlbW92ZSgpO1xuICAgICAgfVxuICAgIH07XG4gICAgX1JlYWN0VHJhbnNpdGlvbkV2ZW50czIuZGVmYXVsdC5hZGRFbmRFdmVudExpc3RlbmVyKG5vZGUsIG9uSGlkZUNvbXBsZXRlKTtcblxuICAgIGlmICh0aGlzLnByb3BzLnRpbWVPdXQgPiAwKSB7XG4gICAgICB0aGlzLl9zZXRfaW50ZXJ2YWxfaWQoc2V0VGltZW91dCh0aGlzLmhpZGVUb2FzdCwgdGhpcy5wcm9wcy50aW1lT3V0KSk7XG4gICAgfVxuICB9LFxuICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy5faXNfbW91bnRlZCA9IGZhbHNlO1xuICAgIGlmICh0aGlzLmludGVydmFsSWQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmludGVydmFsSWQpO1xuICAgIH1cbiAgfSxcbiAgX3NldF90cmFuc2l0aW9uOiBmdW5jdGlvbiBfc2V0X3RyYW5zaXRpb24oaGlkZSkge1xuICAgIHZhciBhbmltYXRpb25UeXBlID0gaGlkZSA/IFwibGVhdmVcIiA6IFwiZW50ZXJcIjtcbiAgICB2YXIgbm9kZSA9IF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzKTtcbiAgICB2YXIgY2xhc3NOYW1lID0gdGhpcy5wcm9wcy50cmFuc2l0aW9uICsgXCItXCIgKyBhbmltYXRpb25UeXBlO1xuICAgIHZhciBhY3RpdmVDbGFzc05hbWUgPSBjbGFzc05hbWUgKyBcIi1hY3RpdmVcIjtcblxuICAgIHZhciBlbmRMaXN0ZW5lciA9IGZ1bmN0aW9uIGVuZExpc3RlbmVyKGUpIHtcbiAgICAgIGlmIChlICYmIGUudGFyZ2V0ICE9PSBub2RlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGNsYXNzTGlzdCA9ICgwLCBfZWxlbWVudENsYXNzMi5kZWZhdWx0KShub2RlKTtcbiAgICAgIGNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgICAgIGNsYXNzTGlzdC5yZW1vdmUoYWN0aXZlQ2xhc3NOYW1lKTtcblxuICAgICAgX1JlYWN0VHJhbnNpdGlvbkV2ZW50czIuZGVmYXVsdC5yZW1vdmVFbmRFdmVudExpc3RlbmVyKG5vZGUsIGVuZExpc3RlbmVyKTtcbiAgICB9O1xuXG4gICAgX1JlYWN0VHJhbnNpdGlvbkV2ZW50czIuZGVmYXVsdC5hZGRFbmRFdmVudExpc3RlbmVyKG5vZGUsIGVuZExpc3RlbmVyKTtcblxuICAgICgwLCBfZWxlbWVudENsYXNzMi5kZWZhdWx0KShub2RlKS5hZGQoY2xhc3NOYW1lKTtcblxuICAgIC8vIE5lZWQgdG8gZG8gdGhpcyB0byBhY3R1YWxseSB0cmlnZ2VyIGEgdHJhbnNpdGlvbi5cbiAgICB0aGlzLl9xdWV1ZV9jbGFzcyhhY3RpdmVDbGFzc05hbWUpO1xuICB9LFxuICBfY2xlYXJfdHJhbnNpdGlvbjogZnVuY3Rpb24gX2NsZWFyX3RyYW5zaXRpb24oaGlkZSkge1xuICAgIHZhciBub2RlID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpO1xuICAgIHZhciBhbmltYXRpb25UeXBlID0gaGlkZSA/IFwibGVhdmVcIiA6IFwiZW50ZXJcIjtcbiAgICB2YXIgY2xhc3NOYW1lID0gdGhpcy5wcm9wcy50cmFuc2l0aW9uICsgXCItXCIgKyBhbmltYXRpb25UeXBlO1xuICAgIHZhciBhY3RpdmVDbGFzc05hbWUgPSBjbGFzc05hbWUgKyBcIi1hY3RpdmVcIjtcblxuICAgIHZhciBjbGFzc0xpc3QgPSAoMCwgX2VsZW1lbnRDbGFzczIuZGVmYXVsdCkobm9kZSk7XG4gICAgY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuICAgIGNsYXNzTGlzdC5yZW1vdmUoYWN0aXZlQ2xhc3NOYW1lKTtcbiAgfSxcbiAgX3NldF9hbmltYXRpb246IGZ1bmN0aW9uIF9zZXRfYW5pbWF0aW9uKGhpZGUpIHtcbiAgICB2YXIgbm9kZSA9IF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzKTtcbiAgICB2YXIgYW5pbWF0aW9ucyA9IHRoaXMuX2dldF9hbmltYXRpb25fY2xhc3NlcyhoaWRlKTtcbiAgICB2YXIgZW5kTGlzdGVuZXIgPSBmdW5jdGlvbiBlbmRMaXN0ZW5lcihlKSB7XG4gICAgICBpZiAoZSAmJiBlLnRhcmdldCAhPT0gbm9kZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGFuaW1hdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoYW5pbSkge1xuICAgICAgICByZXR1cm4gKDAsIF9lbGVtZW50Q2xhc3MyLmRlZmF1bHQpKG5vZGUpLnJlbW92ZShhbmltKTtcbiAgICAgIH0pO1xuXG4gICAgICBfUmVhY3RUcmFuc2l0aW9uRXZlbnRzMi5kZWZhdWx0LnJlbW92ZUVuZEV2ZW50TGlzdGVuZXIobm9kZSwgZW5kTGlzdGVuZXIpO1xuICAgIH07XG5cbiAgICBfUmVhY3RUcmFuc2l0aW9uRXZlbnRzMi5kZWZhdWx0LmFkZEVuZEV2ZW50TGlzdGVuZXIobm9kZSwgZW5kTGlzdGVuZXIpO1xuXG4gICAgYW5pbWF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChhbmltKSB7XG4gICAgICByZXR1cm4gKDAsIF9lbGVtZW50Q2xhc3MyLmRlZmF1bHQpKG5vZGUpLmFkZChhbmltKTtcbiAgICB9KTtcbiAgfSxcbiAgX2dldF9hbmltYXRpb25fY2xhc3NlczogZnVuY3Rpb24gX2dldF9hbmltYXRpb25fY2xhc3NlcyhoaWRlKSB7XG4gICAgdmFyIGFuaW1hdGlvbnMgPSBoaWRlID8gdGhpcy5wcm9wcy5oaWRlQW5pbWF0aW9uIDogdGhpcy5wcm9wcy5zaG93QW5pbWF0aW9uO1xuICAgIGlmIChcIltvYmplY3QgQXJyYXldXCIgPT09IHRvU3RyaW5nLmNhbGwoYW5pbWF0aW9ucykpIHtcbiAgICAgIHJldHVybiBhbmltYXRpb25zO1xuICAgIH0gZWxzZSBpZiAoXCJzdHJpbmdcIiA9PT0gdHlwZW9mIGFuaW1hdGlvbnMpIHtcbiAgICAgIHJldHVybiBhbmltYXRpb25zLnNwbGl0KFwiIFwiKTtcbiAgICB9XG4gIH0sXG4gIF9jbGVhcl9hbmltYXRpb246IGZ1bmN0aW9uIF9jbGVhcl9hbmltYXRpb24oaGlkZSkge1xuICAgIHZhciBub2RlID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpO1xuICAgIHZhciBhbmltYXRpb25zID0gdGhpcy5fZ2V0X2FuaW1hdGlvbl9jbGFzc2VzKGhpZGUpO1xuICAgIGFuaW1hdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoYW5pbWF0aW9uKSB7XG4gICAgICByZXR1cm4gKDAsIF9lbGVtZW50Q2xhc3MyLmRlZmF1bHQpKG5vZGUpLnJlbW92ZShhbmltYXRpb24pO1xuICAgIH0pO1xuICB9LFxuICBfcXVldWVfY2xhc3M6IGZ1bmN0aW9uIF9xdWV1ZV9jbGFzcyhjbGFzc05hbWUpIHtcbiAgICB0aGlzLmNsYXNzTmFtZVF1ZXVlLnB1c2goY2xhc3NOYW1lKTtcblxuICAgIGlmICghdGhpcy50aW1lb3V0KSB7XG4gICAgICB0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMuX2ZsdXNoX2NsYXNzX25hbWVfcXVldWUsIFRJQ0spO1xuICAgIH1cbiAgfSxcbiAgX2ZsdXNoX2NsYXNzX25hbWVfcXVldWU6IGZ1bmN0aW9uIF9mbHVzaF9jbGFzc19uYW1lX3F1ZXVlKCkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgaWYgKHRoaXMuX2lzX21vdW50ZWQpIHtcbiAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBub2RlID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKF90aGlzMik7XG4gICAgICAgIF90aGlzMi5jbGFzc05hbWVRdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcbiAgICAgICAgICByZXR1cm4gKDAsIF9lbGVtZW50Q2xhc3MyLmRlZmF1bHQpKG5vZGUpLmFkZChjbGFzc05hbWUpO1xuICAgICAgICB9KTtcbiAgICAgIH0pKCk7XG4gICAgfVxuICAgIHRoaXMuY2xhc3NOYW1lUXVldWUubGVuZ3RoID0gMDtcbiAgICB0aGlzLnRpbWVvdXQgPSBudWxsO1xuICB9LFxuICBfc2hvdzogZnVuY3Rpb24gX3Nob3coKSB7XG4gICAgaWYgKHRoaXMucHJvcHMudHJhbnNpdGlvbikge1xuICAgICAgdGhpcy5fc2V0X3RyYW5zaXRpb24oKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuc2hvd0FuaW1hdGlvbikge1xuICAgICAgdGhpcy5fc2V0X2FuaW1hdGlvbigpO1xuICAgIH1cbiAgfSxcbiAgaGFuZGxlTW91c2VFbnRlcjogZnVuY3Rpb24gaGFuZGxlTW91c2VFbnRlcigpIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5pbnRlcnZhbElkKTtcbiAgICB0aGlzLl9zZXRfaW50ZXJ2YWxfaWQobnVsbCk7XG4gICAgaWYgKHRoaXMuaXNIaWRpbmcpIHtcbiAgICAgIHRoaXMuX3NldF9pc19oaWRpbmcoZmFsc2UpO1xuXG4gICAgICBpZiAodGhpcy5wcm9wcy5oaWRlQW5pbWF0aW9uKSB7XG4gICAgICAgIHRoaXMuX2NsZWFyX2FuaW1hdGlvbih0cnVlKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy50cmFuc2l0aW9uKSB7XG4gICAgICAgIHRoaXMuX2NsZWFyX3RyYW5zaXRpb24odHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBoYW5kbGVNb3VzZUxlYXZlOiBmdW5jdGlvbiBoYW5kbGVNb3VzZUxlYXZlKCkge1xuICAgIGlmICghdGhpcy5pc0hpZGluZyAmJiAodGhpcy5wcm9wcy50aW1lT3V0ID4gMCB8fCB0aGlzLnByb3BzLmV4dGVuZGVkVGltZU91dCA+IDApKSB7XG4gICAgICB0aGlzLl9zZXRfaW50ZXJ2YWxfaWQoc2V0VGltZW91dCh0aGlzLmhpZGVUb2FzdCwgdGhpcy5wcm9wcy5leHRlbmRlZFRpbWVPdXQpKTtcbiAgICB9XG4gIH0sXG4gIGhpZGVUb2FzdDogZnVuY3Rpb24gaGlkZVRvYXN0KG92ZXJyaWRlKSB7XG4gICAgaWYgKHRoaXMuaXNIaWRpbmcgfHwgdGhpcy5pbnRlcnZhbElkID09PSBudWxsICYmICFvdmVycmlkZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3NldF9pc19oaWRpbmcodHJ1ZSk7XG4gICAgaWYgKHRoaXMucHJvcHMudHJhbnNpdGlvbikge1xuICAgICAgdGhpcy5fc2V0X3RyYW5zaXRpb24odHJ1ZSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLmhpZGVBbmltYXRpb24pIHtcbiAgICAgIHRoaXMuX3NldF9hbmltYXRpb24odHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hhbmRsZV9yZW1vdmUoKTtcbiAgICB9XG4gIH0sXG4gIF9zZXRfaW50ZXJ2YWxfaWQ6IGZ1bmN0aW9uIF9zZXRfaW50ZXJ2YWxfaWQoaW50ZXJ2YWxJZCkge1xuICAgIHRoaXMuaW50ZXJ2YWxJZCA9IGludGVydmFsSWQ7XG4gIH0sXG4gIF9zZXRfaXNfaGlkaW5nOiBmdW5jdGlvbiBfc2V0X2lzX2hpZGluZyhpc0hpZGluZykge1xuICAgIHRoaXMuaXNIaWRpbmcgPSBpc0hpZGluZztcbiAgfVxufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yZWFjdC10b2FzdHIvbGliL1RvYXN0TWVzc2FnZS9hbmltYXRpb25NaXhpbi5qc1xuICoqIG1vZHVsZSBpZCA9IDQzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9yZWFjdERvbSA9IHJlcXVpcmUoXCJyZWFjdC1kb21cIik7XG5cbnZhciBfcmVhY3REb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb20pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBjYWxsX3Nob3dfbWV0aG9kKCRub2RlLCBwcm9wcykge1xuICAkbm9kZVtwcm9wcy5zaG93TWV0aG9kXSh7XG4gICAgZHVyYXRpb246IHByb3BzLnNob3dEdXJhdGlvbixcbiAgICBlYXNpbmc6IHByb3BzLnNob3dFYXNpbmdcbiAgfSk7XG59XG5cbmV4cG9ydHMuZGVmYXVsdCA9IHtcbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIGRpc3BsYXk6IFwibm9uZVwiIH0sXG4gICAgICAvLyBlZmZlY3RpdmUgJC5oaWRlKClcbiAgICAgIHNob3dNZXRob2Q6IFwiZmFkZUluXCIsIC8vIHNsaWRlRG93biwgYW5kIHNob3cgYXJlIGJ1aWx0IGludG8galF1ZXJ5XG4gICAgICBzaG93RHVyYXRpb246IDMwMCxcbiAgICAgIHNob3dFYXNpbmc6IFwic3dpbmdcIiwgLy8gYW5kIGxpbmVhciBhcmUgYnVpbHQgaW50byBqUXVlcnlcbiAgICAgIGhpZGVNZXRob2Q6IFwiZmFkZU91dFwiLFxuICAgICAgaGlkZUR1cmF0aW9uOiAxMDAwLFxuICAgICAgaGlkZUVhc2luZzogXCJzd2luZ1wiLFxuICAgICAgLy9cbiAgICAgIHRpbWVPdXQ6IDUwMDAsXG4gICAgICBleHRlbmRlZFRpbWVPdXQ6IDEwMDBcbiAgICB9O1xuICB9LFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaW50ZXJ2YWxJZDogbnVsbCxcbiAgICAgIGlzSGlkaW5nOiBmYWxzZVxuICAgIH07XG4gIH0sXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBjYWxsX3Nob3dfbWV0aG9kKHRoaXMuX2dldF8kX25vZGUoKSwgdGhpcy5wcm9wcyk7XG4gICAgaWYgKHRoaXMucHJvcHMudGltZU91dCA+IDApIHtcbiAgICAgIHRoaXMuX3NldF9pbnRlcnZhbF9pZChzZXRUaW1lb3V0KHRoaXMuaGlkZVRvYXN0LCB0aGlzLnByb3BzLnRpbWVPdXQpKTtcbiAgICB9XG4gIH0sXG4gIGhhbmRsZU1vdXNlRW50ZXI6IGZ1bmN0aW9uIGhhbmRsZU1vdXNlRW50ZXIoKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuc3RhdGUuaW50ZXJ2YWxJZCk7XG4gICAgdGhpcy5fc2V0X2ludGVydmFsX2lkKG51bGwpO1xuICAgIHRoaXMuX3NldF9pc19oaWRpbmcoZmFsc2UpO1xuXG4gICAgY2FsbF9zaG93X21ldGhvZCh0aGlzLl9nZXRfJF9ub2RlKCkuc3RvcCh0cnVlLCB0cnVlKSwgdGhpcy5wcm9wcyk7XG4gIH0sXG4gIGhhbmRsZU1vdXNlTGVhdmU6IGZ1bmN0aW9uIGhhbmRsZU1vdXNlTGVhdmUoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmlzSGlkaW5nICYmICh0aGlzLnByb3BzLnRpbWVPdXQgPiAwIHx8IHRoaXMucHJvcHMuZXh0ZW5kZWRUaW1lT3V0ID4gMCkpIHtcbiAgICAgIHRoaXMuX3NldF9pbnRlcnZhbF9pZChzZXRUaW1lb3V0KHRoaXMuaGlkZVRvYXN0LCB0aGlzLnByb3BzLmV4dGVuZGVkVGltZU91dCkpO1xuICAgIH1cbiAgfSxcbiAgaGlkZVRvYXN0OiBmdW5jdGlvbiBoaWRlVG9hc3Qob3ZlcnJpZGUpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5pc0hpZGluZyB8fCB0aGlzLnN0YXRlLmludGVydmFsSWQgPT09IG51bGwgJiYgIW92ZXJyaWRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc2V0U3RhdGUoeyBpc0hpZGluZzogdHJ1ZSB9KTtcblxuICAgIHRoaXMuX2dldF8kX25vZGUoKVt0aGlzLnByb3BzLmhpZGVNZXRob2RdKHtcbiAgICAgIGR1cmF0aW9uOiB0aGlzLnByb3BzLmhpZGVEdXJhdGlvbixcbiAgICAgIGVhc2luZzogdGhpcy5wcm9wcy5oaWRlRWFzaW5nLFxuICAgICAgY29tcGxldGU6IHRoaXMuX2hhbmRsZV9yZW1vdmVcbiAgICB9KTtcbiAgfSxcbiAgX2dldF8kX25vZGU6IGZ1bmN0aW9uIF9nZXRfJF9ub2RlKCkge1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG4gICAgcmV0dXJuIGpRdWVyeShfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcykpO1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tdW5kZWYgKi9cbiAgfSxcbiAgX3NldF9pbnRlcnZhbF9pZDogZnVuY3Rpb24gX3NldF9pbnRlcnZhbF9pZChpbnRlcnZhbElkKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBpbnRlcnZhbElkOiBpbnRlcnZhbElkXG4gICAgfSk7XG4gIH0sXG4gIF9zZXRfaXNfaGlkaW5nOiBmdW5jdGlvbiBfc2V0X2lzX2hpZGluZyhpc0hpZGluZykge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgaXNIaWRpbmc6IGlzSGlkaW5nXG4gICAgfSk7XG4gIH1cbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3QtdG9hc3RyL2xpYi9Ub2FzdE1lc3NhZ2UvalF1ZXJ5TWl4aW4uanNcbiAqKiBtb2R1bGUgaWQgPSA0NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLlRvYXN0TWVzc2FnZSA9IGV4cG9ydHMuVG9hc3RDb250YWluZXIgPSB1bmRlZmluZWQ7XG5cbnZhciBfVG9hc3RDb250YWluZXIgPSByZXF1aXJlKFwiLi9Ub2FzdENvbnRhaW5lclwiKTtcblxudmFyIF9Ub2FzdENvbnRhaW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Ub2FzdENvbnRhaW5lcik7XG5cbnZhciBfVG9hc3RNZXNzYWdlID0gcmVxdWlyZShcIi4vVG9hc3RNZXNzYWdlXCIpO1xuXG52YXIgX1RvYXN0TWVzc2FnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Ub2FzdE1lc3NhZ2UpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5leHBvcnRzLlRvYXN0Q29udGFpbmVyID0gX1RvYXN0Q29udGFpbmVyMi5kZWZhdWx0O1xuZXhwb3J0cy5Ub2FzdE1lc3NhZ2UgPSBfVG9hc3RNZXNzYWdlMi5kZWZhdWx0O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlYWN0LXRvYXN0ci9saWIvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA0NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvcHRzKSB7XG4gIHJldHVybiBuZXcgRWxlbWVudENsYXNzKG9wdHMpXG59XG5cbmZ1bmN0aW9uIGluZGV4T2YoYXJyLCBwcm9wKSB7XG4gIGlmIChhcnIuaW5kZXhPZikgcmV0dXJuIGFyci5pbmRleE9mKHByb3ApXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhcnIubGVuZ3RoOyBpIDwgbGVuOyBpKyspXG4gICAgaWYgKGFycltpXSA9PT0gcHJvcCkgcmV0dXJuIGlcbiAgcmV0dXJuIC0xXG59XG5cbmZ1bmN0aW9uIEVsZW1lbnRDbGFzcyhvcHRzKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBFbGVtZW50Q2xhc3MpKSByZXR1cm4gbmV3IEVsZW1lbnRDbGFzcyhvcHRzKVxuICB2YXIgc2VsZiA9IHRoaXNcbiAgaWYgKCFvcHRzKSBvcHRzID0ge31cblxuICAvLyBzaW1pbGFyIGRvaW5nIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgYnV0IHdvcmtzIGluIElFOFxuICBpZiAob3B0cy5ub2RlVHlwZSkgb3B0cyA9IHtlbDogb3B0c31cblxuICB0aGlzLm9wdHMgPSBvcHRzXG4gIHRoaXMuZWwgPSBvcHRzLmVsIHx8IGRvY3VtZW50LmJvZHlcbiAgaWYgKHR5cGVvZiB0aGlzLmVsICE9PSAnb2JqZWN0JykgdGhpcy5lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5lbClcbn1cblxuRWxlbWVudENsYXNzLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihjbGFzc05hbWUpIHtcbiAgdmFyIGVsID0gdGhpcy5lbFxuICBpZiAoIWVsKSByZXR1cm5cbiAgaWYgKGVsLmNsYXNzTmFtZSA9PT0gXCJcIikgcmV0dXJuIGVsLmNsYXNzTmFtZSA9IGNsYXNzTmFtZVxuICB2YXIgY2xhc3NlcyA9IGVsLmNsYXNzTmFtZS5zcGxpdCgnICcpXG4gIGlmIChpbmRleE9mKGNsYXNzZXMsIGNsYXNzTmFtZSkgPiAtMSkgcmV0dXJuIGNsYXNzZXNcbiAgY2xhc3Nlcy5wdXNoKGNsYXNzTmFtZSlcbiAgZWwuY2xhc3NOYW1lID0gY2xhc3Nlcy5qb2luKCcgJylcbiAgcmV0dXJuIGNsYXNzZXNcbn1cblxuRWxlbWVudENsYXNzLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbihjbGFzc05hbWUpIHtcbiAgdmFyIGVsID0gdGhpcy5lbFxuICBpZiAoIWVsKSByZXR1cm5cbiAgaWYgKGVsLmNsYXNzTmFtZSA9PT0gXCJcIikgcmV0dXJuXG4gIHZhciBjbGFzc2VzID0gZWwuY2xhc3NOYW1lLnNwbGl0KCcgJylcbiAgdmFyIGlkeCA9IGluZGV4T2YoY2xhc3NlcywgY2xhc3NOYW1lKVxuICBpZiAoaWR4ID4gLTEpIGNsYXNzZXMuc3BsaWNlKGlkeCwgMSlcbiAgZWwuY2xhc3NOYW1lID0gY2xhc3Nlcy5qb2luKCcgJylcbiAgcmV0dXJuIGNsYXNzZXNcbn1cblxuRWxlbWVudENsYXNzLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbihjbGFzc05hbWUpIHtcbiAgdmFyIGVsID0gdGhpcy5lbFxuICBpZiAoIWVsKSByZXR1cm5cbiAgdmFyIGNsYXNzZXMgPSBlbC5jbGFzc05hbWUuc3BsaXQoJyAnKVxuICByZXR1cm4gaW5kZXhPZihjbGFzc2VzLCBjbGFzc05hbWUpID4gLTFcbn1cblxuRWxlbWVudENsYXNzLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbihjbGFzc05hbWUpIHtcbiAgdmFyIGVsID0gdGhpcy5lbFxuICBpZiAoIWVsKSByZXR1cm5cbiAgaWYgKHRoaXMuaGFzKGNsYXNzTmFtZSkpIHRoaXMucmVtb3ZlKGNsYXNzTmFtZSlcbiAgZWxzZSB0aGlzLmFkZChjbGFzc05hbWUpXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yZWFjdC10b2FzdHIvfi9lbGVtZW50LWNsYXNzL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gNDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBPYmplY3QuYXNzaWduXG4gKi9cblxuLy8gaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLW9iamVjdC5hc3NpZ25cblxuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBhc3NpZ24odGFyZ2V0LCBzb3VyY2VzKSB7XG4gIGlmICh0YXJnZXQgPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ09iamVjdC5hc3NpZ24gdGFyZ2V0IGNhbm5vdCBiZSBudWxsIG9yIHVuZGVmaW5lZCcpO1xuICB9XG5cbiAgdmFyIHRvID0gT2JqZWN0KHRhcmdldCk7XG4gIHZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbiAgZm9yICh2YXIgbmV4dEluZGV4ID0gMTsgbmV4dEluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgbmV4dEluZGV4KyspIHtcbiAgICB2YXIgbmV4dFNvdXJjZSA9IGFyZ3VtZW50c1tuZXh0SW5kZXhdO1xuICAgIGlmIChuZXh0U291cmNlID09IG51bGwpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHZhciBmcm9tID0gT2JqZWN0KG5leHRTb3VyY2UpO1xuXG4gICAgLy8gV2UgZG9uJ3QgY3VycmVudGx5IHN1cHBvcnQgYWNjZXNzb3JzIG5vciBwcm94aWVzLiBUaGVyZWZvcmUgdGhpc1xuICAgIC8vIGNvcHkgY2Fubm90IHRocm93LiBJZiB3ZSBldmVyIHN1cHBvcnRlZCB0aGlzIHRoZW4gd2UgbXVzdCBoYW5kbGVcbiAgICAvLyBleGNlcHRpb25zIGFuZCBzaWRlLWVmZmVjdHMuIFdlIGRvbid0IHN1cHBvcnQgc3ltYm9scyBzbyB0aGV5IHdvbid0XG4gICAgLy8gYmUgdHJhbnNmZXJyZWQuXG5cbiAgICBmb3IgKHZhciBrZXkgaW4gZnJvbSkge1xuICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoZnJvbSwga2V5KSkge1xuICAgICAgICB0b1trZXldID0gZnJvbVtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0bztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhc3NpZ247XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3QvbGliL09iamVjdC5hc3NpZ24uanNcbiAqKiBtb2R1bGUgaWQgPSA0N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0VHJhbnNpdGlvbkV2ZW50c1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcblxuLyoqXG4gKiBFVkVOVF9OQU1FX01BUCBpcyB1c2VkIHRvIGRldGVybWluZSB3aGljaCBldmVudCBmaXJlZCB3aGVuIGFcbiAqIHRyYW5zaXRpb24vYW5pbWF0aW9uIGVuZHMsIGJhc2VkIG9uIHRoZSBzdHlsZSBwcm9wZXJ0eSB1c2VkIHRvXG4gKiBkZWZpbmUgdGhhdCBldmVudC5cbiAqL1xudmFyIEVWRU5UX05BTUVfTUFQID0ge1xuICB0cmFuc2l0aW9uZW5kOiB7XG4gICAgJ3RyYW5zaXRpb24nOiAndHJhbnNpdGlvbmVuZCcsXG4gICAgJ1dlYmtpdFRyYW5zaXRpb24nOiAnd2Via2l0VHJhbnNpdGlvbkVuZCcsXG4gICAgJ01velRyYW5zaXRpb24nOiAnbW96VHJhbnNpdGlvbkVuZCcsXG4gICAgJ09UcmFuc2l0aW9uJzogJ29UcmFuc2l0aW9uRW5kJyxcbiAgICAnbXNUcmFuc2l0aW9uJzogJ01TVHJhbnNpdGlvbkVuZCdcbiAgfSxcblxuICBhbmltYXRpb25lbmQ6IHtcbiAgICAnYW5pbWF0aW9uJzogJ2FuaW1hdGlvbmVuZCcsXG4gICAgJ1dlYmtpdEFuaW1hdGlvbic6ICd3ZWJraXRBbmltYXRpb25FbmQnLFxuICAgICdNb3pBbmltYXRpb24nOiAnbW96QW5pbWF0aW9uRW5kJyxcbiAgICAnT0FuaW1hdGlvbic6ICdvQW5pbWF0aW9uRW5kJyxcbiAgICAnbXNBbmltYXRpb24nOiAnTVNBbmltYXRpb25FbmQnXG4gIH1cbn07XG5cbnZhciBlbmRFdmVudHMgPSBbXTtcblxuZnVuY3Rpb24gZGV0ZWN0RXZlbnRzKCkge1xuICB2YXIgdGVzdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHZhciBzdHlsZSA9IHRlc3RFbC5zdHlsZTtcblxuICAvLyBPbiBzb21lIHBsYXRmb3JtcywgaW4gcGFydGljdWxhciBzb21lIHJlbGVhc2VzIG9mIEFuZHJvaWQgNC54LFxuICAvLyB0aGUgdW4tcHJlZml4ZWQgXCJhbmltYXRpb25cIiBhbmQgXCJ0cmFuc2l0aW9uXCIgcHJvcGVydGllcyBhcmUgZGVmaW5lZCBvbiB0aGVcbiAgLy8gc3R5bGUgb2JqZWN0IGJ1dCB0aGUgZXZlbnRzIHRoYXQgZmlyZSB3aWxsIHN0aWxsIGJlIHByZWZpeGVkLCBzbyB3ZSBuZWVkXG4gIC8vIHRvIGNoZWNrIGlmIHRoZSB1bi1wcmVmaXhlZCBldmVudHMgYXJlIHVzZWFibGUsIGFuZCBpZiBub3QgcmVtb3ZlIHRoZW1cbiAgLy8gZnJvbSB0aGUgbWFwXG4gIGlmICghKCdBbmltYXRpb25FdmVudCcgaW4gd2luZG93KSkge1xuICAgIGRlbGV0ZSBFVkVOVF9OQU1FX01BUC5hbmltYXRpb25lbmQuYW5pbWF0aW9uO1xuICB9XG5cbiAgaWYgKCEoJ1RyYW5zaXRpb25FdmVudCcgaW4gd2luZG93KSkge1xuICAgIGRlbGV0ZSBFVkVOVF9OQU1FX01BUC50cmFuc2l0aW9uZW5kLnRyYW5zaXRpb247XG4gIH1cblxuICBmb3IgKHZhciBiYXNlRXZlbnROYW1lIGluIEVWRU5UX05BTUVfTUFQKSB7XG4gICAgdmFyIGJhc2VFdmVudHMgPSBFVkVOVF9OQU1FX01BUFtiYXNlRXZlbnROYW1lXTtcbiAgICBmb3IgKHZhciBzdHlsZU5hbWUgaW4gYmFzZUV2ZW50cykge1xuICAgICAgaWYgKHN0eWxlTmFtZSBpbiBzdHlsZSkge1xuICAgICAgICBlbmRFdmVudHMucHVzaChiYXNlRXZlbnRzW3N0eWxlTmFtZV0pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICBkZXRlY3RFdmVudHMoKTtcbn1cblxuLy8gV2UgdXNlIHRoZSByYXcge2FkZHxyZW1vdmV9RXZlbnRMaXN0ZW5lcigpIGNhbGwgYmVjYXVzZSBFdmVudExpc3RlbmVyXG4vLyBkb2VzIG5vdCBrbm93IGhvdyB0byByZW1vdmUgZXZlbnQgbGlzdGVuZXJzIGFuZCB3ZSByZWFsbHkgc2hvdWxkXG4vLyBjbGVhbiB1cC4gQWxzbywgdGhlc2UgZXZlbnRzIGFyZSBub3QgdHJpZ2dlcmVkIGluIG9sZGVyIGJyb3dzZXJzXG4vLyBzbyB3ZSBzaG91bGQgYmUgQS1PSyBoZXJlLlxuXG5mdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKG5vZGUsIGV2ZW50TmFtZSwgZXZlbnRMaXN0ZW5lcikge1xuICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBldmVudExpc3RlbmVyLCBmYWxzZSk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXIobm9kZSwgZXZlbnROYW1lLCBldmVudExpc3RlbmVyKSB7XG4gIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGV2ZW50TGlzdGVuZXIsIGZhbHNlKTtcbn1cblxudmFyIFJlYWN0VHJhbnNpdGlvbkV2ZW50cyA9IHtcbiAgYWRkRW5kRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24gKG5vZGUsIGV2ZW50TGlzdGVuZXIpIHtcbiAgICBpZiAoZW5kRXZlbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gSWYgQ1NTIHRyYW5zaXRpb25zIGFyZSBub3Qgc3VwcG9ydGVkLCB0cmlnZ2VyIGFuIFwiZW5kIGFuaW1hdGlvblwiXG4gICAgICAvLyBldmVudCBpbW1lZGlhdGVseS5cbiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGV2ZW50TGlzdGVuZXIsIDApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbmRFdmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZW5kRXZlbnQpIHtcbiAgICAgIGFkZEV2ZW50TGlzdGVuZXIobm9kZSwgZW5kRXZlbnQsIGV2ZW50TGlzdGVuZXIpO1xuICAgIH0pO1xuICB9LFxuXG4gIHJlbW92ZUVuZEV2ZW50TGlzdGVuZXI6IGZ1bmN0aW9uIChub2RlLCBldmVudExpc3RlbmVyKSB7XG4gICAgaWYgKGVuZEV2ZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZW5kRXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGVuZEV2ZW50KSB7XG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyKG5vZGUsIGVuZEV2ZW50LCBldmVudExpc3RlbmVyKTtcbiAgICB9KTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFRyYW5zaXRpb25FdmVudHM7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3QvbGliL1JlYWN0VHJhbnNpdGlvbkV2ZW50cy5qc1xuICoqIG1vZHVsZSBpZCA9IDQ4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgdXBkYXRlXG4gKi9cblxuLyogZ2xvYmFsIGhhc093blByb3BlcnR5OnRydWUgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIga2V5T2YgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlPZicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIGhhc093blByb3BlcnR5ID0gKHt9KS5oYXNPd25Qcm9wZXJ0eTtcblxuZnVuY3Rpb24gc2hhbGxvd0NvcHkoeCkge1xuICBpZiAoQXJyYXkuaXNBcnJheSh4KSkge1xuICAgIHJldHVybiB4LmNvbmNhdCgpO1xuICB9IGVsc2UgaWYgKHggJiYgdHlwZW9mIHggPT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIGFzc2lnbihuZXcgeC5jb25zdHJ1Y3RvcigpLCB4KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4geDtcbiAgfVxufVxuXG52YXIgQ09NTUFORF9QVVNIID0ga2V5T2YoeyAkcHVzaDogbnVsbCB9KTtcbnZhciBDT01NQU5EX1VOU0hJRlQgPSBrZXlPZih7ICR1bnNoaWZ0OiBudWxsIH0pO1xudmFyIENPTU1BTkRfU1BMSUNFID0ga2V5T2YoeyAkc3BsaWNlOiBudWxsIH0pO1xudmFyIENPTU1BTkRfU0VUID0ga2V5T2YoeyAkc2V0OiBudWxsIH0pO1xudmFyIENPTU1BTkRfTUVSR0UgPSBrZXlPZih7ICRtZXJnZTogbnVsbCB9KTtcbnZhciBDT01NQU5EX0FQUExZID0ga2V5T2YoeyAkYXBwbHk6IG51bGwgfSk7XG5cbnZhciBBTExfQ09NTUFORFNfTElTVCA9IFtDT01NQU5EX1BVU0gsIENPTU1BTkRfVU5TSElGVCwgQ09NTUFORF9TUExJQ0UsIENPTU1BTkRfU0VULCBDT01NQU5EX01FUkdFLCBDT01NQU5EX0FQUExZXTtcblxudmFyIEFMTF9DT01NQU5EU19TRVQgPSB7fTtcblxuQUxMX0NPTU1BTkRTX0xJU1QuZm9yRWFjaChmdW5jdGlvbiAoY29tbWFuZCkge1xuICBBTExfQ09NTUFORFNfU0VUW2NvbW1hbmRdID0gdHJ1ZTtcbn0pO1xuXG5mdW5jdGlvbiBpbnZhcmlhbnRBcnJheUNhc2UodmFsdWUsIHNwZWMsIGNvbW1hbmQpIHtcbiAgIUFycmF5LmlzQXJyYXkodmFsdWUpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3VwZGF0ZSgpOiBleHBlY3RlZCB0YXJnZXQgb2YgJXMgdG8gYmUgYW4gYXJyYXk7IGdvdCAlcy4nLCBjb21tYW5kLCB2YWx1ZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB2YXIgc3BlY1ZhbHVlID0gc3BlY1tjb21tYW5kXTtcbiAgIUFycmF5LmlzQXJyYXkoc3BlY1ZhbHVlKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd1cGRhdGUoKTogZXhwZWN0ZWQgc3BlYyBvZiAlcyB0byBiZSBhbiBhcnJheTsgZ290ICVzLiAnICsgJ0RpZCB5b3UgZm9yZ2V0IHRvIHdyYXAgeW91ciBwYXJhbWV0ZXIgaW4gYW4gYXJyYXk/JywgY29tbWFuZCwgc3BlY1ZhbHVlKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSwgc3BlYykge1xuICAhKHR5cGVvZiBzcGVjID09PSAnb2JqZWN0JykgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndXBkYXRlKCk6IFlvdSBwcm92aWRlZCBhIGtleSBwYXRoIHRvIHVwZGF0ZSgpIHRoYXQgZGlkIG5vdCBjb250YWluIG9uZSAnICsgJ29mICVzLiBEaWQgeW91IGZvcmdldCB0byBpbmNsdWRlIHslczogLi4ufT8nLCBBTExfQ09NTUFORFNfTElTVC5qb2luKCcsICcpLCBDT01NQU5EX1NFVCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHNwZWMsIENPTU1BTkRfU0VUKSkge1xuICAgICEoT2JqZWN0LmtleXMoc3BlYykubGVuZ3RoID09PSAxKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdDYW5ub3QgaGF2ZSBtb3JlIHRoYW4gb25lIGtleSBpbiBhbiBvYmplY3Qgd2l0aCAlcycsIENPTU1BTkRfU0VUKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICByZXR1cm4gc3BlY1tDT01NQU5EX1NFVF07XG4gIH1cblxuICB2YXIgbmV4dFZhbHVlID0gc2hhbGxvd0NvcHkodmFsdWUpO1xuXG4gIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHNwZWMsIENPTU1BTkRfTUVSR0UpKSB7XG4gICAgdmFyIG1lcmdlT2JqID0gc3BlY1tDT01NQU5EX01FUkdFXTtcbiAgICAhKG1lcmdlT2JqICYmIHR5cGVvZiBtZXJnZU9iaiA9PT0gJ29iamVjdCcpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3VwZGF0ZSgpOiAlcyBleHBlY3RzIGEgc3BlYyBvZiB0eXBlIFxcJ29iamVjdFxcJzsgZ290ICVzJywgQ09NTUFORF9NRVJHRSwgbWVyZ2VPYmopIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAhKG5leHRWYWx1ZSAmJiB0eXBlb2YgbmV4dFZhbHVlID09PSAnb2JqZWN0JykgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndXBkYXRlKCk6ICVzIGV4cGVjdHMgYSB0YXJnZXQgb2YgdHlwZSBcXCdvYmplY3RcXCc7IGdvdCAlcycsIENPTU1BTkRfTUVSR0UsIG5leHRWYWx1ZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIGFzc2lnbihuZXh0VmFsdWUsIHNwZWNbQ09NTUFORF9NRVJHRV0pO1xuICB9XG5cbiAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoc3BlYywgQ09NTUFORF9QVVNIKSkge1xuICAgIGludmFyaWFudEFycmF5Q2FzZSh2YWx1ZSwgc3BlYywgQ09NTUFORF9QVVNIKTtcbiAgICBzcGVjW0NPTU1BTkRfUFVTSF0uZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgbmV4dFZhbHVlLnB1c2goaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChzcGVjLCBDT01NQU5EX1VOU0hJRlQpKSB7XG4gICAgaW52YXJpYW50QXJyYXlDYXNlKHZhbHVlLCBzcGVjLCBDT01NQU5EX1VOU0hJRlQpO1xuICAgIHNwZWNbQ09NTUFORF9VTlNISUZUXS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICBuZXh0VmFsdWUudW5zaGlmdChpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHNwZWMsIENPTU1BTkRfU1BMSUNFKSkge1xuICAgICFBcnJheS5pc0FycmF5KHZhbHVlKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFeHBlY3RlZCAlcyB0YXJnZXQgdG8gYmUgYW4gYXJyYXk7IGdvdCAlcycsIENPTU1BTkRfU1BMSUNFLCB2YWx1ZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICFBcnJheS5pc0FycmF5KHNwZWNbQ09NTUFORF9TUExJQ0VdKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd1cGRhdGUoKTogZXhwZWN0ZWQgc3BlYyBvZiAlcyB0byBiZSBhbiBhcnJheSBvZiBhcnJheXM7IGdvdCAlcy4gJyArICdEaWQgeW91IGZvcmdldCB0byB3cmFwIHlvdXIgcGFyYW1ldGVycyBpbiBhbiBhcnJheT8nLCBDT01NQU5EX1NQTElDRSwgc3BlY1tDT01NQU5EX1NQTElDRV0pIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICBzcGVjW0NPTU1BTkRfU1BMSUNFXS5mb3JFYWNoKGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAhQXJyYXkuaXNBcnJheShhcmdzKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd1cGRhdGUoKTogZXhwZWN0ZWQgc3BlYyBvZiAlcyB0byBiZSBhbiBhcnJheSBvZiBhcnJheXM7IGdvdCAlcy4gJyArICdEaWQgeW91IGZvcmdldCB0byB3cmFwIHlvdXIgcGFyYW1ldGVycyBpbiBhbiBhcnJheT8nLCBDT01NQU5EX1NQTElDRSwgc3BlY1tDT01NQU5EX1NQTElDRV0pIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgIG5leHRWYWx1ZS5zcGxpY2UuYXBwbHkobmV4dFZhbHVlLCBhcmdzKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHNwZWMsIENPTU1BTkRfQVBQTFkpKSB7XG4gICAgISh0eXBlb2Ygc3BlY1tDT01NQU5EX0FQUExZXSA9PT0gJ2Z1bmN0aW9uJykgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndXBkYXRlKCk6IGV4cGVjdGVkIHNwZWMgb2YgJXMgdG8gYmUgYSBmdW5jdGlvbjsgZ290ICVzLicsIENPTU1BTkRfQVBQTFksIHNwZWNbQ09NTUFORF9BUFBMWV0pIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICBuZXh0VmFsdWUgPSBzcGVjW0NPTU1BTkRfQVBQTFldKG5leHRWYWx1ZSk7XG4gIH1cblxuICBmb3IgKHZhciBrIGluIHNwZWMpIHtcbiAgICBpZiAoIShBTExfQ09NTUFORFNfU0VULmhhc093blByb3BlcnR5KGspICYmIEFMTF9DT01NQU5EU19TRVRba10pKSB7XG4gICAgICBuZXh0VmFsdWVba10gPSB1cGRhdGUodmFsdWVba10sIHNwZWNba10pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXh0VmFsdWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdXBkYXRlO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlYWN0L2xpYi91cGRhdGUuanNcbiAqKiBtb2R1bGUgaWQgPSA0OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIEV4ZWN1dGlvbkVudmlyb25tZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgY2FuVXNlRE9NID0gISEodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmRvY3VtZW50ICYmIHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KTtcblxuLyoqXG4gKiBTaW1wbGUsIGxpZ2h0d2VpZ2h0IG1vZHVsZSBhc3Npc3Rpbmcgd2l0aCB0aGUgZGV0ZWN0aW9uIGFuZCBjb250ZXh0IG9mXG4gKiBXb3JrZXIuIEhlbHBzIGF2b2lkIGNpcmN1bGFyIGRlcGVuZGVuY2llcyBhbmQgYWxsb3dzIGNvZGUgdG8gcmVhc29uIGFib3V0XG4gKiB3aGV0aGVyIG9yIG5vdCB0aGV5IGFyZSBpbiBhIFdvcmtlciwgZXZlbiBpZiB0aGV5IG5ldmVyIGluY2x1ZGUgdGhlIG1haW5cbiAqIGBSZWFjdFdvcmtlcmAgZGVwZW5kZW5jeS5cbiAqL1xudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0ge1xuXG4gIGNhblVzZURPTTogY2FuVXNlRE9NLFxuXG4gIGNhblVzZVdvcmtlcnM6IHR5cGVvZiBXb3JrZXIgIT09ICd1bmRlZmluZWQnLFxuXG4gIGNhblVzZUV2ZW50TGlzdGVuZXJzOiBjYW5Vc2VET00gJiYgISEod2luZG93LmFkZEV2ZW50TGlzdGVuZXIgfHwgd2luZG93LmF0dGFjaEV2ZW50KSxcblxuICBjYW5Vc2VWaWV3cG9ydDogY2FuVXNlRE9NICYmICEhd2luZG93LnNjcmVlbixcblxuICBpc0luV29ya2VyOiAhY2FuVXNlRE9NIC8vIEZvciBub3csIHRoaXMgaXMgdHJ1ZSAtIG1pZ2h0IGNoYW5nZSBpbiB0aGUgZnV0dXJlLlxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEV4ZWN1dGlvbkVudmlyb25tZW50O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlYWN0L34vZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQuanNcbiAqKiBtb2R1bGUgaWQgPSA1MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGludmFyaWFudFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBVc2UgaW52YXJpYW50KCkgdG8gYXNzZXJ0IHN0YXRlIHdoaWNoIHlvdXIgcHJvZ3JhbSBhc3N1bWVzIHRvIGJlIHRydWUuXG4gKlxuICogUHJvdmlkZSBzcHJpbnRmLXN0eWxlIGZvcm1hdCAob25seSAlcyBpcyBzdXBwb3J0ZWQpIGFuZCBhcmd1bWVudHNcbiAqIHRvIHByb3ZpZGUgaW5mb3JtYXRpb24gYWJvdXQgd2hhdCBicm9rZSBhbmQgd2hhdCB5b3Ugd2VyZVxuICogZXhwZWN0aW5nLlxuICpcbiAqIFRoZSBpbnZhcmlhbnQgbWVzc2FnZSB3aWxsIGJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24sIGJ1dCB0aGUgaW52YXJpYW50XG4gKiB3aWxsIHJlbWFpbiB0byBlbnN1cmUgbG9naWMgZG9lcyBub3QgZGlmZmVyIGluIHByb2R1Y3Rpb24uXG4gKi9cblxuZnVuY3Rpb24gaW52YXJpYW50KGNvbmRpdGlvbiwgZm9ybWF0LCBhLCBiLCBjLCBkLCBlLCBmKSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFyaWFudCByZXF1aXJlcyBhbiBlcnJvciBtZXNzYWdlIGFyZ3VtZW50Jyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFjb25kaXRpb24pIHtcbiAgICB2YXIgZXJyb3I7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcignTWluaWZpZWQgZXhjZXB0aW9uIG9jY3VycmVkOyB1c2UgdGhlIG5vbi1taW5pZmllZCBkZXYgZW52aXJvbm1lbnQgJyArICdmb3IgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZSBhbmQgYWRkaXRpb25hbCBoZWxwZnVsIHdhcm5pbmdzLicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYXJncyA9IFthLCBiLCBjLCBkLCBlLCBmXTtcbiAgICAgIHZhciBhcmdJbmRleCA9IDA7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcihmb3JtYXQucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYXJnc1thcmdJbmRleCsrXTtcbiAgICAgIH0pKTtcbiAgICAgIGVycm9yLm5hbWUgPSAnSW52YXJpYW50IFZpb2xhdGlvbic7XG4gICAgfVxuXG4gICAgZXJyb3IuZnJhbWVzVG9Qb3AgPSAxOyAvLyB3ZSBkb24ndCBjYXJlIGFib3V0IGludmFyaWFudCdzIG93biBmcmFtZVxuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW52YXJpYW50O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlYWN0L34vZmJqcy9saWIvaW52YXJpYW50LmpzXG4gKiogbW9kdWxlIGlkID0gNTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBrZXlPZlxuICovXG5cbi8qKlxuICogQWxsb3dzIGV4dHJhY3Rpb24gb2YgYSBtaW5pZmllZCBrZXkuIExldCdzIHRoZSBidWlsZCBzeXN0ZW0gbWluaWZ5IGtleXNcbiAqIHdpdGhvdXQgbG9zaW5nIHRoZSBhYmlsaXR5IHRvIGR5bmFtaWNhbGx5IHVzZSBrZXkgc3RyaW5ncyBhcyB2YWx1ZXNcbiAqIHRoZW1zZWx2ZXMuIFBhc3MgaW4gYW4gb2JqZWN0IHdpdGggYSBzaW5nbGUga2V5L3ZhbCBwYWlyIGFuZCBpdCB3aWxsIHJldHVyblxuICogeW91IHRoZSBzdHJpbmcga2V5IG9mIHRoYXQgc2luZ2xlIHJlY29yZC4gU3VwcG9zZSB5b3Ugd2FudCB0byBncmFiIHRoZVxuICogdmFsdWUgZm9yIGEga2V5ICdjbGFzc05hbWUnIGluc2lkZSBvZiBhbiBvYmplY3QuIEtleS92YWwgbWluaWZpY2F0aW9uIG1heVxuICogaGF2ZSBhbGlhc2VkIHRoYXQga2V5IHRvIGJlICd4YTEyJy4ga2V5T2Yoe2NsYXNzTmFtZTogbnVsbH0pIHdpbGwgcmV0dXJuXG4gKiAneGExMicgaW4gdGhhdCBjYXNlLiBSZXNvbHZlIGtleXMgeW91IHdhbnQgdG8gdXNlIG9uY2UgYXQgc3RhcnR1cCB0aW1lLCB0aGVuXG4gKiByZXVzZSB0aG9zZSByZXNvbHV0aW9ucy5cbiAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBrZXlPZiA9IGZ1bmN0aW9uIChvbmVLZXlPYmopIHtcbiAgdmFyIGtleTtcbiAgZm9yIChrZXkgaW4gb25lS2V5T2JqKSB7XG4gICAgaWYgKCFvbmVLZXlPYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHJldHVybiBrZXk7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGtleU9mO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlYWN0L34vZmJqcy9saWIva2V5T2YuanNcbiAqKiBtb2R1bGUgaWQgPSA1MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLypcclxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxyXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcclxuKi9cclxudmFyIHN0eWxlc0luRG9tID0ge30sXHJcblx0bWVtb2l6ZSA9IGZ1bmN0aW9uKGZuKSB7XHJcblx0XHR2YXIgbWVtbztcclxuXHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGlmICh0eXBlb2YgbWVtbyA9PT0gXCJ1bmRlZmluZWRcIikgbWVtbyA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcblx0XHRcdHJldHVybiBtZW1vO1xyXG5cdFx0fTtcclxuXHR9LFxyXG5cdGlzT2xkSUUgPSBtZW1vaXplKGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIC9tc2llIFs2LTldXFxiLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpO1xyXG5cdH0pLFxyXG5cdGdldEhlYWRFbGVtZW50ID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XHJcblx0XHRyZXR1cm4gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XHJcblx0fSksXHJcblx0c2luZ2xldG9uRWxlbWVudCA9IG51bGwsXHJcblx0c2luZ2xldG9uQ291bnRlciA9IDAsXHJcblx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AgPSBbXTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGlzdCwgb3B0aW9ucykge1xyXG5cdGlmKHR5cGVvZiBERUJVRyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBERUJVRykge1xyXG5cdFx0aWYodHlwZW9mIGRvY3VtZW50ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3R5bGUtbG9hZGVyIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnRcIik7XHJcblx0fVxyXG5cclxuXHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuXHQvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cclxuXHQvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXHJcblx0aWYgKHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiA9PT0gXCJ1bmRlZmluZWRcIikgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XHJcblxyXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIGJvdHRvbSBvZiA8aGVhZD4uXHJcblx0aWYgKHR5cGVvZiBvcHRpb25zLmluc2VydEF0ID09PSBcInVuZGVmaW5lZFwiKSBvcHRpb25zLmluc2VydEF0ID0gXCJib3R0b21cIjtcclxuXHJcblx0dmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0KTtcclxuXHRhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpO1xyXG5cclxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcclxuXHRcdHZhciBtYXlSZW1vdmUgPSBbXTtcclxuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XHJcblx0XHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xyXG5cdFx0XHRkb21TdHlsZS5yZWZzLS07XHJcblx0XHRcdG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcclxuXHRcdH1cclxuXHRcdGlmKG5ld0xpc3QpIHtcclxuXHRcdFx0dmFyIG5ld1N0eWxlcyA9IGxpc3RUb1N0eWxlcyhuZXdMaXN0KTtcclxuXHRcdFx0YWRkU3R5bGVzVG9Eb20obmV3U3R5bGVzLCBvcHRpb25zKTtcclxuXHRcdH1cclxuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBtYXlSZW1vdmUubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGRvbVN0eWxlID0gbWF5UmVtb3ZlW2ldO1xyXG5cdFx0XHRpZihkb21TdHlsZS5yZWZzID09PSAwKSB7XHJcblx0XHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKVxyXG5cdFx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oKTtcclxuXHRcdFx0XHRkZWxldGUgc3R5bGVzSW5Eb21bZG9tU3R5bGUuaWRdO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKSB7XHJcblx0Zm9yKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XHJcblx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcclxuXHRcdGlmKGRvbVN0eWxlKSB7XHJcblx0XHRcdGRvbVN0eWxlLnJlZnMrKztcclxuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oaXRlbS5wYXJ0c1tqXSk7XHJcblx0XHRcdH1cclxuXHRcdFx0Zm9yKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0XHRkb21TdHlsZS5wYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dmFyIHBhcnRzID0gW107XHJcblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0cGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XHJcblx0XHRcdH1cclxuXHRcdFx0c3R5bGVzSW5Eb21baXRlbS5pZF0gPSB7aWQ6IGl0ZW0uaWQsIHJlZnM6IDEsIHBhcnRzOiBwYXJ0c307XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBsaXN0VG9TdHlsZXMobGlzdCkge1xyXG5cdHZhciBzdHlsZXMgPSBbXTtcclxuXHR2YXIgbmV3U3R5bGVzID0ge307XHJcblx0Zm9yKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcclxuXHRcdHZhciBpdGVtID0gbGlzdFtpXTtcclxuXHRcdHZhciBpZCA9IGl0ZW1bMF07XHJcblx0XHR2YXIgY3NzID0gaXRlbVsxXTtcclxuXHRcdHZhciBtZWRpYSA9IGl0ZW1bMl07XHJcblx0XHR2YXIgc291cmNlTWFwID0gaXRlbVszXTtcclxuXHRcdHZhciBwYXJ0ID0ge2NzczogY3NzLCBtZWRpYTogbWVkaWEsIHNvdXJjZU1hcDogc291cmNlTWFwfTtcclxuXHRcdGlmKCFuZXdTdHlsZXNbaWRdKVxyXG5cdFx0XHRzdHlsZXMucHVzaChuZXdTdHlsZXNbaWRdID0ge2lkOiBpZCwgcGFydHM6IFtwYXJ0XX0pO1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHRuZXdTdHlsZXNbaWRdLnBhcnRzLnB1c2gocGFydCk7XHJcblx0fVxyXG5cdHJldHVybiBzdHlsZXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBzdHlsZUVsZW1lbnQpIHtcclxuXHR2YXIgaGVhZCA9IGdldEhlYWRFbGVtZW50KCk7XHJcblx0dmFyIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wID0gc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3Bbc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AubGVuZ3RoIC0gMV07XHJcblx0aWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidG9wXCIpIHtcclxuXHRcdGlmKCFsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCkge1xyXG5cdFx0XHRoZWFkLmluc2VydEJlZm9yZShzdHlsZUVsZW1lbnQsIGhlYWQuZmlyc3RDaGlsZCk7XHJcblx0XHR9IGVsc2UgaWYobGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpIHtcclxuXHRcdFx0aGVhZC5pbnNlcnRCZWZvcmUoc3R5bGVFbGVtZW50LCBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRoZWFkLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7XHJcblx0XHR9XHJcblx0XHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5wdXNoKHN0eWxlRWxlbWVudCk7XHJcblx0fSBlbHNlIGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcImJvdHRvbVwiKSB7XHJcblx0XHRoZWFkLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7XHJcblx0fSBlbHNlIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciAnaW5zZXJ0QXQnLiBNdXN0IGJlICd0b3AnIG9yICdib3R0b20nLlwiKTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpIHtcclxuXHRzdHlsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpO1xyXG5cdHZhciBpZHggPSBzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5pbmRleE9mKHN0eWxlRWxlbWVudCk7XHJcblx0aWYoaWR4ID49IDApIHtcclxuXHRcdHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLnNwbGljZShpZHgsIDEpO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcclxuXHR2YXIgc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xyXG5cdHN0eWxlRWxlbWVudC50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xyXG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBzdHlsZUVsZW1lbnQpO1xyXG5cdHJldHVybiBzdHlsZUVsZW1lbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUxpbmtFbGVtZW50KG9wdGlvbnMpIHtcclxuXHR2YXIgbGlua0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcclxuXHRsaW5rRWxlbWVudC5yZWwgPSBcInN0eWxlc2hlZXRcIjtcclxuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgbGlua0VsZW1lbnQpO1xyXG5cdHJldHVybiBsaW5rRWxlbWVudDtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XHJcblx0dmFyIHN0eWxlRWxlbWVudCwgdXBkYXRlLCByZW1vdmU7XHJcblxyXG5cdGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xyXG5cdFx0dmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XHJcblx0XHRzdHlsZUVsZW1lbnQgPSBzaW5nbGV0b25FbGVtZW50IHx8IChzaW5nbGV0b25FbGVtZW50ID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcclxuXHRcdHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIGZhbHNlKTtcclxuXHRcdHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIHRydWUpO1xyXG5cdH0gZWxzZSBpZihvYmouc291cmNlTWFwICYmXHJcblx0XHR0eXBlb2YgVVJMID09PSBcImZ1bmN0aW9uXCIgJiZcclxuXHRcdHR5cGVvZiBVUkwuY3JlYXRlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcclxuXHRcdHR5cGVvZiBVUkwucmV2b2tlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcclxuXHRcdHR5cGVvZiBCbG9iID09PSBcImZ1bmN0aW9uXCIgJiZcclxuXHRcdHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCIpIHtcclxuXHRcdHN0eWxlRWxlbWVudCA9IGNyZWF0ZUxpbmtFbGVtZW50KG9wdGlvbnMpO1xyXG5cdFx0dXBkYXRlID0gdXBkYXRlTGluay5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCk7XHJcblx0XHRyZW1vdmUgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCk7XHJcblx0XHRcdGlmKHN0eWxlRWxlbWVudC5ocmVmKVxyXG5cdFx0XHRcdFVSTC5yZXZva2VPYmplY3RVUkwoc3R5bGVFbGVtZW50LmhyZWYpO1xyXG5cdFx0fTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0c3R5bGVFbGVtZW50ID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpO1xyXG5cdFx0dXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCk7XHJcblx0XHRyZW1vdmUgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCk7XHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0dXBkYXRlKG9iaik7XHJcblxyXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZShuZXdPYmopIHtcclxuXHRcdGlmKG5ld09iaikge1xyXG5cdFx0XHRpZihuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR1cGRhdGUob2JqID0gbmV3T2JqKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cdH07XHJcbn1cclxuXHJcbnZhciByZXBsYWNlVGV4dCA9IChmdW5jdGlvbiAoKSB7XHJcblx0dmFyIHRleHRTdG9yZSA9IFtdO1xyXG5cclxuXHRyZXR1cm4gZnVuY3Rpb24gKGluZGV4LCByZXBsYWNlbWVudCkge1xyXG5cdFx0dGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xyXG5cdFx0cmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XHJcblx0fTtcclxufSkoKTtcclxuXHJcbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcoc3R5bGVFbGVtZW50LCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcclxuXHR2YXIgY3NzID0gcmVtb3ZlID8gXCJcIiA6IG9iai5jc3M7XHJcblxyXG5cdGlmIChzdHlsZUVsZW1lbnQuc3R5bGVTaGVldCkge1xyXG5cdFx0c3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHR2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XHJcblx0XHR2YXIgY2hpbGROb2RlcyA9IHN0eWxlRWxlbWVudC5jaGlsZE5vZGVzO1xyXG5cdFx0aWYgKGNoaWxkTm9kZXNbaW5kZXhdKSBzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xyXG5cdFx0aWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XHJcblx0XHRcdHN0eWxlRWxlbWVudC5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0c3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGNzc05vZGUpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZUVsZW1lbnQsIG9iaikge1xyXG5cdHZhciBjc3MgPSBvYmouY3NzO1xyXG5cdHZhciBtZWRpYSA9IG9iai5tZWRpYTtcclxuXHR2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcclxuXHJcblx0aWYobWVkaWEpIHtcclxuXHRcdHN0eWxlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtZWRpYVwiLCBtZWRpYSlcclxuXHR9XHJcblxyXG5cdGlmKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XHJcblx0XHRzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xyXG5cdH0gZWxzZSB7XHJcblx0XHR3aGlsZShzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCkge1xyXG5cdFx0XHRzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpO1xyXG5cdFx0fVxyXG5cdFx0c3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlTGluayhsaW5rRWxlbWVudCwgb2JqKSB7XHJcblx0dmFyIGNzcyA9IG9iai5jc3M7XHJcblx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xyXG5cdHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xyXG5cclxuXHRpZihzb3VyY2VNYXApIHtcclxuXHRcdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2NjAzODc1XHJcblx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XHJcblx0fVxyXG5cclxuXHR2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3NdLCB7IHR5cGU6IFwidGV4dC9jc3NcIiB9KTtcclxuXHJcblx0dmFyIG9sZFNyYyA9IGxpbmtFbGVtZW50LmhyZWY7XHJcblxyXG5cdGxpbmtFbGVtZW50LmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG5cclxuXHRpZihvbGRTcmMpXHJcblx0XHRVUkwucmV2b2tlT2JqZWN0VVJMKG9sZFNyYyk7XHJcbn1cclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1xuICoqIG1vZHVsZSBpZCA9IDUzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi9jc3MtbG9hZGVyL2luZGV4LmpzIS4vaW5kZXguY3NzXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uL3N0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9pbmRleC5jc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vY3NzLWxvYWRlci9pbmRleC5qcyEuL2luZGV4LmNzc1wiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmMtc3dpdGNoL2Fzc2V0cy9pbmRleC5jc3NcbiAqKiBtb2R1bGUgaWQgPSA1NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHsgdGhyb3cgbmV3IEVycm9yKFwiZGVmaW5lIGNhbm5vdCBiZSB1c2VkIGluZGlyZWN0XCIpOyB9O1xyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqICh3ZWJwYWNrKS9idWlsZGluL2FtZC1kZWZpbmUuanNcbiAqKiBtb2R1bGUgaWQgPSA1NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfYW1kX29wdGlvbnNfXztcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAod2VicGFjaykvYnVpbGRpbi9hbWQtb3B0aW9ucy5qc1xuICoqIG1vZHVsZSBpZCA9IDU2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9